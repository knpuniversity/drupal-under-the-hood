diff --git a/libraries/d3/d3.min.js b/libraries/d3/d3.min.js
new file mode 100644
index 0000000..1984d17
--- /dev/null
+++ b/libraries/d3/d3.min.js
@@ -0,0 +1,5 @@
+!function(){function n(n){return n&&(n.ownerDocument||n.document||n).documentElement}function t(n){return n&&(n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView)}function e(n,t){return t>n?-1:n>t?1:n>=t?0:0/0}function r(n){return null===n?0/0:+n}function u(n){return!isNaN(n)}function i(n){return{left:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)<0?r=i+1:u=i}return r},right:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)>0?u=i:r=i+1}return r}}}function o(n){return n.length}function a(n){for(var t=1;n*t%1;)t*=10;return t}function c(n,t){for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}function l(){this._=Object.create(null)}function s(n){return(n+="")===pa||n[0]===va?va+n:n}function f(n){return(n+="")[0]===va?n.slice(1):n}function h(n){return s(n)in this._}function g(n){return(n=s(n))in this._&&delete this._[n]}function p(){var n=[];for(var t in this._)n.push(f(t));return n}function v(){var n=0;for(var t in this._)++n;return n}function d(){for(var n in this._)return!1;return!0}function m(){this._=Object.create(null)}function y(n){return n}function M(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function x(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e=0,r=da.length;r>e;++e){var u=da[e]+t;if(u in n)return u}}function b(){}function _(){}function w(n){function t(){for(var t,r=e,u=-1,i=r.length;++u<i;)(t=r[u].on)&&t.apply(this,arguments);return n}var e=[],r=new l;return t.on=function(t,u){var i,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,i=e.indexOf(o)).concat(e.slice(i+1)),r.remove(t)),u&&e.push(r.set(t,{on:u})),n)},t}function S(){ta.event.preventDefault()}function k(){for(var n,t=ta.event;n=t.sourceEvent;)t=n;return t}function E(n){for(var t=new _,e=0,r=arguments.length;++e<r;)t[arguments[e]]=w(t);return t.of=function(e,r){return function(u){try{var i=u.sourceEvent=ta.event;u.target=n,ta.event=u,t[u.type].apply(e,r)}finally{ta.event=i}}},t}function A(n){return ya(n,_a),n}function N(n){return"function"==typeof n?n:function(){return Ma(n,this)}}function C(n){return"function"==typeof n?n:function(){return xa(n,this)}}function z(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function u(){this.setAttribute(n,t)}function i(){this.setAttributeNS(n.space,n.local,t)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=ta.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?a:o:n.local?i:u}function q(n){return n.trim().replace(/\s+/g," ")}function L(n){return new RegExp("(?:^|\\s+)"+ta.requote(n)+"(?:\\s+|$)","g")}function T(n){return(n+"").trim().split(/^|\s+/)}function R(n,t){function e(){for(var e=-1;++e<u;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<u;)n[e](this,r)}n=T(n).map(D);var u=n.length;return"function"==typeof t?r:e}function D(n){var t=L(n);return function(e,r){if(u=e.classList)return r?u.add(n):u.remove(n);var u=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(u)||e.setAttribute("class",q(u+" "+n))):e.setAttribute("class",q(u.replace(t," ")))}}function P(n,t,e){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,e)}function i(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?i:u}function U(n,t){function e(){delete this[n]}function r(){this[n]=t}function u(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?u:r}function j(n){function t(){var t=this.ownerDocument,e=this.namespaceURI;return e?t.createElementNS(e,n):t.createElement(n)}function e(){return this.ownerDocument.createElementNS(n.space,n.local)}return"function"==typeof n?n:(n=ta.ns.qualify(n)).local?e:t}function F(){var n=this.parentNode;n&&n.removeChild(this)}function H(n){return{__data__:n}}function O(n){return function(){return ba(this,n)}}function I(n){return arguments.length||(n=e),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}function Y(n,t){for(var e=0,r=n.length;r>e;e++)for(var u,i=n[e],o=0,a=i.length;a>o;o++)(u=i[o])&&t(u,o,e);return n}function Z(n){return ya(n,Sa),n}function V(n){var t,e;return function(r,u,i){var o,a=n[i].update,c=a.length;for(i!=e&&(e=i,t=0),u>=t&&(t=u+1);!(o=a[t])&&++t<c;);return o}}function X(n,t,e){function r(){var t=this[o];t&&(this.removeEventListener(n,t,t.$),delete this[o])}function u(){var u=c(t,ra(arguments));r.call(this),this.addEventListener(n,this[o]=u,u.$=e),u._=t}function i(){var t,e=new RegExp("^__on([^.]+)"+ta.requote(n)+"$");for(var r in this)if(t=r.match(e)){var u=this[r];this.removeEventListener(t[1],u,u.$),delete this[r]}}var o="__on"+n,a=n.indexOf("."),c=$;a>0&&(n=n.slice(0,a));var l=ka.get(n);return l&&(n=l,c=B),a?t?u:r:t?b:i}function $(n,t){return function(e){var r=ta.event;ta.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{ta.event=r}}}function B(n,t){var e=$(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function W(e){var r=".dragsuppress-"+ ++Aa,u="click"+r,i=ta.select(t(e)).on("touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==Ea&&(Ea="onselectstart"in e?!1:x(e.style,"userSelect")),Ea){var o=n(e).style,a=o[Ea];o[Ea]="none"}return function(n){if(i.on(r,null),Ea&&(o[Ea]=a),n){var t=function(){i.on(u,null)};i.on(u,function(){S(),t()},!0),setTimeout(t,0)}}}function J(n,e){e.changedTouches&&(e=e.changedTouches[0]);var r=n.ownerSVGElement||n;if(r.createSVGPoint){var u=r.createSVGPoint();if(0>Na){var i=t(n);if(i.scrollX||i.scrollY){r=ta.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Na=!(o.f||o.e),r.remove()}}return Na?(u.x=e.pageX,u.y=e.pageY):(u.x=e.clientX,u.y=e.clientY),u=u.matrixTransform(n.getScreenCTM().inverse()),[u.x,u.y]}var a=n.getBoundingClientRect();return[e.clientX-a.left-n.clientLeft,e.clientY-a.top-n.clientTop]}function G(){return ta.event.changedTouches[0].identifier}function K(n){return n>0?1:0>n?-1:0}function Q(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function nt(n){return n>1?0:-1>n?qa:Math.acos(n)}function tt(n){return n>1?Ra:-1>n?-Ra:Math.asin(n)}function et(n){return((n=Math.exp(n))-1/n)/2}function rt(n){return((n=Math.exp(n))+1/n)/2}function ut(n){return((n=Math.exp(2*n))-1)/(n+1)}function it(n){return(n=Math.sin(n/2))*n}function ot(){}function at(n,t,e){return this instanceof at?(this.h=+n,this.s=+t,void(this.l=+e)):arguments.length<2?n instanceof at?new at(n.h,n.s,n.l):bt(""+n,_t,at):new at(n,t,e)}function ct(n,t,e){function r(n){return n>360?n-=360:0>n&&(n+=360),60>n?i+(o-i)*n/60:180>n?o:240>n?i+(o-i)*(240-n)/60:i}function u(n){return Math.round(255*r(n))}var i,o;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,e=0>e?0:e>1?1:e,o=.5>=e?e*(1+t):e+t-e*t,i=2*e-o,new mt(u(n+120),u(n),u(n-120))}function lt(n,t,e){return this instanceof lt?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof lt?new lt(n.h,n.c,n.l):n instanceof ft?gt(n.l,n.a,n.b):gt((n=wt((n=ta.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new lt(n,t,e)}function st(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new ft(e,Math.cos(n*=Da)*t,Math.sin(n)*t)}function ft(n,t,e){return this instanceof ft?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof ft?new ft(n.l,n.a,n.b):n instanceof lt?st(n.h,n.c,n.l):wt((n=mt(n)).r,n.g,n.b):new ft(n,t,e)}function ht(n,t,e){var r=(n+16)/116,u=r+t/500,i=r-e/200;return u=pt(u)*Xa,r=pt(r)*$a,i=pt(i)*Ba,new mt(dt(3.2404542*u-1.5371385*r-.4985314*i),dt(-.969266*u+1.8760108*r+.041556*i),dt(.0556434*u-.2040259*r+1.0572252*i))}function gt(n,t,e){return n>0?new lt(Math.atan2(e,t)*Pa,Math.sqrt(t*t+e*e),n):new lt(0/0,0/0,n)}function pt(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function vt(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function dt(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function mt(n,t,e){return this instanceof mt?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof mt?new mt(n.r,n.g,n.b):bt(""+n,mt,ct):new mt(n,t,e)}function yt(n){return new mt(n>>16,n>>8&255,255&n)}function Mt(n){return yt(n)+""}function xt(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function bt(n,t,e){var r,u,i,o=0,a=0,c=0;if(r=/([a-z]+)\((.*)\)/.exec(n=n.toLowerCase()))switch(u=r[2].split(","),r[1]){case"hsl":return e(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(kt(u[0]),kt(u[1]),kt(u[2]))}return(i=Ga.get(n))?t(i.r,i.g,i.b):(null==n||"#"!==n.charAt(0)||isNaN(i=parseInt(n.slice(1),16))||(4===n.length?(o=(3840&i)>>4,o=o>>4|o,a=240&i,a=a>>4|a,c=15&i,c=c<<4|c):7===n.length&&(o=(16711680&i)>>16,a=(65280&i)>>8,c=255&i)),t(o,a,c))}function _t(n,t,e){var r,u,i=Math.min(n/=255,t/=255,e/=255),o=Math.max(n,t,e),a=o-i,c=(o+i)/2;return a?(u=.5>c?a/(o+i):a/(2-o-i),r=n==o?(t-e)/a+(e>t?6:0):t==o?(e-n)/a+2:(n-t)/a+4,r*=60):(r=0/0,u=c>0&&1>c?0:r),new at(r,u,c)}function wt(n,t,e){n=St(n),t=St(t),e=St(e);var r=vt((.4124564*n+.3575761*t+.1804375*e)/Xa),u=vt((.2126729*n+.7151522*t+.072175*e)/$a),i=vt((.0193339*n+.119192*t+.9503041*e)/Ba);return ft(116*u-16,500*(r-u),200*(u-i))}function St(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function kt(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function Et(n){return"function"==typeof n?n:function(){return n}}function At(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Nt(t,e,n,r)}}function Nt(n,t,e,r){function u(){var n,t=c.status;if(!t&&zt(c)||t>=200&&300>t||304===t){try{n=e.call(i,c)}catch(r){return void o.error.call(i,r)}o.load.call(i,n)}else o.error.call(i,c)}var i={},o=ta.dispatch("beforesend","progress","load","error"),a={},c=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(n)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=u:c.onreadystatechange=function(){c.readyState>3&&u()},c.onprogress=function(n){var t=ta.event;ta.event=n;try{o.progress.call(i,c)}finally{ta.event=t}},i.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?a[n]:(null==t?delete a[n]:a[n]=t+"",i)},i.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",i):t},i.responseType=function(n){return arguments.length?(l=n,i):l},i.response=function(n){return e=n,i},["get","post"].forEach(function(n){i[n]=function(){return i.send.apply(i,[n].concat(ra(arguments)))}}),i.send=function(e,r,u){if(2===arguments.length&&"function"==typeof r&&(u=r,r=null),c.open(e,n,!0),null==t||"accept"in a||(a.accept=t+",*/*"),c.setRequestHeader)for(var s in a)c.setRequestHeader(s,a[s]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=l&&(c.responseType=l),null!=u&&i.on("error",u).on("load",function(n){u(null,n)}),o.beforesend.call(i,c),c.send(null==r?null:r),i},i.abort=function(){return c.abort(),i},ta.rebind(i,o,"on"),null==r?i:i.get(Ct(r))}function Ct(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function zt(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function qt(){var n=Lt(),t=Tt()-n;t>24?(isFinite(t)&&(clearTimeout(tc),tc=setTimeout(qt,t)),nc=0):(nc=1,rc(qt))}function Lt(){var n=Date.now();for(ec=Ka;ec;)n>=ec.t&&(ec.f=ec.c(n-ec.t)),ec=ec.n;return n}function Tt(){for(var n,t=Ka,e=1/0;t;)t.f?t=n?n.n=t.n:Ka=t.n:(t.t<e&&(e=t.t),t=(n=t).n);return Qa=n,e}function Rt(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Dt(n,t){var e=Math.pow(10,3*ga(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function Pt(n){var t=n.decimal,e=n.thousands,r=n.grouping,u=n.currency,i=r&&e?function(n,t){for(var u=n.length,i=[],o=0,a=r[0],c=0;u>0&&a>0&&(c+a+1>t&&(a=Math.max(1,t-c)),i.push(n.substring(u-=a,u+a)),!((c+=a+1)>t));)a=r[o=(o+1)%r.length];return i.reverse().join(e)}:y;return function(n){var e=ic.exec(n),r=e[1]||" ",o=e[2]||">",a=e[3]||"-",c=e[4]||"",l=e[5],s=+e[6],f=e[7],h=e[8],g=e[9],p=1,v="",d="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(l||"0"===r&&"="===o)&&(l=r="0",o="="),g){case"n":f=!0,g="g";break;case"%":p=100,d="%",g="f";break;case"p":p=100,d="%",g="r";break;case"b":case"o":case"x":case"X":"#"===c&&(v="0"+g.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":p=-1,g="r"}"$"===c&&(v=u[0],d=u[1]),"r"!=g||h||(g="g"),null!=h&&("g"==g?h=Math.max(1,Math.min(21,h)):("e"==g||"f"==g)&&(h=Math.max(0,Math.min(20,h)))),g=oc.get(g)||Ut;var M=l&&f;return function(n){var e=d;if(m&&n%1)return"";var u=0>n||0===n&&0>1/n?(n=-n,"-"):"-"===a?"":a;if(0>p){var c=ta.formatPrefix(n,h);n=c.scale(n),e=c.symbol+d}else n*=p;n=g(n,h);var x,b,_=n.lastIndexOf(".");if(0>_){var w=y?n.lastIndexOf("e"):-1;0>w?(x=n,b=""):(x=n.substring(0,w),b=n.substring(w))}else x=n.substring(0,_),b=t+n.substring(_+1);!l&&f&&(x=i(x,1/0));var S=v.length+x.length+b.length+(M?0:u.length),k=s>S?new Array(S=s-S+1).join(r):"";return M&&(x=i(k+x,k.length?s-b.length:1/0)),u+=v,n=x+b,("<"===o?u+n+k:">"===o?k+u+n:"^"===o?k.substring(0,S>>=1)+u+n+k.substring(S):u+(M?n:k+n))+e}}}function Ut(n){return n+""}function jt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ft(n,t,e){function r(t){var e=n(t),r=i(e,1);return r-t>t-e?e:r}function u(e){return t(e=n(new cc(e-1)),1),e}function i(n,e){return t(n=new cc(+n),e),n}function o(n,r,i){var o=u(n),a=[];if(i>1)for(;r>o;)e(o)%i||a.push(new Date(+o)),t(o,1);else for(;r>o;)a.push(new Date(+o)),t(o,1);return a}function a(n,t,e){try{cc=jt;var r=new jt;return r._=n,o(r,t,e)}finally{cc=Date}}n.floor=n,n.round=r,n.ceil=u,n.offset=i,n.range=o;var c=n.utc=Ht(n);return c.floor=c,c.round=Ht(r),c.ceil=Ht(u),c.offset=Ht(i),c.range=a,n}function Ht(n){return function(t,e){try{cc=jt;var r=new jt;return r._=t,n(r,e)._}finally{cc=Date}}}function Ot(n){function t(n){function t(t){for(var e,u,i,o=[],a=-1,c=0;++a<r;)37===n.charCodeAt(a)&&(o.push(n.slice(c,a)),null!=(u=sc[e=n.charAt(++a)])&&(e=n.charAt(++a)),(i=N[e])&&(e=i(t,null==u?"e"===e?" ":"0":u)),o.push(e),c=a+1);return o.push(n.slice(c,a)),o.join("")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},u=e(r,n,t,0);if(u!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&cc!==jt,o=new(i?jt:cc);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?o._:o},t.toString=function(){return n},t}function e(n,t,e,r){for(var u,i,o,a=0,c=t.length,l=e.length;c>a;){if(r>=l)return-1;if(u=t.charCodeAt(a++),37===u){if(o=t.charAt(a++),i=C[o in sc?t.charAt(a++):o],!i||(r=i(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}function r(n,t,e){_.lastIndex=0;var r=_.exec(t.slice(e));return r?(n.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function u(n,t,e){x.lastIndex=0;var r=x.exec(t.slice(e));return r?(n.w=b.get(r[0].toLowerCase()),e+r[0].length):-1}function i(n,t,e){E.lastIndex=0;var r=E.exec(t.slice(e));return r?(n.m=A.get(r[0].toLowerCase()),e+r[0].length):-1}function o(n,t,e){S.lastIndex=0;var r=S.exec(t.slice(e));return r?(n.m=k.get(r[0].toLowerCase()),e+r[0].length):-1}function a(n,t,r){return e(n,N.c.toString(),t,r)}function c(n,t,r){return e(n,N.x.toString(),t,r)}function l(n,t,r){return e(n,N.X.toString(),t,r)}function s(n,t,e){var r=M.get(t.slice(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}var f=n.dateTime,h=n.date,g=n.time,p=n.periods,v=n.days,d=n.shortDays,m=n.months,y=n.shortMonths;t.utc=function(n){function e(n){try{cc=jt;var t=new cc;return t._=n,r(t)}finally{cc=Date}}var r=t(n);return e.parse=function(n){try{cc=jt;var t=r.parse(n);return t&&t._}finally{cc=Date}},e.toString=r.toString,e},t.multi=t.utc.multi=ae;var M=ta.map(),x=Yt(v),b=Zt(v),_=Yt(d),w=Zt(d),S=Yt(m),k=Zt(m),E=Yt(y),A=Zt(y);p.forEach(function(n,t){M.set(n.toLowerCase(),t)});var N={a:function(n){return d[n.getDay()]},A:function(n){return v[n.getDay()]},b:function(n){return y[n.getMonth()]},B:function(n){return m[n.getMonth()]},c:t(f),d:function(n,t){return It(n.getDate(),t,2)},e:function(n,t){return It(n.getDate(),t,2)},H:function(n,t){return It(n.getHours(),t,2)},I:function(n,t){return It(n.getHours()%12||12,t,2)},j:function(n,t){return It(1+ac.dayOfYear(n),t,3)},L:function(n,t){return It(n.getMilliseconds(),t,3)},m:function(n,t){return It(n.getMonth()+1,t,2)},M:function(n,t){return It(n.getMinutes(),t,2)},p:function(n){return p[+(n.getHours()>=12)]},S:function(n,t){return It(n.getSeconds(),t,2)},U:function(n,t){return It(ac.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return It(ac.mondayOfYear(n),t,2)},x:t(h),X:t(g),y:function(n,t){return It(n.getFullYear()%100,t,2)},Y:function(n,t){return It(n.getFullYear()%1e4,t,4)},Z:ie,"%":function(){return"%"}},C={a:r,A:u,b:i,B:o,c:a,d:Qt,e:Qt,H:te,I:te,j:ne,L:ue,m:Kt,M:ee,p:s,S:re,U:Xt,w:Vt,W:$t,x:c,X:l,y:Wt,Y:Bt,Z:Jt,"%":oe};return t}function It(n,t,e){var r=0>n?"-":"",u=(r?-n:n)+"",i=u.length;return r+(e>i?new Array(e-i+1).join(t)+u:u)}function Yt(n){return new RegExp("^(?:"+n.map(ta.requote).join("|")+")","i")}function Zt(n){for(var t=new l,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function Vt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Xt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function $t(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function Bt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Wt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.y=Gt(+r[0]),e+r[0].length):-1}function Jt(n,t,e){return/^[+-]\d{4}$/.test(t=t.slice(e,e+5))?(n.Z=-t,e+5):-1}function Gt(n){return n+(n>68?1900:2e3)}function Kt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function Qt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function ne(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function te(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function ee(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function re(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function ue(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function ie(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=ga(t)/60|0,u=ga(t)%60;return e+It(r,"0",2)+It(u,"0",2)}function oe(n,t,e){hc.lastIndex=0;var r=hc.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function ae(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function ce(){}function le(n,t,e){var r=e.s=n+t,u=r-n,i=r-u;e.t=n-i+(t-u)}function se(n,t){n&&dc.hasOwnProperty(n.type)&&dc[n.type](n,t)}function fe(n,t,e){var r,u=-1,i=n.length-e;for(t.lineStart();++u<i;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function he(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)fe(n[e],t,1);t.polygonEnd()}function ge(){function n(n,t){n*=Da,t=t*Da/2+qa/4;var e=n-r,o=e>=0?1:-1,a=o*e,c=Math.cos(t),l=Math.sin(t),s=i*l,f=u*c+s*Math.cos(a),h=s*o*Math.sin(a);yc.add(Math.atan2(h,f)),r=n,u=c,i=l}var t,e,r,u,i;Mc.point=function(o,a){Mc.point=n,r=(t=o)*Da,u=Math.cos(a=(e=a)*Da/2+qa/4),i=Math.sin(a)},Mc.lineEnd=function(){n(t,e)}}function pe(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function ve(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function de(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function me(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function ye(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Me(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function xe(n){return[Math.atan2(n[1],n[0]),tt(n[2])]}function be(n,t){return ga(n[0]-t[0])<Ca&&ga(n[1]-t[1])<Ca}function _e(n,t){n*=Da;var e=Math.cos(t*=Da);we(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function we(n,t,e){++xc,_c+=(n-_c)/xc,wc+=(t-wc)/xc,Sc+=(e-Sc)/xc}function Se(){function n(n,u){n*=Da;var i=Math.cos(u*=Da),o=i*Math.cos(n),a=i*Math.sin(n),c=Math.sin(u),l=Math.atan2(Math.sqrt((l=e*c-r*a)*l+(l=r*o-t*c)*l+(l=t*a-e*o)*l),t*o+e*a+r*c);bc+=l,kc+=l*(t+(t=o)),Ec+=l*(e+(e=a)),Ac+=l*(r+(r=c)),we(t,e,r)}var t,e,r;qc.point=function(u,i){u*=Da;var o=Math.cos(i*=Da);t=o*Math.cos(u),e=o*Math.sin(u),r=Math.sin(i),qc.point=n,we(t,e,r)}}function ke(){qc.point=_e}function Ee(){function n(n,t){n*=Da;var e=Math.cos(t*=Da),o=e*Math.cos(n),a=e*Math.sin(n),c=Math.sin(t),l=u*c-i*a,s=i*o-r*c,f=r*a-u*o,h=Math.sqrt(l*l+s*s+f*f),g=r*o+u*a+i*c,p=h&&-nt(g)/h,v=Math.atan2(h,g);Nc+=p*l,Cc+=p*s,zc+=p*f,bc+=v,kc+=v*(r+(r=o)),Ec+=v*(u+(u=a)),Ac+=v*(i+(i=c)),we(r,u,i)}var t,e,r,u,i;qc.point=function(o,a){t=o,e=a,qc.point=n,o*=Da;var c=Math.cos(a*=Da);r=c*Math.cos(o),u=c*Math.sin(o),i=Math.sin(a),we(r,u,i)},qc.lineEnd=function(){n(t,e),qc.lineEnd=ke,qc.point=_e}}function Ae(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function Ne(){return!0}function Ce(n,t,e,r,u){var i=[],o=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(be(e,r)){u.lineStart();for(var a=0;t>a;++a)u.point((e=n[a])[0],e[1]);return void u.lineEnd()}var c=new qe(e,n,null,!0),l=new qe(e,null,c,!1);c.o=l,i.push(c),o.push(l),c=new qe(r,n,null,!1),l=new qe(r,null,c,!0),c.o=l,i.push(c),o.push(l)}}),o.sort(t),ze(i),ze(o),i.length){for(var a=0,c=e,l=o.length;l>a;++a)o[a].e=c=!c;for(var s,f,h=i[0];;){for(var g=h,p=!0;g.v;)if((g=g.n)===h)return;s=g.z,u.lineStart();do{if(g.v=g.o.v=!0,g.e){if(p)for(var a=0,l=s.length;l>a;++a)u.point((f=s[a])[0],f[1]);else r(g.x,g.n.x,1,u);g=g.n}else{if(p){s=g.p.z;for(var a=s.length-1;a>=0;--a)u.point((f=s[a])[0],f[1])}else r(g.x,g.p.x,-1,u);g=g.p}g=g.o,s=g.z,p=!p}while(!g.v);u.lineEnd()}}}function ze(n){if(t=n.length){for(var t,e,r=0,u=n[0];++r<t;)u.n=e=n[r],e.p=u,u=e;u.n=e=n[0],e.p=u}}function qe(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Le(n,t,e,r){return function(u,i){function o(t,e){var r=u(t,e);n(t=r[0],e=r[1])&&i.point(t,e)}function a(n,t){var e=u(n,t);d.point(e[0],e[1])}function c(){y.point=a,d.lineStart()}function l(){y.point=o,d.lineEnd()}function s(n,t){v.push([n,t]);var e=u(n,t);x.point(e[0],e[1])}function f(){x.lineStart(),v=[]}function h(){s(v[0][0],v[0][1]),x.lineEnd();var n,t=x.clean(),e=M.buffer(),r=e.length;if(v.pop(),p.push(v),v=null,r)if(1&t){n=e[0];var u,r=n.length-1,o=-1;if(r>0){for(b||(i.polygonStart(),b=!0),i.lineStart();++o<r;)i.point((u=n[o])[0],u[1]);i.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),g.push(e.filter(Te))}var g,p,v,d=t(i),m=u.invert(r[0],r[1]),y={point:o,lineStart:c,lineEnd:l,polygonStart:function(){y.point=s,y.lineStart=f,y.lineEnd=h,g=[],p=[]},polygonEnd:function(){y.point=o,y.lineStart=c,y.lineEnd=l,g=ta.merge(g);var n=Fe(m,p);g.length?(b||(i.polygonStart(),b=!0),Ce(g,De,n,e,i)):n&&(b||(i.polygonStart(),b=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),b&&(i.polygonEnd(),b=!1),g=p=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},M=Re(),x=t(M),b=!1;return y}}function Te(n){return n.length>1}function Re(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:b,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function De(n,t){return((n=n.x)[0]<0?n[1]-Ra-Ca:Ra-n[1])-((t=t.x)[0]<0?t[1]-Ra-Ca:Ra-t[1])}function Pe(n){var t,e=0/0,r=0/0,u=0/0;return{lineStart:function(){n.lineStart(),t=1},point:function(i,o){var a=i>0?qa:-qa,c=ga(i-e);ga(c-qa)<Ca?(n.point(e,r=(r+o)/2>0?Ra:-Ra),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(i,r),t=0):u!==a&&c>=qa&&(ga(e-u)<Ca&&(e-=u*Ca),ga(i-a)<Ca&&(i-=a*Ca),r=Ue(e,r,i,o),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=i,r=o),u=a},lineEnd:function(){n.lineEnd(),e=r=0/0},clean:function(){return 2-t}}}function Ue(n,t,e,r){var u,i,o=Math.sin(n-e);return ga(o)>Ca?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(u=Math.cos(t))*Math.sin(n))/(u*i*o)):(t+r)/2}function je(n,t,e,r){var u;if(null==n)u=e*Ra,r.point(-qa,u),r.point(0,u),r.point(qa,u),r.point(qa,0),r.point(qa,-u),r.point(0,-u),r.point(-qa,-u),r.point(-qa,0),r.point(-qa,u);else if(ga(n[0]-t[0])>Ca){var i=n[0]<t[0]?qa:-qa;u=e*i/2,r.point(-i,u),r.point(0,u),r.point(i,u)}else r.point(t[0],t[1])}function Fe(n,t){var e=n[0],r=n[1],u=[Math.sin(e),-Math.cos(e),0],i=0,o=0;yc.reset();for(var a=0,c=t.length;c>a;++a){var l=t[a],s=l.length;if(s)for(var f=l[0],h=f[0],g=f[1]/2+qa/4,p=Math.sin(g),v=Math.cos(g),d=1;;){d===s&&(d=0),n=l[d];var m=n[0],y=n[1]/2+qa/4,M=Math.sin(y),x=Math.cos(y),b=m-h,_=b>=0?1:-1,w=_*b,S=w>qa,k=p*M;if(yc.add(Math.atan2(k*_*Math.sin(w),v*x+k*Math.cos(w))),i+=S?b+_*La:b,S^h>=e^m>=e){var E=de(pe(f),pe(n));Me(E);var A=de(u,E);Me(A);var N=(S^b>=0?-1:1)*tt(A[2]);(r>N||r===N&&(E[0]||E[1]))&&(o+=S^b>=0?1:-1)}if(!d++)break;h=m,p=M,v=x,f=n}}return(-Ca>i||Ca>i&&0>yc)^1&o}function He(n){function t(n,t){return Math.cos(n)*Math.cos(t)>i}function e(n){var e,i,c,l,s;return{lineStart:function(){l=c=!1,s=1},point:function(f,h){var g,p=[f,h],v=t(f,h),d=o?v?0:u(f,h):v?u(f+(0>f?qa:-qa),h):0;if(!e&&(l=c=v)&&n.lineStart(),v!==c&&(g=r(e,p),(be(e,g)||be(p,g))&&(p[0]+=Ca,p[1]+=Ca,v=t(p[0],p[1]))),v!==c)s=0,v?(n.lineStart(),g=r(p,e),n.point(g[0],g[1])):(g=r(e,p),n.point(g[0],g[1]),n.lineEnd()),e=g;else if(a&&e&&o^v){var m;d&i||!(m=r(p,e,!0))||(s=0,o?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1])))}!v||e&&be(e,p)||n.point(p[0],p[1]),e=p,c=v,i=d},lineEnd:function(){c&&n.lineEnd(),e=null},clean:function(){return s|(l&&c)<<1}}}function r(n,t,e){var r=pe(n),u=pe(t),o=[1,0,0],a=de(r,u),c=ve(a,a),l=a[0],s=c-l*l;if(!s)return!e&&n;var f=i*c/s,h=-i*l/s,g=de(o,a),p=ye(o,f),v=ye(a,h);me(p,v);var d=g,m=ve(p,d),y=ve(d,d),M=m*m-y*(ve(p,p)-1);if(!(0>M)){var x=Math.sqrt(M),b=ye(d,(-m-x)/y);if(me(b,p),b=xe(b),!e)return b;var _,w=n[0],S=t[0],k=n[1],E=t[1];w>S&&(_=w,w=S,S=_);var A=S-w,N=ga(A-qa)<Ca,C=N||Ca>A;if(!N&&k>E&&(_=k,k=E,E=_),C?N?k+E>0^b[1]<(ga(b[0]-w)<Ca?k:E):k<=b[1]&&b[1]<=E:A>qa^(w<=b[0]&&b[0]<=S)){var z=ye(d,(-m+x)/y);return me(z,p),[b,xe(z)]}}}function u(t,e){var r=o?n:qa-n,u=0;return-r>t?u|=1:t>r&&(u|=2),-r>e?u|=4:e>r&&(u|=8),u}var i=Math.cos(n),o=i>0,a=ga(i)>Ca,c=gr(n,6*Da);return Le(t,e,c,o?[0,-n]:[-qa,n-qa])}function Oe(n,t,e,r){return function(u){var i,o=u.a,a=u.b,c=o.x,l=o.y,s=a.x,f=a.y,h=0,g=1,p=s-c,v=f-l;if(i=n-c,p||!(i>0)){if(i/=p,0>p){if(h>i)return;g>i&&(g=i)}else if(p>0){if(i>g)return;i>h&&(h=i)}if(i=e-c,p||!(0>i)){if(i/=p,0>p){if(i>g)return;i>h&&(h=i)}else if(p>0){if(h>i)return;g>i&&(g=i)}if(i=t-l,v||!(i>0)){if(i/=v,0>v){if(h>i)return;g>i&&(g=i)}else if(v>0){if(i>g)return;i>h&&(h=i)}if(i=r-l,v||!(0>i)){if(i/=v,0>v){if(i>g)return;i>h&&(h=i)}else if(v>0){if(h>i)return;g>i&&(g=i)}return h>0&&(u.a={x:c+h*p,y:l+h*v}),1>g&&(u.b={x:c+g*p,y:l+g*v}),u}}}}}}function Ie(n,t,e,r){function u(r,u){return ga(r[0]-n)<Ca?u>0?0:3:ga(r[0]-e)<Ca?u>0?2:1:ga(r[1]-t)<Ca?u>0?1:0:u>0?3:2}function i(n,t){return o(n.x,t.x)}function o(n,t){var e=u(n,1),r=u(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function c(n){for(var t=0,e=d.length,r=n[1],u=0;e>u;++u)for(var i,o=1,a=d[u],c=a.length,l=a[0];c>o;++o)i=a[o],l[1]<=r?i[1]>r&&Q(l,i,n)>0&&++t:i[1]<=r&&Q(l,i,n)<0&&--t,l=i;return 0!==t}function l(i,a,c,l){var s=0,f=0;if(null==i||(s=u(i,c))!==(f=u(a,c))||o(i,a)<0^c>0){do l.point(0===s||3===s?n:e,s>1?r:t);while((s=(s+c+4)%4)!==f)}else l.point(a[0],a[1])}function s(u,i){return u>=n&&e>=u&&i>=t&&r>=i}function f(n,t){s(n,t)&&a.point(n,t)}function h(){C.point=p,d&&d.push(m=[]),S=!0,w=!1,b=_=0/0}function g(){v&&(p(y,M),x&&w&&A.rejoin(),v.push(A.buffer())),C.point=f,w&&a.lineEnd()}function p(n,t){n=Math.max(-Tc,Math.min(Tc,n)),t=Math.max(-Tc,Math.min(Tc,t));var e=s(n,t);if(d&&m.push([n,t]),S)y=n,M=t,x=e,S=!1,e&&(a.lineStart(),a.point(n,t));else if(e&&w)a.point(n,t);else{var r={a:{x:b,y:_},b:{x:n,y:t}};N(r)?(w||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),e||a.lineEnd(),k=!1):e&&(a.lineStart(),a.point(n,t),k=!1)}b=n,_=t,w=e}var v,d,m,y,M,x,b,_,w,S,k,E=a,A=Re(),N=Oe(n,t,e,r),C={point:f,lineStart:h,lineEnd:g,polygonStart:function(){a=A,v=[],d=[],k=!0},polygonEnd:function(){a=E,v=ta.merge(v);var t=c([n,r]),e=k&&t,u=v.length;(e||u)&&(a.polygonStart(),e&&(a.lineStart(),l(null,null,1,a),a.lineEnd()),u&&Ce(v,i,t,l,a),a.polygonEnd()),v=d=m=null}};return C}}function Ye(n){var t=0,e=qa/3,r=ir(n),u=r(t,e);return u.parallels=function(n){return arguments.length?r(t=n[0]*qa/180,e=n[1]*qa/180):[t/qa*180,e/qa*180]},u}function Ze(n,t){function e(n,t){var e=Math.sqrt(i-2*u*Math.sin(t))/u;return[e*Math.sin(n*=u),o-e*Math.cos(n)]}var r=Math.sin(n),u=(r+Math.sin(t))/2,i=1+r*(2*u-r),o=Math.sqrt(i)/u;return e.invert=function(n,t){var e=o-t;return[Math.atan2(n,e)/u,tt((i-(n*n+e*e)*u*u)/(2*u))]},e}function Ve(){function n(n,t){Dc+=u*n-r*t,r=n,u=t}var t,e,r,u;Hc.point=function(i,o){Hc.point=n,t=r=i,e=u=o},Hc.lineEnd=function(){n(t,e)}}function Xe(n,t){Pc>n&&(Pc=n),n>jc&&(jc=n),Uc>t&&(Uc=t),t>Fc&&(Fc=t)}function $e(){function n(n,t){o.push("M",n,",",t,i)}function t(n,t){o.push("M",n,",",t),a.point=e}function e(n,t){o.push("L",n,",",t)}function r(){a.point=n}function u(){o.push("Z")}var i=Be(4.5),o=[],a={point:n,lineStart:function(){a.point=t},lineEnd:r,polygonStart:function(){a.lineEnd=u},polygonEnd:function(){a.lineEnd=r,a.point=n},pointRadius:function(n){return i=Be(n),a},result:function(){if(o.length){var n=o.join("");return o=[],n}}};return a}function Be(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function We(n,t){_c+=n,wc+=t,++Sc}function Je(){function n(n,r){var u=n-t,i=r-e,o=Math.sqrt(u*u+i*i);kc+=o*(t+n)/2,Ec+=o*(e+r)/2,Ac+=o,We(t=n,e=r)}var t,e;Ic.point=function(r,u){Ic.point=n,We(t=r,e=u)}}function Ge(){Ic.point=We}function Ke(){function n(n,t){var e=n-r,i=t-u,o=Math.sqrt(e*e+i*i);kc+=o*(r+n)/2,Ec+=o*(u+t)/2,Ac+=o,o=u*n-r*t,Nc+=o*(r+n),Cc+=o*(u+t),zc+=3*o,We(r=n,u=t)}var t,e,r,u;Ic.point=function(i,o){Ic.point=n,We(t=r=i,e=u=o)},Ic.lineEnd=function(){n(t,e)}}function Qe(n){function t(t,e){n.moveTo(t+o,e),n.arc(t,e,o,0,La)}function e(t,e){n.moveTo(t,e),a.point=r}function r(t,e){n.lineTo(t,e)}function u(){a.point=t}function i(){n.closePath()}var o=4.5,a={point:t,lineStart:function(){a.point=e},lineEnd:u,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=u,a.point=t},pointRadius:function(n){return o=n,a},result:b};return a}function nr(n){function t(n){return(a?r:e)(n)}function e(t){return rr(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){M=0/0,S.point=i,t.lineStart()}function i(e,r){var i=pe([e,r]),o=n(e,r);u(M,x,y,b,_,w,M=o[0],x=o[1],y=e,b=i[0],_=i[1],w=i[2],a,t),t.point(M,x)}function o(){S.point=e,t.lineEnd()}function c(){r(),S.point=l,S.lineEnd=s}function l(n,t){i(f=n,h=t),g=M,p=x,v=b,d=_,m=w,S.point=i}function s(){u(M,x,y,b,_,w,g,p,f,v,d,m,a,t),S.lineEnd=o,o()}var f,h,g,p,v,d,m,y,M,x,b,_,w,S={point:e,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),S.lineStart=c
+},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function u(t,e,r,a,c,l,s,f,h,g,p,v,d,m){var y=s-t,M=f-e,x=y*y+M*M;if(x>4*i&&d--){var b=a+g,_=c+p,w=l+v,S=Math.sqrt(b*b+_*_+w*w),k=Math.asin(w/=S),E=ga(ga(w)-1)<Ca||ga(r-h)<Ca?(r+h)/2:Math.atan2(_,b),A=n(E,k),N=A[0],C=A[1],z=N-t,q=C-e,L=M*z-y*q;(L*L/x>i||ga((y*z+M*q)/x-.5)>.3||o>a*g+c*p+l*v)&&(u(t,e,r,a,c,l,N,C,E,b/=S,_/=S,w,d,m),m.point(N,C),u(N,C,E,b,_,w,s,f,h,g,p,v,d,m))}}var i=.5,o=Math.cos(30*Da),a=16;return t.precision=function(n){return arguments.length?(a=(i=n*n)>0&&16,t):Math.sqrt(i)},t}function tr(n){var t=nr(function(t,e){return n([t*Pa,e*Pa])});return function(n){return or(t(n))}}function er(n){this.stream=n}function rr(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function ur(n){return ir(function(){return n})()}function ir(n){function t(n){return n=a(n[0]*Da,n[1]*Da),[n[0]*h+c,l-n[1]*h]}function e(n){return n=a.invert((n[0]-c)/h,(l-n[1])/h),n&&[n[0]*Pa,n[1]*Pa]}function r(){a=Ae(o=lr(m,M,x),i);var n=i(v,d);return c=g-n[0]*h,l=p+n[1]*h,u()}function u(){return s&&(s.valid=!1,s=null),t}var i,o,a,c,l,s,f=nr(function(n,t){return n=i(n,t),[n[0]*h+c,l-n[1]*h]}),h=150,g=480,p=250,v=0,d=0,m=0,M=0,x=0,b=Lc,_=y,w=null,S=null;return t.stream=function(n){return s&&(s.valid=!1),s=or(b(o,f(_(n)))),s.valid=!0,s},t.clipAngle=function(n){return arguments.length?(b=null==n?(w=n,Lc):He((w=+n)*Da),u()):w},t.clipExtent=function(n){return arguments.length?(S=n,_=n?Ie(n[0][0],n[0][1],n[1][0],n[1][1]):y,u()):S},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(g=+n[0],p=+n[1],r()):[g,p]},t.center=function(n){return arguments.length?(v=n[0]%360*Da,d=n[1]%360*Da,r()):[v*Pa,d*Pa]},t.rotate=function(n){return arguments.length?(m=n[0]%360*Da,M=n[1]%360*Da,x=n.length>2?n[2]%360*Da:0,r()):[m*Pa,M*Pa,x*Pa]},ta.rebind(t,f,"precision"),function(){return i=n.apply(this,arguments),t.invert=i.invert&&e,r()}}function or(n){return rr(n,function(t,e){n.point(t*Da,e*Da)})}function ar(n,t){return[n,t]}function cr(n,t){return[n>qa?n-La:-qa>n?n+La:n,t]}function lr(n,t,e){return n?t||e?Ae(fr(n),hr(t,e)):fr(n):t||e?hr(t,e):cr}function sr(n){return function(t,e){return t+=n,[t>qa?t-La:-qa>t?t+La:t,e]}}function fr(n){var t=sr(n);return t.invert=sr(-n),t}function hr(n,t){function e(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),s=l*r+a*u;return[Math.atan2(c*i-s*o,a*r-l*u),tt(s*i+c*o)]}var r=Math.cos(n),u=Math.sin(n),i=Math.cos(t),o=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),s=l*i-c*o;return[Math.atan2(c*i+l*o,a*r+s*u),tt(s*r-a*u)]},e}function gr(n,t){var e=Math.cos(n),r=Math.sin(n);return function(u,i,o,a){var c=o*t;null!=u?(u=pr(e,u),i=pr(e,i),(o>0?i>u:u>i)&&(u+=o*La)):(u=n+o*La,i=n-.5*c);for(var l,s=u;o>0?s>i:i>s;s-=c)a.point((l=xe([e,-r*Math.cos(s),-r*Math.sin(s)]))[0],l[1])}}function pr(n,t){var e=pe(t);e[0]-=n,Me(e);var r=nt(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Ca)%(2*Math.PI)}function vr(n,t,e){var r=ta.range(n,t-Ca,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function dr(n,t,e){var r=ta.range(n,t-Ca,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function mr(n){return n.source}function yr(n){return n.target}function Mr(n,t,e,r){var u=Math.cos(t),i=Math.sin(t),o=Math.cos(r),a=Math.sin(r),c=u*Math.cos(n),l=u*Math.sin(n),s=o*Math.cos(e),f=o*Math.sin(e),h=2*Math.asin(Math.sqrt(it(r-t)+u*o*it(e-n))),g=1/Math.sin(h),p=h?function(n){var t=Math.sin(n*=h)*g,e=Math.sin(h-n)*g,r=e*c+t*s,u=e*l+t*f,o=e*i+t*a;return[Math.atan2(u,r)*Pa,Math.atan2(o,Math.sqrt(r*r+u*u))*Pa]}:function(){return[n*Pa,t*Pa]};return p.distance=h,p}function xr(){function n(n,u){var i=Math.sin(u*=Da),o=Math.cos(u),a=ga((n*=Da)-t),c=Math.cos(a);Yc+=Math.atan2(Math.sqrt((a=o*Math.sin(a))*a+(a=r*i-e*o*c)*a),e*i+r*o*c),t=n,e=i,r=o}var t,e,r;Zc.point=function(u,i){t=u*Da,e=Math.sin(i*=Da),r=Math.cos(i),Zc.point=n},Zc.lineEnd=function(){Zc.point=Zc.lineEnd=b}}function br(n,t){function e(t,e){var r=Math.cos(t),u=Math.cos(e),i=n(r*u);return[i*u*Math.sin(t),i*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),u=t(r),i=Math.sin(u),o=Math.cos(u);return[Math.atan2(n*i,r*o),Math.asin(r&&e*i/r)]},e}function _r(n,t){function e(n,t){o>0?-Ra+Ca>t&&(t=-Ra+Ca):t>Ra-Ca&&(t=Ra-Ca);var e=o/Math.pow(u(t),i);return[e*Math.sin(i*n),o-e*Math.cos(i*n)]}var r=Math.cos(n),u=function(n){return Math.tan(qa/4+n/2)},i=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(u(t)/u(n)),o=r*Math.pow(u(n),i)/i;return i?(e.invert=function(n,t){var e=o-t,r=K(i)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/i,2*Math.atan(Math.pow(o/r,1/i))-Ra]},e):Sr}function wr(n,t){function e(n,t){var e=i-t;return[e*Math.sin(u*n),i-e*Math.cos(u*n)]}var r=Math.cos(n),u=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),i=r/u+n;return ga(u)<Ca?ar:(e.invert=function(n,t){var e=i-t;return[Math.atan2(n,e)/u,i-K(u)*Math.sqrt(n*n+e*e)]},e)}function Sr(n,t){return[n,Math.log(Math.tan(qa/4+t/2))]}function kr(n){var t,e=ur(n),r=e.scale,u=e.translate,i=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=u.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var o=i.apply(e,arguments);if(o===e){if(t=null==n){var a=qa*r(),c=u();i([[c[0]-a,c[1]-a],[c[0]+a,c[1]+a]])}}else t&&(o=null);return o},e.clipExtent(null)}function Er(n,t){return[Math.log(Math.tan(qa/4+t/2)),-n]}function Ar(n){return n[0]}function Nr(n){return n[1]}function Cr(n){for(var t=n.length,e=[0,1],r=2,u=2;t>u;u++){for(;r>1&&Q(n[e[r-2]],n[e[r-1]],n[u])<=0;)--r;e[r++]=u}return e.slice(0,r)}function zr(n,t){return n[0]-t[0]||n[1]-t[1]}function qr(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Lr(n,t,e,r){var u=n[0],i=e[0],o=t[0]-u,a=r[0]-i,c=n[1],l=e[1],s=t[1]-c,f=r[1]-l,h=(a*(c-l)-f*(u-i))/(f*o-a*s);return[u+h*o,c+h*s]}function Tr(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Rr(){tu(this),this.edge=this.site=this.circle=null}function Dr(n){var t=el.pop()||new Rr;return t.site=n,t}function Pr(n){Xr(n),Qc.remove(n),el.push(n),tu(n)}function Ur(n){var t=n.circle,e=t.x,r=t.cy,u={x:e,y:r},i=n.P,o=n.N,a=[n];Pr(n);for(var c=i;c.circle&&ga(e-c.circle.x)<Ca&&ga(r-c.circle.cy)<Ca;)i=c.P,a.unshift(c),Pr(c),c=i;a.unshift(c),Xr(c);for(var l=o;l.circle&&ga(e-l.circle.x)<Ca&&ga(r-l.circle.cy)<Ca;)o=l.N,a.push(l),Pr(l),l=o;a.push(l),Xr(l);var s,f=a.length;for(s=1;f>s;++s)l=a[s],c=a[s-1],Kr(l.edge,c.site,l.site,u);c=a[0],l=a[f-1],l.edge=Jr(c.site,l.site,null,u),Vr(c),Vr(l)}function jr(n){for(var t,e,r,u,i=n.x,o=n.y,a=Qc._;a;)if(r=Fr(a,o)-i,r>Ca)a=a.L;else{if(u=i-Hr(a,o),!(u>Ca)){r>-Ca?(t=a.P,e=a):u>-Ca?(t=a,e=a.N):t=e=a;break}if(!a.R){t=a;break}a=a.R}var c=Dr(n);if(Qc.insert(t,c),t||e){if(t===e)return Xr(t),e=Dr(t.site),Qc.insert(c,e),c.edge=e.edge=Jr(t.site,c.site),Vr(t),void Vr(e);if(!e)return void(c.edge=Jr(t.site,c.site));Xr(t),Xr(e);var l=t.site,s=l.x,f=l.y,h=n.x-s,g=n.y-f,p=e.site,v=p.x-s,d=p.y-f,m=2*(h*d-g*v),y=h*h+g*g,M=v*v+d*d,x={x:(d*y-g*M)/m+s,y:(h*M-v*y)/m+f};Kr(e.edge,l,p,x),c.edge=Jr(l,n,null,x),e.edge=Jr(n,p,null,x),Vr(t),Vr(e)}}function Fr(n,t){var e=n.site,r=e.x,u=e.y,i=u-t;if(!i)return r;var o=n.P;if(!o)return-1/0;e=o.site;var a=e.x,c=e.y,l=c-t;if(!l)return a;var s=a-r,f=1/i-1/l,h=s/l;return f?(-h+Math.sqrt(h*h-2*f*(s*s/(-2*l)-c+l/2+u-i/2)))/f+r:(r+a)/2}function Hr(n,t){var e=n.N;if(e)return Fr(e,t);var r=n.site;return r.y===t?r.x:1/0}function Or(n){this.site=n,this.edges=[]}function Ir(n){for(var t,e,r,u,i,o,a,c,l,s,f=n[0][0],h=n[1][0],g=n[0][1],p=n[1][1],v=Kc,d=v.length;d--;)if(i=v[d],i&&i.prepare())for(a=i.edges,c=a.length,o=0;c>o;)s=a[o].end(),r=s.x,u=s.y,l=a[++o%c].start(),t=l.x,e=l.y,(ga(r-t)>Ca||ga(u-e)>Ca)&&(a.splice(o,0,new Qr(Gr(i.site,s,ga(r-f)<Ca&&p-u>Ca?{x:f,y:ga(t-f)<Ca?e:p}:ga(u-p)<Ca&&h-r>Ca?{x:ga(e-p)<Ca?t:h,y:p}:ga(r-h)<Ca&&u-g>Ca?{x:h,y:ga(t-h)<Ca?e:g}:ga(u-g)<Ca&&r-f>Ca?{x:ga(e-g)<Ca?t:f,y:g}:null),i.site,null)),++c)}function Yr(n,t){return t.angle-n.angle}function Zr(){tu(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vr(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,u=n.site,i=e.site;if(r!==i){var o=u.x,a=u.y,c=r.x-o,l=r.y-a,s=i.x-o,f=i.y-a,h=2*(c*f-l*s);if(!(h>=-za)){var g=c*c+l*l,p=s*s+f*f,v=(f*g-l*p)/h,d=(c*p-s*g)/h,f=d+a,m=rl.pop()||new Zr;m.arc=n,m.site=u,m.x=v+o,m.y=f+Math.sqrt(v*v+d*d),m.cy=f,n.circle=m;for(var y=null,M=tl._;M;)if(m.y<M.y||m.y===M.y&&m.x<=M.x){if(!M.L){y=M.P;break}M=M.L}else{if(!M.R){y=M;break}M=M.R}tl.insert(y,m),y||(nl=m)}}}}function Xr(n){var t=n.circle;t&&(t.P||(nl=t.N),tl.remove(t),rl.push(t),tu(t),n.circle=null)}function $r(n){for(var t,e=Gc,r=Oe(n[0][0],n[0][1],n[1][0],n[1][1]),u=e.length;u--;)t=e[u],(!Br(t,n)||!r(t)||ga(t.a.x-t.b.x)<Ca&&ga(t.a.y-t.b.y)<Ca)&&(t.a=t.b=null,e.splice(u,1))}function Br(n,t){var e=n.b;if(e)return!0;var r,u,i=n.a,o=t[0][0],a=t[1][0],c=t[0][1],l=t[1][1],s=n.l,f=n.r,h=s.x,g=s.y,p=f.x,v=f.y,d=(h+p)/2,m=(g+v)/2;if(v===g){if(o>d||d>=a)return;if(h>p){if(i){if(i.y>=l)return}else i={x:d,y:c};e={x:d,y:l}}else{if(i){if(i.y<c)return}else i={x:d,y:l};e={x:d,y:c}}}else if(r=(h-p)/(v-g),u=m-r*d,-1>r||r>1)if(h>p){if(i){if(i.y>=l)return}else i={x:(c-u)/r,y:c};e={x:(l-u)/r,y:l}}else{if(i){if(i.y<c)return}else i={x:(l-u)/r,y:l};e={x:(c-u)/r,y:c}}else if(v>g){if(i){if(i.x>=a)return}else i={x:o,y:r*o+u};e={x:a,y:r*a+u}}else{if(i){if(i.x<o)return}else i={x:a,y:r*a+u};e={x:o,y:r*o+u}}return n.a=i,n.b=e,!0}function Wr(n,t){this.l=n,this.r=t,this.a=this.b=null}function Jr(n,t,e,r){var u=new Wr(n,t);return Gc.push(u),e&&Kr(u,n,t,e),r&&Kr(u,t,n,r),Kc[n.i].edges.push(new Qr(u,n,t)),Kc[t.i].edges.push(new Qr(u,t,n)),u}function Gr(n,t,e){var r=new Wr(n,null);return r.a=t,r.b=e,Gc.push(r),r}function Kr(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function Qr(n,t,e){var r=n.a,u=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(u.x-r.x,r.y-u.y):Math.atan2(r.x-u.x,u.y-r.y)}function nu(){this._=null}function tu(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function eu(n,t){var e=t,r=t.R,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ru(n,t){var e=t,r=t.L,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function uu(n){for(;n.L;)n=n.L;return n}function iu(n,t){var e,r,u,i=n.sort(ou).pop();for(Gc=[],Kc=new Array(n.length),Qc=new nu,tl=new nu;;)if(u=nl,i&&(!u||i.y<u.y||i.y===u.y&&i.x<u.x))(i.x!==e||i.y!==r)&&(Kc[i.i]=new Or(i),jr(i),e=i.x,r=i.y),i=n.pop();else{if(!u)break;Ur(u.arc)}t&&($r(t),Ir(t));var o={cells:Kc,edges:Gc};return Qc=tl=Gc=Kc=null,o}function ou(n,t){return t.y-n.y||t.x-n.x}function au(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function cu(n){return n.x}function lu(n){return n.y}function su(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function fu(n,t,e,r,u,i){if(!n(t,e,r,u,i)){var o=.5*(e+u),a=.5*(r+i),c=t.nodes;c[0]&&fu(n,c[0],e,r,o,a),c[1]&&fu(n,c[1],o,r,u,a),c[2]&&fu(n,c[2],e,a,o,i),c[3]&&fu(n,c[3],o,a,u,i)}}function hu(n,t,e,r,u,i,o){var a,c=1/0;return function l(n,s,f,h,g){if(!(s>i||f>o||r>h||u>g)){if(p=n.point){var p,v=t-n.x,d=e-n.y,m=v*v+d*d;if(c>m){var y=Math.sqrt(c=m);r=t-y,u=e-y,i=t+y,o=e+y,a=p}}for(var M=n.nodes,x=.5*(s+h),b=.5*(f+g),_=t>=x,w=e>=b,S=w<<1|_,k=S+4;k>S;++S)if(n=M[3&S])switch(3&S){case 0:l(n,s,f,x,b);break;case 1:l(n,x,f,h,b);break;case 2:l(n,s,b,x,g);break;case 3:l(n,x,b,h,g)}}}(n,r,u,i,o),a}function gu(n,t){n=ta.rgb(n),t=ta.rgb(t);var e=n.r,r=n.g,u=n.b,i=t.r-e,o=t.g-r,a=t.b-u;return function(n){return"#"+xt(Math.round(e+i*n))+xt(Math.round(r+o*n))+xt(Math.round(u+a*n))}}function pu(n,t){var e,r={},u={};for(e in n)e in t?r[e]=mu(n[e],t[e]):u[e]=n[e];for(e in t)e in n||(u[e]=t[e]);return function(n){for(e in r)u[e]=r[e](n);return u}}function vu(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function du(n,t){var e,r,u,i=il.lastIndex=ol.lastIndex=0,o=-1,a=[],c=[];for(n+="",t+="";(e=il.exec(n))&&(r=ol.exec(t));)(u=r.index)>i&&(u=t.slice(i,u),a[o]?a[o]+=u:a[++o]=u),(e=e[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,c.push({i:o,x:vu(e,r)})),i=ol.lastIndex;return i<t.length&&(u=t.slice(i),a[o]?a[o]+=u:a[++o]=u),a.length<2?c[0]?(t=c[0].x,function(n){return t(n)+""}):function(){return t}:(t=c.length,function(n){for(var e,r=0;t>r;++r)a[(e=c[r]).i]=e.x(n);return a.join("")})}function mu(n,t){for(var e,r=ta.interpolators.length;--r>=0&&!(e=ta.interpolators[r](n,t)););return e}function yu(n,t){var e,r=[],u=[],i=n.length,o=t.length,a=Math.min(n.length,t.length);for(e=0;a>e;++e)r.push(mu(n[e],t[e]));for(;i>e;++e)u[e]=n[e];for(;o>e;++e)u[e]=t[e];return function(n){for(e=0;a>e;++e)u[e]=r[e](n);return u}}function Mu(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function xu(n){return function(t){return 1-n(1-t)}}function bu(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function _u(n){return n*n}function wu(n){return n*n*n}function Su(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(.5>n?e:3*(n-t)+e-.75)}function ku(n){return function(t){return Math.pow(t,n)}}function Eu(n){return 1-Math.cos(n*Ra)}function Au(n){return Math.pow(2,10*(n-1))}function Nu(n){return 1-Math.sqrt(1-n*n)}function Cu(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/La*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*La/t)}}function zu(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function qu(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Lu(n,t){n=ta.hcl(n),t=ta.hcl(t);var e=n.h,r=n.c,u=n.l,i=t.h-e,o=t.c-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return st(e+i*n,r+o*n,u+a*n)+""}}function Tu(n,t){n=ta.hsl(n),t=ta.hsl(t);var e=n.h,r=n.s,u=n.l,i=t.h-e,o=t.s-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return ct(e+i*n,r+o*n,u+a*n)+""}}function Ru(n,t){n=ta.lab(n),t=ta.lab(t);var e=n.l,r=n.a,u=n.b,i=t.l-e,o=t.a-r,a=t.b-u;return function(n){return ht(e+i*n,r+o*n,u+a*n)+""}}function Du(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function Pu(n){var t=[n.a,n.b],e=[n.c,n.d],r=ju(t),u=Uu(t,e),i=ju(Fu(e,t,-u))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Pa,this.translate=[n.e,n.f],this.scale=[r,i],this.skew=i?Math.atan2(u,i)*Pa:0}function Uu(n,t){return n[0]*t[0]+n[1]*t[1]}function ju(n){var t=Math.sqrt(Uu(n,n));return t&&(n[0]/=t,n[1]/=t),t}function Fu(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function Hu(n,t){var e,r=[],u=[],i=ta.transform(n),o=ta.transform(t),a=i.translate,c=o.translate,l=i.rotate,s=o.rotate,f=i.skew,h=o.skew,g=i.scale,p=o.scale;return a[0]!=c[0]||a[1]!=c[1]?(r.push("translate(",null,",",null,")"),u.push({i:1,x:vu(a[0],c[0])},{i:3,x:vu(a[1],c[1])})):r.push(c[0]||c[1]?"translate("+c+")":""),l!=s?(l-s>180?s+=360:s-l>180&&(l+=360),u.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:vu(l,s)})):s&&r.push(r.pop()+"rotate("+s+")"),f!=h?u.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:vu(f,h)}):h&&r.push(r.pop()+"skewX("+h+")"),g[0]!=p[0]||g[1]!=p[1]?(e=r.push(r.pop()+"scale(",null,",",null,")"),u.push({i:e-4,x:vu(g[0],p[0])},{i:e-2,x:vu(g[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),e=u.length,function(n){for(var t,i=-1;++i<e;)r[(t=u[i]).i]=t.x(n);return r.join("")}}function Ou(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function Iu(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function Yu(n){for(var t=n.source,e=n.target,r=Vu(t,e),u=[t];t!==r;)t=t.parent,u.push(t);for(var i=u.length;e!==r;)u.splice(i,0,e),e=e.parent;return u}function Zu(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function Vu(n,t){if(n===t)return n;for(var e=Zu(n),r=Zu(t),u=e.pop(),i=r.pop(),o=null;u===i;)o=u,u=e.pop(),i=r.pop();return o}function Xu(n){n.fixed|=2}function $u(n){n.fixed&=-7}function Bu(n){n.fixed|=4,n.px=n.x,n.py=n.y}function Wu(n){n.fixed&=-5}function Ju(n,t,e){var r=0,u=0;if(n.charge=0,!n.leaf)for(var i,o=n.nodes,a=o.length,c=-1;++c<a;)i=o[c],null!=i&&(Ju(i,t,e),n.charge+=i.charge,r+=i.charge*i.cx,u+=i.charge*i.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var l=t*e[n.point.index];n.charge+=n.pointCharge=l,r+=l*n.point.x,u+=l*n.point.y}n.cx=r/n.charge,n.cy=u/n.charge}function Gu(n,t){return ta.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=ri,n}function Ku(n,t){for(var e=[n];null!=(n=e.pop());)if(t(n),(u=n.children)&&(r=u.length))for(var r,u;--r>=0;)e.push(u[r])}function Qu(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(i=n.children)&&(u=i.length))for(var u,i,o=-1;++o<u;)e.push(i[o]);for(;null!=(n=r.pop());)t(n)}function ni(n){return n.children}function ti(n){return n.value}function ei(n,t){return t.value-n.value}function ri(n){return ta.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function ui(n){return n.x}function ii(n){return n.y}function oi(n,t,e){n.y0=t,n.y=e}function ai(n){return ta.range(n.length)}function ci(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function li(n){for(var t,e=1,r=0,u=n[0][1],i=n.length;i>e;++e)(t=n[e][1])>u&&(r=e,u=t);return r}function si(n){return n.reduce(fi,0)}function fi(n,t){return n+t[1]}function hi(n,t){return gi(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function gi(n,t){for(var e=-1,r=+n[0],u=(n[1]-r)/t,i=[];++e<=t;)i[e]=u*e+r;return i}function pi(n){return[ta.min(n),ta.max(n)]}function vi(n,t){return n.value-t.value}function di(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function mi(n,t){n._pack_next=t,t._pack_prev=n}function yi(n,t){var e=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>e*e+r*r}function Mi(n){function t(n){s=Math.min(n.x-n.r,s),f=Math.max(n.x+n.r,f),h=Math.min(n.y-n.r,h),g=Math.max(n.y+n.r,g)}if((e=n.children)&&(l=e.length)){var e,r,u,i,o,a,c,l,s=1/0,f=-1/0,h=1/0,g=-1/0;if(e.forEach(xi),r=e[0],r.x=-r.r,r.y=0,t(r),l>1&&(u=e[1],u.x=u.r,u.y=0,t(u),l>2))for(i=e[2],wi(r,u,i),t(i),di(r,i),r._pack_prev=i,di(i,u),u=r._pack_next,o=3;l>o;o++){wi(r,u,i=e[o]);var p=0,v=1,d=1;for(a=u._pack_next;a!==u;a=a._pack_next,v++)if(yi(a,i)){p=1;break}if(1==p)for(c=r._pack_prev;c!==a._pack_prev&&!yi(c,i);c=c._pack_prev,d++);p?(d>v||v==d&&u.r<r.r?mi(r,u=a):mi(r=c,u),o--):(di(r,i),u=i,t(i))}var m=(s+f)/2,y=(h+g)/2,M=0;for(o=0;l>o;o++)i=e[o],i.x-=m,i.y-=y,M=Math.max(M,i.r+Math.sqrt(i.x*i.x+i.y*i.y));n.r=M,e.forEach(bi)}}function xi(n){n._pack_next=n._pack_prev=n}function bi(n){delete n._pack_next,delete n._pack_prev}function _i(n,t,e,r){var u=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,u)for(var i=-1,o=u.length;++i<o;)_i(u[i],t,e,r)}function wi(n,t,e){var r=n.r+e.r,u=t.x-n.x,i=t.y-n.y;if(r&&(u||i)){var o=t.r+e.r,a=u*u+i*i;o*=o,r*=r;var c=.5+(r-o)/(2*a),l=Math.sqrt(Math.max(0,2*o*(r+a)-(r-=a)*r-o*o))/(2*a);e.x=n.x+c*u+l*i,e.y=n.y+c*i-l*u}else e.x=n.x+r,e.y=n.y}function Si(n,t){return n.parent==t.parent?1:2}function ki(n){var t=n.children;return t.length?t[0]:n.t}function Ei(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function Ai(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function Ni(n){for(var t,e=0,r=0,u=n.children,i=u.length;--i>=0;)t=u[i],t.z+=e,t.m+=e,e+=t.s+(r+=t.c)}function Ci(n,t,e){return n.a.parent===t.parent?n.a:e}function zi(n){return 1+ta.max(n,function(n){return n.y})}function qi(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Li(n){var t=n.children;return t&&t.length?Li(t[0]):n}function Ti(n){var t,e=n.children;return e&&(t=e.length)?Ti(e[t-1]):n}function Ri(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Di(n,t){var e=n.x+t[3],r=n.y+t[0],u=n.dx-t[1]-t[3],i=n.dy-t[0]-t[2];return 0>u&&(e+=u/2,u=0),0>i&&(r+=i/2,i=0),{x:e,y:r,dx:u,dy:i}}function Pi(n){var t=n[0],e=n[n.length-1];return e>t?[t,e]:[e,t]}function Ui(n){return n.rangeExtent?n.rangeExtent():Pi(n.range())}function ji(n,t,e,r){var u=e(n[0],n[1]),i=r(t[0],t[1]);return function(n){return i(u(n))}}function Fi(n,t){var e,r=0,u=n.length-1,i=n[r],o=n[u];return i>o&&(e=r,r=u,u=e,e=i,i=o,o=e),n[r]=t.floor(i),n[u]=t.ceil(o),n}function Hi(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:ml}function Oi(n,t,e,r){var u=[],i=[],o=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=a;)u.push(e(n[o-1],n[o])),i.push(r(t[o-1],t[o]));return function(t){var e=ta.bisect(n,t,1,a)-1;return i[e](u[e](t))}}function Ii(n,t,e,r){function u(){var u=Math.min(n.length,t.length)>2?Oi:ji,c=r?Iu:Ou;return o=u(n,t,c,e),a=u(t,n,c,mu),i}function i(n){return o(n)}var o,a;return i.invert=function(n){return a(n)},i.domain=function(t){return arguments.length?(n=t.map(Number),u()):n},i.range=function(n){return arguments.length?(t=n,u()):t},i.rangeRound=function(n){return i.range(n).interpolate(Du)},i.clamp=function(n){return arguments.length?(r=n,u()):r},i.interpolate=function(n){return arguments.length?(e=n,u()):e},i.ticks=function(t){return Xi(n,t)},i.tickFormat=function(t,e){return $i(n,t,e)},i.nice=function(t){return Zi(n,t),u()},i.copy=function(){return Ii(n,t,e,r)},u()}function Yi(n,t){return ta.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Zi(n,t){return Fi(n,Hi(Vi(n,t)[2]))}function Vi(n,t){null==t&&(t=10);var e=Pi(n),r=e[1]-e[0],u=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*u;return.15>=i?u*=10:.35>=i?u*=5:.75>=i&&(u*=2),e[0]=Math.ceil(e[0]/u)*u,e[1]=Math.floor(e[1]/u)*u+.5*u,e[2]=u,e}function Xi(n,t){return ta.range.apply(ta,Vi(n,t))}function $i(n,t,e){var r=Vi(n,t);if(e){var u=ic.exec(e);if(u.shift(),"s"===u[8]){var i=ta.formatPrefix(Math.max(ga(r[0]),ga(r[1])));return u[7]||(u[7]="."+Bi(i.scale(r[2]))),u[8]="f",e=ta.format(u.join("")),function(n){return e(i.scale(n))+i.symbol}}u[7]||(u[7]="."+Wi(u[8],r)),e=u.join("")}else e=",."+Bi(r[2])+"f";return ta.format(e)}function Bi(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function Wi(n,t){var e=Bi(t[2]);return n in yl?Math.abs(e-Bi(Math.max(ga(t[0]),ga(t[1]))))+ +("e"!==n):e-2*("%"===n)}function Ji(n,t,e,r){function u(n){return(e?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function i(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function o(t){return n(u(t))}return o.invert=function(t){return i(n.invert(t))},o.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(u)),o):r},o.base=function(e){return arguments.length?(t=+e,n.domain(r.map(u)),o):t},o.nice=function(){var t=Fi(r.map(u),e?Math:xl);return n.domain(t),r=t.map(i),o},o.ticks=function(){var n=Pi(r),o=[],a=n[0],c=n[1],l=Math.floor(u(a)),s=Math.ceil(u(c)),f=t%1?2:t;if(isFinite(s-l)){if(e){for(;s>l;l++)for(var h=1;f>h;h++)o.push(i(l)*h);o.push(i(l))}else for(o.push(i(l));l++<s;)for(var h=f-1;h>0;h--)o.push(i(l)*h);for(l=0;o[l]<a;l++);for(s=o.length;o[s-1]>c;s--);o=o.slice(l,s)}return o},o.tickFormat=function(n,t){if(!arguments.length)return Ml;arguments.length<2?t=Ml:"function"!=typeof t&&(t=ta.format(t));var r,a=Math.max(.1,n/o.ticks().length),c=e?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(n){return n/i(c(u(n)+r))<=a?t(n):""}},o.copy=function(){return Ji(n.copy(),t,e,r)},Yi(o,n)}function Gi(n,t,e){function r(t){return n(u(t))}var u=Ki(t),i=Ki(1/t);return r.invert=function(t){return i(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(u)),r):e},r.ticks=function(n){return Xi(e,n)},r.tickFormat=function(n,t){return $i(e,n,t)},r.nice=function(n){return r.domain(Zi(e,n))},r.exponent=function(o){return arguments.length?(u=Ki(t=o),i=Ki(1/t),n.domain(e.map(u)),r):t},r.copy=function(){return Gi(n.copy(),t,e)},Yi(r,n)}function Ki(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function Qi(n,t){function e(e){return i[((u.get(e)||("range"===t.t?u.set(e,n.push(e)):0/0))-1)%i.length]}function r(t,e){return ta.range(n.length).map(function(n){return t+e*n})}var u,i,o;return e.domain=function(r){if(!arguments.length)return n;n=[],u=new l;for(var i,o=-1,a=r.length;++o<a;)u.has(i=r[o])||u.set(i,n.push(i));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(i=n,o=0,t={t:"range",a:arguments},e):i},e.rangePoints=function(u,a){arguments.length<2&&(a=0);var c=u[0],l=u[1],s=n.length<2?(c=(c+l)/2,0):(l-c)/(n.length-1+a);return i=r(c+s*a/2,s),o=0,t={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(u,a){arguments.length<2&&(a=0);var c=u[0],l=u[1],s=n.length<2?(c=l=Math.round((c+l)/2),0):(l-c)/(n.length-1+a)|0;return i=r(c+Math.round(s*a/2+(l-c-(n.length-1+a)*s)/2),s),o=0,t={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(u,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=u[1]<u[0],s=u[l-0],f=u[1-l],h=(f-s)/(n.length-a+2*c);return i=r(s+h*c,h),l&&i.reverse(),o=h*(1-a),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(u,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=u[1]<u[0],s=u[l-0],f=u[1-l],h=Math.floor((f-s)/(n.length-a+2*c));return i=r(s+Math.round((f-s-(n.length-a)*h)/2),h),l&&i.reverse(),o=Math.round(h*(1-a)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return o},e.rangeExtent=function(){return Pi(t.a[0])},e.copy=function(){return Qi(n,t)},e.domain(n)}function no(n,t){function i(){var e=0,r=t.length;for(a=[];++e<r;)a[e-1]=ta.quantile(n,e/r);return o}function o(n){return isNaN(n=+n)?void 0:t[ta.bisect(a,n)]}var a;return o.domain=function(t){return arguments.length?(n=t.map(r).filter(u).sort(e),i()):n},o.range=function(n){return arguments.length?(t=n,i()):t},o.quantiles=function(){return a},o.invertExtent=function(e){return e=t.indexOf(e),0>e?[0/0,0/0]:[e>0?a[e-1]:n[0],e<a.length?a[e]:n[n.length-1]]},o.copy=function(){return no(n,t)},i()}function to(n,t,e){function r(t){return e[Math.max(0,Math.min(o,Math.floor(i*(t-n))))]}function u(){return i=e.length/(t-n),o=e.length-1,r}var i,o;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],u()):[n,t]},r.range=function(n){return arguments.length?(e=n,u()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=0>t?0/0:t/i+n,[t,t+1/i]},r.copy=function(){return to(n,t,e)},u()}function eo(n,t){function e(e){return e>=e?t[ta.bisect(n,e)]:void 0}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return eo(n,t)},e}function ro(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return Xi(n,t)},t.tickFormat=function(t,e){return $i(n,t,e)},t.copy=function(){return ro(n)},t}function uo(){return 0}function io(n){return n.innerRadius}function oo(n){return n.outerRadius}function ao(n){return n.startAngle}function co(n){return n.endAngle}function lo(n){return n&&n.padAngle}function so(n,t,e,r){return(n-e)*t-(t-r)*n>0?0:1}function fo(n,t,e,r,u){var i=n[0]-t[0],o=n[1]-t[1],a=(u?r:-r)/Math.sqrt(i*i+o*o),c=a*o,l=-a*i,s=n[0]+c,f=n[1]+l,h=t[0]+c,g=t[1]+l,p=(s+h)/2,v=(f+g)/2,d=h-s,m=g-f,y=d*d+m*m,M=e-r,x=s*g-h*f,b=(0>m?-1:1)*Math.sqrt(M*M*y-x*x),_=(x*m-d*b)/y,w=(-x*d-m*b)/y,S=(x*m+d*b)/y,k=(-x*d+m*b)/y,E=_-p,A=w-v,N=S-p,C=k-v;return E*E+A*A>N*N+C*C&&(_=S,w=k),[[_-c,w-l],[_*e/M,w*e/M]]}function ho(n){function t(t){function o(){l.push("M",i(n(s),a))}for(var c,l=[],s=[],f=-1,h=t.length,g=Et(e),p=Et(r);++f<h;)u.call(this,c=t[f],f)?s.push([+g.call(this,c,f),+p.call(this,c,f)]):s.length&&(o(),s=[]);return s.length&&o(),l.length?l.join(""):null}var e=Ar,r=Nr,u=Ne,i=go,o=i.key,a=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(u=n,t):u},t.interpolate=function(n){return arguments.length?(o="function"==typeof n?i=n:(i=El.get(n)||go).key,t):o},t.tension=function(n){return arguments.length?(a=n,t):a},t}function go(n){return n.join("L")}function po(n){return go(n)+"Z"}function vo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&u.push("H",r[0]),u.join("")}function mo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("V",(r=n[t])[1],"H",r[0]);return u.join("")}function yo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r=n[t])[0],"V",r[1]);return u.join("")}function Mo(n,t){return n.length<4?go(n):n[1]+_o(n.slice(1,-1),wo(n,t))}function xo(n,t){return n.length<3?go(n):n[0]+_o((n.push(n[0]),n),wo([n[n.length-2]].concat(n,[n[1]]),t))}function bo(n,t){return n.length<3?go(n):n[0]+_o(n,wo(n,t))}function _o(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return go(n);var e=n.length!=t.length,r="",u=n[0],i=n[1],o=t[0],a=o,c=1;if(e&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],u=n[1],c=2),t.length>1){a=t[1],i=n[c],c++,r+="C"+(u[0]+o[0])+","+(u[1]+o[1])+","+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1];for(var l=2;l<t.length;l++,c++)i=n[c],a=t[l],r+="S"+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1]}if(e){var s=n[c];r+="Q"+(i[0]+2*a[0]/3)+","+(i[1]+2*a[1]/3)+","+s[0]+","+s[1]}return r}function wo(n,t){for(var e,r=[],u=(1-t)/2,i=n[0],o=n[1],a=1,c=n.length;++a<c;)e=i,i=o,o=n[a],r.push([u*(o[0]-e[0]),u*(o[1]-e[1])]);return r}function So(n){if(n.length<3)return go(n);var t=1,e=n.length,r=n[0],u=r[0],i=r[1],o=[u,u,u,(r=n[1])[0]],a=[i,i,i,r[1]],c=[u,",",i,"L",No(Cl,o),",",No(Cl,a)];for(n.push(n[e-1]);++t<=e;)r=n[t],o.shift(),o.push(r[0]),a.shift(),a.push(r[1]),Co(c,o,a);return n.pop(),c.push("L",r),c.join("")}function ko(n){if(n.length<4)return go(n);for(var t,e=[],r=-1,u=n.length,i=[0],o=[0];++r<3;)t=n[r],i.push(t[0]),o.push(t[1]);for(e.push(No(Cl,i)+","+No(Cl,o)),--r;++r<u;)t=n[r],i.shift(),i.push(t[0]),o.shift(),o.push(t[1]),Co(e,i,o);return e.join("")}function Eo(n){for(var t,e,r=-1,u=n.length,i=u+4,o=[],a=[];++r<4;)e=n[r%u],o.push(e[0]),a.push(e[1]);for(t=[No(Cl,o),",",No(Cl,a)],--r;++r<i;)e=n[r%u],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Co(t,o,a);return t.join("")}function Ao(n,t){var e=n.length-1;if(e)for(var r,u,i=n[0][0],o=n[0][1],a=n[e][0]-i,c=n[e][1]-o,l=-1;++l<=e;)r=n[l],u=l/e,r[0]=t*r[0]+(1-t)*(i+u*a),r[1]=t*r[1]+(1-t)*(o+u*c);return So(n)}function No(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Co(n,t,e){n.push("C",No(Al,t),",",No(Al,e),",",No(Nl,t),",",No(Nl,e),",",No(Cl,t),",",No(Cl,e))}function zo(n,t){return(t[1]-n[1])/(t[0]-n[0])}function qo(n){for(var t=0,e=n.length-1,r=[],u=n[0],i=n[1],o=r[0]=zo(u,i);++t<e;)r[t]=(o+(o=zo(u=i,i=n[t+1])))/2;return r[t]=o,r}function Lo(n){for(var t,e,r,u,i=[],o=qo(n),a=-1,c=n.length-1;++a<c;)t=zo(n[a],n[a+1]),ga(t)<Ca?o[a]=o[a+1]=0:(e=o[a]/t,r=o[a+1]/t,u=e*e+r*r,u>9&&(u=3*t/Math.sqrt(u),o[a]=u*e,o[a+1]=u*r));for(a=-1;++a<=c;)u=(n[Math.min(c,a+1)][0]-n[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),i.push([u||0,o[a]*u||0]);return i}function To(n){return n.length<3?go(n):n[0]+_o(n,Lo(n))}function Ro(n){for(var t,e,r,u=-1,i=n.length;++u<i;)t=n[u],e=t[0],r=t[1]-Ra,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Do(n){function t(t){function c(){v.push("M",a(n(m),f),s,l(n(d.reverse()),f),"Z")}for(var h,g,p,v=[],d=[],m=[],y=-1,M=t.length,x=Et(e),b=Et(u),_=e===r?function(){return g}:Et(r),w=u===i?function(){return p}:Et(i);++y<M;)o.call(this,h=t[y],y)?(d.push([g=+x.call(this,h,y),p=+b.call(this,h,y)]),m.push([+_.call(this,h,y),+w.call(this,h,y)])):d.length&&(c(),d=[],m=[]);return d.length&&c(),v.length?v.join(""):null}var e=Ar,r=Ar,u=0,i=Nr,o=Ne,a=go,c=a.key,l=a,s="L",f=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r
+},t.y=function(n){return arguments.length?(u=i=n,t):i},t.y0=function(n){return arguments.length?(u=n,t):u},t.y1=function(n){return arguments.length?(i=n,t):i},t.defined=function(n){return arguments.length?(o=n,t):o},t.interpolate=function(n){return arguments.length?(c="function"==typeof n?a=n:(a=El.get(n)||go).key,l=a.reverse||a,s=a.closed?"M":"L",t):c},t.tension=function(n){return arguments.length?(f=n,t):f},t}function Po(n){return n.radius}function Uo(n){return[n.x,n.y]}function jo(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]-Ra;return[e*Math.cos(r),e*Math.sin(r)]}}function Fo(){return 64}function Ho(){return"circle"}function Oo(n){var t=Math.sqrt(n/qa);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Io(n){return function(){var t,e;(t=this[n])&&(e=t[t.active])&&(--t.count?delete t[t.active]:delete this[n],t.active+=.5,e.event&&e.event.interrupt.call(this,this.__data__,e.index))}}function Yo(n,t,e){return ya(n,Pl),n.namespace=t,n.id=e,n}function Zo(n,t,e,r){var u=n.id,i=n.namespace;return Y(n,"function"==typeof e?function(n,o,a){n[i][u].tween.set(t,r(e.call(n,n.__data__,o,a)))}:(e=r(e),function(n){n[i][u].tween.set(t,e)}))}function Vo(n){return null==n&&(n=""),function(){this.textContent=n}}function Xo(n){return null==n?"__transition__":"__transition_"+n+"__"}function $o(n,t,e,r,u){var i=n[e]||(n[e]={active:0,count:0}),o=i[r];if(!o){var a=u.time;o=i[r]={tween:new l,time:a,delay:u.delay,duration:u.duration,ease:u.ease,index:t},u=null,++i.count,ta.timer(function(u){function c(e){if(i.active>r)return s();var u=i[i.active];u&&(--i.count,delete i[i.active],u.event&&u.event.interrupt.call(n,n.__data__,u.index)),i.active=r,o.event&&o.event.start.call(n,n.__data__,t),o.tween.forEach(function(e,r){(r=r.call(n,n.__data__,t))&&v.push(r)}),h=o.ease,f=o.duration,ta.timer(function(){return p.c=l(e||1)?Ne:l,1},0,a)}function l(e){if(i.active!==r)return 1;for(var u=e/f,a=h(u),c=v.length;c>0;)v[--c].call(n,a);return u>=1?(o.event&&o.event.end.call(n,n.__data__,t),s()):void 0}function s(){return--i.count?delete i[r]:delete n[e],1}var f,h,g=o.delay,p=ec,v=[];return p.t=g+a,u>=g?c(u-g):void(p.c=c)},0,a)}}function Bo(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"})}function Wo(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"})}function Jo(n){return n.toISOString()}function Go(n,t,e){function r(t){return n(t)}function u(n,e){var r=n[1]-n[0],u=r/e,i=ta.bisect(Vl,u);return i==Vl.length?[t.year,Vi(n.map(function(n){return n/31536e6}),e)[2]]:i?t[u/Vl[i-1]<Vl[i]/u?i-1:i]:[Bl,Vi(n,e)[2]]}return r.invert=function(t){return Ko(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(Ko)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,Ko(+e+1),t).length}var i=r.domain(),o=Pi(i),a=null==n?u(o,10):"number"==typeof n&&u(o,n);return a&&(n=a[0],t=a[1]),r.domain(Fi(i,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=Ko(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=Ko(+t+1);return t}}:n))},r.ticks=function(n,t){var e=Pi(r.domain()),i=null==n?u(e,10):"number"==typeof n?u(e,n):!n.range&&[{range:n},t];return i&&(n=i[0],t=i[1]),n.range(e[0],Ko(+e[1]+1),1>t?1:t)},r.tickFormat=function(){return e},r.copy=function(){return Go(n.copy(),t,e)},Yi(r,n)}function Ko(n){return new Date(n)}function Qo(n){return JSON.parse(n.responseText)}function na(n){var t=ua.createRange();return t.selectNode(ua.body),t.createContextualFragment(n.responseText)}var ta={version:"3.5.6"},ea=[].slice,ra=function(n){return ea.call(n)},ua=this.document;if(ua)try{ra(ua.documentElement.childNodes)[0].nodeType}catch(ia){ra=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}if(Date.now||(Date.now=function(){return+new Date}),ua)try{ua.createElement("DIV").style.setProperty("opacity",0,"")}catch(oa){var aa=this.Element.prototype,ca=aa.setAttribute,la=aa.setAttributeNS,sa=this.CSSStyleDeclaration.prototype,fa=sa.setProperty;aa.setAttribute=function(n,t){ca.call(this,n,t+"")},aa.setAttributeNS=function(n,t,e){la.call(this,n,t,e+"")},sa.setProperty=function(n,t,e){fa.call(this,n,t+"",e)}}ta.ascending=e,ta.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:0/0},ta.min=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&e>r&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&e>r&&(e=r)}return e},ta.max=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&r>e&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&r>e&&(e=r)}return e},ta.extent=function(n,t){var e,r,u,i=-1,o=n.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=n[i])&&r>=r){e=u=r;break}for(;++i<o;)null!=(r=n[i])&&(e>r&&(e=r),r>u&&(u=r))}else{for(;++i<o;)if(null!=(r=t.call(n,n[i],i))&&r>=r){e=u=r;break}for(;++i<o;)null!=(r=t.call(n,n[i],i))&&(e>r&&(e=r),r>u&&(u=r))}return[e,u]},ta.sum=function(n,t){var e,r=0,i=n.length,o=-1;if(1===arguments.length)for(;++o<i;)u(e=+n[o])&&(r+=e);else for(;++o<i;)u(e=+t.call(n,n[o],o))&&(r+=e);return r},ta.mean=function(n,t){var e,i=0,o=n.length,a=-1,c=o;if(1===arguments.length)for(;++a<o;)u(e=r(n[a]))?i+=e:--c;else for(;++a<o;)u(e=r(t.call(n,n[a],a)))?i+=e:--c;return c?i/c:void 0},ta.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),u=+n[r-1],i=e-r;return i?u+i*(n[r]-u):u},ta.median=function(n,t){var i,o=[],a=n.length,c=-1;if(1===arguments.length)for(;++c<a;)u(i=r(n[c]))&&o.push(i);else for(;++c<a;)u(i=r(t.call(n,n[c],c)))&&o.push(i);return o.length?ta.quantile(o.sort(e),.5):void 0},ta.variance=function(n,t){var e,i,o=n.length,a=0,c=0,l=-1,s=0;if(1===arguments.length)for(;++l<o;)u(e=r(n[l]))&&(i=e-a,a+=i/++s,c+=i*(e-a));else for(;++l<o;)u(e=r(t.call(n,n[l],l)))&&(i=e-a,a+=i/++s,c+=i*(e-a));return s>1?c/(s-1):void 0},ta.deviation=function(){var n=ta.variance.apply(this,arguments);return n?Math.sqrt(n):n};var ha=i(e);ta.bisectLeft=ha.left,ta.bisect=ta.bisectRight=ha.right,ta.bisector=function(n){return i(1===n.length?function(t,r){return e(n(t),r)}:n)},ta.shuffle=function(n,t,e){(i=arguments.length)<3&&(e=n.length,2>i&&(t=0));for(var r,u,i=e-t;i;)u=Math.random()*i--|0,r=n[i+t],n[i+t]=n[u+t],n[u+t]=r;return n},ta.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},ta.pairs=function(n){for(var t,e=0,r=n.length-1,u=n[0],i=new Array(0>r?0:r);r>e;)i[e]=[t=u,u=n[++e]];return i},ta.zip=function(){if(!(r=arguments.length))return[];for(var n=-1,t=ta.min(arguments,o),e=new Array(t);++n<t;)for(var r,u=-1,i=e[n]=new Array(r);++u<r;)i[u]=arguments[u][n];return e},ta.transpose=function(n){return ta.zip.apply(ta,n)},ta.keys=function(n){var t=[];for(var e in n)t.push(e);return t},ta.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},ta.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},ta.merge=function(n){for(var t,e,r,u=n.length,i=-1,o=0;++i<u;)o+=n[i].length;for(e=new Array(o);--u>=0;)for(r=n[u],t=r.length;--t>=0;)e[--o]=r[t];return e};var ga=Math.abs;ta.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e===1/0)throw new Error("infinite range");var r,u=[],i=a(ga(e)),o=-1;if(n*=i,t*=i,e*=i,0>e)for(;(r=n+e*++o)>t;)u.push(r/i);else for(;(r=n+e*++o)<t;)u.push(r/i);return u},ta.map=function(n,t){var e=new l;if(n instanceof l)n.forEach(function(n,t){e.set(n,t)});else if(Array.isArray(n)){var r,u=-1,i=n.length;if(1===arguments.length)for(;++u<i;)e.set(u,n[u]);else for(;++u<i;)e.set(t.call(n,r=n[u],u),r)}else for(var o in n)e.set(o,n[o]);return e};var pa="__proto__",va="\x00";c(l,{has:h,get:function(n){return this._[s(n)]},set:function(n,t){return this._[s(n)]=t},remove:g,keys:p,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:f(t),value:this._[t]});return n},size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t),this._[t])}}),ta.nest=function(){function n(t,o,a){if(a>=i.length)return r?r.call(u,o):e?o.sort(e):o;for(var c,s,f,h,g=-1,p=o.length,v=i[a++],d=new l;++g<p;)(h=d.get(c=v(s=o[g])))?h.push(s):d.set(c,[s]);return t?(s=t(),f=function(e,r){s.set(e,n(t,r,a))}):(s={},f=function(e,r){s[e]=n(t,r,a)}),d.forEach(f),s}function t(n,e){if(e>=i.length)return n;var r=[],u=o[e++];return n.forEach(function(n,u){r.push({key:n,values:t(u,e)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var e,r,u={},i=[],o=[];return u.map=function(t,e){return n(e,t,0)},u.entries=function(e){return t(n(ta.map,e,0),0)},u.key=function(n){return i.push(n),u},u.sortKeys=function(n){return o[i.length-1]=n,u},u.sortValues=function(n){return e=n,u},u.rollup=function(n){return r=n,u},u},ta.set=function(n){var t=new m;if(n)for(var e=0,r=n.length;r>e;++e)t.add(n[e]);return t},c(m,{has:h,add:function(n){return this._[s(n+="")]=!0,n},remove:g,values:p,size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t))}}),ta.behavior={},ta.rebind=function(n,t){for(var e,r=1,u=arguments.length;++r<u;)n[e=arguments[r]]=M(n,t,t[e]);return n};var da=["webkit","ms","moz","Moz","o","O"];ta.dispatch=function(){for(var n=new _,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=w(n);return n},_.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.slice(e+1),n=n.slice(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},ta.event=null,ta.requote=function(n){return n.replace(ma,"\\$&")};var ma=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ya={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},Ma=function(n,t){return t.querySelector(n)},xa=function(n,t){return t.querySelectorAll(n)},ba=function(n,t){var e=n.matches||n[x(n,"matchesSelector")];return(ba=function(n,t){return e.call(n,t)})(n,t)};"function"==typeof Sizzle&&(Ma=function(n,t){return Sizzle(n,t)[0]||null},xa=Sizzle,ba=Sizzle.matchesSelector),ta.selection=function(){return ta.select(ua.documentElement)};var _a=ta.selection.prototype=[];_a.select=function(n){var t,e,r,u,i=[];n=N(n);for(var o=-1,a=this.length;++o<a;){i.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var c=-1,l=r.length;++c<l;)(u=r[c])?(t.push(e=n.call(u,u.__data__,c,o)),e&&"__data__"in u&&(e.__data__=u.__data__)):t.push(null)}return A(i)},_a.selectAll=function(n){var t,e,r=[];n=C(n);for(var u=-1,i=this.length;++u<i;)for(var o=this[u],a=-1,c=o.length;++a<c;)(e=o[a])&&(r.push(t=ra(n.call(e,e.__data__,a,u))),t.parentNode=e);return A(r)};var wa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ta.ns={prefix:wa,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&(e=n.slice(0,t),n=n.slice(t+1)),wa.hasOwnProperty(e)?{space:wa[e],local:n}:n}},_a.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=ta.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(z(t,n[t]));return this}return this.each(z(n,t))},_a.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=T(n)).length,u=-1;if(t=e.classList){for(;++u<r;)if(!t.contains(n[u]))return!1}else for(t=e.getAttribute("class");++u<r;)if(!L(n[u]).test(t))return!1;return!0}for(t in n)this.each(R(t,n[t]));return this}return this.each(R(n,t))},_a.style=function(n,e,r){var u=arguments.length;if(3>u){if("string"!=typeof n){2>u&&(e="");for(r in n)this.each(P(r,n[r],e));return this}if(2>u){var i=this.node();return t(i).getComputedStyle(i,null).getPropertyValue(n)}r=""}return this.each(P(n,e,r))},_a.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(U(t,n[t]));return this}return this.each(U(n,t))},_a.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},_a.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},_a.append=function(n){return n=j(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},_a.insert=function(n,t){return n=j(n),t=N(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},_a.remove=function(){return this.each(F)},_a.data=function(n,t){function e(n,e){var r,u,i,o=n.length,f=e.length,h=Math.min(o,f),g=new Array(f),p=new Array(f),v=new Array(o);if(t){var d,m=new l,y=new Array(o);for(r=-1;++r<o;)m.has(d=t.call(u=n[r],u.__data__,r))?v[r]=u:m.set(d,u),y[r]=d;for(r=-1;++r<f;)(u=m.get(d=t.call(e,i=e[r],r)))?u!==!0&&(g[r]=u,u.__data__=i):p[r]=H(i),m.set(d,!0);for(r=-1;++r<o;)m.get(y[r])!==!0&&(v[r]=n[r])}else{for(r=-1;++r<h;)u=n[r],i=e[r],u?(u.__data__=i,g[r]=u):p[r]=H(i);for(;f>r;++r)p[r]=H(e[r]);for(;o>r;++r)v[r]=n[r]}p.update=g,p.parentNode=g.parentNode=v.parentNode=n.parentNode,a.push(p),c.push(g),s.push(v)}var r,u,i=-1,o=this.length;if(!arguments.length){for(n=new Array(o=(r=this[0]).length);++i<o;)(u=r[i])&&(n[i]=u.__data__);return n}var a=Z([]),c=A([]),s=A([]);if("function"==typeof n)for(;++i<o;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<o;)e(r=this[i],n);return c.enter=function(){return a},c.exit=function(){return s},c},_a.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},_a.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]),t.parentNode=(e=this[i]).parentNode;for(var a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return A(u)},_a.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],u=r.length-1,i=r[u];--u>=0;)(e=r[u])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},_a.sort=function(n){n=I.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},_a.each=function(n){return Y(this,function(t,e,r){n.call(t,t.__data__,e,r)})},_a.call=function(n){var t=ra(arguments);return n.apply(t[0]=this,t),this},_a.empty=function(){return!this.node()},_a.node=function(){for(var n=0,t=this.length;t>n;n++)for(var e=this[n],r=0,u=e.length;u>r;r++){var i=e[r];if(i)return i}return null},_a.size=function(){var n=0;return Y(this,function(){++n}),n};var Sa=[];ta.selection.enter=Z,ta.selection.enter.prototype=Sa,Sa.append=_a.append,Sa.empty=_a.empty,Sa.node=_a.node,Sa.call=_a.call,Sa.size=_a.size,Sa.select=function(n){for(var t,e,r,u,i,o=[],a=-1,c=this.length;++a<c;){r=(u=this[a]).update,o.push(t=[]),t.parentNode=u.parentNode;for(var l=-1,s=u.length;++l<s;)(i=u[l])?(t.push(r[l]=e=n.call(u.parentNode,i.__data__,l,a)),e.__data__=i.__data__):t.push(null)}return A(o)},Sa.insert=function(n,t){return arguments.length<2&&(t=V(this)),_a.insert.call(this,n,t)},ta.select=function(t){var e;return"string"==typeof t?(e=[Ma(t,ua)],e.parentNode=ua.documentElement):(e=[t],e.parentNode=n(t)),A([e])},ta.selectAll=function(n){var t;return"string"==typeof n?(t=ra(xa(n,ua)),t.parentNode=ua.documentElement):(t=n,t.parentNode=null),A([t])},_a.on=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(e in n)this.each(X(e,n[e],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(X(n,t,e))};var ka=ta.map({mouseenter:"mouseover",mouseleave:"mouseout"});ua&&ka.forEach(function(n){"on"+n in ua&&ka.remove(n)});var Ea,Aa=0;ta.mouse=function(n){return J(n,k())};var Na=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ta.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=k().changedTouches),t)for(var r,u=0,i=t.length;i>u;++u)if((r=t[u]).identifier===e)return J(n,r)},ta.behavior.drag=function(){function n(){this.on("mousedown.drag",i).on("touchstart.drag",o)}function e(n,t,e,i,o){return function(){function a(){var n,e,r=t(h,v);r&&(n=r[0]-M[0],e=r[1]-M[1],p|=n|e,M=r,g({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:n,dy:e}))}function c(){t(h,v)&&(m.on(i+d,null).on(o+d,null),y(p&&ta.event.target===f),g({type:"dragend"}))}var l,s=this,f=ta.event.target,h=s.parentNode,g=r.of(s,arguments),p=0,v=n(),d=".drag"+(null==v?"":"-"+v),m=ta.select(e(f)).on(i+d,a).on(o+d,c),y=W(f),M=t(h,v);u?(l=u.apply(s,arguments),l=[l.x-M[0],l.y-M[1]]):l=[0,0],g({type:"dragstart"})}}var r=E(n,"drag","dragstart","dragend"),u=null,i=e(b,ta.mouse,t,"mousemove","mouseup"),o=e(G,ta.touch,y,"touchmove","touchend");return n.origin=function(t){return arguments.length?(u=t,n):u},ta.rebind(n,r,"on")},ta.touches=function(n,t){return arguments.length<2&&(t=k().touches),t?ra(t).map(function(t){var e=J(n,t);return e.identifier=t.identifier,e}):[]};var Ca=1e-6,za=Ca*Ca,qa=Math.PI,La=2*qa,Ta=La-Ca,Ra=qa/2,Da=qa/180,Pa=180/qa,Ua=Math.SQRT2,ja=2,Fa=4;ta.interpolateZoom=function(n,t){function e(n){var t=n*y;if(m){var e=rt(v),o=i/(ja*h)*(e*ut(Ua*t+v)-et(v));return[r+o*l,u+o*s,i*e/rt(Ua*t+v)]}return[r+n*l,u+n*s,i*Math.exp(Ua*t)]}var r=n[0],u=n[1],i=n[2],o=t[0],a=t[1],c=t[2],l=o-r,s=a-u,f=l*l+s*s,h=Math.sqrt(f),g=(c*c-i*i+Fa*f)/(2*i*ja*h),p=(c*c-i*i-Fa*f)/(2*c*ja*h),v=Math.log(Math.sqrt(g*g+1)-g),d=Math.log(Math.sqrt(p*p+1)-p),m=d-v,y=(m||Math.log(c/i))/Ua;return e.duration=1e3*y,e},ta.behavior.zoom=function(){function n(n){n.on(q,f).on(Oa+".zoom",g).on("dblclick.zoom",p).on(R,h)}function e(n){return[(n[0]-k.x)/k.k,(n[1]-k.y)/k.k]}function r(n){return[n[0]*k.k+k.x,n[1]*k.k+k.y]}function u(n){k.k=Math.max(N[0],Math.min(N[1],n))}function i(n,t){t=r(t),k.x+=n[0]-t[0],k.y+=n[1]-t[1]}function o(t,e,r,o){t.__chart__={x:k.x,y:k.y,k:k.k},u(Math.pow(2,o)),i(d=e,r),t=ta.select(t),C>0&&(t=t.transition().duration(C)),t.call(n.event)}function a(){b&&b.domain(x.range().map(function(n){return(n-k.x)/k.k}).map(x.invert)),w&&w.domain(_.range().map(function(n){return(n-k.y)/k.k}).map(_.invert))}function c(n){z++||n({type:"zoomstart"})}function l(n){a(),n({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function s(n){--z||(n({type:"zoomend"}),d=null)}function f(){function n(){f=1,i(ta.mouse(u),g),l(a)}function r(){h.on(L,null).on(T,null),p(f&&ta.event.target===o),s(a)}var u=this,o=ta.event.target,a=D.of(u,arguments),f=0,h=ta.select(t(u)).on(L,n).on(T,r),g=e(ta.mouse(u)),p=W(u);Dl.call(u),c(a)}function h(){function n(){var n=ta.touches(p);return g=k.k,n.forEach(function(n){n.identifier in d&&(d[n.identifier]=e(n))}),n}function t(){var t=ta.event.target;ta.select(t).on(x,r).on(b,a),_.push(t);for(var e=ta.event.changedTouches,u=0,i=e.length;i>u;++u)d[e[u].identifier]=null;var c=n(),l=Date.now();if(1===c.length){if(500>l-M){var s=c[0];o(p,s,d[s.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),S()}M=l}else if(c.length>1){var s=c[0],f=c[1],h=s[0]-f[0],g=s[1]-f[1];m=h*h+g*g}}function r(){var n,t,e,r,o=ta.touches(p);Dl.call(p);for(var a=0,c=o.length;c>a;++a,r=null)if(e=o[a],r=d[e.identifier]){if(t)break;n=e,t=r}if(r){var s=(s=e[0]-n[0])*s+(s=e[1]-n[1])*s,f=m&&Math.sqrt(s/m);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],u(f*g)}M=null,i(n,t),l(v)}function a(){if(ta.event.touches.length){for(var t=ta.event.changedTouches,e=0,r=t.length;r>e;++e)delete d[t[e].identifier];for(var u in d)return void n()}ta.selectAll(_).on(y,null),w.on(q,f).on(R,h),E(),s(v)}var g,p=this,v=D.of(p,arguments),d={},m=0,y=".zoom-"+ta.event.changedTouches[0].identifier,x="touchmove"+y,b="touchend"+y,_=[],w=ta.select(p),E=W(p);t(),c(v),w.on(q,null).on(R,t)}function g(){var n=D.of(this,arguments);y?clearTimeout(y):(Dl.call(this),v=e(d=m||ta.mouse(this)),c(n)),y=setTimeout(function(){y=null,s(n)},50),S(),u(Math.pow(2,.002*Ha())*k.k),i(d,v),l(n)}function p(){var n=ta.mouse(this),t=Math.log(k.k)/Math.LN2;o(this,n,e(n),ta.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var v,d,m,y,M,x,b,_,w,k={x:0,y:0,k:1},A=[960,500],N=Ia,C=250,z=0,q="mousedown.zoom",L="mousemove.zoom",T="mouseup.zoom",R="touchstart.zoom",D=E(n,"zoomstart","zoom","zoomend");return Oa||(Oa="onwheel"in ua?(Ha=function(){return-ta.event.deltaY*(ta.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ua?(Ha=function(){return ta.event.wheelDelta},"mousewheel"):(Ha=function(){return-ta.event.detail},"MozMousePixelScroll")),n.event=function(n){n.each(function(){var n=D.of(this,arguments),t=k;Tl?ta.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},c(n)}).tween("zoom:zoom",function(){var e=A[0],r=A[1],u=d?d[0]:e/2,i=d?d[1]:r/2,o=ta.interpolateZoom([(u-k.x)/k.k,(i-k.y)/k.k,e/k.k],[(u-t.x)/t.k,(i-t.y)/t.k,e/t.k]);return function(t){var r=o(t),a=e/r[2];this.__chart__=k={x:u-r[0]*a,y:i-r[1]*a,k:a},l(n)}}).each("interrupt.zoom",function(){s(n)}).each("end.zoom",function(){s(n)}):(this.__chart__=k,c(n),l(n),s(n))})},n.translate=function(t){return arguments.length?(k={x:+t[0],y:+t[1],k:k.k},a(),n):[k.x,k.y]},n.scale=function(t){return arguments.length?(k={x:k.x,y:k.y,k:+t},a(),n):k.k},n.scaleExtent=function(t){return arguments.length?(N=null==t?Ia:[+t[0],+t[1]],n):N},n.center=function(t){return arguments.length?(m=t&&[+t[0],+t[1]],n):m},n.size=function(t){return arguments.length?(A=t&&[+t[0],+t[1]],n):A},n.duration=function(t){return arguments.length?(C=+t,n):C},n.x=function(t){return arguments.length?(b=t,x=t.copy(),k={x:0,y:0,k:1},n):b},n.y=function(t){return arguments.length?(w=t,_=t.copy(),k={x:0,y:0,k:1},n):w},ta.rebind(n,D,"on")};var Ha,Oa,Ia=[0,1/0];ta.color=ot,ot.prototype.toString=function(){return this.rgb()+""},ta.hsl=at;var Ya=at.prototype=new ot;Ya.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new at(this.h,this.s,this.l/n)},Ya.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new at(this.h,this.s,n*this.l)},Ya.rgb=function(){return ct(this.h,this.s,this.l)},ta.hcl=lt;var Za=lt.prototype=new ot;Za.brighter=function(n){return new lt(this.h,this.c,Math.min(100,this.l+Va*(arguments.length?n:1)))},Za.darker=function(n){return new lt(this.h,this.c,Math.max(0,this.l-Va*(arguments.length?n:1)))},Za.rgb=function(){return st(this.h,this.c,this.l).rgb()},ta.lab=ft;var Va=18,Xa=.95047,$a=1,Ba=1.08883,Wa=ft.prototype=new ot;Wa.brighter=function(n){return new ft(Math.min(100,this.l+Va*(arguments.length?n:1)),this.a,this.b)},Wa.darker=function(n){return new ft(Math.max(0,this.l-Va*(arguments.length?n:1)),this.a,this.b)},Wa.rgb=function(){return ht(this.l,this.a,this.b)},ta.rgb=mt;var Ja=mt.prototype=new ot;Ja.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,u=30;return t||e||r?(t&&u>t&&(t=u),e&&u>e&&(e=u),r&&u>r&&(r=u),new mt(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new mt(u,u,u)},Ja.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new mt(n*this.r,n*this.g,n*this.b)},Ja.hsl=function(){return _t(this.r,this.g,this.b)},Ja.toString=function(){return"#"+xt(this.r)+xt(this.g)+xt(this.b)};var Ga=ta.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ga.forEach(function(n,t){Ga.set(n,yt(t))}),ta.functor=Et,ta.xhr=At(y),ta.dsv=function(n,t){function e(n,e,i){arguments.length<3&&(i=e,e=null);var o=Nt(n,t,null==e?r:u(e),i);return o.row=function(n){return arguments.length?o.response(null==(e=n)?r:u(n)):e},o}function r(n){return e.parse(n.responseText)}function u(n){return function(t){return e.parse(t.responseText,n)}}function i(t){return t.map(o).join(n)}function o(n){return a.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var a=new RegExp('["'+n+"\n]"),c=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var u=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(u(n),e)}:u})},e.parseRows=function(n,t){function e(){if(s>=l)return o;if(u)return u=!1,i;var t=s;if(34===n.charCodeAt(t)){for(var e=t;e++<l;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}s=e+2;var r=n.charCodeAt(e+1);return 13===r?(u=!0,10===n.charCodeAt(e+2)&&++s):10===r&&(u=!0),n.slice(t+1,e).replace(/""/g,'"')}for(;l>s;){var r=n.charCodeAt(s++),a=1;if(10===r)u=!0;else if(13===r)u=!0,10===n.charCodeAt(s)&&(++s,++a);else if(r!==c)continue;return n.slice(t,s-a)}return n.slice(t)}for(var r,u,i={},o={},a=[],l=n.length,s=0,f=0;(r=e())!==o;){for(var h=[];r!==i&&r!==o;)h.push(r),r=e();t&&null==(h=t(h,f++))||a.push(h)}return a},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new m,u=[];return t.forEach(function(n){for(var t in n)r.has(t)||u.push(r.add(t))}),[u.map(o).join(n)].concat(t.map(function(t){return u.map(function(n){return o(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(i).join("\n")},e},ta.csv=ta.dsv(",","text/csv"),ta.tsv=ta.dsv("	","text/tab-separated-values");var Ka,Qa,nc,tc,ec,rc=this[x(this,"requestAnimationFrame")]||function(n){setTimeout(n,17)};ta.timer=function(n,t,e){var r=arguments.length;2>r&&(t=0),3>r&&(e=Date.now());var u=e+t,i={c:n,t:u,f:!1,n:null};Qa?Qa.n=i:Ka=i,Qa=i,nc||(tc=clearTimeout(tc),nc=1,rc(qt))},ta.timer.flush=function(){Lt(),Tt()},ta.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var uc=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Dt);ta.formatPrefix=function(n,t){var e=0;return n&&(0>n&&(n*=-1),t&&(n=ta.round(n,Rt(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),uc[8+e/3]};var ic=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,oc=ta.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=ta.round(n,Rt(n,t))).toFixed(Math.max(0,Math.min(20,Rt(n*(1+1e-15),t))))}}),ac=ta.time={},cc=Date;jt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){lc.setUTCDate.apply(this._,arguments)},setDay:function(){lc.setUTCDay.apply(this._,arguments)},setFullYear:function(){lc.setUTCFullYear.apply(this._,arguments)},setHours:function(){lc.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){lc.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){lc.setUTCMinutes.apply(this._,arguments)},setMonth:function(){lc.setUTCMonth.apply(this._,arguments)},setSeconds:function(){lc.setUTCSeconds.apply(this._,arguments)},setTime:function(){lc.setTime.apply(this._,arguments)}};var lc=Date.prototype;ac.year=Ft(function(n){return n=ac.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),ac.years=ac.year.range,ac.years.utc=ac.year.utc.range,ac.day=Ft(function(n){var t=new cc(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),ac.days=ac.day.range,ac.days.utc=ac.day.utc.range,ac.dayOfYear=function(n){var t=ac.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var e=ac[n]=Ft(function(n){return(n=ac.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=ac.year(n).getDay();return Math.floor((ac.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});ac[n+"s"]=e.range,ac[n+"s"].utc=e.utc.range,ac[n+"OfYear"]=function(n){var e=ac.year(n).getDay();return Math.floor((ac.dayOfYear(n)+(e+t)%7)/7)}}),ac.week=ac.sunday,ac.weeks=ac.sunday.range,ac.weeks.utc=ac.sunday.utc.range,ac.weekOfYear=ac.sundayOfYear;var sc={"-":"",_:" ",0:"0"},fc=/^\s*\d+/,hc=/^%/;ta.locale=function(n){return{numberFormat:Pt(n),timeFormat:Ot(n)}};var gc=ta.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ta.format=gc.numberFormat,ta.geo={},ce.prototype={s:0,t:0,add:function(n){le(n,this.t,pc),le(pc.s,this.s,this),this.s?this.t+=pc.t:this.s=pc.t
+},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var pc=new ce;ta.geo.stream=function(n,t){n&&vc.hasOwnProperty(n.type)?vc[n.type](n,t):se(n,t)};var vc={Feature:function(n,t){se(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,u=e.length;++r<u;)se(e[r].geometry,t)}},dc={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){fe(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)fe(e[r],t,0)},Polygon:function(n,t){he(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)he(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,u=e.length;++r<u;)se(e[r],t)}};ta.geo.area=function(n){return mc=0,ta.geo.stream(n,Mc),mc};var mc,yc=new ce,Mc={sphere:function(){mc+=4*qa},point:b,lineStart:b,lineEnd:b,polygonStart:function(){yc.reset(),Mc.lineStart=ge},polygonEnd:function(){var n=2*yc;mc+=0>n?4*qa+n:n,Mc.lineStart=Mc.lineEnd=Mc.point=b}};ta.geo.bounds=function(){function n(n,t){M.push(x=[s=n,h=n]),f>t&&(f=t),t>g&&(g=t)}function t(t,e){var r=pe([t*Da,e*Da]);if(m){var u=de(m,r),i=[u[1],-u[0],0],o=de(i,u);Me(o),o=xe(o);var c=t-p,l=c>0?1:-1,v=o[0]*Pa*l,d=ga(c)>180;if(d^(v>l*p&&l*t>v)){var y=o[1]*Pa;y>g&&(g=y)}else if(v=(v+360)%360-180,d^(v>l*p&&l*t>v)){var y=-o[1]*Pa;f>y&&(f=y)}else f>e&&(f=e),e>g&&(g=e);d?p>t?a(s,t)>a(s,h)&&(h=t):a(t,h)>a(s,h)&&(s=t):h>=s?(s>t&&(s=t),t>h&&(h=t)):t>p?a(s,t)>a(s,h)&&(h=t):a(t,h)>a(s,h)&&(s=t)}else n(t,e);m=r,p=t}function e(){b.point=t}function r(){x[0]=s,x[1]=h,b.point=n,m=null}function u(n,e){if(m){var r=n-p;y+=ga(r)>180?r+(r>0?360:-360):r}else v=n,d=e;Mc.point(n,e),t(n,e)}function i(){Mc.lineStart()}function o(){u(v,d),Mc.lineEnd(),ga(y)>Ca&&(s=-(h=180)),x[0]=s,x[1]=h,m=null}function a(n,t){return(t-=n)<0?t+360:t}function c(n,t){return n[0]-t[0]}function l(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var s,f,h,g,p,v,d,m,y,M,x,b={point:n,lineStart:e,lineEnd:r,polygonStart:function(){b.point=u,b.lineStart=i,b.lineEnd=o,y=0,Mc.polygonStart()},polygonEnd:function(){Mc.polygonEnd(),b.point=n,b.lineStart=e,b.lineEnd=r,0>yc?(s=-(h=180),f=-(g=90)):y>Ca?g=90:-Ca>y&&(f=-90),x[0]=s,x[1]=h}};return function(n){g=h=-(s=f=1/0),M=[],ta.geo.stream(n,b);var t=M.length;if(t){M.sort(c);for(var e,r=1,u=M[0],i=[u];t>r;++r)e=M[r],l(e[0],u)||l(e[1],u)?(a(u[0],e[1])>a(u[0],u[1])&&(u[1]=e[1]),a(e[0],u[1])>a(u[0],u[1])&&(u[0]=e[0])):i.push(u=e);for(var o,e,p=-1/0,t=i.length-1,r=0,u=i[t];t>=r;u=e,++r)e=i[r],(o=a(u[1],e[0]))>p&&(p=o,s=e[0],h=u[1])}return M=x=null,1/0===s||1/0===f?[[0/0,0/0],[0/0,0/0]]:[[s,f],[h,g]]}}(),ta.geo.centroid=function(n){xc=bc=_c=wc=Sc=kc=Ec=Ac=Nc=Cc=zc=0,ta.geo.stream(n,qc);var t=Nc,e=Cc,r=zc,u=t*t+e*e+r*r;return za>u&&(t=kc,e=Ec,r=Ac,Ca>bc&&(t=_c,e=wc,r=Sc),u=t*t+e*e+r*r,za>u)?[0/0,0/0]:[Math.atan2(e,t)*Pa,tt(r/Math.sqrt(u))*Pa]};var xc,bc,_c,wc,Sc,kc,Ec,Ac,Nc,Cc,zc,qc={sphere:b,point:_e,lineStart:Se,lineEnd:ke,polygonStart:function(){qc.lineStart=Ee},polygonEnd:function(){qc.lineStart=Se}},Lc=Le(Ne,Pe,je,[-qa,-qa/2]),Tc=1e9;ta.geo.clipExtent=function(){var n,t,e,r,u,i,o={stream:function(n){return u&&(u.valid=!1),u=i(n),u.valid=!0,u},extent:function(a){return arguments.length?(i=Ie(n=+a[0][0],t=+a[0][1],e=+a[1][0],r=+a[1][1]),u&&(u.valid=!1,u=null),o):[[n,t],[e,r]]}};return o.extent([[0,0],[960,500]])},(ta.geo.conicEqualArea=function(){return Ye(Ze)}).raw=Ze,ta.geo.albers=function(){return ta.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ta.geo.albersUsa=function(){function n(n){var i=n[0],o=n[1];return t=null,e(i,o),t||(r(i,o),t)||u(i,o),t}var t,e,r,u,i=ta.geo.albers(),o=ta.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=ta.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=i.scale(),e=i.translate(),r=(n[0]-e[0])/t,u=(n[1]-e[1])/t;return(u>=.12&&.234>u&&r>=-.425&&-.214>r?o:u>=.166&&.234>u&&r>=-.214&&-.115>r?a:i).invert(n)},n.stream=function(n){var t=i.stream(n),e=o.stream(n),r=a.stream(n);return{point:function(n,u){t.point(n,u),e.point(n,u),r.point(n,u)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(i.precision(t),o.precision(t),a.precision(t),n):i.precision()},n.scale=function(t){return arguments.length?(i.scale(t),o.scale(.35*t),a.scale(t),n.translate(i.translate())):i.scale()},n.translate=function(t){if(!arguments.length)return i.translate();var l=i.scale(),s=+t[0],f=+t[1];return e=i.translate(t).clipExtent([[s-.455*l,f-.238*l],[s+.455*l,f+.238*l]]).stream(c).point,r=o.translate([s-.307*l,f+.201*l]).clipExtent([[s-.425*l+Ca,f+.12*l+Ca],[s-.214*l-Ca,f+.234*l-Ca]]).stream(c).point,u=a.translate([s-.205*l,f+.212*l]).clipExtent([[s-.214*l+Ca,f+.166*l+Ca],[s-.115*l-Ca,f+.234*l-Ca]]).stream(c).point,n},n.scale(1070)};var Rc,Dc,Pc,Uc,jc,Fc,Hc={point:b,lineStart:b,lineEnd:b,polygonStart:function(){Dc=0,Hc.lineStart=Ve},polygonEnd:function(){Hc.lineStart=Hc.lineEnd=Hc.point=b,Rc+=ga(Dc/2)}},Oc={point:Xe,lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b},Ic={point:We,lineStart:Je,lineEnd:Ge,polygonStart:function(){Ic.lineStart=Ke},polygonEnd:function(){Ic.point=We,Ic.lineStart=Je,Ic.lineEnd=Ge}};ta.geo.path=function(){function n(n){return n&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=u(i)),ta.geo.stream(n,o)),i.result()}function t(){return o=null,n}var e,r,u,i,o,a=4.5;return n.area=function(n){return Rc=0,ta.geo.stream(n,u(Hc)),Rc},n.centroid=function(n){return _c=wc=Sc=kc=Ec=Ac=Nc=Cc=zc=0,ta.geo.stream(n,u(Ic)),zc?[Nc/zc,Cc/zc]:Ac?[kc/Ac,Ec/Ac]:Sc?[_c/Sc,wc/Sc]:[0/0,0/0]},n.bounds=function(n){return jc=Fc=-(Pc=Uc=1/0),ta.geo.stream(n,u(Oc)),[[Pc,Uc],[jc,Fc]]},n.projection=function(n){return arguments.length?(u=(e=n)?n.stream||tr(n):y,t()):e},n.context=function(n){return arguments.length?(i=null==(r=n)?new $e:new Qe(n),"function"!=typeof a&&i.pointRadius(a),t()):r},n.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),n):a},n.projection(ta.geo.albersUsa()).context(null)},ta.geo.transform=function(n){return{stream:function(t){var e=new er(t);for(var r in n)e[r]=n[r];return e}}},er.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ta.geo.projection=ur,ta.geo.projectionMutator=ir,(ta.geo.equirectangular=function(){return ur(ar)}).raw=ar.invert=ar,ta.geo.rotation=function(n){function t(t){return t=n(t[0]*Da,t[1]*Da),t[0]*=Pa,t[1]*=Pa,t}return n=lr(n[0]%360*Da,n[1]*Da,n.length>2?n[2]*Da:0),t.invert=function(t){return t=n.invert(t[0]*Da,t[1]*Da),t[0]*=Pa,t[1]*=Pa,t},t},cr.invert=ar,ta.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=lr(-n[0]*Da,-n[1]*Da,0).invert,u=[];return e(null,null,1,{point:function(n,e){u.push(n=t(n,e)),n[0]*=Pa,n[1]*=Pa}}),{type:"Polygon",coordinates:[u]}}var t,e,r=[0,0],u=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=gr((t=+r)*Da,u*Da),n):t},n.precision=function(r){return arguments.length?(e=gr(t*Da,(u=+r)*Da),n):u},n.angle(90)},ta.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Da,u=n[1]*Da,i=t[1]*Da,o=Math.sin(r),a=Math.cos(r),c=Math.sin(u),l=Math.cos(u),s=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((e=f*o)*e+(e=l*s-c*f*a)*e),c*s+l*f*a)},ta.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return ta.range(Math.ceil(i/d)*d,u,d).map(h).concat(ta.range(Math.ceil(l/m)*m,c,m).map(g)).concat(ta.range(Math.ceil(r/p)*p,e,p).filter(function(n){return ga(n%d)>Ca}).map(s)).concat(ta.range(Math.ceil(a/v)*v,o,v).filter(function(n){return ga(n%m)>Ca}).map(f))}var e,r,u,i,o,a,c,l,s,f,h,g,p=10,v=p,d=90,m=360,y=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(g(c).slice(1),h(u).reverse().slice(1),g(l).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(i=+t[0][0],u=+t[1][0],l=+t[0][1],c=+t[1][1],i>u&&(t=i,i=u,u=t),l>c&&(t=l,l=c,c=t),n.precision(y)):[[i,l],[u,c]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),a>o&&(t=a,a=o,o=t),n.precision(y)):[[r,a],[e,o]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],m=+t[1],n):[d,m]},n.minorStep=function(t){return arguments.length?(p=+t[0],v=+t[1],n):[p,v]},n.precision=function(t){return arguments.length?(y=+t,s=vr(a,o,90),f=dr(r,e,y),h=vr(l,c,90),g=dr(i,u,y),n):y},n.majorExtent([[-180,-90+Ca],[180,90-Ca]]).minorExtent([[-180,-80-Ca],[180,80+Ca]])},ta.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||u.apply(this,arguments)]}}var t,e,r=mr,u=yr;return n.distance=function(){return ta.geo.distance(t||r.apply(this,arguments),e||u.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(u=t,e="function"==typeof t?null:t,n):u},n.precision=function(){return arguments.length?n:0},n},ta.geo.interpolate=function(n,t){return Mr(n[0]*Da,n[1]*Da,t[0]*Da,t[1]*Da)},ta.geo.length=function(n){return Yc=0,ta.geo.stream(n,Zc),Yc};var Yc,Zc={sphere:b,point:b,lineStart:xr,lineEnd:b,polygonStart:b,polygonEnd:b},Vc=br(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(ta.geo.azimuthalEqualArea=function(){return ur(Vc)}).raw=Vc;var Xc=br(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},y);(ta.geo.azimuthalEquidistant=function(){return ur(Xc)}).raw=Xc,(ta.geo.conicConformal=function(){return Ye(_r)}).raw=_r,(ta.geo.conicEquidistant=function(){return Ye(wr)}).raw=wr;var $c=br(function(n){return 1/n},Math.atan);(ta.geo.gnomonic=function(){return ur($c)}).raw=$c,Sr.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-Ra]},(ta.geo.mercator=function(){return kr(Sr)}).raw=Sr;var Bc=br(function(){return 1},Math.asin);(ta.geo.orthographic=function(){return ur(Bc)}).raw=Bc;var Wc=br(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(ta.geo.stereographic=function(){return ur(Wc)}).raw=Wc,Er.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-Ra]},(ta.geo.transverseMercator=function(){var n=kr(Er),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90])}).raw=Er,ta.geom={},ta.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,u=Et(e),i=Et(r),o=n.length,a=[],c=[];for(t=0;o>t;t++)a.push([+u.call(this,n[t],t),+i.call(this,n[t],t),t]);for(a.sort(zr),t=0;o>t;t++)c.push([a[t][0],-a[t][1]]);var l=Cr(a),s=Cr(c),f=s[0]===l[0],h=s[s.length-1]===l[l.length-1],g=[];for(t=l.length-1;t>=0;--t)g.push(n[a[l[t]][2]]);for(t=+f;t<s.length-h;++t)g.push(n[a[s[t]][2]]);return g}var e=Ar,r=Nr;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},ta.geom.polygon=function(n){return ya(n,Jc),n};var Jc=ta.geom.polygon.prototype=[];Jc.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],u=0;++t<e;)n=r,r=this[t],u+=n[1]*r[0]-n[0]*r[1];return.5*u},Jc.centroid=function(n){var t,e,r=-1,u=this.length,i=0,o=0,a=this[u-1];for(arguments.length||(n=-1/(6*this.area()));++r<u;)t=a,a=this[r],e=t[0]*a[1]-a[0]*t[1],i+=(t[0]+a[0])*e,o+=(t[1]+a[1])*e;return[i*n,o*n]},Jc.clip=function(n){for(var t,e,r,u,i,o,a=Tr(n),c=-1,l=this.length-Tr(this),s=this[l-1];++c<l;){for(t=n.slice(),n.length=0,u=this[c],i=t[(r=t.length-a)-1],e=-1;++e<r;)o=t[e],qr(o,s,u)?(qr(i,s,u)||n.push(Lr(i,o,s,u)),n.push(o)):qr(i,s,u)&&n.push(Lr(i,o,s,u)),i=o;a&&n.push(n[0]),s=u}return n};var Gc,Kc,Qc,nl,tl,el=[],rl=[];Or.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(Yr),t.length},Qr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nu.prototype={insert:function(n,t){var e,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=uu(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(u=r.R,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.R&&(eu(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ru(this,r))):(u=r.L,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.L&&(ru(this,e),n=e,e=n.U),e.C=!1,r.C=!0,eu(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,u=n.U,i=n.L,o=n.R;if(e=i?o?uu(o):i:o,u?u.L===n?u.L=e:u.R=e:this._=e,i&&o?(r=e.C,e.C=n.C,e.L=i,i.U=e,e!==o?(u=e.U,e.U=n.U,n=e.R,u.L=n,e.R=o,o.U=e):(e.U=u,u=e,n=e.R)):(r=n.C,n=e),n&&(n.U=u),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===u.L){if(t=u.R,t.C&&(t.C=!1,u.C=!0,eu(this,u),t=u.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ru(this,t),t=u.R),t.C=u.C,u.C=t.R.C=!1,eu(this,u),n=this._;break}}else if(t=u.L,t.C&&(t.C=!1,u.C=!0,ru(this,u),t=u.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,eu(this,t),t=u.L),t.C=u.C,u.C=t.L.C=!1,ru(this,u),n=this._;break}t.C=!0,n=u,u=u.U}while(!n.C);n&&(n.C=!1)}}},ta.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=a[0][0],u=a[0][1],i=a[1][0],o=a[1][1];return iu(e(n),a).cells.forEach(function(e,a){var c=e.edges,l=e.site,s=t[a]=c.length?c.map(function(n){var t=n.start();return[t.x,t.y]}):l.x>=r&&l.x<=i&&l.y>=u&&l.y<=o?[[r,o],[i,o],[i,u],[r,u]]:[];s.point=n[a]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(i(n,t)/Ca)*Ca,y:Math.round(o(n,t)/Ca)*Ca,i:t}})}var r=Ar,u=Nr,i=r,o=u,a=ul;return n?t(n):(t.links=function(n){return iu(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return iu(e(n)).cells.forEach(function(e,r){for(var u,i,o=e.site,a=e.edges.sort(Yr),c=-1,l=a.length,s=a[l-1].edge,f=s.l===o?s.r:s.l;++c<l;)u=s,i=f,s=a[c].edge,f=s.l===o?s.r:s.l,r<i.i&&r<f.i&&au(o,i,f)<0&&t.push([n[r],n[i.i],n[f.i]])}),t},t.x=function(n){return arguments.length?(i=Et(r=n),t):r},t.y=function(n){return arguments.length?(o=Et(u=n),t):u},t.clipExtent=function(n){return arguments.length?(a=null==n?ul:n,t):a===ul?null:a},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):a===ul?null:a&&a[1]},t)};var ul=[[-1e6,-1e6],[1e6,1e6]];ta.geom.delaunay=function(n){return ta.geom.voronoi().triangles(n)},ta.geom.quadtree=function(n,t,e,r,u){function i(n){function i(n,t,e,r,u,i,o,a){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var c=n.x,s=n.y;if(null!=c)if(ga(c-e)+ga(s-r)<.01)l(n,t,e,r,u,i,o,a);else{var f=n.point;n.x=n.y=n.point=null,l(n,f,c,s,u,i,o,a),l(n,t,e,r,u,i,o,a)}else n.x=e,n.y=r,n.point=t}else l(n,t,e,r,u,i,o,a)}function l(n,t,e,r,u,o,a,c){var l=.5*(u+a),s=.5*(o+c),f=e>=l,h=r>=s,g=h<<1|f;n.leaf=!1,n=n.nodes[g]||(n.nodes[g]=su()),f?u=l:a=l,h?o=s:c=s,i(n,t,e,r,u,o,a,c)}var s,f,h,g,p,v,d,m,y,M=Et(a),x=Et(c);if(null!=t)v=t,d=e,m=r,y=u;else if(m=y=-(v=d=1/0),f=[],h=[],p=n.length,o)for(g=0;p>g;++g)s=n[g],s.x<v&&(v=s.x),s.y<d&&(d=s.y),s.x>m&&(m=s.x),s.y>y&&(y=s.y),f.push(s.x),h.push(s.y);else for(g=0;p>g;++g){var b=+M(s=n[g],g),_=+x(s,g);v>b&&(v=b),d>_&&(d=_),b>m&&(m=b),_>y&&(y=_),f.push(b),h.push(_)}var w=m-v,S=y-d;w>S?y=d+w:m=v+S;var k=su();if(k.add=function(n){i(k,n,+M(n,++g),+x(n,g),v,d,m,y)},k.visit=function(n){fu(n,k,v,d,m,y)},k.find=function(n){return hu(k,n[0],n[1],v,d,m,y)},g=-1,null==t){for(;++g<p;)i(k,n[g],f[g],h[g],v,d,m,y);--g}else n.forEach(k.add);return f=h=n=s=null,k}var o,a=Ar,c=Nr;return(o=arguments.length)?(a=cu,c=lu,3===o&&(u=e,r=t,e=t=0),i(n)):(i.x=function(n){return arguments.length?(a=n,i):a},i.y=function(n){return arguments.length?(c=n,i):c},i.extent=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],u=+n[1][1]),i):null==t?null:[[t,e],[r,u]]},i.size=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=e=0,r=+n[0],u=+n[1]),i):null==t?null:[r-t,u-e]},i)},ta.interpolateRgb=gu,ta.interpolateObject=pu,ta.interpolateNumber=vu,ta.interpolateString=du;var il=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ol=new RegExp(il.source,"g");ta.interpolate=mu,ta.interpolators=[function(n,t){var e=typeof t;return("string"===e?Ga.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?gu:du:t instanceof ot?gu:Array.isArray(t)?yu:"object"===e&&isNaN(t)?pu:vu)(n,t)}],ta.interpolateArray=yu;var al=function(){return y},cl=ta.map({linear:al,poly:ku,quad:function(){return _u},cubic:function(){return wu},sin:function(){return Eu},exp:function(){return Au},circle:function(){return Nu},elastic:Cu,back:zu,bounce:function(){return qu}}),ll=ta.map({"in":y,out:xu,"in-out":bu,"out-in":function(n){return bu(xu(n))}});ta.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return e=cl.get(e)||al,r=ll.get(r)||y,Mu(r(e.apply(null,ea.call(arguments,1))))},ta.interpolateHcl=Lu,ta.interpolateHsl=Tu,ta.interpolateLab=Ru,ta.interpolateRound=Du,ta.transform=function(n){var t=ua.createElementNS(ta.ns.prefix.svg,"g");return(ta.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new Pu(e?e.matrix:sl)})(n)},Pu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var sl={a:1,b:0,c:0,d:1,e:0,f:0};ta.interpolateTransform=Hu,ta.layout={},ta.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(Yu(n[e]));return t}},ta.layout.chord=function(){function n(){var n,l,f,h,g,p={},v=[],d=ta.range(i),m=[];for(e=[],r=[],n=0,h=-1;++h<i;){for(l=0,g=-1;++g<i;)l+=u[h][g];v.push(l),m.push(ta.range(i)),n+=l}for(o&&d.sort(function(n,t){return o(v[n],v[t])}),a&&m.forEach(function(n,t){n.sort(function(n,e){return a(u[t][n],u[t][e])})}),n=(La-s*i)/n,l=0,h=-1;++h<i;){for(f=l,g=-1;++g<i;){var y=d[h],M=m[y][g],x=u[y][M],b=l,_=l+=x*n;p[y+"-"+M]={index:y,subindex:M,startAngle:b,endAngle:_,value:x}}r[y]={index:y,startAngle:f,endAngle:l,value:(l-f)/n},l+=s}for(h=-1;++h<i;)for(g=h-1;++g<i;){var w=p[h+"-"+g],S=p[g+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}c&&t()}function t(){e.sort(function(n,t){return c((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,u,i,o,a,c,l={},s=0;return l.matrix=function(n){return arguments.length?(i=(u=n)&&u.length,e=r=null,l):u},l.padding=function(n){return arguments.length?(s=n,e=r=null,l):s},l.sortGroups=function(n){return arguments.length?(o=n,e=r=null,l):o},l.sortSubgroups=function(n){return arguments.length?(a=n,e=null,l):a},l.sortChords=function(n){return arguments.length?(c=n,e&&t(),l):c},l.chords=function(){return e||n(),e},l.groups=function(){return r||n(),r},l},ta.layout.force=function(){function n(n){return function(t,e,r,u){if(t.point!==n){var i=t.cx-n.x,o=t.cy-n.y,a=u-e,c=i*i+o*o;if(c>a*a/d){if(p>c){var l=t.charge/c;n.px-=i*l,n.py-=o*l}return!0}if(t.point&&c&&p>c){var l=t.pointCharge/c;n.px-=i*l,n.py-=o*l}}return!t.charge}}function t(n){n.px=ta.event.x,n.py=ta.event.y,a.resume()}var e,r,u,i,o,a={},c=ta.dispatch("start","tick","end"),l=[1,1],s=.9,f=fl,h=hl,g=-30,p=gl,v=.1,d=.64,m=[],M=[];return a.tick=function(){if((r*=.99)<.005)return c.end({type:"end",alpha:r=0}),!0;var t,e,a,f,h,p,d,y,x,b=m.length,_=M.length;for(e=0;_>e;++e)a=M[e],f=a.source,h=a.target,y=h.x-f.x,x=h.y-f.y,(p=y*y+x*x)&&(p=r*i[e]*((p=Math.sqrt(p))-u[e])/p,y*=p,x*=p,h.x-=y*(d=f.weight/(h.weight+f.weight)),h.y-=x*d,f.x+=y*(d=1-d),f.y+=x*d);if((d=r*v)&&(y=l[0]/2,x=l[1]/2,e=-1,d))for(;++e<b;)a=m[e],a.x+=(y-a.x)*d,a.y+=(x-a.y)*d;if(g)for(Ju(t=ta.geom.quadtree(m),r,o),e=-1;++e<b;)(a=m[e]).fixed||t.visit(n(a));for(e=-1;++e<b;)a=m[e],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*s,a.y-=(a.py-(a.py=a.y))*s);c.tick({type:"tick",alpha:r})},a.nodes=function(n){return arguments.length?(m=n,a):m},a.links=function(n){return arguments.length?(M=n,a):M},a.size=function(n){return arguments.length?(l=n,a):l},a.linkDistance=function(n){return arguments.length?(f="function"==typeof n?n:+n,a):f},a.distance=a.linkDistance,a.linkStrength=function(n){return arguments.length?(h="function"==typeof n?n:+n,a):h},a.friction=function(n){return arguments.length?(s=+n,a):s},a.charge=function(n){return arguments.length?(g="function"==typeof n?n:+n,a):g},a.chargeDistance=function(n){return arguments.length?(p=n*n,a):Math.sqrt(p)},a.gravity=function(n){return arguments.length?(v=+n,a):v},a.theta=function(n){return arguments.length?(d=n*n,a):Math.sqrt(d)},a.alpha=function(n){return arguments.length?(n=+n,r?r=n>0?n:0:n>0&&(c.start({type:"start",alpha:r=n}),ta.timer(a.tick)),a):r},a.start=function(){function n(n,r){if(!e){for(e=new Array(c),a=0;c>a;++a)e[a]=[];for(a=0;s>a;++a){var u=M[a];e[u.source.index].push(u.target),e[u.target.index].push(u.source)}}for(var i,o=e[t],a=-1,l=o.length;++a<l;)if(!isNaN(i=o[a][n]))return i;return Math.random()*r}var t,e,r,c=m.length,s=M.length,p=l[0],v=l[1];for(t=0;c>t;++t)(r=m[t]).index=t,r.weight=0;for(t=0;s>t;++t)r=M[t],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(t=0;c>t;++t)r=m[t],isNaN(r.x)&&(r.x=n("x",p)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(u=[],"function"==typeof f)for(t=0;s>t;++t)u[t]=+f.call(this,M[t],t);else for(t=0;s>t;++t)u[t]=f;if(i=[],"function"==typeof h)for(t=0;s>t;++t)i[t]=+h.call(this,M[t],t);else for(t=0;s>t;++t)i[t]=h;if(o=[],"function"==typeof g)for(t=0;c>t;++t)o[t]=+g.call(this,m[t],t);else for(t=0;c>t;++t)o[t]=g;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return e||(e=ta.behavior.drag().origin(y).on("dragstart.force",Xu).on("drag.force",t).on("dragend.force",$u)),arguments.length?void this.on("mouseover.force",Bu).on("mouseout.force",Wu).call(e):e},ta.rebind(a,c,"on")};var fl=20,hl=1,gl=1/0;ta.layout.hierarchy=function(){function n(u){var i,o=[u],a=[];for(u.depth=0;null!=(i=o.pop());)if(a.push(i),(l=e.call(n,i,i.depth))&&(c=l.length)){for(var c,l,s;--c>=0;)o.push(s=l[c]),s.parent=i,s.depth=i.depth+1;r&&(i.value=0),i.children=l}else r&&(i.value=+r.call(n,i,i.depth)||0),delete i.children;return Qu(u,function(n){var e,u;t&&(e=n.children)&&e.sort(t),r&&(u=n.parent)&&(u.value+=n.value)}),a}var t=ei,e=ni,r=ti;return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(Ku(t,function(n){n.children&&(n.value=0)}),Qu(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},ta.layout.partition=function(){function n(t,e,r,u){var i=t.children;if(t.x=e,t.y=t.depth*u,t.dx=r,t.dy=u,i&&(o=i.length)){var o,a,c,l=-1;for(r=t.value?r/t.value:0;++l<o;)n(a=i[l],e,c=a.value*r,u),e+=c}}function t(n){var e=n.children,r=0;if(e&&(u=e.length))for(var u,i=-1;++i<u;)r=Math.max(r,t(e[i]));return 1+r}function e(e,i){var o=r.call(this,e,i);return n(o[0],0,u[0],u[1]/t(o[0])),o}var r=ta.layout.hierarchy(),u=[1,1];return e.size=function(n){return arguments.length?(u=n,e):u},Gu(e,r)},ta.layout.pie=function(){function n(o){var a,c=o.length,l=o.map(function(e,r){return+t.call(n,e,r)}),s=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof u?u.apply(this,arguments):u)-s,h=Math.min(Math.abs(f)/c,+("function"==typeof i?i.apply(this,arguments):i)),g=h*(0>f?-1:1),p=(f-c*g)/ta.sum(l),v=ta.range(c),d=[];return null!=e&&v.sort(e===pl?function(n,t){return l[t]-l[n]}:function(n,t){return e(o[n],o[t])}),v.forEach(function(n){d[n]={data:o[n],value:a=l[n],startAngle:s,endAngle:s+=a*p+g,padAngle:h}}),d}var t=Number,e=pl,r=0,u=La,i=0;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(u=t,n):u},n.padAngle=function(t){return arguments.length?(i=t,n):i},n};var pl={};ta.layout.stack=function(){function n(a,c){if(!(h=a.length))return a;var l=a.map(function(e,r){return t.call(n,e,r)}),s=l.map(function(t){return t.map(function(t,e){return[i.call(n,t,e),o.call(n,t,e)]})}),f=e.call(n,s,c);l=ta.permute(l,f),s=ta.permute(s,f);var h,g,p,v,d=r.call(n,s,c),m=l[0].length;for(p=0;m>p;++p)for(u.call(n,l[0][p],v=d[p],s[0][p][1]),g=1;h>g;++g)u.call(n,l[g][p],v+=s[g-1][p][1],s[g][p][1]);return a}var t=y,e=ai,r=ci,u=oi,i=ui,o=ii;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:vl.get(t)||ai,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:dl.get(t)||ci,n):r},n.x=function(t){return arguments.length?(i=t,n):i},n.y=function(t){return arguments.length?(o=t,n):o},n.out=function(t){return arguments.length?(u=t,n):u},n};var vl=ta.map({"inside-out":function(n){var t,e,r=n.length,u=n.map(li),i=n.map(si),o=ta.range(r).sort(function(n,t){return u[n]-u[t]}),a=0,c=0,l=[],s=[];for(t=0;r>t;++t)e=o[t],c>a?(a+=i[e],l.push(e)):(c+=i[e],s.push(e));return s.reverse().concat(l)},reverse:function(n){return ta.range(n.length).reverse()},"default":ai}),dl=ta.map({silhouette:function(n){var t,e,r,u=n.length,i=n[0].length,o=[],a=0,c=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];r>a&&(a=r),o.push(r)}for(e=0;i>e;++e)c[e]=(a-o[e])/2;return c},wiggle:function(n){var t,e,r,u,i,o,a,c,l,s=n.length,f=n[0],h=f.length,g=[];for(g[0]=c=l=0,e=1;h>e;++e){for(t=0,u=0;s>t;++t)u+=n[t][e][1];for(t=0,i=0,a=f[e][0]-f[e-1][0];s>t;++t){for(r=0,o=(n[t][e][1]-n[t][e-1][1])/(2*a);t>r;++r)o+=(n[r][e][1]-n[r][e-1][1])/a;i+=o*n[t][e][1]}g[e]=c-=u?i/u*a:0,l>c&&(l=c)}for(e=0;h>e;++e)g[e]-=l;return g},expand:function(n){var t,e,r,u=n.length,i=n[0].length,o=1/u,a=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];if(r)for(t=0;u>t;t++)n[t][e][1]/=r;else for(t=0;u>t;t++)n[t][e][1]=o}for(e=0;i>e;++e)a[e]=0;return a},zero:ci});ta.layout.histogram=function(){function n(n,i){for(var o,a,c=[],l=n.map(e,this),s=r.call(this,l,i),f=u.call(this,s,l,i),i=-1,h=l.length,g=f.length-1,p=t?1:1/h;++i<g;)o=c[i]=[],o.dx=f[i+1]-(o.x=f[i]),o.y=0;if(g>0)for(i=-1;++i<h;)a=l[i],a>=s[0]&&a<=s[1]&&(o=c[ta.bisect(f,a,1,g)-1],o.y+=p,o.push(n[i]));return c}var t=!0,e=Number,r=pi,u=hi;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=Et(t),n):r},n.bins=function(t){return arguments.length?(u="number"==typeof t?function(n){return gi(n,t)}:Et(t),n):u},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},ta.layout.pack=function(){function n(n,i){var o=e.call(this,n,i),a=o[0],c=u[0],l=u[1],s=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(a.x=a.y=0,Qu(a,function(n){n.r=+s(n.value)}),Qu(a,Mi),r){var f=r*(t?1:Math.max(2*a.r/c,2*a.r/l))/2;Qu(a,function(n){n.r+=f}),Qu(a,Mi),Qu(a,function(n){n.r-=f})}return _i(a,c/2,l/2,t?1:1/Math.max(2*a.r/c,2*a.r/l)),o}var t,e=ta.layout.hierarchy().sort(vi),r=0,u=[1,1];return n.size=function(t){return arguments.length?(u=t,n):u},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},Gu(n,e)},ta.layout.tree=function(){function n(n,u){var s=o.call(this,n,u),f=s[0],h=t(f);if(Qu(h,e),h.parent.m=-h.z,Ku(h,r),l)Ku(f,i);else{var g=f,p=f,v=f;Ku(f,function(n){n.x<g.x&&(g=n),n.x>p.x&&(p=n),n.depth>v.depth&&(v=n)});var d=a(g,p)/2-g.x,m=c[0]/(p.x+a(p,g)/2+d),y=c[1]/(v.depth||1);Ku(f,function(n){n.x=(n.x+d)*m,n.y=n.depth*y})}return s}function t(n){for(var t,e={A:null,children:[n]},r=[e];null!=(t=r.pop());)for(var u,i=t.children,o=0,a=i.length;a>o;++o)r.push((i[o]=u={_:i[o],parent:t,children:(u=i[o].children)&&u.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=u);return e.children[0]}function e(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;if(t.length){Ni(n);var i=(t[0].z+t[t.length-1].z)/2;r?(n.z=r.z+a(n._,r._),n.m=n.z-i):n.z=i}else r&&(n.z=r.z+a(n._,r._));n.parent.A=u(n,r,n.parent.A||e[0])}function r(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function u(n,t,e){if(t){for(var r,u=n,i=n,o=t,c=u.parent.children[0],l=u.m,s=i.m,f=o.m,h=c.m;o=Ei(o),u=ki(u),o&&u;)c=ki(c),i=Ei(i),i.a=n,r=o.z+f-u.z-l+a(o._,u._),r>0&&(Ai(Ci(o,n,e),n,r),l+=r,s+=r),f+=o.m,l+=u.m,h+=c.m,s+=i.m;o&&!Ei(i)&&(i.t=o,i.m+=f-s),u&&!ki(c)&&(c.t=u,c.m+=l-h,e=n)}return e}function i(n){n.x*=c[0],n.y=n.depth*c[1]}var o=ta.layout.hierarchy().sort(null).value(null),a=Si,c=[1,1],l=null;return n.separation=function(t){return arguments.length?(a=t,n):a},n.size=function(t){return arguments.length?(l=null==(c=t)?i:null,n):l?null:c},n.nodeSize=function(t){return arguments.length?(l=null==(c=t)?null:i,n):l?c:null},Gu(n,o)},ta.layout.cluster=function(){function n(n,i){var o,a=t.call(this,n,i),c=a[0],l=0;Qu(c,function(n){var t=n.children;t&&t.length?(n.x=qi(t),n.y=zi(t)):(n.x=o?l+=e(n,o):0,n.y=0,o=n)});var s=Li(c),f=Ti(c),h=s.x-e(s,f)/2,g=f.x+e(f,s)/2;return Qu(c,u?function(n){n.x=(n.x-c.x)*r[0],n.y=(c.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(g-h)*r[0],n.y=(1-(c.y?n.y/c.y:1))*r[1]}),a}var t=ta.layout.hierarchy().sort(null).value(null),e=Si,r=[1,1],u=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(u=null==(r=t),n):u?null:r},n.nodeSize=function(t){return arguments.length?(u=null!=(r=t),n):u?r:null},Gu(n,t)},ta.layout.treemap=function(){function n(n,t){for(var e,r,u=-1,i=n.length;++u<i;)r=(e=n[u]).value*(0>t?0:t),e.area=isNaN(r)||0>=r?0:r}function t(e){var i=e.children;if(i&&i.length){var o,a,c,l=f(e),s=[],h=i.slice(),p=1/0,v="slice"===g?l.dx:"dice"===g?l.dy:"slice-dice"===g?1&e.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(n(h,l.dx*l.dy/e.value),s.area=0;(c=h.length)>0;)s.push(o=h[c-1]),s.area+=o.area,"squarify"!==g||(a=r(s,v))<=p?(h.pop(),p=a):(s.area-=s.pop().area,u(s,v,l,!1),v=Math.min(l.dx,l.dy),s.length=s.area=0,p=1/0);s.length&&(u(s,v,l,!0),s.length=s.area=0),i.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var i,o=f(t),a=r.slice(),c=[];for(n(a,o.dx*o.dy/t.value),c.area=0;i=a.pop();)c.push(i),c.area+=i.area,null!=i.z&&(u(c,i.z?o.dx:o.dy,o,!a.length),c.length=c.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,u=0,i=1/0,o=-1,a=n.length;++o<a;)(e=n[o].area)&&(i>e&&(i=e),e>u&&(u=e));return r*=r,t*=t,r?Math.max(t*u*p/r,r/(t*i*p)):1/0}function u(n,t,e,r){var u,i=-1,o=n.length,a=e.x,l=e.y,s=t?c(n.area/t):0;if(t==e.dx){for((r||s>e.dy)&&(s=e.dy);++i<o;)u=n[i],u.x=a,u.y=l,u.dy=s,a+=u.dx=Math.min(e.x+e.dx-a,s?c(u.area/s):0);u.z=!0,u.dx+=e.x+e.dx-a,e.y+=s,e.dy-=s}else{for((r||s>e.dx)&&(s=e.dx);++i<o;)u=n[i],u.x=a,u.y=l,u.dx=s,l+=u.dy=Math.min(e.y+e.dy-l,s?c(u.area/s):0);u.z=!1,u.dy+=e.y+e.dy-l,e.x+=s,e.dx-=s}}function i(r){var u=o||a(r),i=u[0];return i.x=0,i.y=0,i.dx=l[0],i.dy=l[1],o&&a.revalue(i),n([i],i.dx*i.dy/i.value),(o?e:t)(i),h&&(o=u),u}var o,a=ta.layout.hierarchy(),c=Math.round,l=[1,1],s=null,f=Ri,h=!1,g="squarify",p=.5*(1+Math.sqrt(5));
+return i.size=function(n){return arguments.length?(l=n,i):l},i.padding=function(n){function t(t){var e=n.call(i,t,t.depth);return null==e?Ri(t):Di(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Di(t,n)}if(!arguments.length)return s;var r;return f=null==(s=n)?Ri:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,i},i.round=function(n){return arguments.length?(c=n?Math.round:Number,i):c!=Number},i.sticky=function(n){return arguments.length?(h=n,o=null,i):h},i.ratio=function(n){return arguments.length?(p=n,i):p},i.mode=function(n){return arguments.length?(g=n+"",i):g},Gu(i,a)},ta.random={normal:function(n,t){var e=arguments.length;return 2>e&&(t=1),1>e&&(n=0),function(){var e,r,u;do e=2*Math.random()-1,r=2*Math.random()-1,u=e*e+r*r;while(!u||u>1);return n+t*e*Math.sqrt(-2*Math.log(u)/u)}},logNormal:function(){var n=ta.random.normal.apply(ta,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=ta.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;n>e;e++)t+=Math.random();return t}}},ta.scale={};var ml={floor:y,ceil:y};ta.scale.linear=function(){return Ii([0,1],[0,1],mu,!1)};var yl={s:1,g:1,p:1,r:1,e:1};ta.scale.log=function(){return Ji(ta.scale.linear().domain([0,1]),10,!0,[1,10])};var Ml=ta.format(".0e"),xl={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};ta.scale.pow=function(){return Gi(ta.scale.linear(),1,[0,1])},ta.scale.sqrt=function(){return ta.scale.pow().exponent(.5)},ta.scale.ordinal=function(){return Qi([],{t:"range",a:[[]]})},ta.scale.category10=function(){return ta.scale.ordinal().range(bl)},ta.scale.category20=function(){return ta.scale.ordinal().range(_l)},ta.scale.category20b=function(){return ta.scale.ordinal().range(wl)},ta.scale.category20c=function(){return ta.scale.ordinal().range(Sl)};var bl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Mt),_l=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Mt),wl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Mt),Sl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Mt);ta.scale.quantile=function(){return no([],[])},ta.scale.quantize=function(){return to(0,1,[0,1])},ta.scale.threshold=function(){return eo([.5],[0,1])},ta.scale.identity=function(){return ro([0,1])},ta.svg={},ta.svg.arc=function(){function n(){var n=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),s=o.apply(this,arguments)-Ra,f=a.apply(this,arguments)-Ra,h=Math.abs(f-s),g=s>f?0:1;if(n>l&&(p=l,l=n,n=p),h>=Ta)return t(l,g)+(n?t(n,1-g):"")+"Z";var p,v,d,m,y,M,x,b,_,w,S,k,E=0,A=0,N=[];if((m=(+c.apply(this,arguments)||0)/2)&&(d=i===kl?Math.sqrt(n*n+l*l):+i.apply(this,arguments),g||(A*=-1),l&&(A=tt(d/l*Math.sin(m))),n&&(E=tt(d/n*Math.sin(m)))),l){y=l*Math.cos(s+A),M=l*Math.sin(s+A),x=l*Math.cos(f-A),b=l*Math.sin(f-A);var C=Math.abs(f-s-2*A)<=qa?0:1;if(A&&so(y,M,x,b)===g^C){var z=(s+f)/2;y=l*Math.cos(z),M=l*Math.sin(z),x=b=null}}else y=M=0;if(n){_=n*Math.cos(f-E),w=n*Math.sin(f-E),S=n*Math.cos(s+E),k=n*Math.sin(s+E);var q=Math.abs(s-f+2*E)<=qa?0:1;if(E&&so(_,w,S,k)===1-g^q){var L=(s+f)/2;_=n*Math.cos(L),w=n*Math.sin(L),S=k=null}}else _=w=0;if((p=Math.min(Math.abs(l-n)/2,+u.apply(this,arguments)))>.001){v=l>n^g?0:1;var T=null==S?[_,w]:null==x?[y,M]:Lr([y,M],[S,k],[x,b],[_,w]),R=y-T[0],D=M-T[1],P=x-T[0],U=b-T[1],j=1/Math.sin(Math.acos((R*P+D*U)/(Math.sqrt(R*R+D*D)*Math.sqrt(P*P+U*U)))/2),F=Math.sqrt(T[0]*T[0]+T[1]*T[1]);if(null!=x){var H=Math.min(p,(l-F)/(j+1)),O=fo(null==S?[_,w]:[S,k],[y,M],l,H,g),I=fo([x,b],[_,w],l,H,g);p===H?N.push("M",O[0],"A",H,",",H," 0 0,",v," ",O[1],"A",l,",",l," 0 ",1-g^so(O[1][0],O[1][1],I[1][0],I[1][1]),",",g," ",I[1],"A",H,",",H," 0 0,",v," ",I[0]):N.push("M",O[0],"A",H,",",H," 0 1,",v," ",I[0])}else N.push("M",y,",",M);if(null!=S){var Y=Math.min(p,(n-F)/(j-1)),Z=fo([y,M],[S,k],n,-Y,g),V=fo([_,w],null==x?[y,M]:[x,b],n,-Y,g);p===Y?N.push("L",V[0],"A",Y,",",Y," 0 0,",v," ",V[1],"A",n,",",n," 0 ",g^so(V[1][0],V[1][1],Z[1][0],Z[1][1]),",",1-g," ",Z[1],"A",Y,",",Y," 0 0,",v," ",Z[0]):N.push("L",V[0],"A",Y,",",Y," 0 0,",v," ",Z[0])}else N.push("L",_,",",w)}else N.push("M",y,",",M),null!=x&&N.push("A",l,",",l," 0 ",C,",",g," ",x,",",b),N.push("L",_,",",w),null!=S&&N.push("A",n,",",n," 0 ",q,",",1-g," ",S,",",k);return N.push("Z"),N.join("")}function t(n,t){return"M0,"+n+"A"+n+","+n+" 0 1,"+t+" 0,"+-n+"A"+n+","+n+" 0 1,"+t+" 0,"+n}var e=io,r=oo,u=uo,i=kl,o=ao,a=co,c=lo;return n.innerRadius=function(t){return arguments.length?(e=Et(t),n):e},n.outerRadius=function(t){return arguments.length?(r=Et(t),n):r},n.cornerRadius=function(t){return arguments.length?(u=Et(t),n):u},n.padRadius=function(t){return arguments.length?(i=t==kl?kl:Et(t),n):i},n.startAngle=function(t){return arguments.length?(o=Et(t),n):o},n.endAngle=function(t){return arguments.length?(a=Et(t),n):a},n.padAngle=function(t){return arguments.length?(c=Et(t),n):c},n.centroid=function(){var n=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +a.apply(this,arguments))/2-Ra;return[Math.cos(t)*n,Math.sin(t)*n]},n};var kl="auto";ta.svg.line=function(){return ho(y)};var El=ta.map({linear:go,"linear-closed":po,step:vo,"step-before":mo,"step-after":yo,basis:So,"basis-open":ko,"basis-closed":Eo,bundle:Ao,cardinal:bo,"cardinal-open":Mo,"cardinal-closed":xo,monotone:To});El.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var Al=[0,2/3,1/3,0],Nl=[0,1/3,2/3,0],Cl=[0,1/6,2/3,1/6];ta.svg.line.radial=function(){var n=ho(Ro);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},mo.reverse=yo,yo.reverse=mo,ta.svg.area=function(){return Do(y)},ta.svg.area.radial=function(){var n=Do(Ro);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},ta.svg.chord=function(){function n(n,a){var c=t(this,i,n,a),l=t(this,o,n,a);return"M"+c.p0+r(c.r,c.p1,c.a1-c.a0)+(e(c,l)?u(c.r,c.p1,c.r,c.p0):u(c.r,c.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+u(l.r,l.p1,c.r,c.p0))+"Z"}function t(n,t,e,r){var u=t.call(n,e,r),i=a.call(n,u,r),o=c.call(n,u,r)-Ra,s=l.call(n,u,r)-Ra;return{r:i,a0:o,a1:s,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>qa)+",1 "+t}function u(n,t,e,r){return"Q 0,0 "+r}var i=mr,o=yr,a=Po,c=ao,l=co;return n.radius=function(t){return arguments.length?(a=Et(t),n):a},n.source=function(t){return arguments.length?(i=Et(t),n):i},n.target=function(t){return arguments.length?(o=Et(t),n):o},n.startAngle=function(t){return arguments.length?(c=Et(t),n):c},n.endAngle=function(t){return arguments.length?(l=Et(t),n):l},n},ta.svg.diagonal=function(){function n(n,u){var i=t.call(this,n,u),o=e.call(this,n,u),a=(i.y+o.y)/2,c=[i,{x:i.x,y:a},{x:o.x,y:a},o];return c=c.map(r),"M"+c[0]+"C"+c[1]+" "+c[2]+" "+c[3]}var t=mr,e=yr,r=Uo;return n.source=function(e){return arguments.length?(t=Et(e),n):t},n.target=function(t){return arguments.length?(e=Et(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},ta.svg.diagonal.radial=function(){var n=ta.svg.diagonal(),t=Uo,e=n.projection;return n.projection=function(n){return arguments.length?e(jo(t=n)):t},n},ta.svg.symbol=function(){function n(n,r){return(zl.get(t.call(this,n,r))||Oo)(e.call(this,n,r))}var t=Ho,e=Fo;return n.type=function(e){return arguments.length?(t=Et(e),n):t},n.size=function(t){return arguments.length?(e=Et(t),n):e},n};var zl=ta.map({circle:Oo,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Ll)),e=t*Ll;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/ql),e=t*ql/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/ql),e=t*ql/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});ta.svg.symbolTypes=zl.keys();var ql=Math.sqrt(3),Ll=Math.tan(30*Da);_a.transition=function(n){for(var t,e,r=Tl||++Ul,u=Xo(n),i=[],o=Rl||{time:Date.now(),ease:Su,delay:0,duration:250},a=-1,c=this.length;++a<c;){i.push(t=[]);for(var l=this[a],s=-1,f=l.length;++s<f;)(e=l[s])&&$o(e,s,u,r,o),t.push(e)}return Yo(i,u,r)},_a.interrupt=function(n){return this.each(null==n?Dl:Io(Xo(n)))};var Tl,Rl,Dl=Io(Xo()),Pl=[],Ul=0;Pl.call=_a.call,Pl.empty=_a.empty,Pl.node=_a.node,Pl.size=_a.size,ta.transition=function(n,t){return n&&n.transition?Tl?n.transition(t):n:ta.selection().transition(n)},ta.transition.prototype=Pl,Pl.select=function(n){var t,e,r,u=this.id,i=this.namespace,o=[];n=N(n);for(var a=-1,c=this.length;++a<c;){o.push(t=[]);for(var l=this[a],s=-1,f=l.length;++s<f;)(r=l[s])&&(e=n.call(r,r.__data__,s,a))?("__data__"in r&&(e.__data__=r.__data__),$o(e,s,i,u,r[i][u]),t.push(e)):t.push(null)}return Yo(o,i,u)},Pl.selectAll=function(n){var t,e,r,u,i,o=this.id,a=this.namespace,c=[];n=C(n);for(var l=-1,s=this.length;++l<s;)for(var f=this[l],h=-1,g=f.length;++h<g;)if(r=f[h]){i=r[a][o],e=n.call(r,r.__data__,h,l),c.push(t=[]);for(var p=-1,v=e.length;++p<v;)(u=e[p])&&$o(u,p,a,o,i),t.push(u)}return Yo(c,a,o)},Pl.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]);for(var e=this[i],a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return Yo(u,this.namespace,this.id)},Pl.tween=function(n,t){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(n):Y(this,null==t?function(t){t[r][e].tween.remove(n)}:function(u){u[r][e].tween.set(n,t)})},Pl.attr=function(n,t){function e(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function u(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=o(e,n),function(n){this.setAttribute(a,t(n))})})}function i(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=o(e,n),function(n){this.setAttributeNS(a.space,a.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var o="transform"==n?Hu:mu,a=ta.ns.qualify(n);return Zo(this,"attr."+n,t,a.local?i:u)},Pl.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(u));return r&&function(n){this.setAttribute(u,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(u.space,u.local));return r&&function(n){this.setAttributeNS(u.space,u.local,r(n))}}var u=ta.ns.qualify(n);return this.tween("attr."+n,u.local?r:e)},Pl.style=function(n,e,r){function u(){this.style.removeProperty(n)}function i(e){return null==e?u:(e+="",function(){var u,i=t(this).getComputedStyle(this,null).getPropertyValue(n);return i!==e&&(u=mu(i,e),function(t){this.style.setProperty(n,u(t),r)})})}var o=arguments.length;if(3>o){if("string"!=typeof n){2>o&&(e="");for(r in n)this.style(r,n[r],e);return this}r=""}return Zo(this,"style."+n,e,i)},Pl.styleTween=function(n,e,r){function u(u,i){var o=e.call(this,u,i,t(this).getComputedStyle(this,null).getPropertyValue(n));return o&&function(t){this.style.setProperty(n,o(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+n,u)},Pl.text=function(n){return Zo(this,"text",n,Vo)},Pl.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Pl.ease=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].ease:("function"!=typeof n&&(n=ta.ease.apply(ta,arguments)),Y(this,function(r){r[e][t].ease=n}))},Pl.delay=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].delay:Y(this,"function"==typeof n?function(r,u,i){r[e][t].delay=+n.call(r,r.__data__,u,i)}:(n=+n,function(r){r[e][t].delay=n}))},Pl.duration=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].duration:Y(this,"function"==typeof n?function(r,u,i){r[e][t].duration=Math.max(1,n.call(r,r.__data__,u,i))}:(n=Math.max(1,n),function(r){r[e][t].duration=n}))},Pl.each=function(n,t){var e=this.id,r=this.namespace;if(arguments.length<2){var u=Rl,i=Tl;try{Tl=e,Y(this,function(t,u,i){Rl=t[r][e],n.call(t,t.__data__,u,i)})}finally{Rl=u,Tl=i}}else Y(this,function(u){var i=u[r][e];(i.event||(i.event=ta.dispatch("start","end","interrupt"))).on(n,t)});return this},Pl.transition=function(){for(var n,t,e,r,u=this.id,i=++Ul,o=this.namespace,a=[],c=0,l=this.length;l>c;c++){a.push(n=[]);for(var t=this[c],s=0,f=t.length;f>s;s++)(e=t[s])&&(r=e[o][u],$o(e,s,o,i,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),n.push(e)}return Yo(a,o,i)},ta.svg.axis=function(){function n(n){n.each(function(){var n,l=ta.select(this),s=this.__chart__||e,f=this.__chart__=e.copy(),h=null==c?f.ticks?f.ticks.apply(f,a):f.domain():c,g=null==t?f.tickFormat?f.tickFormat.apply(f,a):y:t,p=l.selectAll(".tick").data(h,f),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ca),d=ta.transition(p.exit()).style("opacity",Ca).remove(),m=ta.transition(p.order()).style("opacity",1),M=Math.max(u,0)+o,x=Ui(f),b=l.selectAll(".domain").data([0]),_=(b.enter().append("path").attr("class","domain"),ta.transition(b));v.append("line"),v.append("text");var w,S,k,E,A=v.select("line"),N=m.select("line"),C=p.select("text").text(g),z=v.select("text"),q=m.select("text"),L="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(n=Bo,w="x",k="y",S="x2",E="y2",C.attr("dy",0>L?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+L*i+"V0H"+x[1]+"V"+L*i)):(n=Wo,w="y",k="x",S="y2",E="x2",C.attr("dy",".32em").style("text-anchor",0>L?"end":"start"),_.attr("d","M"+L*i+","+x[0]+"H0V"+x[1]+"H"+L*i)),A.attr(E,L*u),z.attr(k,L*M),N.attr(S,0).attr(E,L*u),q.attr(w,0).attr(k,L*M),f.rangeBand){var T=f,R=T.rangeBand()/2;s=f=function(n){return T(n)+R}}else s.rangeBand?s=f:d.call(n,f,s);v.call(n,s,f),m.call(n,f,f)})}var t,e=ta.scale.linear(),r=jl,u=6,i=6,o=3,a=[10],c=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Fl?t+"":jl,n):r},n.ticks=function(){return arguments.length?(a=arguments,n):a},n.tickValues=function(t){return arguments.length?(c=t,n):c},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(u=+t,i=+arguments[e-1],n):u},n.innerTickSize=function(t){return arguments.length?(u=+t,n):u},n.outerTickSize=function(t){return arguments.length?(i=+t,n):i},n.tickPadding=function(t){return arguments.length?(o=+t,n):o},n.tickSubdivide=function(){return arguments.length&&n},n};var jl="bottom",Fl={top:1,right:1,bottom:1,left:1};ta.svg.brush=function(){function n(t){t.each(function(){var t=ta.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=t.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=t.selectAll(".resize").data(v,y);a.exit().remove(),a.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return Hl[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",n.empty()?"none":null);var c,f=ta.transition(t),h=ta.transition(o);l&&(c=Ui(l),h.attr("x",c[0]).attr("width",c[1]-c[0]),r(f)),s&&(c=Ui(s),h.attr("y",c[0]).attr("height",c[1]-c[0]),u(f)),e(f)})}function e(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+f[+/e$/.test(n)]+","+h[+/^s/.test(n)]+")"})}function r(n){n.select(".extent").attr("x",f[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function u(n){n.select(".extent").attr("y",h[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){32==ta.event.keyCode&&(C||(M=null,q[0]-=f[1],q[1]-=h[1],C=2),S())}function v(){32==ta.event.keyCode&&2==C&&(q[0]+=f[1],q[1]+=h[1],C=0,S())}function d(){var n=ta.mouse(b),t=!1;x&&(n[0]+=x[0],n[1]+=x[1]),C||(ta.event.altKey?(M||(M=[(f[0]+f[1])/2,(h[0]+h[1])/2]),q[0]=f[+(n[0]<M[0])],q[1]=h[+(n[1]<M[1])]):M=null),A&&m(n,l,0)&&(r(k),t=!0),N&&m(n,s,1)&&(u(k),t=!0),t&&(e(k),w({type:"brush",mode:C?"move":"resize"}))}function m(n,t,e){var r,u,i=Ui(t),c=i[0],l=i[1],s=q[e],v=e?h:f,d=v[1]-v[0];return C&&(c-=s,l-=d+s),r=(e?p:g)?Math.max(c,Math.min(l,n[e])):n[e],C?u=(r+=s)+d:(M&&(s=Math.max(c,Math.min(l,2*M[e]-r))),r>s?(u=r,r=s):u=s),v[0]!=r||v[1]!=u?(e?a=null:o=null,v[0]=r,v[1]=u,!0):void 0}function y(){d(),k.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),ta.select("body").style("cursor",null),L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),w({type:"brushend"})}var M,x,b=this,_=ta.select(ta.event.target),w=c.of(b,arguments),k=ta.select(b),E=_.datum(),A=!/^(n|s)$/.test(E)&&l,N=!/^(e|w)$/.test(E)&&s,C=_.classed("extent"),z=W(b),q=ta.mouse(b),L=ta.select(t(b)).on("keydown.brush",i).on("keyup.brush",v);if(ta.event.changedTouches?L.on("touchmove.brush",d).on("touchend.brush",y):L.on("mousemove.brush",d).on("mouseup.brush",y),k.interrupt().selectAll("*").interrupt(),C)q[0]=f[0]-q[0],q[1]=h[0]-q[1];else if(E){var T=+/w$/.test(E),R=+/^n/.test(E);x=[f[1-T]-q[0],h[1-R]-q[1]],q[0]=f[T],q[1]=h[R]}else ta.event.altKey&&(M=q.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),ta.select("body").style("cursor",_.style("cursor")),w({type:"brushstart"}),d()}var o,a,c=E(n,"brushstart","brush","brushend"),l=null,s=null,f=[0,0],h=[0,0],g=!0,p=!0,v=Ol[0];return n.event=function(n){n.each(function(){var n=c.of(this,arguments),t={x:f,y:h,i:o,j:a},e=this.__chart__||t;this.__chart__=t,Tl?ta.select(this).transition().each("start.brush",function(){o=e.i,a=e.j,f=e.x,h=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=yu(f,t.x),r=yu(h,t.y);return o=a=null,function(u){f=t.x=e(u),h=t.y=r(u),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,a=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(l=t,v=Ol[!l<<1|!s],n):l},n.y=function(t){return arguments.length?(s=t,v=Ol[!l<<1|!s],n):s},n.clamp=function(t){return arguments.length?(l&&s?(g=!!t[0],p=!!t[1]):l?g=!!t:s&&(p=!!t),n):l&&s?[g,p]:l?g:s?p:null},n.extent=function(t){var e,r,u,i,c;return arguments.length?(l&&(e=t[0],r=t[1],s&&(e=e[0],r=r[0]),o=[e,r],l.invert&&(e=l(e),r=l(r)),e>r&&(c=e,e=r,r=c),(e!=f[0]||r!=f[1])&&(f=[e,r])),s&&(u=t[0],i=t[1],l&&(u=u[1],i=i[1]),a=[u,i],s.invert&&(u=s(u),i=s(i)),u>i&&(c=u,u=i,i=c),(u!=h[0]||i!=h[1])&&(h=[u,i])),n):(l&&(o?(e=o[0],r=o[1]):(e=f[0],r=f[1],l.invert&&(e=l.invert(e),r=l.invert(r)),e>r&&(c=e,e=r,r=c))),s&&(a?(u=a[0],i=a[1]):(u=h[0],i=h[1],s.invert&&(u=s.invert(u),i=s.invert(i)),u>i&&(c=u,u=i,i=c))),l&&s?[[e,u],[r,i]]:l?[e,r]:s&&[u,i])},n.clear=function(){return n.empty()||(f=[0,0],h=[0,0],o=a=null),n},n.empty=function(){return!!l&&f[0]==f[1]||!!s&&h[0]==h[1]},ta.rebind(n,c,"on")};var Hl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ol=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Il=ac.format=gc.timeFormat,Yl=Il.utc,Zl=Yl("%Y-%m-%dT%H:%M:%S.%LZ");Il.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Jo:Zl,Jo.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},Jo.toString=Zl.toString,ac.second=Ft(function(n){return new cc(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),ac.seconds=ac.second.range,ac.seconds.utc=ac.second.utc.range,ac.minute=Ft(function(n){return new cc(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),ac.minutes=ac.minute.range,ac.minutes.utc=ac.minute.utc.range,ac.hour=Ft(function(n){var t=n.getTimezoneOffset()/60;return new cc(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),ac.hours=ac.hour.range,ac.hours.utc=ac.hour.utc.range,ac.month=Ft(function(n){return n=ac.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),ac.months=ac.month.range,ac.months.utc=ac.month.utc.range;var Vl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Xl=[[ac.second,1],[ac.second,5],[ac.second,15],[ac.second,30],[ac.minute,1],[ac.minute,5],[ac.minute,15],[ac.minute,30],[ac.hour,1],[ac.hour,3],[ac.hour,6],[ac.hour,12],[ac.day,1],[ac.day,2],[ac.week,1],[ac.month,1],[ac.month,3],[ac.year,1]],$l=Il.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",Ne]]),Bl={range:function(n,t,e){return ta.range(Math.ceil(n/e)*e,+t,e).map(Ko)},floor:y,ceil:y};Xl.year=ac.year,ac.scale=function(){return Go(ta.scale.linear(),Xl,$l)};var Wl=Xl.map(function(n){return[n[0].utc,n[1]]}),Jl=Yl.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",Ne]]);Wl.year=ac.year.utc,ac.scale.utc=function(){return Go(ta.scale.linear(),Wl,Jl)},ta.text=At(function(n){return n.responseText}),ta.json=function(n,t){return Nt(n,"application/json",Qo,t)},ta.html=function(n,t){return Nt(n,"text/html",na,t)},ta.xml=At(function(n){return n.responseXML}),"function"==typeof define&&define.amd?define(ta):"object"==typeof module&&module.exports&&(module.exports=ta),this.d3=ta}();
\ No newline at end of file
diff --git a/libraries/highlight/CHANGES.md b/libraries/highlight/CHANGES.md
new file mode 100644
index 0000000..c716b83
--- /dev/null
+++ b/libraries/highlight/CHANGES.md
@@ -0,0 +1,1237 @@
+## Version 8.9.1
+
+Some last-minute changes reverted due to strange bug with minified browser build:
+
+- Scala case classes params highlight fixed
+- ECMAScript 6 modules import now do not require closing semicolon
+- ECMAScript 6 classes constructors now highlighted
+- Template string support for Typescript, as for ECMAScript 6
+- License added to not minified browser build
+
+## Version 8.9.0
+
+New languages:
+
+- *crmsh* by [Kristoffer Gronlund][]
+- *SQF* by [Sren Enevoldsen][]
+
+Notable fixes and improvements to existing languages:
+
+- Added `abstract` and `namespace` keywords to TypeScript by [Daniel Rosenwasser][]
+- Added `label` support to Dockerfile by [Ladislav Prskavec][]
+- Crystal highlighting improved by [Tsuyusato Kitsune][]
+- Missing Swift keywords added by [Nate Cook][]
+- Improve detection of C block comments
+- Scala case classes params highlight fixed
+- ECMAScript 6 modules import now do not require closing semicolon
+- ECMAScript 6 classes constructors now highlighted
+- Template string support for Typescript, as for ECMAScript 6
+
+Other notable changes:
+
+- License added to not minified browser build
+
+[Kristoffer Gronlund]: https://github.com/krig
+[Sren Enevoldsen]: https://github.com/senevoldsen90
+[Daniel Rosenwasser]: https://github.com/DanielRosenwasser
+[Ladislav Prskavec]: https://github.com/abtris
+[Tsuyusato Kitsune]: https://github.com/MakeNowJust
+[Nate Cook]: https://github.com/natecook1000
+
+## Version 8.8.0
+
+New languages:
+
+- *Golo* by [Philippe Charrire][]
+- *GAMS* by [Stefan Bechert][]
+- *IRPF90* by [Anthony Scemama][]
+- *Access logs* by [Oleg Efimov][]
+- *Crystal* by [Tsuyusato Kitsune][]
+
+Notable fixes and improvements to existing languages:
+
+- JavaScript highlighting no longer fails with ES6 default parameters
+- Added keywords `async` and `await` to Python
+- PHP heredoc support improved
+- Allow preprocessor directives within C++ functions
+
+Other notable changes:
+
+- Change versions to X.Y.Z SemVer-compatible format
+- Added ability to build all targets at once
+
+[Philippe Charrire]: https://github.com/k33g
+[Stefan Bechert]: https://github.com/b-pos465
+[Anthony Scemama]: https://github.com/scemama
+[Oleg Efimov]: https://github.com/Sannis
+[Tsuyusato Kitsune]: https://github.com/MakeNowJust
+
+## Version 8.7
+
+New languages:
+
+- *Zephir* by [Oleg Efimov][]
+- *Elm* by [Janis Voigtlnder][]
+- *XQuery* by [Dirk Kirsten][]
+- *Mojolicious* by [Dotan Dimet][]
+- *AutoIt* by Manh Tuan from [J2TeaM][]
+- *Toml* (ini extension) by [Guillaume Gomez][]
+
+New Styles:
+
+- *Hopscotch* by [Jan T. Sott][]
+- *Grayscale* by [MY Sun][]
+
+Notable fixes and improvements to existing languages:
+
+- Fix encoding of images when copied over in certain builds
+- Fix incorrect highlighting of the word "bug" in comments
+- Treat decorators different from matrix multiplication in Python
+- Fix traits inheritance highlighting in Rust
+- Fix incorrect document
+- Oracle keywords added to SQL language definition by [Vadimtro][]
+- Postgres keywords added to SQL language definition by [Benjamin Auder][]
+- Fix registers in x86asm being highlighted as a hex number
+- Fix highlighting for numbers with a leading decimal point
+- Correctly highlight numbers and strings inside of C/C++ macros
+- C/C++ functions now support pointer, reference, and move returns
+
+[Oleg Efimov]: https://github.com/Sannis
+[Guillaume Gomez]: https://github.com/GuillaumeGomez
+[Janis Voigtlnder]: https://github.com/jvoigtlaender
+[Jan T. Sott]: https://github.com/idleberg
+[Dirk Kirsten]: https://github.com/dirkk
+[MY Sun]: https://github.com/simonmysun
+[Vadimtro]: https://github.com/Vadimtro
+[Benjamin Auder]: https://github.com/ghost
+[Dotan Dimet]: https://github.com/dotandimet
+[J2TeaM]: https://github.com/J2TeaM
+
+## Version 8.6
+
+New languages:
+
+- *C/AL* by [Kenneth Fuglsang][]
+- *DNS zone file* by [Tim Schumacher][]
+- *Ceylon* by [Lucas Werkmeister][]
+- *OpenSCAD* by [Dan Panzarella][]
+- *Inform7* by [Bruno Dias][]
+- *armasm* by [Dan Panzarella][]
+- *TP* by [Jay Strybis][]
+
+New Styles:
+
+- *Atelier Cave*, *Atelier Estuary*,
+  *Atelier Plateau* and *Atelier Savanna* by [Bram de Haan][]
+- *Github Gist* by [Louis Barranqueiro][]
+
+Notable fixes and improvements to existing languages:
+
+- Multi-line raw strings from C++11 are now supported
+- Fix class names with dashes in HAML
+- The `async` keyword from ES6/7 is now supported
+- TypeScript functions handle type and parameter complexity better
+- We unified phpdoc/javadoc/yardoc etc modes across all languages
+- CSS .class selectors relevance was dropped to prevent wrong language detection
+- Images is now included to CDN build
+- Release process is now automated
+
+[Bram de Haan]: https://github.com/atelierbram
+[Kenneth Fuglsang]: https://github.com/kfuglsang
+[Louis Barranqueiro]: https://github.com/LouisBarranqueiro
+[Tim Schumacher]: https://github.com/enko
+[Lucas Werkmeister]: https://github.com/lucaswerkmeister
+[Dan Panzarella]: https://github.com/pzl
+[Bruno Dias]: https://github.com/sequitur
+[Jay Strybis]: https://github.com/unreal
+
+## Version 8.5
+
+New languages:
+
+- *pf.conf* by [Peter Piwowarski][]
+- *Julia* by [Kenta Sato][]
+- *Prolog* by [Raivo Laanemets][]
+- *Docker* by [Alexis Hnaut][]
+- *Fortran* by [Anthony Scemama][] and [Thomas Applencourt][]
+- *Kotlin* by [Sergey Mashkov][]
+
+New Styles:
+
+- *Agate* by [Taufik Nurrohman][]
+- *Darkula* by [Jet Brains][]
+- *Atelier Sulphurpool* by [Bram de Haan][]
+- *Android Studio* by [Pedro Oliveira][]
+
+Notable fixes and improvements to existing languages:
+
+- ES6 features in JavaScript are better supported now by [Gu Yiling][].
+- Swift now recognizes body-less method definitions.
+- Single expression functions `def foo, do: ... ` now work in Elixir.
+- More uniform detection of built-in classes in Objective C.
+- Fixes for number literals and processor directives in Rust.
+- HTML `<script>` tag now allows any language, not just JavaScript.
+- Multi-line comments are supported now in MatLab.
+
+[Taufik Nurrohman]: https://github.com/tovic
+[Jet Brains]: https://www.jetbrains.com/
+[Peter Piwowarski]: https://github.com/oldlaptop
+[Kenta Sato]: https://github.com/bicycle1885
+[Bram de Haan]: https://github.com/atelierbram
+[Raivo Laanemets]: https://github.com/rla
+[Alexis Hnaut]: https://github.com/AlexisNo
+[Anthony Scemama]: https://github.com/scemama
+[Pedro Oliveira]: https://github.com/kanytu
+[Gu Yiling]: https://github.com/Justineo
+[Sergey Mashkov]: https://github.com/cy6erGn0m
+[Thomas Applencourt]: https://github.com/TApplencourt
+
+## Version 8.4
+
+We've got the new [demo page][]! The obvious new feature is the new look, but
+apart from that it's got smarter: by presenting languages in groups it avoids
+running 10000 highlighting attempts after first load which was slowing it down
+and giving bad overall impression. It is now also being generated from test
+code snippets so the authors of new languages don't have to update both tests
+and the demo page with the same thing.
+
+Other notable changes:
+
+- The `template_comment` class is gone in favor of the more general `comment`.
+- Number parsing unified and improved across languages.
+- C++, Java and C# now use unified grammar to highlight titles in
+  function/method definitions.
+- The browser build is now usable as an AMD module, there's no separate build
+  target for that anymore.
+- OCaml has got a [comprehensive overhaul][ocaml] by [Mickal Delahaye][].
+- Clojure's data structures and literals are now highlighted outside of lists
+  and we can now highlight Clojure's REPL sessions.
+
+New languages:
+
+- *AspectJ* by [Hakan zler][]
+- *STEP Part 21* by [Adam Joseph Cook][]
+- *SML* derived by [Edwin Dalorzo][] from OCaml definition
+- *Mercury* by [mucaho][]
+- *Smali* by [Dennis Titze][]
+- *Verilog* by [Jon Evans][]
+- *Stata* by [Brian Quistorff][]
+
+[Hakan zler]: https://github.com/ozlerhakan
+[Adam Joseph Cook]: https://github.com/adamjcook
+[demo page]: https://highlightjs.org/static/demo/
+[Ivan Sagalaev]: https://github.com/isagalaev
+[Edwin Dalorzo]: https://github.com/edalorzo
+[mucaho]: https://github.com/mucaho
+[Dennis Titze]: https://github.com/titze
+[Jon Evans]: https://github.com/craftyjon
+[Brian Quistorff]: https://github.com/bquistorff
+[ocaml]: https://github.com/isagalaev/highlight.js/pull/608#issue-46190207
+[Mickal Delahaye]: https://github.com/polazarus
+
+
+## Version 8.3
+
+We streamlined our tool chain, it is now based entirely on node.js instead of
+being a mix of node.js, Python and Java. The build script options and arguments
+remained the same, and we've noted all the changes in the [documentation][b].
+Apart from reducing complexity, the new build script is also faster from not
+having to start Java machine repeatedly. The credits for the work go to [Jeremy
+Hull][].
+
+Some notable fixes:
+
+- PHP and JavaScript mixed in HTML now live happily with each other.
+- JavaScript regexes now understand ES6 flags "u" and "y".
+- `throw` keyword is no longer detected as a method name in Java.
+- Fixed parsing of numbers and symbols in Clojure thanks to [input from Ivan
+  Kleshnin][ik].
+
+New languages in this release:
+
+- *Less* by [Max Mikhailov][]
+- *Stylus* by [Bryant Williams][]
+- *Tcl* by [Radek Liska][]
+- *Puppet* by [Jose Molina Colmenero][]
+- *Processing* by [Erik Paluka][]
+- *Twig* templates by [Luke Holder][]
+- *PowerShell* by [David Mohundro][], based on [the work of Nicholas Blumhardt][ps]
+- *XL* by [Christophe de Dinechin][]
+- *LiveScript* by [Taneli Vatanen][] and [Jen Evers-Corvina][]
+- *ERB* (Ruby in HTML) by [Lucas Mazza][]
+- *Roboconf* by [Vincent Zurczak][]
+
+[b]: http://highlightjs.readthedocs.org/en/latest/building-testing.html
+[Jeremy Hull]: https://github.com/sourrust
+[ik]: https://twitter.com/IvanKleshnin/status/514041599484231680
+[Max Mikhailov]: https://github.com/seven-phases-max
+[Bryant Williams]: https://github.com/scien
+[Radek Liska]: https://github.com/Nindaleth
+[Jose Molina Colmenero]: https://github.com/Moliholy
+[Erik Paluka]: https://github.com/paluka
+[Luke Holder]: https://github.com/lukeholder
+[David Mohundro]: https://github.com/drmohundro
+[ps]: https://github.com/OctopusDeploy/Library/blob/master/app/shared/presentation/highlighting/powershell.js
+[Christophe de Dinechin]: https://github.com/c3d
+[Taneli Vatanen]: https://github.com/Daiz-
+[Jen Evers-Corvina]: https://github.com/sevvie
+[Lucas Mazza]: https://github.com/lucasmazza
+[Vincent Zurczak]: https://github.com/vincent-zurczak
+
+
+## Version 8.2
+
+We've finally got [real tests][test] and [continuous testing on Travis][ci]
+thanks to [Jeremy Hull][] and [Chris Eidhof][]. The tests designed to cover
+everything: language detection, correct parsing of individual language features
+and various special cases. This is a very important change that gives us
+confidence in extending language definitions and refactoring library core.
+
+We're going to redesign the old [demo/test suite][demo] into an interactive
+demo web app. If you're confident front-end developer or designer and want to
+help us with it, drop a comment into [the issue][#542] on GitHub.
+
+[test]: https://github.com/isagalaev/highlight.js/tree/master/test
+[demo]: https://highlightjs.org/static/test.html
+[#542]: https://github.com/isagalaev/highlight.js/issues/542
+[ci]: https://travis-ci.org/isagalaev/highlight.js
+[Jeremy Hull]: https://github.com/sourrust
+[Chris Eidhof]: https://github.com/chriseidhof
+
+As usually there's a handful of new languages in this release:
+
+- *Groovy* by [Guillaume Laforge][]
+- *Dart* by [Maxim Dikun][]
+- *Dust* by [Michael Allen][]
+- *Scheme* by [JP Verkamp][]
+- *G-Code* by [Adam Joseph Cook][]
+- *Q* from Kx Systems by [Sergey Vidyuk][]
+
+[Guillaume Laforge]: https://github.com/glaforge
+[Maxim Dikun]: https://github.com/dikmax
+[Michael Allen]: https://github.com/bfui
+[JP Verkamp]: https://github.com/jpverkamp
+[Adam Joseph Cook]: https://github.com/adamjcook
+[Sergey Vidyuk]: https://github.com/sv
+
+Other improvements:
+
+- [Erik Osheim][] heavily reworked Scala definitions making it richer.
+- [Lucas Mazza][] fixed Ruby hashes highlighting
+- Lisp variants (Lisp, Clojure and Scheme) are unified in regard to naming
+  the first symbol in parentheses: it's "keyword" in general case and also
+  "built_in" for built-in functions in Clojure and Scheme.
+
+[Erik Osheim]: https://github.com/non
+[Lucas Mazza]: https://github.com/lucasmazza
+
+## Version 8.1
+
+New languages:
+
+- *Gherkin* by [Sam Pikesley][]
+- *Elixir* by [Josh Adams][]
+- *NSIS* by [Jan T. Sott][]
+- *VIM script* by [Jun Yang][]
+- *Protocol Buffers* by [Dan Tao][]
+- *Nix* by [Domen Koar][]
+- *x86asm* by [innocenat][]
+- *Capn Proto* and *Thrift* by [Oleg Efimov][]
+- *Monkey* by [Arthur Bikmullin][]
+- *TypeScript* by [Panu Horsmalahti][]
+- *Nimrod* by [Flaviu Tamas][]
+- *Gradle* by [Damian Mee][]
+- *Haxe* by [Christopher Kaster][]
+- *Swift* by [Chris Eidhof][] and [Nate Cook][]
+
+New styles:
+
+- *Kimbie*, light and dark variants by [Jan T. Sott][]
+- *Color brewer* by [Fabrcio Tavares de Oliveira][]
+- *Codepen.io embed* by [Justin Perry][]
+- *Hybrid* by [Nic West][]
+
+[Sam Pikesley]: https://github.com/pikesley
+[Sindre Sorhus]: https://github.com/sindresorhus
+[Josh Adams]: https://github.com/knewter
+[Jan T. Sott]: https://github.com/idleberg
+[Jun Yang]: https://github.com/harttle
+[Dan Tao]: https://github.com/dtao
+[Domen Koar]: https://github.com/iElectric
+[innocenat]: https://github.com/innocenat
+[Oleg Efimov]: https://github.com/Sannis
+[Arthur Bikmullin]: https://github.com/devolonter
+[Panu Horsmalahti]: https://github.com/panuhorsmalahti
+[Flaviu Tamas]: https://github.com/flaviut
+[Damian Mee]: https://github.com/chester1000
+[Christopher Kaster]: http://christopher.kaster.ws
+[Fabrcio Tavares de Oliveira]: https://github.com/fabriciotav
+[Justin Perry]: https://github.com/ourmaninamsterdam
+[Nic West]: https://github.com/nicwest
+[Chris Eidhof]: https://github.com/chriseidhof
+[Nate Cook]: https://github.com/natecook1000
+
+Other improvements:
+
+- The README is heavily reworked and brought up to date by [Jeremy Hull][].
+- Added [`listLanguages()`][ll] method in the API.
+- Improved C/C++/C# detection.
+- Added a bunch of new language aliases, documented the existing ones. Thanks to
+  [Sindre Sorhus][] for background research.
+- Added phrasal English words to boost relevance in comments.
+- Many improvements to SQL definition made by [Heiko August][],
+  [Nikolay Lisienko][] and [Travis Odom][].
+- The shorter `lang-` prefix for language names in HTML classes supported
+  alongside `language-`. Thanks to [Jeff Escalante][].
+- Ruby's got support for interactive console sessions. Thanks to
+  [Pascal Hurni][].
+- Added built-in functions for R language. Thanks to [Artem A. Klevtsov][].
+- Rust's got definition for lifetime parameters and improved string syntax.
+  Thanks to [Roman Shmatov][].
+- Various improvements to Objective-C definition by [Matt Diephouse][].
+- Fixed highlighting of generics in Java.
+
+[ll]: http://highlightjs.readthedocs.org/en/latest/api.html#listlanguages
+[Sindre Sorhus]: https://github.com/sindresorhus
+[Heiko August]: https://github.com/auge8472
+[Nikolay Lisienko]: https://github.com/neor-ru
+[Travis Odom]: https://github.com/Burstaholic
+[Jeff Escalante]: https://github.com/jenius
+[Pascal Hurni]: https://github.com/phurni
+[Jiyin Yiyong]: https://github.com/jiyinyiyong
+[Artem A. Klevtsov]: https://github.com/unikum
+[Roman Shmatov]: https://github.com/shmatov
+[Jeremy Hull]: https://github.com/sourrust
+[Matt Diephouse]: https://github.com/mdiep
+
+
+## Version 8.0
+
+This new major release is quite a big overhaul bringing both new features and
+some backwards incompatible changes. However, chances are that the majority of
+users won't be affected by the latter: the basic scenario described in the
+README is left intact.
+
+Here's what did change in an incompatible way:
+
+- We're now prefixing all classes located in [CSS classes reference][cr] with
+  `hljs-`, by default, because some class names would collide with other
+  people's stylesheets. If you were using an older version, you might still want
+  the previous behavior, but still want to upgrade. To suppress this new
+  behavior, you would initialize like so:
+
+  ```html
+  <script type="text/javascript">
+    hljs.configure({classPrefix: ''});
+    hljs.initHighlightingOnLoad();
+  </script>
+  ```
+
+- `tabReplace` and `useBR` that were used in different places are also unified
+  into the global options object and are to be set using `configure(options)`.
+  This function is documented in our [API docs][]. Also note that these
+  parameters are gone from `highlightBlock` and `fixMarkup` which are now also
+  rely on `configure`.
+
+- We removed public-facing (though undocumented) object `hljs.LANGUAGES` which
+  was used to register languages with the library in favor of two new methods:
+  `registerLanguage` and `getLanguage`. Both are documented in our [API docs][].
+
+- Result returned from `highlight` and `highlightAuto` no longer contains two
+  separate attributes contributing to relevance score, `relevance` and
+  `keyword_count`. They are now unified in `relevance`.
+
+Another technically compatible change that nonetheless might need attention:
+
+- The structure of the NPM package was refactored, so if you had installed it
+  locally, you'll have to update your paths. The usual `require('highlight.js')`
+  works as before. This is contributed by [Dmitry Smolin][].
+
+New features:
+
+- Languages now can be recognized by multiple names like "js" for JavaScript or
+  "html" for, well, HTML (which earlier insisted on calling it "xml"). These
+  aliases can be specified in the class attribute of the code container in your
+  HTML as well as in various API calls. For now there are only a few very common
+  aliases but we'll expand it in the future. All of them are listed in the
+  [class reference][cr].
+
+- Language detection can now be restricted to a subset of languages relevant in
+  a given context  a web page or even a single highlighting call. This is
+  especially useful for node.js build that includes all the known languages.
+  Another example is a StackOverflow-style site where users specify languages
+  as tags rather than in the markdown-formatted code snippets. This is
+  documented in the [API reference][] (see methods `highlightAuto` and
+  `configure`).
+
+- Language definition syntax streamlined with [variants][] and
+  [beginKeywords][].
+
+New languages and styles:
+
+- *Oxygene* by [Carlo Kok][]
+- *Mathematica* by [Daniel Kvasnika][]
+- *Autohotkey* by [Seongwon Lee][]
+- *Atelier* family of styles in 10 variants by [Bram de Haan][]
+- *Paraso* styles by [Jan T. Sott][]
+
+Miscellaneous improvements:
+
+- Highlighting `=>` prompts in Clojure.
+- [Jeremy Hull][] fixed a lot of styles for consistency.
+- Finally, highlighting PHP and HTML [mixed in peculiar ways][php-html].
+- Objective C and C# now properly highlight titles in method definition.
+- Big overhaul of relevance counting for a number of languages. Please do report
+  bugs about mis-detection of non-trivial code snippets!
+
+[API reference]: http://highlightjs.readthedocs.org/en/latest/api.html
+
+[cr]: http://highlightjs.readthedocs.org/en/latest/css-classes-reference.html
+[api docs]: http://highlightjs.readthedocs.org/en/latest/api.html
+[variants]: https://groups.google.com/d/topic/highlightjs/VoGC9-1p5vk/discussion
+[beginKeywords]: https://github.com/isagalaev/highlight.js/commit/6c7fdea002eb3949577a85b3f7930137c7c3038d
+[php-html]: https://twitter.com/highlightjs/status/408890903017689088
+
+[Carlo Kok]: https://github.com/carlokok
+[Bram de Haan]: https://github.com/atelierbram
+[Daniel Kvasnika]: https://github.com/dkvasnicka
+[Dmitry Smolin]: https://github.com/dimsmol
+[Jeremy Hull]: https://github.com/sourrust
+[Seongwon Lee]: https://github.com/dlimpid
+[Jan T. Sott]: https://github.com/idleberg
+
+
+## Version 7.5
+
+A catch-up release dealing with some of the accumulated contributions. This one
+is probably will be the last before the 8.0 which will be slightly backwards
+incompatible regarding some advanced use-cases.
+
+One outstanding change in this version is the addition of 6 languages to the
+[hosted script][d]: Markdown, ObjectiveC, CoffeeScript, Apache, Nginx and
+Makefile. It now weighs about 6K more but we're going to keep it under 30K.
+
+New languages:
+
+- OCaml by [Mehdi Dogguy][mehdid] and [Nicolas Braud-Santoni][nbraud]
+- [LiveCode Server][lcs] by [Ralf Bitter][revig]
+- Scilab by [Sylvestre Ledru][sylvestre]
+- basic support for Makefile by [Ivan Sagalaev][isagalaev]
+
+Improvements:
+
+- Ruby's got support for characters like `?A`, `?1`, `?\012` etc. and `%r{..}`
+  regexps.
+- Clojure now allows a function call in the beginning of s-expressions
+  `(($filter "myCount") (arr 1 2 3 4 5))`.
+- Haskell's got new keywords and now recognizes more things like pragmas,
+  preprocessors, modules, containers, FFIs etc. Thanks to [Zena Treep][treep]
+  for the implementation and to [Jeremy Hull][sourrust] for guiding it.
+- Miscellaneous fixes in PHP, Brainfuck, SCSS, Asciidoc, CMake, Python and F#.
+
+[mehdid]: https://github.com/mehdid
+[nbraud]: https://github.com/nbraud
+[revig]: https://github.com/revig
+[lcs]: http://livecode.com/developers/guides/server/
+[sylvestre]: https://github.com/sylvestre
+[isagalaev]: https://github.com/isagalaev
+[treep]: https://github.com/treep
+[sourrust]: https://github.com/sourrust
+[d]: http://highlightjs.org/download/
+
+
+## New core developers
+
+The latest long period of almost complete inactivity in the project coincided
+with growing interest to it led to a decision that now seems completely obvious:
+we need more core developers.
+
+So without further ado let me welcome to the core team two long-time
+contributors: [Jeremy Hull][] and [Oleg
+Efimov][].
+
+Hope now we'll be able to work through stuff faster!
+
+P.S. The historical commit is [here][1] for the record.
+
+[Jeremy Hull]: https://github.com/sourrust
+[Oleg Efimov]: https://github.com/sannis
+[1]: https://github.com/isagalaev/highlight.js/commit/f3056941bda56d2b72276b97bc0dd5f230f2473f
+
+
+## Version 7.4
+
+This long overdue version is a snapshot of the current source tree with all the
+changes that happened during the past year. Sorry for taking so long!
+
+Along with the changes in code highlight.js has finally got its new home at
+<http://highlightjs.org/>, moving from its cradle on Software Maniacs which it
+outgrew a long time ago. Be sure to report any bugs about the site to
+<mailto:info@highlightjs.org>.
+
+On to what's new
+
+New languages:
+
+- Handlebars templates by [Robin Ward][]
+- Oracle Rules Language by [Jason Jacobson][]
+- F# by [Joans Folles][]
+- AsciiDoc and Haml by [Dan Allen][]
+- Lasso by [Eric Knibbe][]
+- SCSS by [Kurt Emch][]
+- VB.NET by [Poren Chiang][]
+- Mizar by [Kelley van Evert][]
+
+[Robin Ward]: https://github.com/eviltrout
+[Jason Jacobson]: https://github.com/jayce7
+[Joans Folles]: https://github.com/follesoe
+[Dan Allen]: https://github.com/mojavelinux
+[Eric Knibbe]: https://github.com/EricFromCanada
+[Kurt Emch]: https://github.com/kemch
+[Poren Chiang]: https://github.com/rschiang
+[Kelley van Evert]: https://github.com/kelleyvanevert
+
+New style themes:
+
+- Monokai Sublime by [noformnocontent][]
+- Railscasts by [Damien White][]
+- Obsidian by [Alexander Marenin][]
+- Docco by [Simon Madine][]
+- Mono Blue by [Ivan Sagalaev][] (uses a single color hue for everything)
+- Foundation by [Dan Allen][]
+
+[noformnocontent]: http://nn.mit-license.org/
+[Damien White]: https://github.com/visoft
+[Alexander Marenin]: https://github.com/ioncreature
+[Simon Madine]: https://github.com/thingsinjars
+[Ivan Sagalaev]: https://github.com/isagalaev
+
+Other notable changes:
+
+- Corrected many corner cases in CSS.
+- Dropped Python 2 version of the build tool.
+- Implemented building for the AMD format.
+- Updated Rust keywords (thanks to [Dmitry Medvinsky][]).
+- Literal regexes can now be used in language definitions.
+- CoffeeScript highlighting is now significantly more robust and rich due to
+  input from [Cdric Nhmie][].
+
+[Dmitry Medvinsky]: https://github.com/dmedvinsky
+[Cdric Nhmie]: https://github.com/abe33
+
+
+## Version 7.3
+
+- Since this version highlight.js no longer works in IE version 8 and older.
+  It's made it possible to reduce the library size and dramatically improve code
+  readability and made it easier to maintain. Time to go forward!
+
+- New languages: AppleScript (by [Nathan Grigg][ng] and [Dr. Drang][dd]) and
+  Brainfuck (by [Evgeny Stepanischev][bolk]).
+
+- Improvements to existing languages:
+
+    - interpreter prompt in Python (`>>>` and `...`)
+    - @-properties and classes in CoffeeScript
+    - E4X in JavaScript (by [Oleg Efimov][oe])
+    - new keywords in Perl (by [Kirk Kimmel][kk])
+    - big Ruby syntax update (by [Vasily Polovnyov][vast])
+    - small fixes in Bash
+
+- Also Oleg Efimov did a great job of moving all the docs for language and style
+  developers and contributors from the old wiki under the source code in the
+  "docs" directory. Now these docs are nicely presented at
+  <http://highlightjs.readthedocs.org/>.
+
+[ng]: https://github.com/nathan11g
+[dd]: https://github.com/drdrang
+[bolk]: https://github.com/bolknote
+[oe]: https://github.com/Sannis
+[kk]: https://github.com/kimmel
+[vast]: https://github.com/vast
+
+
+## Version 7.2
+
+A regular bug-fix release without any significant new features. Enjoy!
+
+
+## Version 7.1
+
+A Summer crop:
+
+- [Marc Fornos][mf] made the definition for Clojure along with the matching
+  style Rainbow (which, of course, works for other languages too).
+- CoffeeScript support continues to improve getting support for regular
+  expressions.
+- Yoshihide Jimbo ported to highlight.js [five Tomorrow styles][tm] from the
+  [project by Chris Kempson][tm0].
+- Thanks to [Casey Duncun][cd] the library can now be built in the popular
+  [AMD format][amd].
+- And last but not least, we've got a fair number of correctness and consistency
+  fixes, including a pretty significant refactoring of Ruby.
+
+[mf]: https://github.com/mfornos
+[tm]: http://jmblog.github.com/color-themes-for-highlightjs/
+[tm0]: https://github.com/ChrisKempson/Tomorrow-Theme
+[cd]: https://github.com/caseman
+[amd]: http://requirejs.org/docs/whyamd.html
+
+
+## Version 7.0
+
+The reason for the new major version update is a global change of keyword syntax
+which resulted in the library getting smaller once again. For example, the
+hosted build is 2K less than at the previous version while supporting two new
+languages.
+
+Notable changes:
+
+- The library now works not only in a browser but also with [node.js][]. It is
+  installable with `npm install highlight.js`. [API][] docs are available on our
+  wiki.
+
+- The new unique feature (apparently) among syntax highlighters is highlighting
+  *HTTP* headers and an arbitrary language in the request body. The most useful
+  languages here are *XML* and *JSON* both of which highlight.js does support.
+  Here's [the detailed post][p] about the feature.
+
+- Two new style themes: a dark "south" *[Pojoaque][]* by Jason Tate and an
+  emulation of*XCode* IDE by [Angel Olloqui][ao].
+
+- Three new languages: *D* by [Aleksandar Ruii][ar], *R* by [Joe Cheng][jc]
+  and *GLSL* by [Sergey Tikhomirov][st].
+
+- *Nginx* syntax has become a million times smaller and more universal thanks to
+  remaking it in a more generic manner that doesn't require listing all the
+  directives in the known universe.
+
+- Function titles are now highlighted in *PHP*.
+
+- *Haskell* and *VHDL* were significantly reworked to be more rich and correct
+  by their respective maintainers [Jeremy Hull][sr] and [Igor Kalnitsky][ik].
+
+And last but not least, many bugs have been fixed around correctness and
+language detection.
+
+Overall highlight.js currently supports 51 languages and 20 style themes.
+
+[node.js]: http://nodejs.org/
+[api]: http://softwaremaniacs.org/wiki/doku.php/highlight.js:api
+[p]: http://softwaremaniacs.org/blog/2012/05/10/http-and-json-in-highlight-js/en/
+[pojoaque]: http://web-cms-designs.com/ftopict-10-pojoaque-style-for-highlight-js-code-highlighter.html
+[ao]: https://github.com/angelolloqui
+[ar]: https://github.com/raleksandar
+[jc]: https://github.com/jcheng5
+[st]: https://github.com/tikhomirov
+[sr]: https://github.com/sourrust
+[ik]: https://github.com/ikalnitsky
+
+
+## Version 6.2
+
+A lot of things happened in highlight.js since the last version! We've got nine
+new contributors, the discussion group came alive, and the main branch on GitHub
+now counts more than 350 followers. Here are most significant results coming
+from all this activity:
+
+- 5 (five!) new languages: Rust, ActionScript, CoffeeScript, MatLab and
+  experimental support for markdown. Thanks go to [Andrey Vlasovskikh][av],
+  [Alexander Myadzel][am], [Dmytrii Nagirniak][dn], [Oleg Efimov][oe], [Denis
+  Bardadym][db] and [John Crepezzi][jc].
+
+- 2 new style themes: Monokai by [Luigi Maselli][lm] and stylistic imitation of
+  another well-known highlighter Google Code Prettify by [Aahan Krish][ak].
+
+- A vast number of [correctness fixes and code refactorings][log], mostly made
+  by [Oleg Efimov][oe] and [Evgeny Stepanischev][es].
+
+[av]: https://github.com/vlasovskikh
+[am]: https://github.com/myadzel
+[dn]: https://github.com/dnagir
+[oe]: https://github.com/Sannis
+[db]: https://github.com/btd
+[jc]: https://github.com/seejohnrun
+[lm]: http://grigio.org/
+[ak]: https://github.com/geekpanth3r
+[es]: https://github.com/bolknote
+[log]: https://github.com/isagalaev/highlight.js/commits/
+
+
+## Version 6.1  Solarized
+
+[Jeremy Hull][jh] has implemented my dream feature  a port of [Solarized][]
+style theme famous for being based on the intricate color theory to achieve
+correct contrast and color perception. It is now available for highlight.js in
+both variants  light and dark.
+
+This version also adds a new original style Arta. Its author pumbur maintains a
+[heavily modified fork of highlight.js][pb] on GitHub.
+
+[jh]: https://github.com/sourrust
+[solarized]: http://ethanschoonover.com/solarized
+[pb]: https://github.com/pumbur/highlight.js
+
+
+## Version 6.0
+
+New major version of the highlighter has been built on a significantly
+refactored syntax. Due to this it's even smaller than the previous one while
+supporting more languages!
+
+New languages are:
+
+- Haskell by [Jeremy Hull][sourrust]
+- Erlang in two varieties  module and REPL  made collectively by [Nikolay
+  Zakharov][desh], [Dmitry Kovega][arhibot] and [Sergey Ignatov][ignatov]
+- Objective C by [Valerii Hiora][vhbit]
+- Vala by [Antono Vasiljev][antono]
+- Go by [Stephan Kountso][steplg]
+
+[sourrust]: https://github.com/sourrust
+[desh]: http://desh.su/
+[arhibot]: https://github.com/arhibot
+[ignatov]: https://github.com/ignatov
+[vhbit]: https://github.com/vhbit
+[antono]: https://github.com/antono
+[steplg]: https://github.com/steplg
+
+Also this version is marginally faster and fixes a number of small long-standing
+bugs.
+
+Developer overview of the new language syntax is available in a [blog post about
+recent beta release][beta].
+
+[beta]: http://softwaremaniacs.org/blog/2011/04/25/highlight-js-60-beta/en/
+
+P.S. New version is not yet available on a Yandex CDN, so for now you have to
+download [your own copy][d].
+
+[d]: /soft/highlight/en/download/
+
+
+## Version 5.14
+
+Fixed bugs in HTML/XML detection and relevance introduced in previous
+refactoring.
+
+Also test.html now shows the second best result of language detection by
+relevance.
+
+
+## Version 5.13
+
+Past weekend began with a couple of simple additions for existing languages but
+ended up in a big code refactoring bringing along nice improvements for language
+developers.
+
+### For users
+
+- Description of C++ has got new keywords from the upcoming [C++ 0x][] standard.
+- Description of HTML has got new tags from [HTML 5][].
+- CSS-styles have been unified to use consistent padding and also have lost
+  pop-outs with names of detected languages.
+- [Igor Kalnitsky][ik] has sent two new language descriptions: CMake & VHDL.
+
+This makes total number of languages supported by highlight.js to reach 35.
+
+Bug fixes:
+
+- Custom classes on `<pre>` tags are not being overridden anymore
+- More correct highlighting of code blocks inside non-`<pre>` containers:
+  highlighter now doesn't insist on replacing them with its own container and
+  just replaces the contents.
+- Small fixes in browser compatibility and heuristics.
+
+[c++ 0x]: http://ru.wikipedia.org/wiki/C%2B%2B0x
+[html 5]: http://en.wikipedia.org/wiki/HTML5
+[ik]: http://kalnitsky.org.ua/
+
+### For developers
+
+The most significant change is the ability to include language submodes right
+under `contains` instead of defining explicit named submodes in the main array:
+
+    contains: [
+      'string',
+      'number',
+      {begin: '\\n', end: hljs.IMMEDIATE_RE}
+    ]
+
+This is useful for auxiliary modes needed only in one place to define parsing.
+Note that such modes often don't have `className` and hence won't generate a
+separate `<span>` in the resulting markup. This is similar in effect to
+`noMarkup: true`. All existing languages have been refactored accordingly.
+
+Test file test.html has at last become a real test. Now it not only puts the
+detected language name under the code snippet but also tests if it matches the
+expected one. Test summary is displayed right above all language snippets.
+
+
+## CDN
+
+Fine people at [Yandex][] agreed to host highlight.js on their big fast servers.
+[Link up][l]!
+
+[yandex]: http://yandex.com/
+[l]: http://softwaremaniacs.org/soft/highlight/en/download/
+
+
+## Version 5.10  "Paris".
+
+Though I'm on a vacation in Paris, I decided to release a new version with a
+couple of small fixes:
+
+- Tomas Vitvar discovered that TAB replacement doesn't always work when used
+  with custom markup in code
+- SQL parsing is even more rigid now and doesn't step over SmallTalk in tests
+
+
+## Version 5.9
+
+A long-awaited version is finally released.
+
+New languages:
+
+- Andrew Fedorov made a definition for Lua
+- a long-time highlight.js contributor [Peter Leonov][pl] made a definition for
+  Nginx config
+- [Vladimir Moskva][vm] made a definition for TeX
+
+[pl]: http://kung-fu-tzu.ru/
+[vm]: http://fulc.ru/
+
+Fixes for existing languages:
+
+- [Loren Segal][ls] reworked the Ruby definition and added highlighting for
+  [YARD][] inline documentation
+- the definition of SQL has become more solid and now it shouldn't be overly
+  greedy when it comes to language detection
+
+[ls]: http://gnuu.org/
+[yard]: http://yardoc.org/
+
+The highlighter has become more usable as a library allowing to do highlighting
+from initialization code of JS frameworks and in ajax methods (see.
+readme.eng.txt).
+
+Also this version drops support for the [WordPress][wp] plugin. Everyone is
+welcome to [pick up its maintenance][p] if needed.
+
+[wp]: http://wordpress.org/
+[p]: http://bazaar.launchpad.net/~isagalaev/+junk/highlight/annotate/342/src/wp_highlight.js.php
+
+
+## Version 5.8
+
+- Jan Berkel has contributed a definition for Scala. +1 to hotness!
+- All CSS-styles are rewritten to work only inside `<pre>` tags to avoid
+  conflicts with host site styles.
+
+
+## Version 5.7.
+
+Fixed escaping of quotes in VBScript strings.
+
+
+## Version 5.5
+
+This version brings a small change: now .ini-files allow digits, underscores and
+square brackets in key names.
+
+
+## Version 5.4
+
+Fixed small but upsetting bug in the packer which caused incorrect highlighting
+of explicitly specified languages. Thanks to Andrew Fedorov for precise
+diagnostics!
+
+
+## Version 5.3
+
+The version to fulfil old promises.
+
+The most significant change is that highlight.js now preserves custom user
+markup in code along with its own highlighting markup. This means that now it's
+possible to use, say, links in code. Thanks to [Vladimir Dolzhenko][vd] for the
+[initial proposal][1] and for making a proof-of-concept patch.
+
+Also in this version:
+
+- [Vasily Polovnyov][vp] has sent a GitHub-like style and has implemented
+  support for CSS @-rules and Ruby symbols.
+- Yura Zaripov has sent two styles: Brown Paper and School Book.
+- Oleg Volchkov has sent a definition for [Parser 3][p3].
+
+[1]: http://softwaremaniacs.org/forum/highlightjs/6612/
+[p3]: http://www.parser.ru/
+[vp]: http://vasily.polovnyov.ru/
+[vd]: http://dolzhenko.blogspot.com/
+
+
+## Version 5.2
+
+- at last it's possible to replace indentation TABs with something sensible
+  (e.g. 2 or 4 spaces)
+- new keywords and built-ins for 1C by Sergey Baranov
+- a couple of small fixes to Apache highlighting
+
+
+## Version 5.1
+
+This is one of those nice version consisting entirely of new and shiny
+contributions!
+
+- [Vladimir Ermakov][vooon] created highlighting for AVR Assembler
+- [Ruslan Keba][rukeba] created highlighting for Apache config file. Also his
+  original visual style for it is now available for all highlight.js languages
+  under the name "Magula".
+- [Shuen-Huei Guan][drake] (aka Drake) sent new keywords for RenderMan
+  languages. Also thanks go to [Konstantin Evdokimenko][ke] for his advice on
+  the matter.
+
+[vooon]: http://vehq.ru/about/
+[rukeba]: http://rukeba.com/
+[drake]: http://drakeguan.org/
+[ke]: http://k-evdokimenko.moikrug.ru/
+
+
+## Version 5.0
+
+The main change in the new major version of highlight.js is a mechanism for
+packing several languages along with the library itself into a single compressed
+file. Now sites using several languages will load considerably faster because
+the library won't dynamically include additional files while loading.
+
+Also this version fixes a long-standing bug with Javascript highlighting that
+couldn't distinguish between regular expressions and division operations.
+
+And as usually there were a couple of minor correctness fixes.
+
+Great thanks to all contributors! Keep using highlight.js.
+
+
+## Version 4.3
+
+This version comes with two contributions from [Jason Diamond][jd]:
+
+- language definition for C# (yes! it was a long-missed thing!)
+- Visual Studio-like highlighting style
+
+Plus there are a couple of minor bug fixes for parsing HTML and XML attributes.
+
+[jd]: http://jason.diamond.name/weblog/
+
+
+## Version 4.2
+
+The biggest news is highlighting for Lisp, courtesy of Vasily Polovnyov. It's
+somewhat experimental meaning that for highlighting "keywords" it doesn't use
+any pre-defined set of a Lisp dialect. Instead it tries to highlight first word
+in parentheses wherever it makes sense. I'd like to ask people programming in
+Lisp to confirm if it's a good idea and send feedback to [the forum][f].
+
+Other changes:
+
+- Smalltalk was excluded from DEFAULT_LANGUAGES to save traffic
+- [Vladimir Epifanov][voldmar] has implemented javascript style switcher for
+  test.html
+- comments now allowed inside Ruby function definition
+- [MEL][] language from [Shuen-Huei Guan][drake]
+- whitespace now allowed between `<pre>` and `<code>`
+- better auto-detection of C++ and PHP
+- HTML allows embedded VBScript (`<% .. %>`)
+
+[f]: http://softwaremaniacs.org/forum/highlightjs/
+[voldmar]: http://voldmar.ya.ru/
+[mel]: http://en.wikipedia.org/wiki/Maya_Embedded_Language
+[drake]: http://drakeguan.org/
+
+
+## Version 4.1
+
+Languages:
+
+- Bash from Vah
+- DOS bat-files from Alexander Makarov (Sam)
+- Diff files from Vasily Polovnyov
+- Ini files from myself though initial idea was from Sam
+
+Styles:
+
+- Zenburn from Vladimir Epifanov, this is an imitation of a
+  [well-known theme for Vim][zenburn].
+- Ascetic from myself, as a realization of ideals of non-flashy highlighting:
+  just one color in only three gradations :-)
+
+In other news. [One small bug][bug] was fixed, built-in keywords were added for
+Python and C++ which improved auto-detection for the latter (it was shame that
+[my wife's blog][alenacpp] had issues with it from time to time). And lastly
+thanks go to Sam for getting rid of my stylistic comments in code that were
+getting in the way of [JSMin][].
+
+[zenburn]: http://en.wikipedia.org/wiki/Zenburn
+[alenacpp]: http://alenacpp.blogspot.com/
+[bug]: http://softwaremaniacs.org/forum/viewtopic.php?id=1823
+[jsmin]: http://code.google.com/p/jsmin-php/
+
+
+## Version 4.0
+
+New major version is a result of vast refactoring and of many contributions.
+
+Visible new features:
+
+- Highlighting of embedded languages. Currently is implemented highlighting of
+  Javascript and CSS inside HTML.
+- Bundled 5 ready-made style themes!
+
+Invisible new features:
+
+- Highlight.js no longer pollutes global namespace. Only one object and one
+  function for backward compatibility.
+- Performance is further increased by about 15%.
+
+Changing of a major version number caused by a new format of language definition
+files. If you use some third-party language files they should be updated.
+
+
+## Version 3.5
+
+A very nice version in my opinion fixing a number of small bugs and slightly
+increased speed in a couple of corner cases. Thanks to everybody who reports
+bugs in he [forum][f] and by email!
+
+There is also a new language  XML. A custom XML formerly was detected as HTML
+and didn't highlight custom tags. In this version I tried to make custom XML to
+be detected and highlighted by its own rules. Which by the way include such
+things as CDATA sections and processing instructions (`<? ... ?>`).
+
+[f]: http://softwaremaniacs.org/forum/viewforum.php?id=6
+
+
+## Version 3.3
+
+[Vladimir Gubarkov][xonix] has provided an interesting and useful addition.
+File export.html contains a little program that shows and allows to copy and
+paste an HTML code generated by the highlighter for any code snippet. This can
+be useful in situations when one can't use the script itself on a site.
+
+
+[xonix]: http://xonixx.blogspot.com/
+
+
+## Version 3.2 consists completely of contributions:
+
+- Vladimir Gubarkov has described SmallTalk
+- Yuri Ivanov has described 1C
+- Peter Leonov has packaged the highlighter as a Firefox extension
+- Vladimir Ermakov has compiled a mod for phpBB
+
+Many thanks to you all!
+
+
+## Version 3.1
+
+Three new languages are available: Django templates, SQL and Axapta. The latter
+two are sent by [Dmitri Roudakov][1]. However I've almost entirely rewrote an
+SQL definition but I'd never started it be it from the ground up :-)
+
+The engine itself has got a long awaited feature of grouping keywords
+("keyword", "built-in function", "literal"). No more hacks!
+
+[1]: http://roudakov.ru/
+
+
+## Version 3.0
+
+It is major mainly because now highlight.js has grown large and has become
+modular. Now when you pass it a list of languages to highlight it will
+dynamically load into a browser only those languages.
+
+Also:
+
+- Konstantin Evdokimenko of [RibKit][] project has created a highlighting for
+  RenderMan Shading Language and RenderMan Interface Bytestream. Yay for more
+  languages!
+- Heuristics for C++ and HTML got better.
+- I've implemented (at last) a correct handling of backslash escapes in C-like
+  languages.
+
+There is also a small backwards incompatible change in the new version. The
+function initHighlighting that was used to initialize highlighting instead of
+initHighlightingOnLoad a long time ago no longer works. If you by chance still
+use it  replace it with the new one.
+
+[RibKit]: http://ribkit.sourceforge.net/
+
+
+## Version 2.9
+
+Highlight.js is a parser, not just a couple of regular expressions. That said
+I'm glad to announce that in the new version 2.9 has support for:
+
+- in-string substitutions for Ruby -- `#{...}`
+- strings from from numeric symbol codes (like #XX) for Delphi
+
+
+## Version 2.8
+
+A maintenance release with more tuned heuristics. Fully backwards compatible.
+
+
+## Version 2.7
+
+- Nikita Ledyaev presents highlighting for VBScript, yay!
+- A couple of bugs with escaping in strings were fixed thanks to Mickle
+- Ongoing tuning of heuristics
+
+Fixed bugs were rather unpleasant so I encourage everyone to upgrade!
+
+
+## Version 2.4
+
+- Peter Leonov provides another improved highlighting for Perl
+- Javascript gets a new kind of keywords  "literals". These are the words
+  "true", "false" and "null"
+
+Also highlight.js homepage now lists sites that use the library. Feel free to
+add your site by [dropping me a message][mail] until I find the time to build a
+submit form.
+
+[mail]: mailto:Maniac@SoftwareManiacs.Org
+
+
+## Version 2.3
+
+This version fixes IE breakage in previous version. My apologies to all who have
+already downloaded that one!
+
+
+## Version 2.2
+
+- added highlighting for Javascript
+- at last fixed parsing of Delphi's escaped apostrophes in strings
+- in Ruby fixed highlighting of keywords 'def' and 'class', same for 'sub' in
+  Perl
+
+
+## Version 2.0
+
+- Ruby support by [Anton Kovalyov][ak]
+- speed increased by orders of magnitude due to new way of parsing
+- this same way allows now correct highlighting of keywords in some tricky
+  places (like keyword "End" at the end of Delphi classes)
+
+[ak]: http://anton.kovalyov.net/
+
+
+## Version 1.0
+
+Version 1.0 of javascript syntax highlighter is released!
+
+It's the first version available with English description. Feel free to post
+your comments and question to [highlight.js forum][forum]. And don't be afraid
+if you find there some fancy Cyrillic letters -- it's for Russian users too :-)
+
+[forum]: http://softwaremaniacs.org/forum/viewforum.php?id=6
diff --git a/libraries/highlight/LICENSE b/libraries/highlight/LICENSE
new file mode 100644
index 0000000..422deb7
--- /dev/null
+++ b/libraries/highlight/LICENSE
@@ -0,0 +1,24 @@
+Copyright (c) 2006, Ivan Sagalaev
+All rights reserved.
+Redistribution and use in source and binary forms, with or without
+modification, are permitted provided that the following conditions are met:
+
+    * Redistributions of source code must retain the above copyright
+      notice, this list of conditions and the following disclaimer.
+    * Redistributions in binary form must reproduce the above copyright
+      notice, this list of conditions and the following disclaimer in the
+      documentation and/or other materials provided with the distribution.
+    * Neither the name of highlight.js nor the names of its contributors 
+      may be used to endorse or promote products derived from this software 
+      without specific prior written permission.
+
+THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND ANY
+EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
+WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+DISCLAIMED. IN NO EVENT SHALL THE REGENTS AND CONTRIBUTORS BE LIABLE FOR ANY
+DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
+(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
+LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
+(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
diff --git a/libraries/highlight/README.md b/libraries/highlight/README.md
new file mode 100644
index 0000000..e03877b
--- /dev/null
+++ b/libraries/highlight/README.md
@@ -0,0 +1,106 @@
+# Highlight.js
+
+[![Build Status](https://travis-ci.org/isagalaev/highlight.js.svg?branch=master)](https://travis-ci.org/isagalaev/highlight.js)
+
+Highlight.js is a syntax highlighter written in JavaScript. It works in
+the browser as well as on the server. It works with pretty much any
+markup, doesnt depend on any framework and has automatic language
+detection.
+
+## Getting Started
+
+The bare minimum for using highlight.js on a web page is linking to the
+library along with one of the styles and calling
+[`initHighlightingOnLoad`][1]:
+
+```html
+<link rel="stylesheet" href="/path/to/styles/default.css">
+<script src="/path/to/highlight.pack.js"></script>
+<script>hljs.initHighlightingOnLoad();</script>
+```
+
+This will find and highlight code inside of `<pre><code>` tags; it tries
+to detect the language automatically. If automatic detection doesnt
+work for you, you can specify the language in the `class` attribute:
+
+```html
+<pre><code class="html">...</code></pre>
+```
+
+The list of supported language classes is available in the [class
+reference][2].  Classes can also be prefixed with either `language-` or
+`lang-`.
+
+To disable highlighting altogether use the `nohighlight` class:
+
+```html
+<pre><code class="nohighlight">...</code></pre>
+```
+
+## Custom Initialization
+
+When you need a bit more control over the initialization of
+highlight.js, you can use the [`highlightBlock`][3] and [`configure`][4]
+functions. This allows you to control *what* to highlight and *when*.
+
+Heres an equivalent way to calling [`initHighlightingOnLoad`][1] using
+jQuery:
+
+```javascript
+$(document).ready(function() {
+  $('pre code').each(function(i, block) {
+    hljs.highlightBlock(block);
+  });
+});
+```
+
+You can use any tags instead of `<pre><code>` to mark up your code. If
+you don't use a container that preserve line breaks you will need to
+configure highlight.js to use the `<br>` tag:
+
+```javascript
+hljs.configure({useBR: true});
+
+$('div.code').each(function(i, block) {
+  hljs.highlightBlock(block);
+});
+```
+
+For other options refer to the documentation for [`configure`][4].
+
+## Getting the Library
+
+You can get highlight.js as a hosted, or custom-build, browser script or
+as a server module. Right out of the box the browser script supports
+both AMD and CommonJS, so if you wish you can use RequireJS or
+Browserify without having to build from source. The server module also
+works perfectly fine with Browserify, but there is the option to use a
+build specific to browsers rather than something meant for a server.
+Head over to the [download page][5] for all the options.
+
+**Note:** the library is not supposed to work straight from the source
+on GitHub; it requires building. If none of the pre-packaged options
+work for you refer to the [building documentation][6].
+
+## License
+
+Highlight.js is released under the BSD License. See [LICENSE][7] file
+for details.
+
+## Links
+
+The official site for the library is at <https://highlightjs.org/>.
+
+Further in-depth documentation for the API and other topics is at
+<http://highlightjs.readthedocs.org/>.
+
+Authors and contributors are listed in the [AUTHORS.en.txt][8] file.
+
+[1]: http://highlightjs.readthedocs.org/en/latest/api.html#inithighlightingonload
+[2]: http://highlightjs.readthedocs.org/en/latest/css-classes-reference.html
+[3]: http://highlightjs.readthedocs.org/en/latest/api.html#highlightblock-block
+[4]: http://highlightjs.readthedocs.org/en/latest/api.html#configure-options
+[5]: https://highlightjs.org/download/
+[6]: http://highlightjs.readthedocs.org/en/latest/building-testing.html
+[7]: https://github.com/isagalaev/highlight.js/blob/master/LICENSE
+[8]: https://github.com/isagalaev/highlight.js/blob/master/AUTHORS.en.txt
diff --git a/libraries/highlight/README.ru.md b/libraries/highlight/README.ru.md
new file mode 100644
index 0000000..198c029
--- /dev/null
+++ b/libraries/highlight/README.ru.md
@@ -0,0 +1,101 @@
+# Highlight.js
+
+Highlight.js    ,   JavaScript.  
+  ,   .      HTML , 
+  -      .
+
+
+##  
+
+,      highlight.js  -  
+ , CSS-   [`initHighlightingOnLoad`][1]:
+
+```html
+<link rel="stylesheet" href="/path/to/styles/default.css">
+<script src="/path/to/highlight.pack.js"></script>
+<script>hljs.initHighlightingOnLoad();</script>
+```
+
+       `<pre><code>`, 
+  .    ,  
+    class:
+
+```html
+<pre><code class="html">...</code></pre>
+```
+
+      [  ][8].
+     `language-`  `lang-`.
+
+    - ,   `nohighlight`:
+
+```html
+<pre><code class="nohighlight">...</code></pre>
+```
+
+##  
+
+       ,  
+  [`highlightBlock`][2]  [`configure`][3].  
+  , **   **.
+
+  ,   [`initHighlightingOnLoad`][1], 
+  jQuery:
+
+```javascript
+$(document).ready(function() {
+  $('pre code').each(function(i, block) {
+    hljs.highlightBlock(block);
+  });
+});
+```
+
+       `<pre><code>`. 
+ ,    ,   
+highlight.js     `<br>`:
+
+```javascript
+hljs.configure({useBR: true});
+
+$('div.code').each(function(i, block) {
+  hljs.highlightBlock(block);
+});
+```
+
+       [`configure`][3].
+
+
+##  
+
+Highlight.js       CDN   
+ ,      . 
+[ ][4]    .
+
+ ,        
+   GitHub,    .     
+   ,  [  ][5].
+
+
+## 
+
+Highlight.js    BSD.   
+[LICENSE][10].
+
+
+## 
+
+      <https://highlightjs.org/>.
+
+    API     
+<http://highlightjs.readthedocs.org/>.
+
+      [AUTHORS.ru.txt][9] file.
+
+[1]: http://highlightjs.readthedocs.org/en/latest/api.html#inithighlightingonload
+[2]: http://highlightjs.readthedocs.org/en/latest/api.html#highlightblock-block
+[3]: http://highlightjs.readthedocs.org/en/latest/api.html#configure-options
+[4]: https://highlightjs.org/download/
+[5]: http://highlightjs.readthedocs.org/en/latest/building-testing.html
+[8]: http://highlightjs.readthedocs.org/en/latest/css-classes-reference.html
+[9]: https://github.com/isagalaev/highlight.js/blob/master/AUTHORS.ru.txt
+[10]: https://github.com/isagalaev/highlight.js/blob/master/LICENSE
diff --git a/libraries/highlight/highlight.pack.js b/libraries/highlight/highlight.pack.js
new file mode 100644
index 0000000..e2063de
--- /dev/null
+++ b/libraries/highlight/highlight.pack.js
@@ -0,0 +1 @@
+!function(e){"undefined"!=typeof exports?e(exports):(window.hljs=e({}),"function"==typeof define&&define.amd&&define("hljs",[],function(){return window.hljs}))}(function(e){function n(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function t(e){return e.nodeName.toLowerCase()}function r(e,n){var t=e&&e.exec(n);return t&&0==t.index}function a(e){return/^(no-?highlight|plain|text)$/i.test(e)}function i(e){var n,t,r,i=e.className+" ";if(i+=e.parentNode?e.parentNode.className:"",t=/\blang(?:uage)?-([\w-]+)\b/i.exec(i))return w(t[1])?t[1]:"no-highlight";for(i=i.split(/\s+/),n=0,r=i.length;r>n;n++)if(w(i[n])||a(i[n]))return i[n]}function o(e,n){var t,r={};for(t in e)r[t]=e[t];if(n)for(t in n)r[t]=n[t];return r}function u(e){var n=[];return function r(e,a){for(var i=e.firstChild;i;i=i.nextSibling)3==i.nodeType?a+=i.nodeValue.length:1==i.nodeType&&(n.push({event:"start",offset:a,node:i}),a=r(i,a),t(i).match(/br|hr|img|input/)||n.push({event:"stop",offset:a,node:i}));return a}(e,0),n}function c(e,r,a){function i(){return e.length&&r.length?e[0].offset!=r[0].offset?e[0].offset<r[0].offset?e:r:"start"==r[0].event?e:r:e.length?e:r}function o(e){function r(e){return" "+e.nodeName+'="'+n(e.value)+'"'}l+="<"+t(e)+Array.prototype.map.call(e.attributes,r).join("")+">"}function u(e){l+="</"+t(e)+">"}function c(e){("start"==e.event?o:u)(e.node)}for(var s=0,l="",f=[];e.length||r.length;){var g=i();if(l+=n(a.substr(s,g[0].offset-s)),s=g[0].offset,g==e){f.reverse().forEach(u);do c(g.splice(0,1)[0]),g=i();while(g==e&&g.length&&g[0].offset==s);f.reverse().forEach(o)}else"start"==g[0].event?f.push(g[0].node):f.pop(),c(g.splice(0,1)[0])}return l+n(a.substr(s))}function s(e){function n(e){return e&&e.source||e}function t(t,r){return new RegExp(n(t),"m"+(e.cI?"i":"")+(r?"g":""))}function r(a,i){if(!a.compiled){if(a.compiled=!0,a.k=a.k||a.bK,a.k){var u={},c=function(n,t){e.cI&&(t=t.toLowerCase()),t.split(" ").forEach(function(e){var t=e.split("|");u[t[0]]=[n,t[1]?Number(t[1]):1]})};"string"==typeof a.k?c("keyword",a.k):Object.keys(a.k).forEach(function(e){c(e,a.k[e])}),a.k=u}a.lR=t(a.l||/\b\w+\b/,!0),i&&(a.bK&&(a.b="\\b("+a.bK.split(" ").join("|")+")\\b"),a.b||(a.b=/\B|\b/),a.bR=t(a.b),a.e||a.eW||(a.e=/\B|\b/),a.e&&(a.eR=t(a.e)),a.tE=n(a.e)||"",a.eW&&i.tE&&(a.tE+=(a.e?"|":"")+i.tE)),a.i&&(a.iR=t(a.i)),void 0===a.r&&(a.r=1),a.c||(a.c=[]);var s=[];a.c.forEach(function(e){e.v?e.v.forEach(function(n){s.push(o(e,n))}):s.push("self"==e?a:e)}),a.c=s,a.c.forEach(function(e){r(e,a)}),a.starts&&r(a.starts,i);var l=a.c.map(function(e){return e.bK?"\\.?("+e.b+")\\.?":e.b}).concat([a.tE,a.i]).map(n).filter(Boolean);a.t=l.length?t(l.join("|"),!0):{exec:function(){return null}}}}r(e)}function l(e,t,a,i){function o(e,n){for(var t=0;t<n.c.length;t++)if(r(n.c[t].bR,e))return n.c[t]}function u(e,n){if(r(e.eR,n)){for(;e.endsParent&&e.parent;)e=e.parent;return e}return e.eW?u(e.parent,n):void 0}function c(e,n){return!a&&r(n.iR,e)}function g(e,n){var t=N.cI?n[0].toLowerCase():n[0];return e.k.hasOwnProperty(t)&&e.k[t]}function h(e,n,t,r){var a=r?"":E.classPrefix,i='<span class="'+a,o=t?"":"</span>";return i+=e+'">',i+n+o}function p(){if(!L.k)return n(M);var e="",t=0;L.lR.lastIndex=0;for(var r=L.lR.exec(M);r;){e+=n(M.substr(t,r.index-t));var a=g(L,r);a?(B+=a[1],e+=h(a[0],n(r[0]))):e+=n(r[0]),t=L.lR.lastIndex,r=L.lR.exec(M)}return e+n(M.substr(t))}function d(){var e="string"==typeof L.sL;if(e&&!x[L.sL])return n(M);var t=e?l(L.sL,M,!0,y[L.sL]):f(M,L.sL.length?L.sL:void 0);return L.r>0&&(B+=t.r),e&&(y[L.sL]=t.top),h(t.language,t.value,!1,!0)}function b(){return void 0!==L.sL?d():p()}function v(e,t){var r=e.cN?h(e.cN,"",!0):"";e.rB?(k+=r,M=""):e.eB?(k+=n(t)+r,M=""):(k+=r,M=t),L=Object.create(e,{parent:{value:L}})}function m(e,t){if(M+=e,void 0===t)return k+=b(),0;var r=o(t,L);if(r)return k+=b(),v(r,t),r.rB?0:t.length;var a=u(L,t);if(a){var i=L;i.rE||i.eE||(M+=t),k+=b();do L.cN&&(k+="</span>"),B+=L.r,L=L.parent;while(L!=a.parent);return i.eE&&(k+=n(t)),M="",a.starts&&v(a.starts,""),i.rE?0:t.length}if(c(t,L))throw new Error('Illegal lexeme "'+t+'" for mode "'+(L.cN||"<unnamed>")+'"');return M+=t,t.length||1}var N=w(e);if(!N)throw new Error('Unknown language: "'+e+'"');s(N);var R,L=i||N,y={},k="";for(R=L;R!=N;R=R.parent)R.cN&&(k=h(R.cN,"",!0)+k);var M="",B=0;try{for(var C,j,I=0;;){if(L.t.lastIndex=I,C=L.t.exec(t),!C)break;j=m(t.substr(I,C.index-I),C[0]),I=C.index+j}for(m(t.substr(I)),R=L;R.parent;R=R.parent)R.cN&&(k+="</span>");return{r:B,value:k,language:e,top:L}}catch(O){if(-1!=O.message.indexOf("Illegal"))return{r:0,value:n(t)};throw O}}function f(e,t){t=t||E.languages||Object.keys(x);var r={r:0,value:n(e)},a=r;return t.forEach(function(n){if(w(n)){var t=l(n,e,!1);t.language=n,t.r>a.r&&(a=t),t.r>r.r&&(a=r,r=t)}}),a.language&&(r.second_best=a),r}function g(e){return E.tabReplace&&(e=e.replace(/^((<[^>]+>|\t)+)/gm,function(e,n){return n.replace(/\t/g,E.tabReplace)})),E.useBR&&(e=e.replace(/\n/g,"<br>")),e}function h(e,n,t){var r=n?R[n]:t,a=[e.trim()];return e.match(/\bhljs\b/)||a.push("hljs"),-1===e.indexOf(r)&&a.push(r),a.join(" ").trim()}function p(e){var n=i(e);if(!a(n)){var t;E.useBR?(t=document.createElementNS("http://www.w3.org/1999/xhtml","div"),t.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):t=e;var r=t.textContent,o=n?l(n,r,!0):f(r),s=u(t);if(s.length){var p=document.createElementNS("http://www.w3.org/1999/xhtml","div");p.innerHTML=o.value,o.value=c(s,u(p),r)}o.value=g(o.value),e.innerHTML=o.value,e.className=h(e.className,n,o.language),e.result={language:o.language,re:o.r},o.second_best&&(e.second_best={language:o.second_best.language,re:o.second_best.r})}}function d(e){E=o(E,e)}function b(){if(!b.called){b.called=!0;var e=document.querySelectorAll("pre code");Array.prototype.forEach.call(e,p)}}function v(){addEventListener("DOMContentLoaded",b,!1),addEventListener("load",b,!1)}function m(n,t){var r=x[n]=t(e);r.aliases&&r.aliases.forEach(function(e){R[e]=n})}function N(){return Object.keys(x)}function w(e){return e=(e||"").toLowerCase(),x[e]||x[R[e]]}var E={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},x={},R={};return e.highlight=l,e.highlightAuto=f,e.fixMarkup=g,e.highlightBlock=p,e.configure=d,e.initHighlighting=b,e.initHighlightingOnLoad=v,e.registerLanguage=m,e.listLanguages=N,e.getLanguage=w,e.inherit=o,e.IR="[a-zA-Z]\\w*",e.UIR="[a-zA-Z_]\\w*",e.NR="\\b\\d+(\\.\\d+)?",e.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",e.BNR="\\b(0b[01]+)",e.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",e.BE={b:"\\\\[\\s\\S]",r:0},e.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[e.BE]},e.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[e.BE]},e.PWM={b:/\b(a|an|the|are|I|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|like)\b/},e.C=function(n,t,r){var a=e.inherit({cN:"comment",b:n,e:t,c:[]},r||{});return a.c.push(e.PWM),a.c.push({cN:"doctag",b:"(?:TODO|FIXME|NOTE|BUG|XXX):",r:0}),a},e.CLCM=e.C("//","$"),e.CBCM=e.C("/\\*","\\*/"),e.HCM=e.C("#","$"),e.NM={cN:"number",b:e.NR,r:0},e.CNM={cN:"number",b:e.CNR,r:0},e.BNM={cN:"number",b:e.BNR,r:0},e.CSSNM={cN:"number",b:e.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},e.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[e.BE,{b:/\[/,e:/\]/,r:0,c:[e.BE]}]},e.TM={cN:"title",b:e.IR,r:0},e.UTM={cN:"title",b:e.UIR,r:0},e});hljs.registerLanguage("nginx",function(e){var r={cN:"variable",v:[{b:/\$\d+/},{b:/\$\{/,e:/}/},{b:"[\\$\\@]"+e.UIR}]},b={eW:!0,l:"[a-z/_]+",k:{built_in:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},r:0,i:"=>",c:[e.HCM,{cN:"string",c:[e.BE,r],v:[{b:/"/,e:/"/},{b:/'/,e:/'/}]},{cN:"url",b:"([a-z]+):/",e:"\\s",eW:!0,eE:!0,c:[r]},{cN:"regexp",c:[e.BE,r],v:[{b:"\\s\\^",e:"\\s|{|;",rE:!0},{b:"~\\*?\\s+",e:"\\s|{|;",rE:!0},{b:"\\*(\\.[a-z\\-]+)+"},{b:"([a-z\\-]+\\.)+\\*"}]},{cN:"number",b:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{cN:"number",b:"\\b\\d+[kKmMgGdshdwy]*\\b",r:0},r]};return{aliases:["nginxconf"],c:[e.HCM,{b:e.UIR+"\\s",e:";|{",rB:!0,c:[{cN:"title",b:e.UIR,starts:b}],r:0}],i:"[^\\s\\}]"}});hljs.registerLanguage("cs",function(e){var r="abstract as base bool break byte case catch char checked const continue decimal dynamic default delegate do double else enum event explicit extern false finally fixed float for foreach goto if implicit in int interface internal is lock long null when object operator out override params private protected public readonly ref sbyte sealed short sizeof stackalloc static string struct switch this true try typeof uint ulong unchecked unsafe ushort using virtual volatile void while async protected public private internal ascending descending from get group into join let orderby partial select set value var where yield",t=e.IR+"(<"+e.IR+">)?";return{aliases:["csharp"],k:r,i:/::/,c:[e.C("///","$",{rB:!0,c:[{cN:"xmlDocTag",v:[{b:"///",r:0},{b:"<!--|-->"},{b:"</?",e:">"}]}]}),e.CLCM,e.CBCM,{cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line region endregion pragma checksum"},{cN:"string",b:'@"',e:'"',c:[{b:'""'}]},e.ASM,e.QSM,e.CNM,{bK:"class interface",e:/[{;=]/,i:/[^\s:]/,c:[e.TM,e.CLCM,e.CBCM]},{bK:"namespace",e:/[{;=]/,i:/[^\s:]/,c:[{cN:"title",b:"[a-zA-Z](\\.?\\w)*",r:0},e.CLCM,e.CBCM]},{bK:"new return throw await",r:0},{cN:"function",b:"("+t+"\\s+)+"+e.IR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:r,c:[{b:e.IR+"\\s*\\(",rB:!0,c:[e.TM],r:0},{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,k:r,r:0,c:[e.ASM,e.QSM,e.CNM,e.CBCM]},e.CLCM,e.CBCM]}]}});hljs.registerLanguage("diff",function(e){return{aliases:["patch"],c:[{cN:"chunk",r:10,v:[{b:/^@@ +\-\d+,\d+ +\+\d+,\d+ +@@$/},{b:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{b:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{cN:"header",v:[{b:/Index: /,e:/$/},{b:/=====/,e:/=====$/},{b:/^\-\-\-/,e:/$/},{b:/^\*{3} /,e:/$/},{b:/^\+\+\+/,e:/$/},{b:/\*{5}/,e:/\*{5}$/}]},{cN:"addition",b:"^\\+",e:"$"},{cN:"deletion",b:"^\\-",e:"$"},{cN:"change",b:"^\\!",e:"$"}]}});hljs.registerLanguage("bash",function(e){var t={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)}/}]},s={cN:"string",b:/"/,e:/"/,c:[e.BE,t,{cN:"variable",b:/\$\(/,e:/\)/,c:[e.BE]}]},a={cN:"string",b:/'/,e:/'/};return{aliases:["sh","zsh"],l:/-?[a-z\.]+/,k:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",operator:"-ne -eq -lt -gt -f -d -e -s -l -a"},c:[{cN:"shebang",b:/^#![^\n]+sh\s*$/,r:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[e.inherit(e.TM,{b:/\w[\w\d_]*/})],r:0},e.HCM,e.NM,s,a,t]}});hljs.registerLanguage("markdown",function(e){return{aliases:["md","mkdown","mkd"],c:[{cN:"header",v:[{b:"^#{1,6}",e:"$"},{b:"^.+?\\n[=-]{2,}$"}]},{b:"<",e:">",sL:"xml",r:0},{cN:"bullet",b:"^([*+-]|(\\d+\\.))\\s+"},{cN:"strong",b:"[*_]{2}.+?[*_]{2}"},{cN:"emphasis",v:[{b:"\\*.+?\\*"},{b:"_.+?_",r:0}]},{cN:"blockquote",b:"^>\\s+",e:"$"},{cN:"code",v:[{b:"`.+?`"},{b:"^( {4}|	)",e:"$",r:0}]},{cN:"horizontal_rule",b:"^[-\\*]{3,}",e:"$"},{b:"\\[.+?\\][\\(\\[].*?[\\)\\]]",rB:!0,c:[{cN:"link_label",b:"\\[",e:"\\]",eB:!0,rE:!0,r:0},{cN:"link_url",b:"\\]\\(",e:"\\)",eB:!0,eE:!0},{cN:"link_reference",b:"\\]\\[",e:"\\]",eB:!0,eE:!0}],r:10},{b:"^\\[.+\\]:",rB:!0,c:[{cN:"link_reference",b:"\\[",e:"\\]:",eB:!0,eE:!0,starts:{cN:"link_url",e:"$"}}]}]}});hljs.registerLanguage("javascript",function(e){return{aliases:["js"],k:{keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},c:[{cN:"pi",r:10,b:/^\s*['"]use (strict|asm)['"]/},e.ASM,e.QSM,{cN:"string",b:"`",e:"`",c:[e.BE,{cN:"subst",b:"\\$\\{",e:"\\}"}]},e.CLCM,e.CBCM,{cN:"number",v:[{b:"\\b(0[bB][01]+)"},{b:"\\b(0[oO][0-7]+)"},{b:e.CNR}],r:0},{b:"("+e.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[e.CLCM,e.CBCM,e.RM,{b:/</,e:/>\s*[);\]]/,r:0,sL:"xml"}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[e.inherit(e.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/}),{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,c:[e.CLCM,e.CBCM]}],i:/\[|%/},{b:/\$[(.]/},{b:"\\."+e.IR,r:0},{bK:"import",e:"[;$]",k:"import from as",c:[e.ASM,e.QSM]},{cN:"class",bK:"class",e:/[{;=]/,eE:!0,i:/[:"\[\]]/,c:[{bK:"extends"},e.UTM]}],i:/#/}});hljs.registerLanguage("ini",function(e){var c={cN:"string",c:[e.BE],v:[{b:"'''",e:"'''",r:10},{b:'"""',e:'"""',r:10},{b:'"',e:'"'},{b:"'",e:"'"}]};return{aliases:["toml"],cI:!0,i:/\S/,c:[e.C(";","$"),e.HCM,{cN:"title",b:/^\s*\[+/,e:/\]+/},{cN:"setting",b:/^[a-z0-9\[\]_-]+\s*=\s*/,e:"$",c:[{cN:"value",eW:!0,k:"on off true false yes no",c:[{cN:"variable",v:[{b:/\$[\w\d"][\w\d_]*/},{b:/\$\{(.*?)}/}]},c,{cN:"number",b:/([\+\-]+)?[\d]+_[\d_]+/},e.NM],r:0}]}]}});hljs.registerLanguage("apache",function(e){var r={cN:"number",b:"[\\$%]\\d+"};return{aliases:["apacheconf"],cI:!0,c:[e.HCM,{cN:"tag",b:"</?",e:">"},{cN:"keyword",b:/\w+/,r:0,k:{common:"order deny allow setenv rewriterule rewriteengine rewritecond documentroot sethandler errordocument loadmodule options header listen serverroot servername"},starts:{e:/$/,r:0,k:{literal:"on off all"},c:[{cN:"sqbracket",b:"\\s\\[",e:"\\]$"},{cN:"cbracket",b:"[\\$%]\\{",e:"\\}",c:["self",r]},r,e.QSM]}}],i:/\S/}});hljs.registerLanguage("sql",function(e){var t=e.C("--","$");return{cI:!0,i:/[<>{}*]/,c:[{cN:"operator",bK:"begin end start commit rollback savepoint lock alter create drop rename call delete do handler insert load replace select truncate update set show pragma grant merge describe use explain help declare prepare execute deallocate release unlock purge reset change stop analyze cache flush optimize repair kill install uninstall checksum restore check backup revoke",e:/;/,eW:!0,k:{keyword:"abort abs absolute acc acce accep accept access accessed accessible account acos action activate add addtime admin administer advanced advise aes_decrypt aes_encrypt after agent aggregate ali alia alias allocate allow alter always analyze ancillary and any anydata anydataset anyschema anytype apply archive archived archivelog are as asc ascii asin assembly assertion associate asynchronous at atan atn2 attr attri attrib attribu attribut attribute attributes audit authenticated authentication authid authors auto autoallocate autodblink autoextend automatic availability avg backup badfile basicfile before begin beginning benchmark between bfile bfile_base big bigfile bin binary_double binary_float binlog bit_and bit_count bit_length bit_or bit_xor bitmap blob_base block blocksize body both bound buffer_cache buffer_pool build bulk by byte byteordermark bytes c cache caching call calling cancel capacity cascade cascaded case cast catalog category ceil ceiling chain change changed char_base char_length character_length characters characterset charindex charset charsetform charsetid check checksum checksum_agg child choose chr chunk class cleanup clear client clob clob_base clone close cluster_id cluster_probability cluster_set clustering coalesce coercibility col collate collation collect colu colum column column_value columns columns_updated comment commit compact compatibility compiled complete composite_limit compound compress compute concat concat_ws concurrent confirm conn connec connect connect_by_iscycle connect_by_isleaf connect_by_root connect_time connection consider consistent constant constraint constraints constructor container content contents context contributors controlfile conv convert convert_tz corr corr_k corr_s corresponding corruption cos cost count count_big counted covar_pop covar_samp cpu_per_call cpu_per_session crc32 create creation critical cross cube cume_dist curdate current current_date current_time current_timestamp current_user cursor curtime customdatum cycle d data database databases datafile datafiles datalength date_add date_cache date_format date_sub dateadd datediff datefromparts datename datepart datetime2fromparts day day_to_second dayname dayofmonth dayofweek dayofyear days db_role_change dbtimezone ddl deallocate declare decode decompose decrement decrypt deduplicate def defa defau defaul default defaults deferred defi defin define degrees delayed delegate delete delete_all delimited demand dense_rank depth dequeue des_decrypt des_encrypt des_key_file desc descr descri describ describe descriptor deterministic diagnostics difference dimension direct_load directory disable disable_all disallow disassociate discardfile disconnect diskgroup distinct distinctrow distribute distributed div do document domain dotnet double downgrade drop dumpfile duplicate duration e each edition editionable editions element ellipsis else elsif elt empty enable enable_all enclosed encode encoding encrypt end end-exec endian enforced engine engines enqueue enterprise entityescaping eomonth error errors escaped evalname evaluate event eventdata events except exception exceptions exchange exclude excluding execu execut execute exempt exists exit exp expire explain export export_set extended extent external external_1 external_2 externally extract f failed failed_login_attempts failover failure far fast feature_set feature_value fetch field fields file file_name_convert filesystem_like_logging final finish first first_value fixed flash_cache flashback floor flush following follows for forall force form forma format found found_rows freelist freelists freepools fresh from from_base64 from_days ftp full function g general generated get get_format get_lock getdate getutcdate global global_name globally go goto grant grants greatest group group_concat group_id grouping grouping_id groups gtid_subtract guarantee guard handler hash hashkeys having hea head headi headin heading heap help hex hierarchy high high_priority hosts hour http i id ident_current ident_incr ident_seed identified identity idle_time if ifnull ignore iif ilike ilm immediate import in include including increment index indexes indexing indextype indicator indices inet6_aton inet6_ntoa inet_aton inet_ntoa infile initial initialized initially initrans inmemory inner innodb input insert install instance instantiable instr interface interleaved intersect into invalidate invisible is is_free_lock is_ipv4 is_ipv4_compat is_not is_not_null is_used_lock isdate isnull isolation iterate java join json json_exists k keep keep_duplicates key keys kill l language large last last_day last_insert_id last_value lax lcase lead leading least leaves left len lenght length less level levels library like like2 like4 likec limit lines link list listagg little ln load load_file lob lobs local localtime localtimestamp locate locator lock locked log log10 log2 logfile logfiles logging logical logical_reads_per_call logoff logon logs long loop low low_priority lower lpad lrtrim ltrim m main make_set makedate maketime managed management manual map mapping mask master master_pos_wait match matched materialized max maxextents maximize maxinstances maxlen maxlogfiles maxloghistory maxlogmembers maxsize maxtrans md5 measures median medium member memcompress memory merge microsecond mid migration min minextents minimum mining minus minute minvalue missing mod mode model modification modify module monitoring month months mount move movement multiset mutex n name name_const names nan national native natural nav nchar nclob nested never new newline next nextval no no_write_to_binlog noarchivelog noaudit nobadfile nocheck nocompress nocopy nocycle nodelay nodiscardfile noentityescaping noguarantee nokeep nologfile nomapping nomaxvalue nominimize nominvalue nomonitoring none noneditionable nonschema noorder nopr nopro noprom nopromp noprompt norely noresetlogs noreverse normal norowdependencies noschemacheck noswitch not nothing notice notrim novalidate now nowait nth_value nullif nulls num numb numbe nvarchar nvarchar2 object ocicoll ocidate ocidatetime ociduration ociinterval ociloblocator ocinumber ociref ocirefcursor ocirowid ocistring ocitype oct octet_length of off offline offset oid oidindex old on online only opaque open operations operator optimal optimize option optionally or oracle oracle_date oradata ord ordaudio orddicom orddoc order ordimage ordinality ordvideo organization orlany orlvary out outer outfile outline output over overflow overriding p package pad parallel parallel_enable parameters parent parse partial partition partitions pascal passing password password_grace_time password_lock_time password_reuse_max password_reuse_time password_verify_function patch path patindex pctincrease pctthreshold pctused pctversion percent percent_rank percentile_cont percentile_disc performance period period_add period_diff permanent physical pi pipe pipelined pivot pluggable plugin policy position post_transaction pow power pragma prebuilt precedes preceding precision prediction prediction_cost prediction_details prediction_probability prediction_set prepare present preserve prior priority private private_sga privileges procedural procedure procedure_analyze processlist profiles project prompt protection public publishingservername purge quarter query quick quiesce quota quotename radians raise rand range rank raw read reads readsize rebuild record records recover recovery recursive recycle redo reduced ref reference referenced references referencing refresh regexp_like register regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy reject rekey relational relative relaylog release release_lock relies_on relocate rely rem remainder rename repair repeat replace replicate replication required reset resetlogs resize resource respect restore restricted result result_cache resumable resume retention return returning returns reuse reverse revoke right rlike role roles rollback rolling rollup round row row_count rowdependencies rowid rownum rows rtrim rules safe salt sample save savepoint sb1 sb2 sb4 scan schema schemacheck scn scope scroll sdo_georaster sdo_topo_geometry search sec_to_time second section securefile security seed segment select self sequence sequential serializable server servererror session session_user sessions_per_user set sets settings sha sha1 sha2 share shared shared_pool short show shrink shutdown si_averagecolor si_colorhistogram si_featurelist si_positionalcolor si_stillimage si_texture siblings sid sign sin size size_t sizes skip slave sleep smalldatetimefromparts smallfile snapshot some soname sort soundex source space sparse spfile split sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_small_result sql_variant_property sqlcode sqldata sqlerror sqlname sqlstate sqrt square standalone standby start starting startup statement static statistics stats_binomial_test stats_crosstab stats_ks_test stats_mode stats_mw_test stats_one_way_anova stats_t_test_ stats_t_test_indep stats_t_test_one stats_t_test_paired stats_wsr_test status std stddev stddev_pop stddev_samp stdev stop storage store stored str str_to_date straight_join strcmp strict string struct stuff style subdate subpartition subpartitions substitutable substr substring subtime subtring_index subtype success sum suspend switch switchoffset switchover sync synchronous synonym sys sys_xmlagg sysasm sysaux sysdate sysdatetimeoffset sysdba sysoper system system_user sysutcdatetime t table tables tablespace tan tdo template temporary terminated tertiary_weights test than then thread through tier ties time time_format time_zone timediff timefromparts timeout timestamp timestampadd timestampdiff timezone_abbr timezone_minute timezone_region to to_base64 to_date to_days to_seconds todatetimeoffset trace tracking transaction transactional translate translation treat trigger trigger_nestlevel triggers trim truncate try_cast try_convert try_parse type ub1 ub2 ub4 ucase unarchived unbounded uncompress under undo unhex unicode uniform uninstall union unique unix_timestamp unknown unlimited unlock unpivot unrecoverable unsafe unsigned until untrusted unusable unused update updated upgrade upped upper upsert url urowid usable usage use use_stored_outlines user user_data user_resources users using utc_date utc_timestamp uuid uuid_short validate validate_password_strength validation valist value values var var_samp varcharc vari varia variab variabl variable variables variance varp varraw varrawc varray verify version versions view virtual visible void wait wallet warning warnings week weekday weekofyear wellformed when whene whenev wheneve whenever where while whitespace with within without work wrapped xdb xml xmlagg xmlattributes xmlcast xmlcolattval xmlelement xmlexists xmlforest xmlindex xmlnamespaces xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltype xor year year_to_month years yearweek",literal:"true false null",built_in:"array bigint binary bit blob boolean char character date dec decimal float int int8 integer interval number numeric real record serial serial8 smallint text varchar varying void"},c:[{cN:"string",b:"'",e:"'",c:[e.BE,{b:"''"}]},{cN:"string",b:'"',e:'"',c:[e.BE,{b:'""'}]},{cN:"string",b:"`",e:"`",c:[e.BE]},e.CNM,e.CBCM,t]},e.CBCM,t]}});hljs.registerLanguage("makefile",function(e){var a={cN:"variable",b:/\$\(/,e:/\)/,c:[e.BE]};return{aliases:["mk","mak"],c:[e.HCM,{b:/^\w+\s*\W*=/,rB:!0,r:0,starts:{cN:"constant",e:/\s*\W*=/,eE:!0,starts:{e:/$/,r:0,c:[a]}}},{cN:"title",b:/^[\w]+:\s*$/},{cN:"phony",b:/^\.PHONY:/,e:/$/,k:".PHONY",l:/[\.\w]+/},{b:/^\t+/,e:/$/,r:0,c:[e.QSM,a]}]}});hljs.registerLanguage("css",function(e){var c="[a-zA-Z-][a-zA-Z0-9_-]*",a={cN:"function",b:c+"\\(",rB:!0,eE:!0,e:"\\("},r={cN:"rule",b:/[A-Z\_\.\-]+\s*:/,rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:/\S/,e:":",eE:!0,starts:{cN:"value",eW:!0,eE:!0,c:[a,e.CSSNM,e.QSM,e.ASM,e.CBCM,{cN:"hexcolor",b:"#[0-9A-Fa-f]+"},{cN:"important",b:"!important"}]}}]};return{cI:!0,i:/[=\/|'\$]/,c:[e.CBCM,{cN:"id",b:/\#[A-Za-z0-9_-]+/},{cN:"class",b:/\.[A-Za-z0-9_-]+/},{cN:"attr_selector",b:/\[/,e:/\]/,i:"$"},{cN:"pseudo",b:/:(:)?[a-zA-Z0-9\_\-\+\(\)"']+/},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{cN:"at_rule",b:"@",e:"[{;]",c:[{cN:"keyword",b:/\S+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[a,e.ASM,e.QSM,e.CSSNM]}]},{cN:"tag",b:c,r:0},{cN:"rules",b:"{",e:"}",i:/\S/,c:[e.CBCM,r]}]}});hljs.registerLanguage("xml",function(t){var s="[A-Za-z0-9\\._:-]+",c={b:/<\?(php)?(?!\w)/,e:/\?>/,sL:"php"},e={eW:!0,i:/</,r:0,c:[c,{cN:"attribute",b:s,r:0},{b:"=",r:0,c:[{cN:"value",c:[c],v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s\/>]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xsl","plist"],cI:!0,c:[{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},t.C("<!--","-->",{r:10}),{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{title:"style"},c:[e],starts:{e:"</style>",rE:!0,sL:"css"}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{title:"script"},c:[e],starts:{e:"</script>",rE:!0,sL:["actionscript","javascript","handlebars"]}},c,{cN:"pi",b:/<\?\w+/,e:/\?>/,r:10},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:/[^ \/><\n\t]+/,r:0},e]}]}});hljs.registerLanguage("ruby",function(e){var c="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",r="and false then defined module in return redo if BEGIN retry end for true self when next until do begin unless END rescue nil else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor",b={cN:"doctag",b:"@[A-Za-z]+"},a={cN:"value",b:"#<",e:">"},n=[e.C("#","$",{c:[b]}),e.C("^\\=begin","^\\=end",{c:[b],r:10}),e.C("^__END__","\\n$")],s={cN:"subst",b:"#\\{",e:"}",k:r},t={cN:"string",c:[e.BE,s],v:[{b:/'/,e:/'/},{b:/"/,e:/"/},{b:/`/,e:/`/},{b:"%[qQwWx]?\\(",e:"\\)"},{b:"%[qQwWx]?\\[",e:"\\]"},{b:"%[qQwWx]?{",e:"}"},{b:"%[qQwWx]?<",e:">"},{b:"%[qQwWx]?/",e:"/"},{b:"%[qQwWx]?%",e:"%"},{b:"%[qQwWx]?-",e:"-"},{b:"%[qQwWx]?\\|",e:"\\|"},{b:/\B\?(\\\d{1,3}|\\x[A-Fa-f0-9]{1,2}|\\u[A-Fa-f0-9]{4}|\\?\S)\b/}]},i={cN:"params",b:"\\(",e:"\\)",k:r},d=[t,a,{cN:"class",bK:"class module",e:"$|;",i:/=/,c:[e.inherit(e.TM,{b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?"}),{cN:"inheritance",b:"<\\s*",c:[{cN:"parent",b:"("+e.IR+"::)?"+e.IR}]}].concat(n)},{cN:"function",bK:"def",e:"$|;",c:[e.inherit(e.TM,{b:c}),i].concat(n)},{cN:"constant",b:"(::)?(\\b[A-Z]\\w*(::)?)+",r:0},{cN:"symbol",b:e.UIR+"(\\!|\\?)?:",r:0},{cN:"symbol",b:":",c:[t,{b:c}],r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{cN:"variable",b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{b:"("+e.RSR+")\\s*",c:[a,{cN:"regexp",c:[e.BE,s],i:/\n/,v:[{b:"/",e:"/[a-z]*"},{b:"%r{",e:"}[a-z]*"},{b:"%r\\(",e:"\\)[a-z]*"},{b:"%r!",e:"![a-z]*"},{b:"%r\\[",e:"\\][a-z]*"}]}].concat(n),r:0}].concat(n);s.c=d,i.c=d;var o="[>?]>",l="[\\w#]+\\(\\w+\\):\\d+:\\d+>",u="(\\w+-)?\\d+\\.\\d+\\.\\d(p\\d+)?[^>]+>",N=[{b:/^\s*=>/,cN:"status",starts:{e:"$",c:d}},{cN:"prompt",b:"^("+o+"|"+l+"|"+u+")",starts:{e:"$",c:d}}];return{aliases:["rb","gemspec","podspec","thor","irb"],k:r,i:/\/\*/,c:n.concat(N).concat(d)}});hljs.registerLanguage("objectivec",function(e){var t={cN:"built_in",b:"(AV|CA|CF|CG|CI|MK|MP|NS|UI)\\w+"},i={keyword:"int float while char export sizeof typedef const struct for union unsigned long volatile static bool mutable if do return goto void enum else break extern asm case short default double register explicit signed typename this switch continue wchar_t inline readonly assign readwrite self @synchronized id typeof nonatomic super unichar IBOutlet IBAction strong weak copy in out inout bycopy byref oneway __strong __weak __block __autoreleasing @private @protected @public @try @property @end @throw @catch @finally @autoreleasepool @synthesize @dynamic @selector @optional @required",literal:"false true FALSE TRUE nil YES NO NULL",built_in:"BOOL dispatch_once_t dispatch_queue_t dispatch_sync dispatch_async dispatch_once"},o=/[a-zA-Z@][a-zA-Z0-9_]*/,n="@interface @class @protocol @implementation";return{aliases:["mm","objc","obj-c"],k:i,l:o,i:"</",c:[t,e.CLCM,e.CBCM,e.CNM,e.QSM,{cN:"string",v:[{b:'@"',e:'"',i:"\\n",c:[e.BE]},{b:"'",e:"[^\\\\]'",i:"[^\\\\][^']"}]},{cN:"preprocessor",b:"#",e:"$",c:[{cN:"title",v:[{b:'"',e:'"'},{b:"<",e:">"}]}]},{cN:"class",b:"("+n.split(" ").join("|")+")\\b",e:"({|$)",eE:!0,k:n,l:o,c:[e.UTM]},{cN:"variable",b:"\\."+e.UIR,r:0}]}});hljs.registerLanguage("python",function(e){var r={cN:"prompt",b:/^(>>>|\.\.\.) /},b={cN:"string",c:[e.BE],v:[{b:/(u|b)?r?'''/,e:/'''/,c:[r],r:10},{b:/(u|b)?r?"""/,e:/"""/,c:[r],r:10},{b:/(u|r|ur)'/,e:/'/,r:10},{b:/(u|r|ur)"/,e:/"/,r:10},{b:/(b|br)'/,e:/'/},{b:/(b|br)"/,e:/"/},e.ASM,e.QSM]},a={cN:"number",r:0,v:[{b:e.BNR+"[lLjJ]?"},{b:"\\b(0o[0-7]+)[lLjJ]?"},{b:e.CNR+"[lLjJ]?"}]},l={cN:"params",b:/\(/,e:/\)/,c:["self",r,a,b]};return{aliases:["py","gyp"],k:{keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10 None True False",built_in:"Ellipsis NotImplemented"},i:/(<\/|->|\?)/,c:[r,a,b,e.HCM,{v:[{cN:"function",bK:"def",r:10},{cN:"class",bK:"class"}],e:/:/,i:/[${=;\n,]/,c:[e.UTM,l]},{cN:"decorator",b:/^[\t ]*@/,e:/$/},{b:/\b(print|exec)\(/}]}});hljs.registerLanguage("coffeescript",function(e){var c={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off",built_in:"npm require console print module global window document"},n="[A-Za-z$_][0-9A-Za-z$_]*",r={cN:"subst",b:/#\{/,e:/}/,k:c},t=[e.BNM,e.inherit(e.CNM,{starts:{e:"(\\s*/)?",r:0}}),{cN:"string",v:[{b:/'''/,e:/'''/,c:[e.BE]},{b:/'/,e:/'/,c:[e.BE]},{b:/"""/,e:/"""/,c:[e.BE,r]},{b:/"/,e:/"/,c:[e.BE,r]}]},{cN:"regexp",v:[{b:"///",e:"///",c:[r,e.HCM]},{b:"//[gim]*",r:0},{b:/\/(?![ *])(\\\/|.)*?\/[gim]*(?=\W|$)/}]},{cN:"property",b:"@"+n},{b:"`",e:"`",eB:!0,eE:!0,sL:"javascript"}];r.c=t;var s=e.inherit(e.TM,{b:n}),i="(\\(.*\\))?\\s*\\B[-=]>",o={cN:"params",b:"\\([^\\(]",rB:!0,c:[{b:/\(/,e:/\)/,k:c,c:["self"].concat(t)}]};return{aliases:["coffee","cson","iced"],k:c,i:/\/\*/,c:t.concat([e.C("###","###"),e.HCM,{cN:"function",b:"^\\s*"+n+"\\s*=\\s*"+i,e:"[-=]>",rB:!0,c:[s,o]},{b:/[:\(,=]\s*/,r:0,c:[{cN:"function",b:i,e:"[-=]>",rB:!0,c:[o]}]},{cN:"class",bK:"class",e:"$",i:/[:="\[\]]/,c:[{bK:"extends",eW:!0,i:/[:="\[\]]/,c:[s]},s]},{cN:"attribute",b:n+":",e:":",rB:!0,rE:!0,r:0}])}});hljs.registerLanguage("perl",function(e){var t="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",r={cN:"subst",b:"[$@]\\{",e:"\\}",k:t},s={b:"->{",e:"}"},n={cN:"variable",v:[{b:/\$\d/},{b:/[\$%@](\^\w\b|#\w+(::\w+)*|{\w+}|\w+(::\w*)*)/},{b:/[\$%@][^\s\w{]/,r:0}]},o=[e.BE,r,n],i=[n,e.HCM,e.C("^\\=\\w","\\=cut",{eW:!0}),s,{cN:"string",c:o,v:[{b:"q[qwxr]?\\s*\\(",e:"\\)",r:5},{b:"q[qwxr]?\\s*\\[",e:"\\]",r:5},{b:"q[qwxr]?\\s*\\{",e:"\\}",r:5},{b:"q[qwxr]?\\s*\\|",e:"\\|",r:5},{b:"q[qwxr]?\\s*\\<",e:"\\>",r:5},{b:"qw\\s+q",e:"q",r:5},{b:"'",e:"'",c:[e.BE]},{b:'"',e:'"'},{b:"`",e:"`",c:[e.BE]},{b:"{\\w+}",c:[],r:0},{b:"-?\\w+\\s*\\=\\>",c:[],r:0}]},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{b:"(\\/\\/|"+e.RSR+"|\\b(split|return|print|reverse|grep)\\b)\\s*",k:"split return print reverse grep",r:0,c:[e.HCM,{cN:"regexp",b:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",r:10},{cN:"regexp",b:"(m|qr)?/",e:"/[a-z]*",c:[e.BE],r:0}]},{cN:"sub",bK:"sub",e:"(\\s*\\(.*?\\))?[;{]",r:5},{cN:"operator",b:"-\\w\\b",r:0},{b:"^__DATA__$",e:"^__END__$",sL:"mojolicious",c:[{b:"^@@.*",e:"$",cN:"comment"}]}];return r.c=i,s.c=i,{aliases:["pl"],k:t,c:i}});hljs.registerLanguage("cpp",function(t){var e={cN:"keyword",b:"\\b[a-z\\d_]*_t\\b"},r={cN:"string",v:[t.inherit(t.QSM,{b:'((u8?|U)|L)?"'}),{b:'(u8?|U)?R"',e:'"',c:[t.BE]},{b:"'\\\\?.",e:"'",i:"."}]},s={cN:"number",v:[{b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},{b:t.CNR}]},i={cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line pragma ifdef ifndef",c:[{b:/\\\n/,r:0},{bK:"include",e:"$",c:[r,{cN:"string",b:"<",e:">",i:"\\n"}]},r,s,t.CLCM,t.CBCM]},a=t.IR+"\\s*\\(",c={keyword:"int float while private char catch export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const struct for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using class asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue inline delete alignof constexpr decltype noexcept static_assert thread_local restrict _Bool complex _Complex _Imaginary atomic_bool atomic_char atomic_schar atomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llong atomic_ullong",built_in:"std string cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr abort abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf",literal:"true false nullptr NULL"};return{aliases:["c","cc","h","c++","h++","hpp"],k:c,i:"</",c:[e,t.CLCM,t.CBCM,s,r,i,{b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:c,c:["self",e]},{b:t.IR+"::",k:c},{bK:"new throw return else",r:0},{cN:"function",b:"("+t.IR+"[\\*&\\s]+)+"+a,rB:!0,e:/[{;=]/,eE:!0,k:c,i:/[^\w\s\*&]/,c:[{b:a,rB:!0,c:[t.TM],r:0},{cN:"params",b:/\(/,e:/\)/,k:c,r:0,c:[t.CLCM,t.CBCM,r,s]},t.CLCM,t.CBCM,i]}]}});hljs.registerLanguage("http",function(t){return{aliases:["https"],i:"\\S",c:[{cN:"status",b:"^HTTP/[0-9\\.]+",e:"$",c:[{cN:"number",b:"\\b\\d{3}\\b"}]},{cN:"request",b:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",rB:!0,e:"$",c:[{cN:"string",b:" ",e:" ",eB:!0,eE:!0}]},{cN:"attribute",b:"^\\w",e:": ",eE:!0,i:"\\n|\\s|=",starts:{cN:"string",e:"$"}},{b:"\\n\\n",starts:{sL:[],eW:!0}}]}});hljs.registerLanguage("json",function(e){var t={literal:"true false null"},i=[e.QSM,e.CNM],l={cN:"value",e:",",eW:!0,eE:!0,c:i,k:t},c={b:"{",e:"}",c:[{cN:"attribute",b:'\\s*"',e:'"\\s*:\\s*',eB:!0,eE:!0,c:[e.BE],i:"\\n",starts:l}],i:"\\S"},n={b:"\\[",e:"\\]",c:[e.inherit(l,{cN:null})],i:"\\S"};return i.splice(i.length,0,c,n),{c:i,k:t,i:"\\S"}});hljs.registerLanguage("java",function(e){var a=e.UIR+"(<"+e.UIR+">)?",t="false synchronized int abstract float private char boolean static null if const for true while long strictfp finally protected import native final void enum else break transient catch instanceof byte super volatile case assert short package default double public try this switch continue throws protected public private",c="\\b(0[bB]([01]+[01_]+[01]+|[01]+)|0[xX]([a-fA-F0-9]+[a-fA-F0-9_]+[a-fA-F0-9]+|[a-fA-F0-9]+)|(([\\d]+[\\d_]+[\\d]+|[\\d]+)(\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))?|\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))([eE][-+]?\\d+)?)[lLfF]?",r={cN:"number",b:c,r:0};return{aliases:["jsp"],k:t,i:/<\/|#/,c:[e.C("/\\*\\*","\\*/",{r:0,c:[{cN:"doctag",b:"@[A-Za-z]+"}]}),e.CLCM,e.CBCM,e.ASM,e.QSM,{cN:"class",bK:"class interface",e:/[{;=]/,eE:!0,k:"class interface",i:/[:"\[\]]/,c:[{bK:"extends implements"},e.UTM]},{bK:"new throw return else",r:0},{cN:"function",b:"("+a+"\\s+)+"+e.UIR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:t,c:[{b:e.UIR+"\\s*\\(",rB:!0,r:0,c:[e.UTM]},{cN:"params",b:/\(/,e:/\)/,k:t,r:0,c:[e.ASM,e.QSM,e.CNM,e.CBCM]},e.CLCM,e.CBCM]},r,{cN:"annotation",b:"@[A-Za-z]+"}]}});hljs.registerLanguage("php",function(e){var c={cN:"variable",b:"\\$+[a-zA-Z_-][a-zA-Z0-9_-]*"},a={cN:"preprocessor",b:/<\?(php)?|\?>/},i={cN:"string",c:[e.BE,a],v:[{b:'b"',e:'"'},{b:"b'",e:"'"},e.inherit(e.ASM,{i:null}),e.inherit(e.QSM,{i:null})]},t={v:[e.BNM,e.CNM]};return{aliases:["php3","php4","php5","php6"],cI:!0,k:"and include_once list abstract global private echo interface as static endswitch array null if endwhile or const for endforeach self var while isset public protected exit foreach throw elseif include __FILE__ empty require_once do xor return parent clone use __CLASS__ __LINE__ else break print eval new catch __METHOD__ case exception default die require __FUNCTION__ enddeclare final try switch continue endfor endif declare unset true false trait goto instanceof insteadof __DIR__ __NAMESPACE__ yield finally",c:[e.CLCM,e.HCM,e.C("/\\*","\\*/",{c:[{cN:"doctag",b:"@[A-Za-z]+"},a]}),e.C("__halt_compiler.+?;",!1,{eW:!0,k:"__halt_compiler",l:e.UIR}),{cN:"string",b:/<<<['"]?\w+['"]?$/,e:/^\w+;?$/,c:[e.BE,{cN:"subst",v:[{b:/\$\w+/},{b:/\{\$/,e:/\}/}]}]},a,c,{b:/(::|->)+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/},{cN:"function",bK:"function",e:/[;{]/,eE:!0,i:"\\$|\\[|%",c:[e.UTM,{cN:"params",b:"\\(",e:"\\)",c:["self",c,e.CBCM,i,t]}]},{cN:"class",bK:"class interface",e:"{",eE:!0,i:/[:\(\$"]/,c:[{bK:"extends implements"},e.UTM]},{bK:"namespace",e:";",i:/[\.']/,c:[e.UTM]},{bK:"use",e:";",c:[e.UTM]},{b:"=>"},i,t]}});
\ No newline at end of file
diff --git a/libraries/highlight/styles/agate.css b/libraries/highlight/styles/agate.css
new file mode 100644
index 0000000..50f8489
--- /dev/null
+++ b/libraries/highlight/styles/agate.css
@@ -0,0 +1,137 @@
+/*!
+ * Agate by Taufik Nurrohman <https://github.com/tovic>
+ * ----------------------------------------------------
+ *
+ * #ade5fc
+ * #a2fca2
+ * #c6b4f0
+ * #d36363
+ * #fcc28c
+ * #fc9b9b
+ * #ffa
+ * #fff
+ * #333
+ * #62c8f3
+ * #888
+ *
+ */
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: .5em;
+  background: #333;
+  color: white;
+  -webkit-text-size-adjust: none;
+}
+
+.asciidoc .hljs-title,
+.hljs-label,
+.hljs-tag .hljs-title,
+.hljs-prompt,
+.http .hljs-request {
+  font-weight: bold;
+}
+
+.hljs-change,
+.hljs-code {
+  font-style: italic;
+}
+
+.hljs-tag,
+.ini .hljs-title {
+  color: #62c8f3;
+}
+
+.hljs-id,
+.hljs-cbracket,
+.hljs-tag .hljs-value {
+  color: #ade5fc;
+}
+
+.hljs-string,
+.hljs-bullet {
+  color: #a2fca2;
+}
+
+.hljs-type,
+.hljs-variable,
+.hljs-name,
+.actionscript .hljs-title,
+.aspectj .hljs-annotation,
+.aspectj .hljs-title,
+.hljs-attribute,
+.hljs-change,
+.hljs-blockquote,
+.hljs-built_in {
+  color: #ffa;
+}
+
+.hljs-number,
+.hljs-hexcolor,
+.hljs-link_label,
+.hljs-link_reference {
+  color: #d36363;
+}
+
+.hljs-keyword,
+.hljs-literal,
+.hljs-constant,
+.css .hljs-tag,
+.hljs-typename,
+.hljs-winutils {
+  color: #fcc28c;
+}
+
+.hljs-comment,
+.hljs-cdata,
+.hljs-preprocessor,
+.hljs-annotation,
+.hljs-decorator,
+.hljs-doctype,
+.hljs-deletion,
+.hljs-shebang,
+.apache .hljs-sqbracket,
+.tex .hljs-formula,
+.hljs-header,
+.hljs-horizontal_rule,
+.hljs-code {
+  color: #888;
+}
+
+.hljs-regexp,
+.hljs-attr_selector {
+  color: #c6b4f0;
+}
+
+.hljs-important,
+.hljs-doctype,
+.hljs-pi,
+.hljs-chunk,
+.actionscript .hljs-type,
+.hljs-shebang,
+.hljs-pragma,
+.http .hljs-attribute {
+  color: #fc9b9b;
+}
+
+.hljs-deletion {
+  background-color: #fc9b9b;
+  color: #333;
+}
+
+.hljs-addition {
+  background-color: #a2fca2;
+  color: #333;
+}
+
+.hljs a,
+.hljs-tag .hljs-attribute {
+  color: inherit;
+}
+
+.hljs a:focus,
+.hljs a:hover {
+  color: inherit;
+  text-decoration: underline;
+}
diff --git a/libraries/highlight/styles/androidstudio.css b/libraries/highlight/styles/androidstudio.css
new file mode 100644
index 0000000..603ddd9
--- /dev/null
+++ b/libraries/highlight/styles/androidstudio.css
@@ -0,0 +1,53 @@
+/*
+Date: 24 Fev 2015
+Author: Pedro Oliveira <kanytu@gmail . com>
+*/
+
+.hljs {
+  color: #a9b7c6;
+  background: #282b2e;
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-number {
+  color: #6897BB;
+}
+
+.hljs-keyword,
+.hljs-deletion {
+  color: #cc7832;
+}
+
+.hljs-comment {
+  color: #808080;
+}
+
+.hljs-annotation {
+  color: #bbb529;
+}
+
+.hljs-string,
+.hljs-addition {
+  color: #6A8759;
+}
+
+.hljs-function .hljs-title,
+.hljs-change {
+  color: #ffc66d;
+}
+
+.hljs-tag .hljs-title,
+.hljs-doctype {
+  color: #e8bf6a;
+}
+
+.hljs-tag .hljs-attribute {
+  color: #bababa;
+}
+
+.hljs-tag .hljs-value {
+  color: #a5c261;
+}
diff --git a/libraries/highlight/styles/arta.css b/libraries/highlight/styles/arta.css
new file mode 100644
index 0000000..0a336f6
--- /dev/null
+++ b/libraries/highlight/styles/arta.css
@@ -0,0 +1,138 @@
+/*
+Date: 17.V.2011
+Author: pumbur <pumbur@pumbur.net>
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #222;
+  -webkit-text-size-adjust: none;
+}
+
+.profile .hljs-header *,
+.ini .hljs-title,
+.nginx .hljs-title {
+  color: #fff;
+}
+
+.hljs-comment,
+.hljs-preprocessor,
+.hljs-preprocessor .hljs-title,
+.hljs-pragma,
+.hljs-shebang,
+.profile .hljs-summary,
+.diff,
+.hljs-pi,
+.hljs-doctype,
+.hljs-tag,
+.css .hljs-rule,
+.tex .hljs-special {
+  color: #444;
+}
+
+.hljs-string,
+.hljs-symbol,
+.diff .hljs-change,
+.hljs-regexp,
+.xml .hljs-attribute,
+.smalltalk .hljs-char,
+.xml .hljs-value,
+.ini .hljs-value,
+.clojure .hljs-attribute,
+.coffeescript .hljs-attribute {
+  color: #ffcc33;
+}
+
+.hljs-number,
+.hljs-addition {
+  color: #00cc66;
+}
+
+.hljs-built_in,
+.hljs-literal,
+.hljs-type,
+.hljs-typename,
+.go .hljs-constant,
+.ini .hljs-keyword,
+.lua .hljs-title,
+.perl .hljs-variable,
+.php .hljs-variable,
+.mel .hljs-variable,
+.django .hljs-variable,
+.css .funtion,
+.smalltalk .method,
+.hljs-hexcolor,
+.hljs-important,
+.hljs-flow,
+.hljs-inheritance,
+.hljs-name,
+.parser3 .hljs-variable {
+  color: #32aaee;
+}
+
+.hljs-keyword,
+.hljs-tag .hljs-title,
+.css .hljs-tag,
+.css .hljs-class,
+.css .hljs-id,
+.css .hljs-pseudo,
+.css .hljs-attr_selector,
+.hljs-winutils,
+.tex .hljs-command,
+.hljs-request,
+.hljs-status {
+  color: #6644aa;
+}
+
+.hljs-title,
+.ruby .hljs-constant,
+.vala .hljs-constant,
+.hljs-parent,
+.hljs-deletion,
+.hljs-template_tag,
+.css .hljs-keyword,
+.objectivec .hljs-class .hljs-id,
+.smalltalk .hljs-class,
+.lisp .hljs-keyword,
+.apache .hljs-tag,
+.nginx .hljs-variable,
+.hljs-envvar,
+.bash .hljs-variable,
+.go .hljs-built_in,
+.vbscript .hljs-built_in,
+.lua .hljs-built_in,
+.rsl .hljs-built_in,
+.tail,
+.avrasm .hljs-label,
+.tex .hljs-formula,
+.tex .hljs-formula * {
+  color: #bb1166;
+}
+
+.hljs-doctag,
+.profile .hljs-header,
+.ini .hljs-title,
+.apache .hljs-tag,
+.parser3 .hljs-title {
+  font-weight: bold;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.6;
+}
+
+.hljs,
+.hljs-subst,
+.diff .hljs-chunk,
+.css .hljs-value,
+.css .hljs-attribute {
+  color: #aaa;
+}
diff --git a/libraries/highlight/styles/ascetic.css b/libraries/highlight/styles/ascetic.css
new file mode 100644
index 0000000..4f19afe
--- /dev/null
+++ b/libraries/highlight/styles/ascetic.css
@@ -0,0 +1,52 @@
+/*
+
+Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: white;
+  color: black;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-string,
+.hljs-tag .hljs-value,
+.hljs-filter .hljs-argument,
+.hljs-addition,
+.hljs-change,
+.hljs-name,
+.apache .hljs-tag,
+.apache .hljs-cbracket,
+.nginx .hljs-built_in,
+.tex .hljs-formula {
+  color: #888;
+}
+
+.hljs-comment,
+.hljs-shebang,
+.hljs-doctype,
+.hljs-pi,
+.hljs-deletion,
+.apache .hljs-sqbracket {
+  color: #ccc;
+}
+
+.hljs-keyword,
+.hljs-tag .hljs-title,
+.ini .hljs-title,
+.lisp .hljs-title,
+.http .hljs-title,
+.nginx .hljs-title,
+.css .hljs-tag,
+.hljs-winutils,
+.hljs-flow,
+.apache .hljs-tag,
+.tex .hljs-command,
+.hljs-request,
+.hljs-status {
+  font-weight: bold;
+}
diff --git a/libraries/highlight/styles/atelier-cave.dark.css b/libraries/highlight/styles/atelier-cave.dark.css
new file mode 100644
index 0000000..f907bee
--- /dev/null
+++ b/libraries/highlight/styles/atelier-cave.dark.css
@@ -0,0 +1,113 @@
+/* Base16 Atelier Cave Dark - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/cave) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Cave Comment */
+.hljs-comment {
+  color: #7e7887;
+}
+
+/* Atelier-Cave Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #be4678;
+}
+
+/* Atelier-Cave Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #aa573c;
+}
+
+/* Atelier-Cave Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #a06e3b;
+}
+
+/* Atelier-Cave Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #2a9292;
+}
+
+/* Atelier-Cave Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #398bc6;
+}
+
+/* Atelier-Cave Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #576ddb;
+}
+
+/* Atelier-Cave Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #955ae7;
+}
+
+.diff .hljs-deletion,
+.diff .hljs-addition {
+  color: #19171c;
+  display: inline-block;
+  width: 100%;
+}
+
+.diff .hljs-deletion {
+  background-color: #be4678;
+}
+
+.diff .hljs-addition {
+  background-color: #2a9292;
+}
+
+.diff .hljs-change {
+  color: #576ddb;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #19171c;
+  color: #8b8792;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-cave.light.css b/libraries/highlight/styles/atelier-cave.light.css
new file mode 100644
index 0000000..5df8b4c
--- /dev/null
+++ b/libraries/highlight/styles/atelier-cave.light.css
@@ -0,0 +1,113 @@
+/* Base16 Atelier Cave Light - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/cave) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Cave Comment */
+.hljs-comment {
+  color: #655f6d;
+}
+
+/* Atelier-Cave Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #be4678;
+}
+
+/* Atelier-Cave Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #aa573c;
+}
+
+/* Atelier-Cave Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #a06e3b;
+}
+
+/* Atelier-Cave Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #2a9292;
+}
+
+/* Atelier-Cave Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #398bc6;
+}
+
+/* Atelier-Cave Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #576ddb;
+}
+
+/* Atelier-Cave Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #955ae7;
+}
+
+.diff .hljs-deletion,
+.diff .hljs-addition {
+  color: #19171c;
+  display: inline-block;
+  width: 100%;
+}
+
+.diff .hljs-deletion {
+  background-color: #be4678;
+}
+
+.diff .hljs-addition {
+  background-color: #2a9292;
+}
+
+.diff .hljs-change {
+  color: #576ddb;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #efecf4;
+  color: #585260;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-dune.dark.css b/libraries/highlight/styles/atelier-dune.dark.css
new file mode 100644
index 0000000..88ea51a
--- /dev/null
+++ b/libraries/highlight/styles/atelier-dune.dark.css
@@ -0,0 +1,94 @@
+/* Base16 Atelier Dune Dark - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Dune Comment */
+.hljs-comment {
+  color: #999580;
+}
+
+/* Atelier-Dune Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #d73737;
+}
+
+/* Atelier-Dune Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #b65611;
+}
+
+/* Atelier-Dune Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #ae9513;
+}
+
+/* Atelier-Dune Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #60ac39;
+}
+
+/* Atelier-Dune Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #1fad83;
+}
+
+/* Atelier-Dune Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #6684e1;
+}
+
+/* Atelier-Dune Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #b854d4;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #20201d;
+  color: #a6a28c;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-dune.light.css b/libraries/highlight/styles/atelier-dune.light.css
new file mode 100644
index 0000000..87ffd80
--- /dev/null
+++ b/libraries/highlight/styles/atelier-dune.light.css
@@ -0,0 +1,94 @@
+/* Base16 Atelier Dune Light - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Dune Comment */
+.hljs-comment {
+  color: #7d7a68;
+}
+
+/* Atelier-Dune Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #d73737;
+}
+
+/* Atelier-Dune Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #b65611;
+}
+
+/* Atelier-Dune Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #ae9513;
+}
+
+/* Atelier-Dune Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #60ac39;
+}
+
+/* Atelier-Dune Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #1fad83;
+}
+
+/* Atelier-Dune Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #6684e1;
+}
+
+/* Atelier-Dune Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #b854d4;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #fefbec;
+  color: #6e6b5e;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-estuary.dark.css b/libraries/highlight/styles/atelier-estuary.dark.css
new file mode 100644
index 0000000..65d0f7f
--- /dev/null
+++ b/libraries/highlight/styles/atelier-estuary.dark.css
@@ -0,0 +1,113 @@
+/* Base16 Atelier Estuary Dark - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/estuary) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Estuary Comment */
+.hljs-comment {
+  color: #878573;
+}
+
+/* Atelier-Estuary Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #ba6236;
+}
+
+/* Atelier-Estuary Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #ae7313;
+}
+
+/* Atelier-Estuary Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #a5980d;
+}
+
+/* Atelier-Estuary Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #7d9726;
+}
+
+/* Atelier-Estuary Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #5b9d48;
+}
+
+/* Atelier-Estuary Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #36a166;
+}
+
+/* Atelier-Estuary Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #5f9182;
+}
+
+.diff .hljs-deletion,
+.diff .hljs-addition {
+  color: #22221b;
+  display: inline-block;
+  width: 100%;
+}
+
+.diff .hljs-deletion {
+  background-color: #ba6236;
+}
+
+.diff .hljs-addition {
+  background-color: #7d9726;
+}
+
+.diff .hljs-change {
+  color: #36a166;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #22221b;
+  color: #929181;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-estuary.light.css b/libraries/highlight/styles/atelier-estuary.light.css
new file mode 100644
index 0000000..d2f70c1
--- /dev/null
+++ b/libraries/highlight/styles/atelier-estuary.light.css
@@ -0,0 +1,113 @@
+/* Base16 Atelier Estuary Light - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/estuary) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Estuary Comment */
+.hljs-comment {
+  color: #6c6b5a;
+}
+
+/* Atelier-Estuary Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #ba6236;
+}
+
+/* Atelier-Estuary Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #ae7313;
+}
+
+/* Atelier-Estuary Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #a5980d;
+}
+
+/* Atelier-Estuary Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #7d9726;
+}
+
+/* Atelier-Estuary Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #5b9d48;
+}
+
+/* Atelier-Estuary Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #36a166;
+}
+
+/* Atelier-Estuary Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #5f9182;
+}
+
+.diff .hljs-deletion,
+.diff .hljs-addition {
+  color: #22221b;
+  display: inline-block;
+  width: 100%;
+}
+
+.diff .hljs-deletion {
+  background-color: #ba6236;
+}
+
+.diff .hljs-addition {
+  background-color: #7d9726;
+}
+
+.diff .hljs-change {
+  color: #36a166;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #f4f3ec;
+  color: #5f5e4e;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-forest.dark.css b/libraries/highlight/styles/atelier-forest.dark.css
new file mode 100644
index 0000000..0e4294b
--- /dev/null
+++ b/libraries/highlight/styles/atelier-forest.dark.css
@@ -0,0 +1,94 @@
+/* Base16 Atelier Forest Dark - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Forest Comment */
+.hljs-comment {
+  color: #9c9491;
+}
+
+/* Atelier-Forest Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #f22c40;
+}
+
+/* Atelier-Forest Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #df5320;
+}
+
+/* Atelier-Forest Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #c38418;
+}
+
+/* Atelier-Forest Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #7b9726;
+}
+
+/* Atelier-Forest Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #3d97b8;
+}
+
+/* Atelier-Forest Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #407ee7;
+}
+
+/* Atelier-Forest Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #6666ea;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #1b1918;
+  color: #a8a19f;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-forest.light.css b/libraries/highlight/styles/atelier-forest.light.css
new file mode 100644
index 0000000..e08e3dc
--- /dev/null
+++ b/libraries/highlight/styles/atelier-forest.light.css
@@ -0,0 +1,94 @@
+/* Base16 Atelier Forest Light - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Forest Comment */
+.hljs-comment {
+  color: #766e6b;
+}
+
+/* Atelier-Forest Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #f22c40;
+}
+
+/* Atelier-Forest Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #df5320;
+}
+
+/* Atelier-Forest Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #c38418;
+}
+
+/* Atelier-Forest Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #7b9726;
+}
+
+/* Atelier-Forest Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #3d97b8;
+}
+
+/* Atelier-Forest Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #407ee7;
+}
+
+/* Atelier-Forest Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #6666ea;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #f1efee;
+  color: #68615e;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-heath.dark.css b/libraries/highlight/styles/atelier-heath.dark.css
new file mode 100644
index 0000000..a063feb
--- /dev/null
+++ b/libraries/highlight/styles/atelier-heath.dark.css
@@ -0,0 +1,94 @@
+/* Base16 Atelier Heath Dark - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Heath Comment */
+.hljs-comment {
+  color: #9e8f9e;
+}
+
+/* Atelier-Heath Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #ca402b;
+}
+
+/* Atelier-Heath Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #a65926;
+}
+
+/* Atelier-Heath Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #bb8a35;
+}
+
+/* Atelier-Heath Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #918b3b;
+}
+
+/* Atelier-Heath Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #159393;
+}
+
+/* Atelier-Heath Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #516aec;
+}
+
+/* Atelier-Heath Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #7b59c0;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #1b181b;
+  color: #ab9bab;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-heath.light.css b/libraries/highlight/styles/atelier-heath.light.css
new file mode 100644
index 0000000..6c56d04
--- /dev/null
+++ b/libraries/highlight/styles/atelier-heath.light.css
@@ -0,0 +1,94 @@
+/* Base16 Atelier Heath Light - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Heath Comment */
+.hljs-comment {
+  color: #776977;
+}
+
+/* Atelier-Heath Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #ca402b;
+}
+
+/* Atelier-Heath Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #a65926;
+}
+
+/* Atelier-Heath Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #bb8a35;
+}
+
+/* Atelier-Heath Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #918b3b;
+}
+
+/* Atelier-Heath Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #159393;
+}
+
+/* Atelier-Heath Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #516aec;
+}
+
+/* Atelier-Heath Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #7b59c0;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #f7f3f7;
+  color: #695d69;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-lakeside.dark.css b/libraries/highlight/styles/atelier-lakeside.dark.css
new file mode 100644
index 0000000..852f72e
--- /dev/null
+++ b/libraries/highlight/styles/atelier-lakeside.dark.css
@@ -0,0 +1,94 @@
+/* Base16 Atelier Lakeside Dark - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Lakeside Comment */
+.hljs-comment {
+  color: #7195a8;
+}
+
+/* Atelier-Lakeside Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #d22d72;
+}
+
+/* Atelier-Lakeside Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #935c25;
+}
+
+/* Atelier-Lakeside Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #8a8a0f;
+}
+
+/* Atelier-Lakeside Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #568c3b;
+}
+
+/* Atelier-Lakeside Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #2d8f6f;
+}
+
+/* Atelier-Lakeside Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #257fad;
+}
+
+/* Atelier-Lakeside Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #6b6bb8;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #161b1d;
+  color: #7ea2b4;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-lakeside.light.css b/libraries/highlight/styles/atelier-lakeside.light.css
new file mode 100644
index 0000000..06f208c
--- /dev/null
+++ b/libraries/highlight/styles/atelier-lakeside.light.css
@@ -0,0 +1,94 @@
+/* Base16 Atelier Lakeside Light - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Lakeside Comment */
+.hljs-comment {
+  color: #5a7b8c;
+}
+
+/* Atelier-Lakeside Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #d22d72;
+}
+
+/* Atelier-Lakeside Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #935c25;
+}
+
+/* Atelier-Lakeside Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #8a8a0f;
+}
+
+/* Atelier-Lakeside Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #568c3b;
+}
+
+/* Atelier-Lakeside Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #2d8f6f;
+}
+
+/* Atelier-Lakeside Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #257fad;
+}
+
+/* Atelier-Lakeside Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #6b6bb8;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #ebf8ff;
+  color: #516d7b;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-plateau.dark.css b/libraries/highlight/styles/atelier-plateau.dark.css
new file mode 100644
index 0000000..10b8f8e
--- /dev/null
+++ b/libraries/highlight/styles/atelier-plateau.dark.css
@@ -0,0 +1,113 @@
+/* Base16 Atelier Plateau Dark - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/plateau) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Plateau Comment */
+.hljs-comment {
+  color: #7e7777;
+}
+
+/* Atelier-Plateau Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #ca4949;
+}
+
+/* Atelier-Plateau Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #b45a3c;
+}
+
+/* Atelier-Plateau Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #a06e3b;
+}
+
+/* Atelier-Plateau Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #4b8b8b;
+}
+
+/* Atelier-Plateau Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #5485b6;
+}
+
+/* Atelier-Plateau Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #7272ca;
+}
+
+/* Atelier-Plateau Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #8464c4;
+}
+
+.diff .hljs-deletion,
+.diff .hljs-addition {
+  color: #1b1818;
+  display: inline-block;
+  width: 100%;
+}
+
+.diff .hljs-deletion {
+  background-color: #ca4949;
+}
+
+.diff .hljs-addition {
+  background-color: #4b8b8b;
+}
+
+.diff .hljs-change {
+  color: #7272ca;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #1b1818;
+  color: #8a8585;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-plateau.light.css b/libraries/highlight/styles/atelier-plateau.light.css
new file mode 100644
index 0000000..1c19cf6
--- /dev/null
+++ b/libraries/highlight/styles/atelier-plateau.light.css
@@ -0,0 +1,113 @@
+/* Base16 Atelier Plateau Light - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/plateau) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Plateau Comment */
+.hljs-comment {
+  color: #655d5d;
+}
+
+/* Atelier-Plateau Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #ca4949;
+}
+
+/* Atelier-Plateau Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #b45a3c;
+}
+
+/* Atelier-Plateau Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #a06e3b;
+}
+
+/* Atelier-Plateau Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #4b8b8b;
+}
+
+/* Atelier-Plateau Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #5485b6;
+}
+
+/* Atelier-Plateau Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #7272ca;
+}
+
+/* Atelier-Plateau Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #8464c4;
+}
+
+.diff .hljs-deletion,
+.diff .hljs-addition {
+  color: #1b1818;
+  display: inline-block;
+  width: 100%;
+}
+
+.diff .hljs-deletion {
+  background-color: #ca4949;
+}
+
+.diff .hljs-addition {
+  background-color: #4b8b8b;
+}
+
+.diff .hljs-change {
+  color: #7272ca;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #f4ecec;
+  color: #585050;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-savanna.dark.css b/libraries/highlight/styles/atelier-savanna.dark.css
new file mode 100644
index 0000000..444e2de
--- /dev/null
+++ b/libraries/highlight/styles/atelier-savanna.dark.css
@@ -0,0 +1,113 @@
+/* Base16 Atelier Savanna Dark - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/savanna) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Savanna Comment */
+.hljs-comment {
+  color: #78877d;
+}
+
+/* Atelier-Savanna Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #b16139;
+}
+
+/* Atelier-Savanna Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #9f713c;
+}
+
+/* Atelier-Savanna Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #a07e3b;
+}
+
+/* Atelier-Savanna Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #489963;
+}
+
+/* Atelier-Savanna Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #1c9aa0;
+}
+
+/* Atelier-Savanna Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #478c90;
+}
+
+/* Atelier-Savanna Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #55859b;
+}
+
+.diff .hljs-deletion,
+.diff .hljs-addition {
+  color: #171c19;
+  display: inline-block;
+  width: 100%;
+}
+
+.diff .hljs-deletion {
+  background-color: #b16139;
+}
+
+.diff .hljs-addition {
+  background-color: #489963;
+}
+
+.diff .hljs-change {
+  color: #478c90;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #171c19;
+  color: #87928a;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-savanna.light.css b/libraries/highlight/styles/atelier-savanna.light.css
new file mode 100644
index 0000000..5eeb294
--- /dev/null
+++ b/libraries/highlight/styles/atelier-savanna.light.css
@@ -0,0 +1,113 @@
+/* Base16 Atelier Savanna Light - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/savanna) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Savanna Comment */
+.hljs-comment {
+  color: #5f6d64;
+}
+
+/* Atelier-Savanna Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #b16139;
+}
+
+/* Atelier-Savanna Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #9f713c;
+}
+
+/* Atelier-Savanna Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #a07e3b;
+}
+
+/* Atelier-Savanna Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #489963;
+}
+
+/* Atelier-Savanna Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #1c9aa0;
+}
+
+/* Atelier-Savanna Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #478c90;
+}
+
+/* Atelier-Savanna Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #55859b;
+}
+
+.diff .hljs-deletion,
+.diff .hljs-addition {
+  color: #171c19;
+  display: inline-block;
+  width: 100%;
+}
+
+.diff .hljs-deletion {
+  background-color: #b16139;
+}
+
+.diff .hljs-addition {
+  background-color: #489963;
+}
+
+.diff .hljs-change {
+  color: #478c90;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #ecf4ee;
+  color: #526057;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-seaside.dark.css b/libraries/highlight/styles/atelier-seaside.dark.css
new file mode 100644
index 0000000..0bcfd1b
--- /dev/null
+++ b/libraries/highlight/styles/atelier-seaside.dark.css
@@ -0,0 +1,94 @@
+/* Base16 Atelier Seaside Dark - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Seaside Comment */
+.hljs-comment {
+  color: #809980;
+}
+
+/* Atelier-Seaside Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #e6193c;
+}
+
+/* Atelier-Seaside Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #87711d;
+}
+
+/* Atelier-Seaside Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #98981b;
+}
+
+/* Atelier-Seaside Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #29a329;
+}
+
+/* Atelier-Seaside Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #1999b3;
+}
+
+/* Atelier-Seaside Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #3d62f5;
+}
+
+/* Atelier-Seaside Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #ad2bee;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #131513;
+  color: #8ca68c;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-seaside.light.css b/libraries/highlight/styles/atelier-seaside.light.css
new file mode 100644
index 0000000..6023d4b
--- /dev/null
+++ b/libraries/highlight/styles/atelier-seaside.light.css
@@ -0,0 +1,94 @@
+/* Base16 Atelier Seaside Light - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Seaside Comment */
+.hljs-comment {
+  color: #687d68;
+}
+
+/* Atelier-Seaside Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #e6193c;
+}
+
+/* Atelier-Seaside Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #87711d;
+}
+
+/* Atelier-Seaside Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #98981b;
+}
+
+/* Atelier-Seaside Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #29a329;
+}
+
+/* Atelier-Seaside Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #1999b3;
+}
+
+/* Atelier-Seaside Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #3d62f5;
+}
+
+/* Atelier-Seaside Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #ad2bee;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #f4fbf4;
+  color: #5e6e5e;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-sulphurpool.dark.css b/libraries/highlight/styles/atelier-sulphurpool.dark.css
new file mode 100644
index 0000000..dda8af3
--- /dev/null
+++ b/libraries/highlight/styles/atelier-sulphurpool.dark.css
@@ -0,0 +1,94 @@
+/* Base16 Atelier Sulphurpool Dark - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/sulphurpool) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Sulphurpool Comment */
+.hljs-comment {
+  color: #898ea4;
+}
+
+/* Atelier-Sulphurpool Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #c94922;
+}
+
+/* Atelier-Sulphurpool Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #c76b29;
+}
+
+/* Atelier-Sulphurpool Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #c08b30;
+}
+
+/* Atelier-Sulphurpool Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #ac9739;
+}
+
+/* Atelier-Sulphurpool Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #22a2c9;
+}
+
+/* Atelier-Sulphurpool Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #3d8fd1;
+}
+
+/* Atelier-Sulphurpool Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #6679cc;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #202746;
+  color: #979db4;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/atelier-sulphurpool.light.css b/libraries/highlight/styles/atelier-sulphurpool.light.css
new file mode 100644
index 0000000..2149b4c
--- /dev/null
+++ b/libraries/highlight/styles/atelier-sulphurpool.light.css
@@ -0,0 +1,94 @@
+/* Base16 Atelier Sulphurpool Light - Theme */
+/* by Bram de Haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/sulphurpool) */
+/* Original Base16 color scheme by Chris Kempson (https://github.com/chriskempson/base16) */
+
+/* Atelier-Sulphurpool Comment */
+.hljs-comment {
+  color: #6b7394;
+}
+
+/* Atelier-Sulphurpool Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #c94922;
+}
+
+/* Atelier-Sulphurpool Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #c76b29;
+}
+
+/* Atelier-Sulphurpool Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #c08b30;
+}
+
+/* Atelier-Sulphurpool Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #ac9739;
+}
+
+/* Atelier-Sulphurpool Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #22a2c9;
+}
+
+/* Atelier-Sulphurpool Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #3d8fd1;
+}
+
+/* Atelier-Sulphurpool Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #6679cc;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #f5f7ff;
+  color: #5e6687;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/brown_paper.css b/libraries/highlight/styles/brown_paper.css
new file mode 100644
index 0000000..f694a0a
--- /dev/null
+++ b/libraries/highlight/styles/brown_paper.css
@@ -0,0 +1,103 @@
+/*
+
+Brown Paper style from goldblog.com.ua (c) Zaripov Yura <yur4ik7@ukr.net>
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background:#b7a68e url(./brown_papersq.png);
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-keyword,
+.hljs-literal,
+.hljs-change,
+.hljs-winutils,
+.hljs-flow,
+.nginx .hljs-title,
+.tex .hljs-special,
+.hljs-request,
+.hljs-status {
+  color:#005599;
+  font-weight:bold;
+}
+
+.hljs,
+.hljs-subst,
+.hljs-tag .hljs-keyword {
+  color: #363c69;
+}
+
+.hljs-string,
+.hljs-title,
+.hljs-type,
+.hljs-tag .hljs-value,
+.css .hljs-rule .hljs-value,
+.hljs-preprocessor,
+.hljs-pragma,
+.ruby .hljs-symbol,
+.ruby .hljs-symbol .hljs-string,
+.ruby .hljs-class .hljs-parent,
+.hljs-built_in,
+.django .hljs-template_tag,
+.django .hljs-variable,
+.smalltalk .hljs-class,
+.ruby .hljs-string,
+.django .hljs-filter .hljs-argument,
+.smalltalk .hljs-localvars,
+.smalltalk .hljs-array,
+.hljs-attr_selector,
+.hljs-pseudo,
+.hljs-addition,
+.hljs-stream,
+.hljs-envvar,
+.apache .hljs-tag,
+.apache .hljs-cbracket,
+.tex .hljs-number,
+.hljs-name {
+  color: #2c009f;
+}
+
+.hljs-comment,
+.hljs-annotation,
+.hljs-decorator,
+.hljs-pi,
+.hljs-doctype,
+.hljs-deletion,
+.hljs-shebang,
+.apache .hljs-sqbracket,
+.nginx .hljs-built_in,
+.tex .hljs-formula {
+  color: #802022;
+}
+
+.hljs-keyword,
+.hljs-literal,
+.css .hljs-id,
+.hljs-doctag,
+.hljs-title,
+.hljs-type,
+.vbscript .hljs-built_in,
+.rsl .hljs-built_in,
+.smalltalk .hljs-class,
+.diff .hljs-header,
+.hljs-chunk,
+.hljs-winutils,
+.bash .hljs-variable,
+.apache .hljs-tag,
+.tex .hljs-command {
+  font-weight: bold;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.8;
+}
diff --git a/libraries/highlight/styles/brown_papersq.png b/libraries/highlight/styles/brown_papersq.png
new file mode 100644
index 0000000..8a9c040
--- /dev/null
+++ b/libraries/highlight/styles/brown_papersq.png
@@ -0,0 +1,82 @@
+PNG
+
+   IHDR     #   b   gAMA  7   tEXtSoftware Adobe ImageReadyqe<  FIDATx,IffnnEDf @!(G@("=f!2HW9#gdfDfnn,gWWp7S=rQ~8BM-{{Rk+Onw:=>>Txv]RASmmBsu5S;xSu{}?4wJUj&!42TjW%>PF+_^HbXt;`x]&|~}YxJm>5-vCp~SbpD{vmRvOgs,cLo.>>\1
+~]($|w<OiiPrRUImjn]$8^CYN6uEQuZOFkzE|81%S=a%aN0<OdzJJ;m`7sUT6|/Dx$0uUVMpX
+>#e,pW~c2}8,:OEL'I%i7W5
+P+T;kv-DYbt>jEsv,5*HinrvM5^k-
+"	
+S*;6@f7)uZQV[F bhB>"\YGcuRTm)j]y>bc^(e)}3S%P$F`a,AT{T)iUWY;1Jvqc!y-U75SD\XjZ`vNI"#$
+NnaD,2\bW*"vfsE
+FV|oX}U*8km3E
+,0 0JUGe+1Wt]wg&*m2O6R1 KVp"w%e/AFSbEHGqRX?	ieu"-n}Ex  1BDi@?J
+%
+^giD$ (u
+\{1~}v)E0poD0Rp6>F<N5'ID}\ wSV:3- /]`>D\*ON_ 1 .2
+>w"SToa D0_L.)P- M/3R xi+!i p8,L"UaR74bJR4B;nx?Z^`pJXok2;EyHXVD(p7xtF, pn"u[7=y8^jYoib6CDOy\Tu]\ 
+xUZ"R	G?[?z}iY@q5sp	6k|n&EHehS;\$ *6_BU5"V;	<! DvS[T;Qhc  ;y#}pO|4&WkyX{[
+F(J1(7*DI	A5v!zQh+ABX0}^skz<tRVU7BT5)oZ>h|z|XE;F/Zlv",a`3Pu]=>>"!Mvy9)R`dT
+
+u0<j@nWf[af` ,.aqMxvi:#76mzoo|TX?=ia~ii_|)aYx]_7x6H;mIYvM-pnan:Z.g6<.@~cK 7IPp`t<At?~e<0TW{5T.
+/P(u}:Rc(f>Y3vC@qvs,@-3 m`@v/lLJA@-cp<-!x0+S`tb(zk-Dk[Y	7M-x!QZz'vEf&64^xhxSc' pj<K}DA2.p=e|DoyAOo/
+v6
+U!f9V+@H%=DY\.D?_Ae|>_$F u_YcdT*}`*8a'1UJ4a<HBt )vv-Aw `-!J~qO\6i wKQ umymXFKT,%)`.Ae!@XhSY-(YRUc9bpH,6lzaml@LjV5pTZ}Hw8}D$~NW
+	Ft{?>7kUV;"Q>k5A&y~~F!|d-lMXJli?_N3>{w4\v6`N2d8/'v9dxpz,BI^mT@ys4Znx\ I8+FS4m[5>3 |:?1~m{87zF<D ?<=	 PYBaME$H%[Y9%	g-p~]W:ugwW*.m>8nss+>O2mjSPmO*	KvT!r\oa	LTXMXCa{|mxH%2 (/3}n8\`!{I:aD"nufE7Qc^AvW`f2SiZqbTUQm/dW(5Kvg#,R}0>}bpO%v/}
+nVExn<
+d6H(GFT`MqC5MKC)0PBt!EuYrt}?_@vxr1UP@K(g[^%.vI/WK"E`x41t$%>&UT6"Ij6(Shm0cA"b!_]tM)n++M|}i;(\,D(EeDr
+upg/48^.#_ d3K6'm+$EbjsX(/9H)edJn 
+s7Fnb4N	2%bN^m6EtQm"F`5_	gl:-BdrgpV!#Syj\  +4pK4dF+AttO7tHP"jivkEC*?o[:\{Q15[XkC4^a;8'_,<,R &kR
+ 6YJKvR-:5qa	Pm{t:t
+-*|mNb6c bmG@nVOI"Nn]NgZw/K//M 8``8-;T1}7C?Q\%UMR y]B.$D>M1 y$o &U*xATi
+;-.]]?TF!dq+v |geuLs9pv6w:cVvi{1j))jXDK0*4@(TgDd[6E"tup;&?j:
+>+//1mM@X5 ^dip*>7R7Nu{yW*.bn+eY9DYU<Jo~d Dx	L@3(*	w|1f]K&v7LJ,6\@]Pn7R6Yu>?}y(wN(AKb>)3,oB@tw-~CV56J2s-d%o+M e& r<0xJc3n#K}Mv^_-S2n!}VhW ;lM&p`X
+#_]|T3v&J9T@F7e@H 5v{)T$HXi]1:D7M|7"~$fQpd@U+fcw{@?pVVDQdTAvhiS& :eYA<D;/C,7`\2b =2x|	j0"%~}e3L#+eUx6/xe	4biqv3~0O7*1u]QXb ^x=f@ 9+R1	c;X]`GL%86~^w S,q9S`n9JyCS_%V( mT+ER3`]fx
+wqCbQWJ:3$# 4 g@+e	H5!m4XK VCd?5r"|c6-;-^-sYO2**.
+!2E<`u/(|mLu1E&|?7ajbzlzzUJO]o%j1ofh@.5`}[V-#}ri	,y_X~?<:icigmivrmP!]Fy@.HnAqOUjO92;+"	MU-'.r_Vx|#ne~}8[N\Uq|My6m+b)?EOFj%XV" \%SS!HvStsp,X/;8XMN?Uvf	D@Val`&IO9DA4^$XacaT-c<`/mvN_,y7),@yZF3?-?_	t#yvZ8Iz|qqDJ]S=t)7cr34?IbW&g(44OX \B~pt.qn  I0D-H.%GU* y@:$	q
+SPhV="tGNIE/pkx.#vp/%-^T
+iapXaUtg:ZWA2qm%in+[DJ,-zx'Eu^GH(-
+edW
+`-1x:=_EG48,x aAM#=7QYauT`Ps0$"$yhOHB>{j"M#SX6p>ZB/_g8zWF}k;05u'<m>uM]I`<UqV[%`LtsV,#bry%;h=O+ v1 En4S=%y'!Fyud>c5yhG :XUP@yR6\iOn``K,h3>]oI)7{6J"q/Cp
+2aeKTJU+=>.gA*s@90lrw F$NvCtl x-CoucC sEa=^G;.O j; SzxUZev`H8</^.\/VV``nK6}  LB_~"D+L<#>X=<\?-?6GQYbK Z?=>+4gL#);9NEa0F@8hejvIa^@?,}ex]cVS2E!~<D`E"KY>"@<U6:1xv)lA93IP"29JAhLGQB2D-5gI^2d^.a*WXo~wtO?</6ju0R%)yPckJa.k@=^yHVgFp,41B<^U*#y]XY0	wYX8J9Flqe;eZx'KJlo8=?I\`uTX!9L{V9;X!w<)?gTpC}+Vlr]i_>OY jqryo53uXrr!	1TdUMm15-ZKJ`CR	cs%-{#"#bQ(jYF7bAOJ!<o<O=de;4l%\	U_xJx?mo__"+q6u7}Tg?M=tOk6JZ7//_)9#~8T`Wd nZmUF.-j4E\lDr $elLv?Hu}{x|~*Y_98}Z: 3eCGQl#$$d1KCq!]\D'.3rt~W7qQ*p0G$+XWNrnf?~Oy
+O<,nX@^Bl)"\.O]w!v5<-:-M|>J]_,X# ;1.m2,86<|n qUy~Ym`J<S7PSUs ;R]\'p5*!P^Y>Cti<{tamJ]p18[R
+~*t#/<]7Y`5a;0;8J FW.pppM[JR^W)SBMv}ja-XV9a~HZ5:PCIEM(F;T;c.S
+Sufp+~|)AIE7KYR.	?s?XnwY~kU+%3U74*K/,.bp+%FaUZV:Q(-XXeUn}/	0u}p7poT`8
++iA;\fVOhAN<;b h)~,x-pQS*>2p\Wm.@?zXy.SuM&Ws<Sg|[=n'"d=;K C#	%QR[q0"wZ!}k:U-g#e0F5U\5{	9R<~@"ahM[C@h,}8K~JG%w%r
+et72oGVt-px!U7KP+?)M?GumgpsMU|,c&9J
+NO @EDBg>ul+DRb=VyP9[XmK5	6nkHACvU?OmN&Y#HQz&N,Ip u*e7mneUm*S?>?[m?
+?]N~=+v7;7e|g)E IpDn+VuzXNKB D: iG0Ik]w?$BSWUyaGKE1)_e3
+f&v * {5cl{Mt5Qo*riy#`,yvaxoNXwCr z?m/~w@<;U*jH#\V]_^|]++JYE M?MK
+HLL{Tg:l3V%F-K>P=1=j]gDg29+&b|pBOykXnx6mS=?zIx9J`o&_0 'h?Oagb2O:sVoe=-nQUZ0 bD~d%)c>fV!sdO~aypoA71Y4xdw)}NYUKJ{-"B$PeN=+!d`t`]_o (@S<F)Uo@IU*,O%kX`T;+sno		<[?)_aYYU?_5VnSY8IG%8`925RTm\54 V5)TP17e G9JZ =s CS)J}?[Z!TL=kiXQUdimLMJ% /Gsi}J6.46ru~~e|qM}OzjeXdd-yydA2,|FmY`Fc(~6 mvA
+\9y8VMxj;\#W(#|wR 'A8<<4tN3*."j%
+X|>W^8QV&03/xW"<@H^u*r\4fa`10c)(j5n8~mw:SUN]Wku!.h.zz2]~<U^1Zm|$(io+	y^wqv}+4DVa;6'BKy]`P<Tf}v'YxaS.svj
+P4eki2dPK.*5Oe1K8b+^;_m6"<~!3  C"@m!l !	\2r@b>!.[vN*k`C
+A$dmQXdnn4r!{AR[^bk7tMh1
+lw=A ]+),]9iYM,J\S| Z%O0SKvf{;H0=h;"	 8~ >M}}{q!{[?o+
+8tV2v3S 9pIUu!KAW#$jYi4BncJZ'm,IMH`KZkiZA9wX)/<PF<k~+=|**P3zTpPQ22	Xle0Xu
+v*Yl<.?ven,)i$x|9RLB+_,3]Opb`"?~SG h: g R(P<Z\l;|+yP5pdbMcs<dHgl-J59:])/pY^+ 49/R96Wq>yx+rKO:P&P;"9<dj
+_mi11`o{Ttu#8~%[X4]o/_`ec?]0yY7M7<vL@Y7+	dL VnC(g*CR)dWIPo[P#rh<hYF;O0:U(lb[4'K9KA}wI-Gy"D	Jw6 PbV0m"TR ;C`[*N\Uyn	_cXmCk~eO~]Wf*i.\RbaYPCj=QSR$l+W|Jl]]P|8@4ROSk+usb x-|x6g)FX*MWy\Hm"#056GE,yW{SRokZ<wlr8xb^ho7l{3R]ryg?px8?3;aSXMr>UE ^*0E7t\nd] )RgX.51
+s =U= $[$ieJriE1JYOO"$R\j}`I#e}>`6 XKAN=lky$$~*C*o|XNdvQ[]#Rz#>~\"?}GgrVpzsvC[EdyY1
+ ][UYHjrI%+2xwf}Uy%M]3P'Up=<kj^YZE}6}?Y,=VQXo)bAKc&B
+B<I0Z%Vj8]~Z@R+acuv2W|Rp?oI1Hu}_>{yZ YiN@xJ2NIe Su`I,LjNhAGE8Bv	X$EBaS:d(<meQ B>	 ,]6|w7Tr~`(J!t:a;e'l+&ZLEN^8m[mZnN1wM_.=<x!v9_HLXd`
+F1B*~5	N,l7)$n<=v+>ZUtj#7aTY`\Y\F%GQ!u s/bo^tm/8{otVRl($@n3 Wik6u	2fyt8.z
+bN ?}vX"uOX?jsD(\P:!8%@&u<$@,f|M{mdSit" %U$jmJY`GgRu8*HMeO#c~GKn1i\OEv j^_?N'Cw=tYa-k8H9pixk0}.u<MS\f@De6yR%"czW*.*n>M[7pP3v`F6=a8"7]oWk]f<yUQd WaQP,	'%q|;"w`"-h(\HHuAxd*;p~ba<bO8fSp-G?o?i@ZppSp#@j(Ik](1UusmW%R\'8O<
+H#E8 vbXC \|W!}"OSkl;
+dU08Nj q;'\Z;>JM+G@uutz[q]M]d~uLke7;m8,TPS7yNj6WQp6SK~y\|Jr9&fEvu@a'Q{cYgvkrn0v,fyw`H<VI	gqdOt &+%rvRtB$cu6YS0(8H-Op1K &q+'~_\>xG@6gL,,JPiWDVdU_st Su3yT?O	jj$";,	Vt<xK(J,CdW1yf{YD	OSy+vD,
+P7 'Np@*@
+a_lY6wj]l^l>[Y:r~xIj*ATt5ma^Hv*t;MR7-pM
+0\.1`@[9,w}UW]BlMMR'1ImZX}{C>?D L#5*Y"`Xuu$-0ifIj2J.8=-J[~yYlhc[4|A[
+,*saRA$)e@+a/(;$k$4FH @s8V<[0(S$HG+R8"+3!T
+X|j4=:.?o@j1,P=]p~A/ )"$o[gmnV;h\RRZ\mPXPV
+wy#:NPaDLhZl3BXbTKN#	kqlJe:Q?A ktL<YQ%>Sk`mAf9 |6"I`?/iNz827)88q6lmHR<EniY vL97<-lF&Elk)9<WY[[fTAb^VgfJxd;!jN{?Mw]^A(KSVHzIw6ea, r3%eidU
+"L__>?[?oKIOilF%mSU"pffPz,l+
+WdvXK sJj|: @Pm)M%P(d%RTasAZTXhSGqw)9(q*Hhw]k5"<c9ARsV:_y}~Cq>}uLmRM)v:xJeXH(4GDPv%M^E2] j#&DMpLSyu W
+K|U_s++H4e%rDYcon*H9Y8w((%;9.,g6
+]{;BQCtMK3_anSq9D>[S,k NY?o?OiY/)HX:;ZH2u>)W@|K7 ueeor[KYq
+SA)vKH_YVx|$q3}[2ZES'04FaM]3HHFK`]'q`RMH	1<}x|\XIj(Ya;l%L=#j<
+}<(mpNv"z;GzV5HJPzN*=lb{<L9V]\dYdltw`O@UHo/ov|``=gs
+1W 
+0N
+ X]XWf?|M,	2Zc|imMS[Ye:v	|(Jg$R  +|
+*E5~E71_ &pDB>F]?SF*P7Msc.as(R>WV85Ov^ gpT'v+XSrKO]RfQl;Co23ThnD(mpyO69s|:|d"%y6y [4 2]Ouyp?,_uX2\[ Y\,E|sH
+,3S]}4{K1bg]C:z)\N),p&X^owIU%=//Y^G3,x8ldVkA.#2v/vT+Ht4%}BZ4|m[R,5a_^>;=<<"yj[cs#4O]J *r@`FlSJp]v4I=Z!Tu?m/Wl	uMa_NU}i4^p@n/zYlS7`b\03>Q0,/KWRF;QaA:dZf&wMgPXgpwf<nu)7\QaZWy*%2p$, .p~\7i4MYIt`v1gP&k{I6U?~<N:(
+x .G<hH(dM-m:$x:ws=LUwF"-o{]Ql~6fX["/g`S*ypiD-R`ih~lRaiRauTf7f5&T^ aww?m/_]i\oleuS;:k3;H	g o:OOEgM$,LWj~i,cYZTq,,;9-s?.sN?hRVdj8V+36QpCWe] Avv;{j0,y=?r,}p`U' E.$`d:;>r,rV~\7ldR U@ayH/LVc%,cKDvtD:}Cw9?~r6,po7IzHoT)a=A-cC+[m/ ?LYHWq/YVhXWp
+7#Kuct%S+Lw>]*N)[ycdLVEDfj0v|$C'?  *gu    IENDB`
\ No newline at end of file
diff --git a/libraries/highlight/styles/codepen-embed.css b/libraries/highlight/styles/codepen-embed.css
new file mode 100644
index 0000000..48cb69a
--- /dev/null
+++ b/libraries/highlight/styles/codepen-embed.css
@@ -0,0 +1,97 @@
+/*
+  codepen.io Embed Theme
+  Author: Justin Perry <http://github.com/ourmaninamsterdam>
+  Original theme - https://github.com/chriskempson/tomorrow-theme
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #222;
+  color: #fff;
+  font-family: Menlo, Monaco, 'Andale Mono', 'Lucida Console', 'Courier New', monospace;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-comment,
+.hljs-title {
+  color: #777;
+}
+
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .constant,
+.xml .tag .title,
+.xml .pi,
+.xml .doctype,
+.html .doctype {
+  color: #ab875d;
+}
+
+.css .value {
+  color: #cd6a51;
+}
+
+.css .value .function,
+.css .value .string {
+  color: #a67f59;
+}
+
+.css .value .number {
+  color: #9b869c;
+}
+
+.css .id,
+.css .class,
+.css-pseudo,
+.css .selector,
+.css .tag {
+  color: #dfc48c;
+}
+
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #ab875d;
+}
+
+.ruby .class .title,
+.css .rules .attribute {
+  color: #9b869b;
+}
+
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .symbol,
+.xml .cdata {
+  color: #8f9c6c;
+}
+
+.css .hexcolor {
+  color: #cd6a51;
+}
+
+.function,
+.python .decorator,
+.python .title,
+.ruby .function .title,
+.ruby .title .keyword,
+.perl .sub,
+.javascript .title,
+.coffeescript .title {
+  color: #fff;
+}
+
+.hljs-keyword,
+.javascript .function {
+  color: #8f9c6c;
+}
diff --git a/libraries/highlight/styles/color-brewer.css b/libraries/highlight/styles/color-brewer.css
new file mode 100644
index 0000000..6be4738
--- /dev/null
+++ b/libraries/highlight/styles/color-brewer.css
@@ -0,0 +1,165 @@
+/*
+
+Colorbrewer theme
+Original: https://github.com/mbostock/colorbrewer-theme (c) Mike Bostock <mike@ocks.org>
+Ported by Fabrcio Tavares de Oliveira
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #fff;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs,
+.hljs-subst,
+.hljs-tag .hljs-title,
+.nginx .hljs-title {
+  color: #000;
+}
+
+.hljs-string,
+.hljs-title,
+.hljs-constant,
+.hljs-parent,
+.hljs-tag .hljs-value,
+.hljs-rule .hljs-value,
+.hljs-preprocessor,
+.hljs-pragma,
+.haml .hljs-symbol,
+.ruby .hljs-symbol,
+.ruby .hljs-symbol .hljs-string,
+.hljs-template_tag,
+.django .hljs-variable,
+.smalltalk .hljs-class,
+.hljs-addition,
+.hljs-flow,
+.hljs-stream,
+.bash .hljs-variable,
+.apache .hljs-tag,
+.apache .hljs-cbracket,
+.tex .hljs-command,
+.tex .hljs-special,
+.erlang_repl .hljs-function_or_atom,
+.asciidoc .hljs-header,
+.markdown .hljs-header,
+.coffeescript .hljs-attribute,
+.hljs-name {
+  color: #756bb1;
+}
+
+.smartquote,
+.hljs-comment,
+.hljs-annotation,
+.diff .hljs-header,
+.hljs-chunk,
+.asciidoc .hljs-blockquote,
+.markdown .hljs-blockquote {
+  color: #636363;
+}
+
+.hljs-number,
+.hljs-date,
+.hljs-regexp,
+.hljs-literal,
+.hljs-hexcolor,
+.smalltalk .hljs-symbol,
+.smalltalk .hljs-char,
+.go .hljs-constant,
+.hljs-change,
+.lasso .hljs-variable,
+.makefile .hljs-variable,
+.asciidoc .hljs-bullet,
+.markdown .hljs-bullet,
+.asciidoc .hljs-link_url,
+.markdown .hljs-link_url {
+  color: #31a354;
+}
+
+.hljs-label,
+.ruby .hljs-string,
+.hljs-decorator,
+.hljs-filter .hljs-argument,
+.hljs-localvars,
+.hljs-array,
+.hljs-attr_selector,
+.hljs-important,
+.hljs-pseudo,
+.hljs-pi,
+.haml .hljs-bullet,
+.hljs-doctype,
+.hljs-deletion,
+.hljs-envvar,
+.hljs-shebang,
+.apache .hljs-sqbracket,
+.nginx .hljs-built_in,
+.hljs-list .hljs-built_in,
+.tex .hljs-formula,
+.erlang_repl .hljs-reserved,
+.hljs-prompt,
+.asciidoc .hljs-link_label,
+.markdown .hljs-link_label,
+.vhdl .hljs-attribute,
+.clojure .hljs-attribute,
+.asciidoc .hljs-attribute,
+.lasso .hljs-attribute,
+.coffeescript .hljs-property,
+.hljs-phony {
+  color: #88f;
+}
+
+
+
+.hljs-keyword,
+.hljs-id,
+.hljs-title,
+.hljs-built_in,
+.css .hljs-tag,
+.hljs-doctag,
+.smalltalk .hljs-class,
+.hljs-winutils,
+.bash .hljs-variable,
+.apache .hljs-tag,
+.hljs-type,
+.hljs-typename,
+.tex .hljs-command,
+.asciidoc .hljs-strong,
+.markdown .hljs-strong,
+.hljs-request,
+.hljs-status {
+  color: #3182bd;
+}
+
+.asciidoc .hljs-emphasis,
+.markdown .hljs-emphasis {
+  font-style: italic;
+}
+
+.nginx .hljs-built_in {
+  font-weight: normal;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.lasso .markup,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
+
+.css .hljs-attribute,
+.html .hljs-attribute {
+  color: #e6550d;
+}
+
+.css .hljs-class,
+.html .hljs-tag,
+.html .hljs-title {
+  color: #3182bd;
+}
diff --git a/libraries/highlight/styles/dark.css b/libraries/highlight/styles/dark.css
new file mode 100644
index 0000000..be3c8d7
--- /dev/null
+++ b/libraries/highlight/styles/dark.css
@@ -0,0 +1,103 @@
+/*
+
+Dark style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #444;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-keyword,
+.hljs-literal,
+.hljs-change,
+.hljs-winutils,
+.hljs-flow,
+.nginx .hljs-title,
+.tex .hljs-special {
+  color: white;
+}
+
+.hljs,
+.hljs-subst {
+  color: #ddd;
+}
+
+.hljs-string,
+.hljs-title,
+.hljs-type,
+.ini .hljs-title,
+.hljs-tag .hljs-value,
+.css .hljs-rule .hljs-value,
+.hljs-preprocessor,
+.hljs-pragma,
+.ruby .hljs-symbol,
+.ruby .hljs-symbol .hljs-string,
+.ruby .hljs-class .hljs-parent,
+.hljs-built_in,
+.django .hljs-template_tag,
+.django .hljs-variable,
+.smalltalk .hljs-class,
+.ruby .hljs-string,
+.django .hljs-filter .hljs-argument,
+.smalltalk .hljs-localvars,
+.smalltalk .hljs-array,
+.hljs-attr_selector,
+.hljs-pseudo,
+.hljs-addition,
+.hljs-stream,
+.hljs-envvar,
+.apache .hljs-tag,
+.apache .hljs-cbracket,
+.tex .hljs-command,
+.hljs-prompt,
+.coffeescript .hljs-attribute,
+.hljs-name {
+  color: #d88;
+}
+
+.hljs-comment,
+.hljs-annotation,
+.hljs-decorator,
+.hljs-pi,
+.hljs-doctype,
+.hljs-deletion,
+.hljs-shebang,
+.apache .hljs-sqbracket,
+.tex .hljs-formula {
+  color: #777;
+}
+
+.hljs-keyword,
+.hljs-literal,
+.hljs-title,
+.css .hljs-id,
+.hljs-doctag,
+.hljs-type,
+.vbscript .hljs-built_in,
+.rsl .hljs-built_in,
+.smalltalk .hljs-class,
+.diff .hljs-header,
+.hljs-chunk,
+.hljs-winutils,
+.bash .hljs-variable,
+.apache .hljs-tag,
+.tex .hljs-special,
+.hljs-request,
+.hljs-status {
+  font-weight: bold;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/darkula.css b/libraries/highlight/styles/darkula.css
new file mode 100644
index 0000000..1c6853b
--- /dev/null
+++ b/libraries/highlight/styles/darkula.css
@@ -0,0 +1,152 @@
+/*
+
+Darkula color scheme from the JetBrains family of IDEs
+
+*/
+
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #2b2b2b;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs,
+.hljs-tag,
+.hljs-title,
+.css .hljs-rule,
+.css .hljs-value,
+.aspectj .hljs-function,
+.css .hljs-function .hljs-preprocessor,
+.hljs-pragma {
+  color: #bababa;
+}
+
+.hljs-strongemphasis,
+.hljs-strong,
+.hljs-emphasis {
+  color: #a8a8a2;
+}
+
+.hljs-bullet,
+.hljs-blockquote,
+.hljs-horizontal_rule,
+.hljs-number,
+.hljs-regexp,
+.alias .hljs-keyword,
+.hljs-literal,
+.hljs-hexcolor {
+  color: #6896ba;
+}
+
+.hljs-tag .hljs-value,
+.hljs-code,
+.css .hljs-class,
+.hljs-class .hljs-title:last-child {
+  color: #a6e22e;
+}
+
+.hljs-link_url {
+  font-size: 80%;
+}
+
+.hljs-emphasis,
+.hljs-strongemphasis,
+.hljs-class .hljs-title:last-child,
+.hljs-typename {
+  font-style: italic;
+}
+
+.hljs-keyword,
+.ruby .hljs-class .hljs-keyword:first-child,
+.ruby .hljs-function .hljs-keyword,
+.hljs-function,
+.hljs-change,
+.hljs-winutils,
+.hljs-flow,
+.nginx .hljs-title,
+.tex .hljs-special,
+.hljs-header,
+.hljs-attribute,
+.hljs-symbol,
+.hljs-symbol .hljs-string,
+.hljs-tag .hljs-title,
+.hljs-value,
+.alias .hljs-keyword:first-child,
+.css .hljs-tag,
+.css .unit,
+.css .hljs-important {
+  color: #cb7832;
+}
+
+.hljs-function .hljs-keyword,
+.hljs-class .hljs-keyword:first-child,
+.hljs-aspect .hljs-keyword:first-child,
+.hljs-constant,
+.hljs-typename,
+.css .hljs-attribute {
+  color: #cb7832;
+}
+
+.hljs-variable,
+.hljs-params,
+.hljs-class .hljs-title,
+.hljs-aspect .hljs-title {
+  color: #b9b9b9;
+}
+
+.hljs-string,
+.css .hljs-id,
+.hljs-subst,
+.hljs-type,
+.ruby .hljs-class .hljs-parent,
+.hljs-built_in,
+.django .hljs-template_tag,
+.django .hljs-variable,
+.smalltalk .hljs-class,
+.django .hljs-filter .hljs-argument,
+.smalltalk .hljs-localvars,
+.smalltalk .hljs-array,
+.hljs-attr_selector,
+.hljs-pseudo,
+.hljs-addition,
+.hljs-stream,
+.hljs-envvar,
+.apache .hljs-tag,
+.apache .hljs-cbracket,
+.tex .hljs-command,
+.hljs-prompt,
+.hljs-link_label,
+.hljs-link_url,
+.hljs-name {
+  color: #e0c46c;
+}
+
+.hljs-comment,
+.hljs-annotation,
+.hljs-pi,
+.hljs-doctype,
+.hljs-deletion,
+.hljs-shebang,
+.apache .hljs-sqbracket,
+.tex .hljs-formula {
+  color: #7f7f7f;
+}
+
+.hljs-decorator {
+  color: #bab429;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata,
+.xml .php,
+.php .xml {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/default.css b/libraries/highlight/styles/default.css
new file mode 100644
index 0000000..b0ac8b8
--- /dev/null
+++ b/libraries/highlight/styles/default.css
@@ -0,0 +1,155 @@
+/*
+
+Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #f0f0f0;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs,
+.hljs-subst,
+.hljs-tag .hljs-title,
+.nginx .hljs-title {
+  color: black;
+}
+
+.hljs-string,
+.hljs-title,
+.hljs-constant,
+.hljs-parent,
+.hljs-tag .hljs-value,
+.hljs-rule .hljs-value,
+.hljs-preprocessor,
+.hljs-pragma,
+.hljs-name,
+.haml .hljs-symbol,
+.ruby .hljs-symbol,
+.ruby .hljs-symbol .hljs-string,
+.hljs-template_tag,
+.django .hljs-variable,
+.smalltalk .hljs-class,
+.hljs-addition,
+.hljs-flow,
+.hljs-stream,
+.bash .hljs-variable,
+.pf .hljs-variable,
+.apache .hljs-tag,
+.apache .hljs-cbracket,
+.tex .hljs-command,
+.tex .hljs-special,
+.erlang_repl .hljs-function_or_atom,
+.asciidoc .hljs-header,
+.markdown .hljs-header,
+.coffeescript .hljs-attribute,
+.tp .hljs-variable {
+  color: #800;
+}
+
+.smartquote,
+.hljs-comment,
+.hljs-annotation,
+.diff .hljs-header,
+.hljs-chunk,
+.asciidoc .hljs-blockquote,
+.markdown .hljs-blockquote {
+  color: #888;
+}
+
+.hljs-number,
+.hljs-date,
+.hljs-regexp,
+.hljs-literal,
+.hljs-hexcolor,
+.smalltalk .hljs-symbol,
+.smalltalk .hljs-char,
+.go .hljs-constant,
+.hljs-change,
+.lasso .hljs-variable,
+.makefile .hljs-variable,
+.asciidoc .hljs-bullet,
+.markdown .hljs-bullet,
+.asciidoc .hljs-link_url,
+.markdown .hljs-link_url {
+  color: #080;
+}
+
+.hljs-label,
+.ruby .hljs-string,
+.hljs-decorator,
+.hljs-filter .hljs-argument,
+.hljs-localvars,
+.hljs-array,
+.hljs-attr_selector,
+.hljs-important,
+.hljs-pseudo,
+.hljs-pi,
+.haml .hljs-bullet,
+.hljs-doctype,
+.hljs-deletion,
+.hljs-envvar,
+.hljs-shebang,
+.apache .hljs-sqbracket,
+.nginx .hljs-built_in,
+.tex .hljs-formula,
+.erlang_repl .hljs-reserved,
+.hljs-prompt,
+.asciidoc .hljs-link_label,
+.markdown .hljs-link_label,
+.vhdl .hljs-attribute,
+.clojure .hljs-attribute,
+.asciidoc .hljs-attribute,
+.lasso .hljs-attribute,
+.coffeescript .hljs-property,
+.hljs-phony {
+  color: #88f;
+}
+
+.hljs-keyword,
+.hljs-id,
+.hljs-title,
+.hljs-built_in,
+.css .hljs-tag,
+.hljs-doctag,
+.smalltalk .hljs-class,
+.hljs-winutils,
+.bash .hljs-variable,
+.pf .hljs-variable,
+.apache .hljs-tag,
+.hljs-type,
+.hljs-typename,
+.tex .hljs-command,
+.asciidoc .hljs-strong,
+.markdown .hljs-strong,
+.hljs-request,
+.hljs-status,
+.tp .hljs-data,
+.tp .hljs-io {
+  font-weight: bold;
+}
+
+.asciidoc .hljs-emphasis,
+.markdown .hljs-emphasis,
+.tp .hljs-units {
+  font-style: italic;
+}
+
+.nginx .hljs-built_in {
+  font-weight: normal;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.lasso .markup,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/docco.css b/libraries/highlight/styles/docco.css
new file mode 100644
index 0000000..0f11123
--- /dev/null
+++ b/libraries/highlight/styles/docco.css
@@ -0,0 +1,134 @@
+/*
+Docco style used in http://jashkenas.github.com/docco/ converted by Simon Madine (@thingsinjars)
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  color: #000;
+  background: #f8f8ff;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-comment,
+.diff .hljs-header {
+  color: #408080;
+  font-style: italic;
+}
+
+.hljs-keyword,
+.assignment,
+.hljs-literal,
+.css .rule .hljs-keyword,
+.hljs-winutils,
+.javascript .hljs-title,
+.lisp .hljs-title,
+.hljs-subst {
+  color: #954121;
+}
+
+.hljs-number,
+.hljs-hexcolor {
+  color: #40a070;
+}
+
+.hljs-string,
+.hljs-tag .hljs-value,
+.hljs-doctag,
+.tex .hljs-formula,
+.hljs-name {
+  color: #219161;
+}
+
+.hljs-title,
+.hljs-id {
+  color: #19469d;
+}
+.hljs-params {
+  color: #00f;
+}
+
+.javascript .hljs-title,
+.lisp .hljs-title,
+.hljs-subst {
+  font-weight: normal;
+}
+
+.hljs-class .hljs-title,
+.haskell .hljs-label,
+.tex .hljs-command {
+  color: #458;
+  font-weight: bold;
+}
+
+.hljs-tag,
+.hljs-tag .hljs-title,
+.hljs-rule .hljs-property,
+.django .hljs-tag .hljs-keyword {
+  color: #000080;
+  font-weight: normal;
+}
+
+.hljs-attribute,
+.hljs-variable,
+.instancevar,
+.lisp .hljs-body {
+  color: #008080;
+}
+
+.hljs-regexp {
+  color: #b68;
+}
+
+.hljs-class {
+  color: #458;
+  font-weight: bold;
+}
+
+.hljs-symbol,
+.ruby .hljs-symbol .hljs-string,
+.ruby .hljs-symbol .hljs-keyword,
+.ruby .hljs-symbol .keymethods,
+.lisp .hljs-keyword,
+.tex .hljs-special,
+.input_number {
+  color: #990073;
+}
+
+.builtin,
+.constructor,
+.hljs-built_in,
+.lisp .hljs-title {
+  color: #0086b3;
+}
+
+.hljs-preprocessor,
+.hljs-pragma,
+.hljs-pi,
+.hljs-doctype,
+.hljs-shebang,
+.hljs-cdata {
+  color: #999;
+  font-weight: bold;
+}
+
+.hljs-deletion {
+  background: #fdd;
+}
+
+.hljs-addition {
+  background: #dfd;
+}
+
+.diff .hljs-change {
+  background: #0086b3;
+}
+
+.hljs-chunk {
+  color: #aaa;
+}
+
+.tex .hljs-formula {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/far.css b/libraries/highlight/styles/far.css
new file mode 100644
index 0000000..34ed6f5
--- /dev/null
+++ b/libraries/highlight/styles/far.css
@@ -0,0 +1,110 @@
+/*
+
+FAR Style (c) MajestiC <majestic2k@gmail.com>
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #000080;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs,
+.hljs-subst {
+  color: #0ff;
+}
+
+.hljs-string,
+.ruby .hljs-string,
+.haskell .hljs-type,
+.hljs-tag .hljs-value,
+.hljs-rule .hljs-value,
+.hljs-rule .hljs-value .hljs-number,
+.hljs-preprocessor,
+.hljs-pragma,
+.ruby .hljs-symbol,
+.ruby .hljs-symbol .hljs-string,
+.hljs-built_in,
+.django .hljs-template_tag,
+.django .hljs-variable,
+.smalltalk .hljs-class,
+.hljs-addition,
+.apache .hljs-tag,
+.apache .hljs-cbracket,
+.tex .hljs-command,
+.coffeescript .hljs-attribute {
+  color: #ff0;
+}
+
+.hljs-keyword,
+.css .hljs-id,
+.hljs-title,
+.hljs-type,
+.vbscript .hljs-built_in,
+.rsl .hljs-built_in,
+.smalltalk .hljs-class,
+.xml .hljs-tag .hljs-title,
+.hljs-winutils,
+.hljs-flow,
+.hljs-change,
+.hljs-envvar,
+.bash .hljs-variable,
+.tex .hljs-special,
+.hljs-name {
+  color: #fff;
+}
+
+.hljs-comment,
+.hljs-doctag,
+.hljs-annotation,
+.hljs-deletion,
+.apache .hljs-sqbracket,
+.tex .hljs-formula {
+  color: #888;
+}
+
+.hljs-number,
+.hljs-date,
+.hljs-regexp,
+.hljs-literal,
+.smalltalk .hljs-symbol,
+.smalltalk .hljs-char,
+.clojure .hljs-attribute {
+  color: #0f0;
+}
+
+.hljs-decorator,
+.django .hljs-filter .hljs-argument,
+.smalltalk .hljs-localvars,
+.smalltalk .hljs-array,
+.hljs-attr_selector,
+.hljs-pseudo,
+.xml .hljs-pi,
+.diff .hljs-header,
+.hljs-chunk,
+.hljs-shebang,
+.nginx .hljs-built_in,
+.hljs-prompt {
+  color: #008080;
+}
+
+.hljs-keyword,
+.css .hljs-id,
+.hljs-title,
+.hljs-type,
+.vbscript .hljs-built_in,
+.rsl .hljs-built_in,
+.smalltalk .hljs-class,
+.hljs-winutils,
+.hljs-flow,
+.apache .hljs-tag,
+.nginx .hljs-built_in,
+.tex .hljs-command,
+.tex .hljs-special,
+.hljs-request,
+.hljs-status {
+  font-weight: bold;
+}
diff --git a/libraries/highlight/styles/foundation.css b/libraries/highlight/styles/foundation.css
new file mode 100644
index 0000000..09c2ff2
--- /dev/null
+++ b/libraries/highlight/styles/foundation.css
@@ -0,0 +1,135 @@
+/*
+Description: Foundation 4 docs style for highlight.js
+Author: Dan Allen <dan.j.allen@gmail.com>
+Website: http://foundation.zurb.com/docs/
+Version: 1.0
+Date: 2013-04-02
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #eee;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-header,
+.hljs-decorator,
+.hljs-annotation {
+  color: #000077;
+}
+
+.hljs-horizontal_rule,
+.hljs-link_url,
+.hljs-emphasis,
+.hljs-attribute {
+  color: #070;
+}
+
+.hljs-emphasis {
+  font-style: italic;
+}
+
+.hljs-link_label,
+.hljs-strong,
+.hljs-value,
+.hljs-string,
+.scss .hljs-value .hljs-string {
+  color: #d14;
+}
+
+.hljs-strong {
+  font-weight: bold;
+}
+
+.hljs-blockquote,
+.hljs-comment {
+  color: #998;
+  font-style: italic;
+}
+
+.asciidoc .hljs-title,
+.hljs-function .hljs-title {
+  color: #900;
+}
+
+.hljs-class {
+  color: #458;
+}
+
+.hljs-id,
+.hljs-pseudo,
+.hljs-constant,
+.hljs-hexcolor {
+  color: teal;
+}
+
+.hljs-variable {
+  color: #336699;
+}
+
+.hljs-bullet {
+  color: #997700;
+}
+
+.hljs-pi,
+.hljs-doctype {
+  color: #3344bb;
+}
+
+.hljs-code,
+.hljs-number {
+  color: #099;
+}
+
+.hljs-important {
+  color: #f00;
+}
+
+.smartquote,
+.hljs-label {
+  color: #970;
+}
+
+.hljs-preprocessor,
+.hljs-pragma {
+  color: #579;
+}
+
+.hljs-reserved,
+.hljs-keyword,
+.scss .hljs-value {
+  color: #000;
+}
+
+.hljs-regexp {
+  background-color: #fff0ff;
+  color: #880088;
+}
+
+.hljs-symbol {
+  color: #990073;
+}
+
+.hljs-symbol .hljs-string {
+  color: #a60;
+}
+
+.hljs-tag {
+  color: #007700;
+}
+
+.hljs-at_rule,
+.hljs-at_rule .hljs-keyword {
+  color: #088;
+}
+
+.hljs-at_rule .hljs-preprocessor {
+  color: #808;
+}
+
+.scss .hljs-tag,
+.scss .hljs-attribute {
+  color: #339;
+}
diff --git a/libraries/highlight/styles/github-gist.css b/libraries/highlight/styles/github-gist.css
new file mode 100644
index 0000000..eb66fd1
--- /dev/null
+++ b/libraries/highlight/styles/github-gist.css
@@ -0,0 +1,218 @@
+/**
+ * GitHub Gist Theme
+ * Author : Louis Barranqueiro - https://github.com/LouisBarranqueiro
+ */
+
+.hljs {
+  display: block;
+  background: white;
+  padding: 0.5em;
+  color: #333333;
+  overflow-x: auto;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-comment,
+.bash .hljs-shebang,
+.java .hljs-javadoc,
+.javascript .hljs-javadoc,
+.rust .hljs-preprocessor {
+  color: #969896;
+}
+
+.hljs-string,
+.apache .hljs-sqbracket,
+.coffeescript .hljs-subst,
+.coffeescript .hljs-regexp,
+.cpp .hljs-preprocessor,
+.c .hljs-preprocessor,
+.javascript .hljs-regexp,
+.json .hljs-attribute,
+.makefile .hljs-variable,
+.markdown .hljs-value,
+.markdown .hljs-link_label,
+.markdown .hljs-strong,
+.markdown .hljs-emphasis,
+.markdown .hljs-blockquote,
+.nginx .hljs-regexp,
+.nginx .hljs-number,
+.objectivec .hljs-preprocessor .hljs-title,
+.perl .hljs-regexp,
+.php .hljs-regexp,
+.xml .hljs-value,
+.less .hljs-built_in,
+.scss .hljs-built_in {
+  color: #df5000;
+}
+
+.hljs-keyword,
+.css .hljs-at_rule,
+.css .hljs-important,
+.http .hljs-request,
+.ini .hljs-setting,
+.haskell .hljs-type,
+.java .hljs-javadoctag,
+.javascript .hljs-tag,
+.javascript .hljs-javadoctag,
+.nginx .hljs-title,
+.objectivec .hljs-preprocessor,
+.php .hljs-phpdoc,
+.sql .hljs-built_in,
+.less .hljs-tag,
+.less .hljs-at_rule,
+.scss .hljs-tag,
+.scss .hljs-at_rule,
+.scss .hljs-important,
+.stylus .hljs-at_rule,
+.go .hljs-typename,
+.swift .hljs-preprocessor {
+  color: #a71d5d;
+}
+
+.apache .hljs-common,
+.apache .hljs-cbracket,
+.apache .hljs-keyword,
+.bash .hljs-literal,
+.bash .hljs-built_in,
+.coffeescript .hljs-literal,
+.coffeescript .hljs-built_in,
+.coffeescript .hljs-number,
+.cpp .hljs-number,
+.cpp .hljs-built_in,
+.c .hljs-number,
+.c .hljs-built_in,
+.cs .hljs-number,
+.cs .hljs-built_in,
+.css .hljs-attribute,
+.css .hljs-hexcolor,
+.css .hljs-number,
+.css .hljs-function,
+.haskell .hljs-number,
+.http .hljs-literal,
+.http .hljs-attribute,
+.java .hljs-number,
+.javascript .hljs-built_in,
+.javascript .hljs-literal,
+.javascript .hljs-number,
+.json .hljs-number,
+.makefile .hljs-keyword,
+.markdown .hljs-link_reference,
+.nginx .hljs-built_in,
+.objectivec .hljs-literal,
+.objectivec .hljs-number,
+.objectivec .hljs-built_in,
+.php .hljs-literal,
+.php .hljs-number,
+.python .hljs-number,
+.ruby .hljs-prompt,
+.ruby .hljs-constant,
+.ruby .hljs-number,
+.ruby .hljs-subst .hljs-keyword,
+.ruby .hljs-symbol,
+.rust .hljs-number,
+.sql .hljs-number,
+.puppet .hljs-function,
+.less .hljs-number,
+.less .hljs-hexcolor,
+.less .hljs-function,
+.less .hljs-attribute,
+.scss .hljs-preprocessor,
+.scss .hljs-number,
+.scss .hljs-hexcolor,
+.scss .hljs-function,
+.scss .hljs-attribute,
+.stylus .hljs-number,
+.stylus .hljs-hexcolor,
+.stylus .hljs-attribute,
+.stylus .hljs-params,
+.go .hljs-built_in,
+.go .hljs-constant,
+.swift .hljs-built_in,
+.swift .hljs-number {
+  color: #0086b3;
+}
+
+.apache .hljs-tag,
+.cs .hljs-xmlDocTag,
+.css .hljs-tag,
+.xml .hljs-title,
+.stylus .hljs-tag {
+  color: #63a35c;
+}
+
+.bash .hljs-variable,
+.cs .hljs-preprocessor,
+.cs .hljs-preprocessor .hljs-keyword,
+.css .hljs-attr_selector,
+.css .hljs-value,
+.ini .hljs-value,
+.ini .hljs-keyword,
+.javascript .hljs-tag .hljs-title,
+.makefile .hljs-constant,
+.nginx .hljs-variable,
+.xml .hljs-tag,
+.scss .hljs-variable {
+  color: #333333;
+}
+
+.bash .hljs-title,
+.coffeescript .hljs-title,
+.cpp .hljs-title,
+.c .hljs-title,
+.cs .hljs-title,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo,
+.ini .hljs-title,
+.haskell .hljs-title,
+.haskell .hljs-pragma,
+.java .hljs-title,
+.javascript .hljs-title,
+.makefile .hljs-title,
+.objectivec .hljs-title,
+.perl .hljs-sub,
+.php .hljs-title,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-parent,
+.ruby .hljs-title,
+.rust .hljs-title,
+.xml .hljs-attribute,
+.puppet .hljs-title,
+.less .hljs-id,
+.less .hljs-pseudo,
+.less .hljs-class,
+.scss .hljs-id,
+.scss .hljs-pseudo,
+.scss .hljs-class,
+.stylus .hljs-class,
+.stylus .hljs-id,
+.stylus .hljs-pseudo,
+.stylus .hljs-title,
+.swift .hljs-title,
+.diff .hljs-chunk {
+  color: #795da3;
+}
+
+.coffeescript .hljs-reserved,
+.coffeescript .hljs-attribute {
+  color: #1d3e81;
+}
+
+.diff .hljs-chunk {
+  font-weight: bold;
+}
+
+.diff .hljs-addition {
+  color: #55a532;
+  background-color: #eaffea;
+}
+
+.diff .hljs-deletion {
+  color: #bd2c00;
+  background-color: #ffecec;
+}
+
+.markdown .hljs-link_url {
+  text-decoration: underline;
+}
diff --git a/libraries/highlight/styles/github.css b/libraries/highlight/styles/github.css
new file mode 100644
index 0000000..791537e
--- /dev/null
+++ b/libraries/highlight/styles/github.css
@@ -0,0 +1,123 @@
+/*
+
+github.com style (c) Vasily Polovnyov <vast@whiteants.net>
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  color: #333;
+  background: #f8f8f8;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-comment,
+.diff .hljs-header {
+  color: #998;
+  font-style: italic;
+}
+
+.hljs-keyword,
+.css .rule .hljs-keyword,
+.hljs-winutils,
+.nginx .hljs-title,
+.hljs-subst,
+.hljs-request,
+.hljs-status {
+  color: #333;
+  font-weight: bold;
+}
+
+.hljs-number,
+.hljs-hexcolor,
+.ruby .hljs-constant {
+  color: #008080;
+}
+
+.hljs-string,
+.hljs-tag .hljs-value,
+.hljs-doctag,
+.tex .hljs-formula {
+  color: #d14;
+}
+
+.hljs-title,
+.hljs-id,
+.scss .hljs-preprocessor {
+  color: #900;
+  font-weight: bold;
+}
+
+.hljs-list .hljs-keyword,
+.hljs-subst {
+  font-weight: normal;
+}
+
+.hljs-class .hljs-title,
+.hljs-type,
+.vhdl .hljs-literal,
+.tex .hljs-command {
+  color: #458;
+  font-weight: bold;
+}
+
+.hljs-tag,
+.hljs-tag .hljs-title,
+.hljs-rule .hljs-property,
+.django .hljs-tag .hljs-keyword {
+  color: #000080;
+  font-weight: normal;
+}
+
+.hljs-attribute,
+.hljs-variable,
+.lisp .hljs-body,
+.hljs-name {
+  color: #008080;
+}
+
+.hljs-regexp {
+  color: #009926;
+}
+
+.hljs-symbol,
+.ruby .hljs-symbol .hljs-string,
+.lisp .hljs-keyword,
+.clojure .hljs-keyword,
+.scheme .hljs-keyword,
+.tex .hljs-special,
+.hljs-prompt {
+  color: #990073;
+}
+
+.hljs-built_in {
+  color: #0086b3;
+}
+
+.hljs-preprocessor,
+.hljs-pragma,
+.hljs-pi,
+.hljs-doctype,
+.hljs-shebang,
+.hljs-cdata {
+  color: #999;
+  font-weight: bold;
+}
+
+.hljs-deletion {
+  background: #fdd;
+}
+
+.hljs-addition {
+  background: #dfd;
+}
+
+.diff .hljs-change {
+  background: #0086b3;
+}
+
+.hljs-chunk {
+  color: #aaa;
+}
diff --git a/libraries/highlight/styles/googlecode.css b/libraries/highlight/styles/googlecode.css
new file mode 100644
index 0000000..dad5bb0
--- /dev/null
+++ b/libraries/highlight/styles/googlecode.css
@@ -0,0 +1,144 @@
+/*
+
+Google Code style (c) Aahan Krish <geekpanth3r@gmail.com>
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: white;
+  color: black;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-comment {
+  color: #800;
+}
+
+.hljs-keyword,
+.method,
+.hljs-list .hljs-keyword,
+.nginx .hljs-title,
+.hljs-tag .hljs-title,
+.setting .hljs-value,
+.hljs-winutils,
+.tex .hljs-command,
+.http .hljs-title,
+.hljs-request,
+.hljs-status {
+  color: #008;
+}
+
+.hljs-envvar,
+.tex .hljs-special {
+  color: #660;
+}
+
+.hljs-string,
+.hljs-tag .hljs-value,
+.hljs-cdata,
+.hljs-filter .hljs-argument,
+.hljs-attr_selector,
+.apache .hljs-cbracket,
+.hljs-date,
+.hljs-regexp,
+.coffeescript .hljs-attribute {
+  color: #080;
+}
+
+.hljs-sub .hljs-identifier,
+.hljs-pi,
+.hljs-tag,
+.hljs-tag .hljs-keyword,
+.hljs-decorator,
+.ini .hljs-title,
+.hljs-shebang,
+.hljs-prompt,
+.hljs-hexcolor,
+.hljs-rule .hljs-value,
+.hljs-literal,
+.hljs-symbol,
+.ruby .hljs-symbol .hljs-string,
+.hljs-number,
+.css .hljs-function,
+.clojure .hljs-attribute {
+  color: #066;
+}
+
+.hljs-class .hljs-title,
+.smalltalk .hljs-class,
+.hljs-doctag,
+.hljs-type,
+.hljs-typename,
+.hljs-tag .hljs-attribute,
+.hljs-doctype,
+.hljs-class .hljs-id,
+.hljs-built_in,
+.setting,
+.hljs-params,
+.hljs-variable,
+.hljs-name {
+  color: #606;
+}
+
+.css .hljs-tag,
+.hljs-rule .hljs-property,
+.hljs-pseudo,
+.hljs-subst {
+  color: #000;
+}
+
+.css .hljs-class,
+.css .hljs-id {
+  color: #9b703f;
+}
+
+.hljs-value .hljs-important {
+  color: #ff7700;
+  font-weight: bold;
+}
+
+.hljs-rule .hljs-keyword {
+  color: #c5af75;
+}
+
+.hljs-annotation,
+.apache .hljs-sqbracket,
+.nginx .hljs-built_in {
+  color: #9b859d;
+}
+
+.hljs-preprocessor,
+.hljs-preprocessor *,
+.hljs-pragma {
+  color: #444;
+}
+
+.tex .hljs-formula {
+  background-color: #eee;
+  font-style: italic;
+}
+
+.diff .hljs-header,
+.hljs-chunk {
+  color: #808080;
+  font-weight: bold;
+}
+
+.diff .hljs-change {
+  background-color: #bccff9;
+}
+
+.hljs-addition {
+  background-color: #baeeba;
+}
+
+.hljs-deletion {
+  background-color: #ffc8bd;
+}
+
+.hljs-comment .hljs-doctag {
+  font-weight: bold;
+}
diff --git a/libraries/highlight/styles/grayscale.css b/libraries/highlight/styles/grayscale.css
new file mode 100644
index 0000000..5c0df07
--- /dev/null
+++ b/libraries/highlight/styles/grayscale.css
@@ -0,0 +1,128 @@
+/*
+
+grayscale style (c) MY Sun <simonmysun@gmail.com>
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  color: #333;
+  background: #fff;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-comment,
+.diff .hljs-header {
+  color: #777;
+  font-style: italic;
+}
+
+.hljs-keyword,
+.css .rule .hljs-keyword,
+.hljs-winutils,
+.nginx .hljs-title,
+.hljs-subst,
+.hljs-request,
+.hljs-status {
+  color: #333;
+  font-weight: bold;
+}
+
+.hljs-number,
+.hljs-hexcolor,
+.ruby .hljs-constant {
+  color: #777;
+}
+
+.hljs-string,
+.hljs-tag .hljs-value,
+.hljs-doctag,
+.tex .hljs-formula {
+  color: #333;
+  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAJ0lEQVQIW2O8e/fufwYGBgZBQUEQxcCIIfDu3Tuwivfv30NUoAsAALHpFMMLqZlPAAAAAElFTkSuQmCC) repeat;
+}
+
+.hljs-title,
+.hljs-id,
+.scss .hljs-preprocessor {
+  color: #000;
+  font-weight: bold;
+}
+
+.hljs-list .hljs-keyword,
+.hljs-subst {
+  font-weight: normal;
+}
+
+.hljs-class .hljs-title,
+.hljs-type,
+.vhdl .hljs-literal,
+.tex .hljs-command {
+  color: #333;
+  font-weight: bold;
+}
+
+.hljs-tag,
+.hljs-tag .hljs-title,
+.hljs-rule .hljs-property,
+.django .hljs-tag .hljs-keyword {
+  color: #333;
+}
+
+.hljs-attribute,
+.hljs-variable,
+.lisp .hljs-body,
+.hljs-name {
+  color: #000;
+}
+
+.hljs-regexp {
+    color: #333;
+    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAICAYAAADA+m62AAAAPUlEQVQYV2NkQAN37979r6yszIgujiIAU4RNMVwhuiQ6H6wQl3XI4oy4FMHcCJPHcDS6J2A2EqUQpJhohQDexSef15DBCwAAAABJRU5ErkJggg==) repeat;
+}
+
+.hljs-symbol,
+.ruby .hljs-symbol .hljs-string,
+.lisp .hljs-keyword,
+.clojure .hljs-keyword,
+.scheme .hljs-keyword,
+.tex .hljs-special,
+.hljs-prompt {
+  color: #000;
+  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAKElEQVQIW2NkQAO7d+/+z4gsBhJwdXVlhAvCBECKwIIwAbhKZBUwBQA6hBpm5efZsgAAAABJRU5ErkJggg==) repeat;
+}
+
+.hljs-built_in {
+  color: #000;
+  text-decoration: underline;
+}
+
+.hljs-preprocessor,
+.hljs-pragma,
+.hljs-pi,
+.hljs-doctype,
+.hljs-shebang,
+.hljs-cdata {
+  color: #999;
+  font-weight: bold;
+}
+
+.hljs-deletion {
+  color: #fff;
+  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAADCAYAAABS3WWCAAAAE0lEQVQIW2MMDQ39zzhz5kwIAQAyxweWgUHd1AAAAABJRU5ErkJggg==) repeat;
+}
+
+.hljs-addition {
+  color: #000;
+  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAALUlEQVQYV2N89+7dfwYk8P79ewZBQUFkIQZGOiu6e/cuiptQHAPl0NtNxAQBAM97Oejj3Dg7AAAAAElFTkSuQmCC) repeat;
+}
+
+.diff .hljs-change {
+  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAYAAABWKLW/AAAAHUlEQVQIW2NkgILdu3f/ZwSxQQxXV1dGRhgDJAgAzGcLNGkoJrsAAAAASUVORK5CYII=) repeat;
+}
+
+.hljs-chunk {
+  color: #aaa;
+}
\ No newline at end of file
diff --git a/libraries/highlight/styles/hopscotch.css b/libraries/highlight/styles/hopscotch.css
new file mode 100644
index 0000000..75c3e59
--- /dev/null
+++ b/libraries/highlight/styles/hopscotch.css
@@ -0,0 +1,95 @@
+/*
+ * Hopscotch
+ * by Jan T. Sott
+ * https://github.com/idleberg/Hopscotch
+ *
+ * This work is licensed under the Creative Commons CC0 1.0 Universal License
+ */ 
+
+/* Comment */
+.hljs-comment,
+.hljs-title {
+  color: #989498;
+}
+
+/* Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #dd464c;
+}
+
+/* Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #fd8b19;
+}
+
+/* Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rules .hljs-attribute {
+  color: #fdcc59;
+}
+
+/* Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #8fc13e;
+}
+
+/* Aqua */
+.css .hljs-hexcolor {
+  color: #149b93;
+}
+
+/* Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #1290bf;
+}
+
+/* Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #c85e7c;
+}
+
+.hljs {
+  display: block;
+  background: #322931;
+  color: #b9b5b8;
+  padding: 0.5em;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/hybrid.css b/libraries/highlight/styles/hybrid.css
new file mode 100644
index 0000000..3019ffe
--- /dev/null
+++ b/libraries/highlight/styles/hybrid.css
@@ -0,0 +1,164 @@
+/*
+
+vim-hybrid theme by w0ng (https://github.com/w0ng/vim-hybrid)
+
+*/
+
+/*background color*/
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #1d1f21;
+  -webkit-text-size-adjust: none;
+}
+
+/*selection color*/
+.hljs::selection,
+.hljs span::selection {
+  background: #373b41;
+}
+
+.hljs::-moz-selection,
+.hljs span::-moz-selection {
+  background: #373b41;
+}
+
+/*foreground color*/
+.hljs,
+.hljs-setting .hljs-value,
+.hljs-expression .hljs-variable,
+.hljs-expression .hljs-begin-block,
+.hljs-expression .hljs-end-block,
+.hljs-class .hljs-params,
+.hljs-function .hljs-params,
+.hljs-at_rule .hljs-preprocessor {
+  color: #c5c8c6;
+}
+
+/*color: fg_yellow*/
+.hljs-title,
+.hljs-function .hljs-title,
+.hljs-keyword .hljs-common,
+.hljs-class .hljs-title,
+.hljs-decorator,
+.hljs-tag .hljs-title,
+.hljs-header,
+.hljs-sub,
+.hljs-function {
+  color: #f0c674;
+}
+
+/*color: fg_comment*/
+.hljs-comment,
+.hljs-output .hljs-value,
+.hljs-pi,
+.hljs-shebang,
+.hljs-doctype {
+  color: #707880;
+}
+
+/*color: fg_red*/
+.hljs-number,
+.hljs-symbol,
+.hljs-literal,
+.hljs-deletion,
+.hljs-link_url,
+.hljs-symbol .hljs-string,
+.hljs-argument,
+.hljs-hexcolor,
+.hljs-input .hljs-prompt,
+.hljs-char {
+ color: #cc6666
+}
+
+/*color: fg_green*/
+.hljs-string,
+.hljs-special,
+.hljs-doctag,
+.hljs-addition,
+.hljs-important,
+.hljs-tag .hljs-value,
+.hljs-at.rule .hljs-keyword,
+.hljs-regexp,
+.hljs-attr_selector {
+  color: #b5bd68;
+}
+
+/*color: fg_purple*/
+.hljs-variable,
+.hljs-property,
+.hljs-envar,
+.hljs-code,
+.hljs-expression,
+.hljs-localvars,
+.hljs-id,
+.hljs-variable .hljs-filter,
+.hljs-variable .hljs-filter .hljs-keyword,
+.hljs-template_tag .hljs-filter .hljs-keyword,
+.hljs-name {
+ color: #b294bb;
+}
+
+/*color: fg_blue*/
+.hljs-statement,
+.hljs-label,
+.hljs-keyword,
+.hljs-xmlDocTag,
+.hljs-function .hljs-keyword,
+.hljs-chunk,
+.hljs-cdata,
+.hljs-link_label,
+.hljs-bullet,
+.hljs-class .hljs-keyword,
+.hljs-smartquote,
+.hljs-method,
+.hljs-list .hljs-title,
+.hljs-tag {
+ color: #81a2be;
+}
+
+/*color: fg_aqua*/
+.hljs-pseudo,
+.hljs-exception,
+.hljs-annotation,
+.hljs-subst,
+.hljs-change,
+.hljs-cbracket,
+.hljs-operator,
+.hljs-horizontal_rule,
+.hljs-preprocessor .hljs-keyword,
+.hljs-typedef,
+.hljs-template_tag,
+.hljs-variable,
+.hljs-variable .hljs-filter .hljs-argument,
+.hljs-at_rule,
+.hljs-at_rule .hljs-string,
+.hljs-at_rule .hljs-keyword {
+  color: #8abeb7;
+}
+
+/*color: fg_orange*/
+.hljs-type,
+.hljs-typename,
+.hljs-inheritance .hljs-parent,
+.hljs-constant,
+.hljs-built_in,
+.hljs-setting,
+.hljs-structure,
+.hljs-link_reference,
+.hljs-attribute,
+.hljs-blockquote,
+.hljs-quoted,
+.hljs-class,
+.hljs-header {
+  color: #de935f;
+}
+
+.hljs-emphasis {
+  font-style: italic;
+}
+
+.hljs-strong {
+  font-weight: bold;
+}
diff --git a/libraries/highlight/styles/idea.css b/libraries/highlight/styles/idea.css
new file mode 100644
index 0000000..3a343ad
--- /dev/null
+++ b/libraries/highlight/styles/idea.css
@@ -0,0 +1,122 @@
+/*
+
+Intellij Idea-like styling (c) Vasily Polovnyov <vast@whiteants.net>
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  color: #000;
+  background: #fff;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-subst,
+.hljs-title,
+.json .hljs-value {
+  font-weight: normal;
+  color: #000;
+}
+
+.hljs-comment,
+.diff .hljs-header {
+  color: #808080;
+  font-style: italic;
+}
+
+.hljs-annotation,
+.hljs-decorator,
+.hljs-preprocessor,
+.hljs-pragma,
+.hljs-doctype,
+.hljs-pi,
+.hljs-chunk,
+.hljs-shebang,
+.apache .hljs-cbracket,
+.hljs-prompt,
+.http .hljs-title {
+  color: #808000;
+}
+
+.hljs-tag,
+.hljs-pi {
+  background: #efefef;
+}
+
+.hljs-tag .hljs-title,
+.hljs-id,
+.hljs-attr_selector,
+.hljs-pseudo,
+.hljs-literal,
+.hljs-keyword,
+.hljs-hexcolor,
+.css .hljs-function,
+.ini .hljs-title,
+.css .hljs-class,
+.hljs-list .hljs-keyword,
+.nginx .hljs-title,
+.tex .hljs-command,
+.hljs-request,
+.hljs-status {
+  font-weight: bold;
+  color: #000080;
+}
+
+.hljs-attribute,
+.hljs-rule .hljs-keyword,
+.hljs-number,
+.hljs-date,
+.hljs-regexp,
+.tex .hljs-special {
+  font-weight: bold;
+  color: #0000ff;
+}
+
+.hljs-number,
+.hljs-regexp {
+  font-weight: normal;
+}
+
+.hljs-string,
+.hljs-value,
+.hljs-filter .hljs-argument,
+.css .hljs-function .hljs-params,
+.apache .hljs-tag {
+  color: #008000;
+  font-weight: bold;
+}
+
+.hljs-symbol,
+.ruby .hljs-symbol .hljs-string,
+.hljs-char,
+.tex .hljs-formula {
+  color: #000;
+  background: #d0eded;
+  font-style: italic;
+}
+
+.hljs-doctag {
+  text-decoration: underline;
+}
+
+.hljs-variable,
+.hljs-envvar,
+.apache .hljs-sqbracket,
+.nginx .hljs-built_in,
+.hljs-name {
+  color: #660e7a;
+}
+
+.hljs-addition {
+  background: #baeeba;
+}
+
+.hljs-deletion {
+  background: #ffc8bd;
+}
+
+.diff .hljs-change {
+  background: #bccff9;
+}
diff --git a/libraries/highlight/styles/ir_black.css b/libraries/highlight/styles/ir_black.css
new file mode 100644
index 0000000..f0d1e45
--- /dev/null
+++ b/libraries/highlight/styles/ir_black.css
@@ -0,0 +1,106 @@
+/*
+  IR_Black style (c) Vasily Mikhailitchenko <vaskas@programica.ru>
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #000;
+  color: #f8f8f8;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-shebang,
+.hljs-comment {
+  color: #7c7c7c;
+}
+
+.hljs-keyword,
+.hljs-tag,
+.tex .hljs-command,
+.hljs-request,
+.hljs-status,
+.clojure .hljs-attribute {
+  color: #96cbfe;
+}
+
+.hljs-sub .hljs-keyword,
+.method,
+.hljs-list .hljs-title,
+.nginx .hljs-title {
+  color: #ffffb6;
+}
+
+.hljs-string,
+.hljs-tag .hljs-value,
+.hljs-cdata,
+.hljs-filter .hljs-argument,
+.hljs-attr_selector,
+.apache .hljs-cbracket,
+.hljs-date,
+.coffeescript .hljs-attribute {
+  color: #a8ff60;
+}
+
+.hljs-subst {
+  color: #daefa3;
+}
+
+.hljs-regexp {
+  color: #e9c062;
+}
+
+.hljs-title,
+.hljs-sub .hljs-identifier,
+.hljs-pi,
+.hljs-decorator,
+.tex .hljs-special,
+.hljs-type,
+.hljs-constant,
+.smalltalk .hljs-class,
+.hljs-doctag,
+.nginx .hljs-built_in {
+  color: #ffffb6;
+}
+
+.hljs-symbol,
+.ruby .hljs-symbol .hljs-string,
+.hljs-number,
+.hljs-variable,
+.vbscript,
+.hljs-literal,
+.hljs-name {
+  color: #c6c5fe;
+}
+
+.css .hljs-tag {
+  color: #96cbfe;
+}
+
+.css .hljs-rule .hljs-property,
+.css .hljs-id {
+  color: #ffffb6;
+}
+
+.css .hljs-class {
+  color: #fff;
+}
+
+.hljs-hexcolor {
+  color: #c6c5fe;
+}
+
+.hljs-number {
+  color:#ff73fd;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.7;
+}
diff --git a/libraries/highlight/styles/kimbie.dark.css b/libraries/highlight/styles/kimbie.dark.css
new file mode 100644
index 0000000..f60e47d
--- /dev/null
+++ b/libraries/highlight/styles/kimbie.dark.css
@@ -0,0 +1,97 @@
+/*
+    Name:     Kimbie (dark)
+    Author:   Jan T. Sott
+    License:  Creative Commons Attribution-ShareAlike 4.0 Unported License
+    URL:      https://github.com/idleberg/Kimbie-highlight.js
+*/
+
+/* Kimbie Comment */
+.hljs-comment,
+.hljs-title {
+  color: #d6baad;
+}
+
+/* Kimbie Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #dc3958;
+}
+
+/* Kimbie Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #f79a32;
+}
+
+/* Kimbie Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #f06431;
+}
+
+/* Kimbie Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #889b4a;
+}
+
+/* Kimbie Aqua */
+.css .hljs-hexcolor {
+  color: #088649;
+}
+
+/* Kimbie Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #8ab1b0;
+}
+
+/* Kimbie Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #98676a;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #221a0f;
+  color: #d3af86;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/kimbie.light.css b/libraries/highlight/styles/kimbie.light.css
new file mode 100644
index 0000000..57fc776
--- /dev/null
+++ b/libraries/highlight/styles/kimbie.light.css
@@ -0,0 +1,97 @@
+/*
+    Name:     Kimbie (light)
+    Author:   Jan T. Sott
+    License:  Creative Commons Attribution-ShareAlike 4.0 Unported License
+    URL:      https://github.com/idleberg/Kimbie-highlight.js
+*/
+
+/* Kimbie Comment */
+.hljs-comment,
+.hljs-title {
+  color: #a57a4c;
+}
+
+/* Kimbie Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #dc3958;
+}
+
+/* Kimbie Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #f79a32;
+}
+
+/* Kimbie Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #f06431;
+}
+
+/* Kimbie Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #889b4a;
+}
+
+/* Kimbie Aqua */
+.css .hljs-hexcolor {
+  color: #088649;
+}
+
+/* Kimbie Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #8ab1b0;
+}
+
+/* Kimbie Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #98676a;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #fbebd4;
+  color: #84613d;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/magula.css b/libraries/highlight/styles/magula.css
new file mode 100644
index 0000000..13d366b
--- /dev/null
+++ b/libraries/highlight/styles/magula.css
@@ -0,0 +1,120 @@
+/*
+Description: Magula style for highligh.js
+Author: Ruslan Keba <rukeba@gmail.com>
+Website: http://rukeba.com/
+Version: 1.0
+Date: 2009-01-03
+Music: Aphex Twin / Xtal
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background-color: #f4f4f4;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs,
+.hljs-subst {
+  color: black;
+}
+
+.hljs-string,
+.hljs-title,
+.hljs-parent,
+.hljs-tag .hljs-value,
+.hljs-rule .hljs-value,
+.hljs-preprocessor,
+.hljs-pragma,
+.ruby .hljs-symbol,
+.ruby .hljs-symbol .hljs-string,
+.hljs-template_tag,
+.django .hljs-variable,
+.smalltalk .hljs-class,
+.hljs-addition,
+.hljs-flow,
+.hljs-stream,
+.bash .hljs-variable,
+.apache .hljs-cbracket,
+.coffeescript .hljs-attribute {
+  color: #050;
+}
+
+.hljs-comment,
+.hljs-annotation,
+.diff .hljs-header,
+.hljs-chunk {
+  color: #777;
+}
+
+.hljs-number,
+.hljs-date,
+.hljs-regexp,
+.hljs-literal,
+.hljs-name,
+.smalltalk .hljs-symbol,
+.smalltalk .hljs-char,
+.hljs-change,
+.tex .hljs-special {
+  color: #800;
+}
+
+.hljs-label,
+.ruby .hljs-string,
+.hljs-decorator,
+.hljs-filter .hljs-argument,
+.hljs-localvars,
+.hljs-array,
+.hljs-attr_selector,
+.hljs-pseudo,
+.hljs-pi,
+.hljs-doctype,
+.hljs-deletion,
+.hljs-envvar,
+.hljs-shebang,
+.apache .hljs-sqbracket,
+.nginx .hljs-built_in,
+.tex .hljs-formula,
+.hljs-prompt,
+.clojure .hljs-attribute {
+  color: #00e;
+}
+
+.hljs-keyword,
+.hljs-id,
+.hljs-doctag,
+.hljs-title,
+.hljs-built_in,
+.smalltalk .hljs-class,
+.hljs-winutils,
+.bash .hljs-variable,
+.apache .hljs-tag,
+.xml .hljs-tag,
+.tex .hljs-command,
+.hljs-request,
+.hljs-status {
+  font-weight: bold;
+  color: navy;
+}
+
+.nginx .hljs-built_in {
+  font-weight: normal;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
+
+/* --- */
+.apache .hljs-tag {
+  font-weight: bold;
+  color: blue;
+}
+
diff --git a/libraries/highlight/styles/mono-blue.css b/libraries/highlight/styles/mono-blue.css
new file mode 100644
index 0000000..525cccc
--- /dev/null
+++ b/libraries/highlight/styles/mono-blue.css
@@ -0,0 +1,68 @@
+/*
+  Five-color theme from a single blue hue.
+*/
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #eaeef3;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs,
+.hljs-list .hljs-built_in {
+  color: #00193a;
+}
+
+.hljs-keyword,
+.hljs-title,
+.hljs-important,
+.hljs-request,
+.hljs-header,
+.hljs-doctag {
+  font-weight: bold;
+}
+
+.hljs-comment,
+.hljs-chunk {
+  color: #738191;
+}
+
+.hljs-string,
+.hljs-title,
+.hljs-parent,
+.hljs-built_in,
+.hljs-literal,
+.hljs-filename,
+.hljs-value,
+.hljs-addition,
+.hljs-tag,
+.hljs-argument,
+.hljs-link_label,
+.hljs-blockquote,
+.hljs-header,
+.hljs-name {
+  color: #0048ab;
+}
+
+.hljs-decorator,
+.hljs-prompt,
+.hljs-subst,
+.hljs-symbol,
+.hljs-doctype,
+.hljs-regexp,
+.hljs-preprocessor,
+.hljs-pragma,
+.hljs-pi,
+.hljs-attribute,
+.hljs-attr_selector,
+.hljs-xmlDocTag,
+.hljs-deletion,
+.hljs-shebang,
+.hljs-string .hljs-variable,
+.hljs-link_url,
+.hljs-bullet,
+.hljs-sqbracket,
+.hljs-phony {
+  color: #4c81c9;
+}
diff --git a/libraries/highlight/styles/monokai.css b/libraries/highlight/styles/monokai.css
new file mode 100644
index 0000000..5f20abf
--- /dev/null
+++ b/libraries/highlight/styles/monokai.css
@@ -0,0 +1,126 @@
+/*
+Monokai style - ported by Luigi Maselli - http://grigio.org
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #272822;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-tag,
+.hljs-tag .hljs-title,
+.hljs-keyword,
+.hljs-literal,
+.hljs-strong,
+.hljs-change,
+.hljs-winutils,
+.hljs-flow,
+.nginx .hljs-title,
+.tex .hljs-special {
+  color: #f92672;
+}
+
+.hljs {
+  color: #ddd;
+}
+
+.hljs .hljs-constant,
+.asciidoc .hljs-code,
+.markdown .hljs-code {
+  color: #66d9ef;
+}
+
+.hljs-code,
+.hljs-class .hljs-title,
+.hljs-header {
+  color: white;
+}
+
+.hljs-link_label,
+.hljs-attribute,
+.hljs-symbol,
+.hljs-symbol .hljs-string,
+.hljs-value,
+.hljs-regexp {
+  color: #bf79db;
+}
+
+.hljs-link_url,
+.hljs-tag .hljs-value,
+.hljs-string,
+.hljs-bullet,
+.hljs-subst,
+.hljs-title,
+.hljs-emphasis,
+.hljs-type,
+.hljs-preprocessor,
+.hljs-pragma,
+.ruby .hljs-class .hljs-parent,
+.hljs-built_in,
+.django .hljs-template_tag,
+.django .hljs-variable,
+.smalltalk .hljs-class,
+.django .hljs-filter .hljs-argument,
+.smalltalk .hljs-localvars,
+.smalltalk .hljs-array,
+.hljs-attr_selector,
+.hljs-pseudo,
+.hljs-addition,
+.hljs-stream,
+.hljs-envvar,
+.apache .hljs-tag,
+.apache .hljs-cbracket,
+.tex .hljs-command,
+.hljs-prompt,
+.hljs-name {
+  color: #a6e22e;
+}
+
+.hljs-comment,
+.hljs-annotation,
+.smartquote,
+.hljs-blockquote,
+.hljs-horizontal_rule,
+.hljs-decorator,
+.hljs-pi,
+.hljs-doctype,
+.hljs-deletion,
+.hljs-shebang,
+.apache .hljs-sqbracket,
+.tex .hljs-formula {
+  color: #75715e;
+}
+
+.hljs-keyword,
+.hljs-literal,
+.css .hljs-id,
+.hljs-doctag,
+.hljs-title,
+.hljs-header,
+.hljs-type,
+.vbscript .hljs-built_in,
+.rsl .hljs-built_in,
+.smalltalk .hljs-class,
+.diff .hljs-header,
+.hljs-chunk,
+.hljs-winutils,
+.bash .hljs-variable,
+.apache .hljs-tag,
+.tex .hljs-special,
+.hljs-request,
+.hljs-status {
+  font-weight: bold;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/monokai_sublime.css b/libraries/highlight/styles/monokai_sublime.css
new file mode 100644
index 0000000..4ae4aeb
--- /dev/null
+++ b/libraries/highlight/styles/monokai_sublime.css
@@ -0,0 +1,154 @@
+/*
+
+Monokai Sublime style. Derived from Monokai by noformnocontent http://nn.mit-license.org/
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #23241f;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs,
+.hljs-tag,
+.css .hljs-rule,
+.css .hljs-value,
+.aspectj .hljs-function,
+.css .hljs-function
+.hljs-preprocessor,
+.hljs-pragma {
+  color: #f8f8f2;
+}
+
+.hljs-strongemphasis,
+.hljs-strong,
+.hljs-emphasis {
+  color: #a8a8a2;
+}
+
+.hljs-bullet,
+.hljs-blockquote,
+.hljs-horizontal_rule,
+.hljs-number,
+.hljs-regexp,
+.alias .hljs-keyword,
+.hljs-literal,
+.hljs-hexcolor {
+  color: #ae81ff;
+}
+
+.hljs-tag .hljs-value,
+.hljs-code,
+.hljs-title,
+.css .hljs-class,
+.hljs-class .hljs-title:last-child {
+  color: #a6e22e;
+}
+
+.hljs-link_url {
+  font-size: 80%;
+}
+
+.hljs-strong,
+.hljs-strongemphasis {
+  font-weight: bold;
+}
+
+.hljs-emphasis,
+.hljs-strongemphasis,
+.hljs-class .hljs-title:last-child,
+.hljs-typename {
+  font-style: italic;
+}
+
+.hljs-keyword,
+.ruby .hljs-class .hljs-keyword:first-child,
+.ruby .hljs-function .hljs-keyword,
+.hljs-function,
+.hljs-change,
+.hljs-winutils,
+.hljs-flow,
+.nginx .hljs-title,
+.tex .hljs-special,
+.hljs-header,
+.hljs-attribute,
+.hljs-symbol,
+.hljs-symbol .hljs-string,
+.hljs-tag .hljs-title,
+.hljs-value,
+.alias .hljs-keyword:first-child,
+.css .hljs-tag,
+.css .unit,
+.css .hljs-important {
+  color: #f92672;
+}
+
+.hljs-function .hljs-keyword,
+.hljs-class .hljs-keyword:first-child,
+.hljs-aspect .hljs-keyword:first-child,
+.hljs-constant,
+.hljs-typename,
+.hljs-name,
+.css .hljs-attribute {
+  color: #66d9ef;
+}
+
+.hljs-variable,
+.hljs-params,
+.hljs-class .hljs-title,
+.hljs-aspect .hljs-title {
+  color: #f8f8f2;
+}
+
+.hljs-string,
+.css .hljs-id,
+.hljs-subst,
+.hljs-type,
+.ruby .hljs-class .hljs-parent,
+.hljs-built_in,
+.django .hljs-template_tag,
+.django .hljs-variable,
+.smalltalk .hljs-class,
+.django .hljs-filter .hljs-argument,
+.smalltalk .hljs-localvars,
+.smalltalk .hljs-array,
+.hljs-attr_selector,
+.hljs-pseudo,
+.hljs-addition,
+.hljs-stream,
+.hljs-envvar,
+.apache .hljs-tag,
+.apache .hljs-cbracket,
+.tex .hljs-command,
+.hljs-prompt,
+.hljs-link_label,
+.hljs-link_url {
+  color: #e6db74;
+}
+
+.hljs-comment,
+.hljs-annotation,
+.hljs-decorator,
+.hljs-pi,
+.hljs-doctype,
+.hljs-deletion,
+.hljs-shebang,
+.apache .hljs-sqbracket,
+.tex .hljs-formula {
+  color: #75715e;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata,
+.xml .php,
+.php .xml {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/obsidian.css b/libraries/highlight/styles/obsidian.css
new file mode 100644
index 0000000..3886f83
--- /dev/null
+++ b/libraries/highlight/styles/obsidian.css
@@ -0,0 +1,152 @@
+/**
+ * Obsidian style
+ * ported by Alexander Marenin (http://github.com/ioncreature)
+ */
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #282b2e;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-keyword,
+.hljs-literal,
+.hljs-change,
+.hljs-winutils,
+.hljs-flow,
+.nginx .hljs-title,
+.css .hljs-id,
+.tex .hljs-special {
+  color: #93c763;
+}
+
+.hljs-number {
+  color: #ffcd22;
+}
+
+.hljs {
+  color: #e0e2e4;
+}
+
+.css .hljs-tag,
+.css .hljs-pseudo {
+  color: #d0d2b5;
+}
+
+.hljs-attribute,
+.hljs .hljs-constant {
+  color: #668bb0;
+}
+
+.xml .hljs-attribute {
+  color: #b3b689;
+}
+
+.xml .hljs-tag .hljs-value {
+  color: #e8e2b7;
+}
+
+.hljs-code,
+.hljs-class .hljs-title,
+.hljs-header {
+  color: white;
+}
+
+.hljs-class,
+.hljs-hexcolor {
+  color: #93c763;
+}
+
+.hljs-regexp {
+  color: #d39745;
+}
+
+.hljs-at_rule,
+.hljs-at_rule .hljs-keyword {
+  color: #a082bd;
+}
+
+.hljs-doctype {
+  color: #557182;
+}
+
+.hljs-link_url,
+.hljs-tag,
+.hljs-tag .hljs-title,
+.hljs-bullet,
+.hljs-subst,
+.hljs-emphasis,
+.hljs-type,
+.hljs-preprocessor,
+.hljs-pragma,
+.ruby .hljs-class .hljs-parent,
+.hljs-built_in,
+.django .hljs-template_tag,
+.django .hljs-variable,
+.smalltalk .hljs-class,
+.django .hljs-filter .hljs-argument,
+.smalltalk .hljs-localvars,
+.smalltalk .hljs-array,
+.hljs-attr_selector,
+.hljs-pseudo,
+.hljs-addition,
+.hljs-stream,
+.hljs-envvar,
+.apache .hljs-tag,
+.apache .hljs-cbracket,
+.tex .hljs-command,
+.hljs-prompt,
+.hljs-name {
+  color: #8cbbad;
+}
+
+.hljs-string {
+  color: #ec7600;
+}
+
+.hljs-comment,
+.hljs-annotation,
+.hljs-blockquote,
+.hljs-horizontal_rule,
+.hljs-decorator,
+.hljs-pi,
+.hljs-deletion,
+.hljs-shebang,
+.apache .hljs-sqbracket,
+.tex .hljs-formula {
+  color: #818e96;
+}
+
+.hljs-keyword,
+.hljs-literal,
+.css .hljs-id,
+.hljs-doctag,
+.hljs-title,
+.hljs-header,
+.hljs-type,
+.vbscript .hljs-built_in,
+.rsl .hljs-built_in,
+.smalltalk .hljs-class,
+.diff .hljs-header,
+.hljs-chunk,
+.hljs-winutils,
+.bash .hljs-variable,
+.apache .hljs-tag,
+.tex .hljs-special,
+.hljs-request,
+.hljs-at_rule .hljs-keyword,
+.hljs-status {
+  font-weight: bold;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/paraiso.dark.css b/libraries/highlight/styles/paraiso.dark.css
new file mode 100644
index 0000000..0f7eedb
--- /dev/null
+++ b/libraries/highlight/styles/paraiso.dark.css
@@ -0,0 +1,96 @@
+/*
+    Paraso (dark)
+    Created by Jan T. Sott (http://github.com/idleberg)
+    Inspired by the art of Rubens LP (http://www.rubenslp.com.br)
+*/
+
+/* Paraso Comment */
+.hljs-comment,
+.hljs-title {
+  color: #8d8687;
+}
+
+/* Paraso Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #ef6155;
+}
+
+/* Paraso Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #f99b15;
+}
+
+/* Paraso Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #fec418;
+}
+
+/* Paraso Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #48b685;
+}
+
+/* Paraso Aqua */
+.css .hljs-hexcolor {
+  color: #5bc4bf;
+}
+
+/* Paraso Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #06b6ef;
+}
+
+/* Paraso Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #815ba4;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #2f1e2e;
+  color: #a39e9b;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/paraiso.light.css b/libraries/highlight/styles/paraiso.light.css
new file mode 100644
index 0000000..1562007
--- /dev/null
+++ b/libraries/highlight/styles/paraiso.light.css
@@ -0,0 +1,96 @@
+/*
+    Paraso (light)
+    Created by Jan T. Sott (http://github.com/idleberg)
+    Inspired by the art of Rubens LP (http://www.rubenslp.com.br)
+*/
+
+/* Paraso Comment */
+.hljs-comment,
+.hljs-title {
+  color: #776e71;
+}
+
+/* Paraso Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.hljs-name,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #ef6155;
+}
+
+/* Paraso Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #f99b15;
+}
+
+/* Paraso Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #fec418;
+}
+
+/* Paraso Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #48b685;
+}
+
+/* Paraso Aqua */
+.css .hljs-hexcolor {
+  color: #5bc4bf;
+}
+
+/* Paraso Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #06b6ef;
+}
+
+/* Paraso Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #815ba4;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #e7e9db;
+  color: #4f424c;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/pojoaque.css b/libraries/highlight/styles/pojoaque.css
new file mode 100644
index 0000000..6e7310d
--- /dev/null
+++ b/libraries/highlight/styles/pojoaque.css
@@ -0,0 +1,106 @@
+/*
+
+Pojoaque Style by Jason Tate
+http://web-cms-designs.com/ftopict-10-pojoaque-style-for-highlight-js-code-highlighter.html
+Based on Solarized Style from http://ethanschoonover.com/solarized
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  color: #dccf8f;
+  background: url(./pojoaque.jpg) repeat scroll left top #181914;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-comment,
+.diff .hljs-header,
+.hljs-doctype,
+.lisp .hljs-string {
+  color: #586e75;
+  font-style: italic;
+}
+
+.hljs-keyword,
+.css .rule .hljs-keyword,
+.hljs-winutils,
+.javascript .hljs-title,
+.method,
+.hljs-addition,
+.css .hljs-tag,
+.hljs-list .hljs-keyword,
+.nginx .hljs-title {
+  color: #b64926;
+}
+
+.hljs-number,
+.hljs-command,
+.hljs-string,
+.hljs-tag .hljs-value,
+.hljs-doctag,
+.tex .hljs-formula,
+.hljs-regexp,
+.hljs-hexcolor {
+  color: #468966;
+}
+
+.hljs-title,
+.hljs-localvars,
+.hljs-function .hljs-title,
+.hljs-chunk,
+.hljs-decorator,
+.hljs-built_in,
+.hljs-identifier,
+.hljs-name,
+.hljs-id {
+  color: #ffb03b;
+}
+
+.hljs-attribute,
+.hljs-variable,
+.lisp .hljs-body,
+.smalltalk .hljs-number,
+.hljs-constant,
+.hljs-class .hljs-title,
+.hljs-parent,
+.hljs-type {
+  color: #b58900;
+}
+
+.css .hljs-attribute {
+  color: #b89859;
+}
+
+.css .hljs-number,
+.css .hljs-hexcolor {
+  color: #dccf8f;
+}
+
+.css .hljs-class {
+  color: #d3a60c;
+}
+
+.hljs-preprocessor,
+.hljs-pragma,
+.hljs-pi,
+.hljs-shebang,
+.hljs-symbol,
+.hljs-symbol .hljs-string,
+.diff .hljs-change,
+.hljs-special,
+.hljs-attr_selector,
+.hljs-important,
+.hljs-subst,
+.hljs-cdata {
+  color: #cb4b16;
+}
+
+.hljs-deletion {
+  color: #dc322f;
+}
+
+.tex .hljs-formula {
+  background: #073642;
+}
diff --git a/libraries/highlight/styles/pojoaque.jpg b/libraries/highlight/styles/pojoaque.jpg
new file mode 100644
index 0000000..9c07d4a
--- /dev/null
+++ b/libraries/highlight/styles/pojoaque.jpg
@@ -0,0 +1,11 @@
+ JFIF   d d   Ducky     0   Adobe d     					&&&&&++++++++++		
+	
+
+$$#$$++++++++++   "  ^                                        !a1AQq                   ? aDvKg-o&0
+uf	3>\\QKo	{("QKlko|aj"w \T^*oN8o3d;c<ZpHE5pPoZ No0,dwA? in&<}*-E:v7m*H-g !Dy7?"Z7	~o \\EfQNM_7Y|
+`	
+u>U0TyP;aU) aXn$Zr*!>[rcoQ[Z{Hc2)-v [QHb ROn%H :a54wpGQ7sUKw7UCiTIN 8	Rq&/wT"[0~yLa5Jb BA[ %O i~k{B@U78F;@
+[#JODw)>B
+IqqE. RoA[D[ :)m )v|0
+[>vmJpL-a@u<
+ 	{`R;a7tv+}-D[w 7Kdin&U|wQ2gH\}Zc<\3@@=kl0]Z}-o%! )3Z@-|o1W :xU
\ No newline at end of file
diff --git a/libraries/highlight/styles/railscasts.css b/libraries/highlight/styles/railscasts.css
new file mode 100644
index 0000000..50507df
--- /dev/null
+++ b/libraries/highlight/styles/railscasts.css
@@ -0,0 +1,184 @@
+/*
+
+Railscasts-like style (c) Visoft, Inc. (Damien White)
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #232323;
+  color: #e6e1dc;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-comment,
+.hljs-shebang {
+  color: #bc9458;
+  font-style: italic;
+}
+
+.hljs-keyword,
+.ruby .hljs-function .hljs-keyword,
+.hljs-request,
+.hljs-status,
+.nginx .hljs-title,
+.method,
+.hljs-list .hljs-title {
+  color: #c26230;
+}
+
+.hljs-string,
+.hljs-number,
+.hljs-regexp,
+.hljs-tag .hljs-value,
+.hljs-cdata,
+.hljs-filter .hljs-argument,
+.hljs-attr_selector,
+.apache .hljs-cbracket,
+.hljs-date,
+.tex .hljs-command,
+.asciidoc .hljs-link_label,
+.markdown .hljs-link_label {
+  color: #a5c261;
+}
+
+.hljs-subst {
+  color: #519f50;
+}
+
+.hljs-tag,
+.hljs-tag .hljs-keyword,
+.hljs-tag .hljs-title,
+.hljs-doctype,
+.hljs-sub .hljs-identifier,
+.hljs-pi,
+.input_number {
+  color: #e8bf6a;
+}
+
+.hljs-identifier {
+  color: #d0d0ff;
+}
+
+.hljs-class .hljs-title,
+.hljs-type,
+.smalltalk .hljs-class,
+.hljs-doctag {
+  text-decoration: none;
+}
+
+.hljs-constant,
+.hljs-name {
+  color: #da4939;
+}
+
+
+.hljs-symbol,
+.hljs-built_in,
+.ruby .hljs-symbol .hljs-string,
+.ruby .hljs-symbol .hljs-identifier,
+.asciidoc .hljs-link_url,
+.markdown .hljs-link_url,
+.hljs-attribute {
+  color: #6d9cbe;
+}
+
+.asciidoc .hljs-link_url,
+.markdown .hljs-link_url {
+  text-decoration: underline;
+}
+
+
+
+.hljs-params,
+.hljs-variable,
+.clojure .hljs-attribute {
+  color: #d0d0ff;
+}
+
+.css .hljs-tag,
+.hljs-rule .hljs-property,
+.hljs-pseudo,
+.tex .hljs-special {
+  color: #cda869;
+}
+
+.css .hljs-class {
+  color: #9b703f;
+}
+
+.hljs-rule .hljs-keyword {
+  color: #c5af75;
+}
+
+.hljs-rule .hljs-value {
+  color: #cf6a4c;
+}
+
+.css .hljs-id {
+  color: #8b98ab;
+}
+
+.hljs-annotation,
+.apache .hljs-sqbracket,
+.nginx .hljs-built_in {
+  color: #9b859d;
+}
+
+.hljs-preprocessor,
+.hljs-preprocessor *,
+.hljs-pragma {
+  color: #8996a8 !important;
+}
+
+.hljs-hexcolor,
+.css .hljs-value .hljs-number {
+  color: #a5c261;
+}
+
+.hljs-title,
+.hljs-decorator,
+.css .hljs-function {
+  color: #ffc66d;
+}
+
+.diff .hljs-header,
+.hljs-chunk {
+  background-color: #2f33ab;
+  color: #e6e1dc;
+  display: inline-block;
+  width: 100%;
+}
+
+.diff .hljs-change {
+  background-color: #4a410d;
+  color: #f8f8f8;
+  display: inline-block;
+  width: 100%;
+}
+
+.hljs-addition {
+  background-color: #144212;
+  color: #e6e1dc;
+  display: inline-block;
+  width: 100%;
+}
+
+.hljs-deletion {
+  background-color: #600;
+  color: #e6e1dc;
+  display: inline-block;
+  width: 100%;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.7;
+}
diff --git a/libraries/highlight/styles/rainbow.css b/libraries/highlight/styles/rainbow.css
new file mode 100644
index 0000000..ac536a7
--- /dev/null
+++ b/libraries/highlight/styles/rainbow.css
@@ -0,0 +1,107 @@
+/*
+
+Style with support for rainbow parens
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #474949;
+  color: #d1d9e1;
+  -webkit-text-size-adjust: none;
+}
+
+
+.hljs-body,
+.hljs-collection {
+   color: #d1d9e1;
+}
+
+.hljs-comment,
+.diff .hljs-header,
+.hljs-doctype,
+.lisp .hljs-string {
+  color: #969896;
+  font-style: italic;
+}
+
+.hljs-keyword,
+.clojure .hljs-attribute,
+.hljs-winutils,
+.javascript .hljs-title,
+.hljs-addition,
+.css .hljs-tag {
+  color: #cc99cc;
+}
+
+.hljs-number { color: #f99157; }
+
+.hljs-command,
+.hljs-string,
+.hljs-tag .hljs-value,
+.hljs-doctag,
+.tex .hljs-formula,
+.hljs-regexp,
+.hljs-hexcolor {
+  color: #8abeb7;
+}
+
+.hljs-title,
+.hljs-localvars,
+.hljs-function .hljs-title,
+.hljs-chunk,
+.hljs-decorator,
+.hljs-built_in,
+.hljs-identifier {
+  color: #b5bd68;
+}
+
+.hljs-class .hljs-keyword {
+  color: #f2777a;
+}
+
+.hljs-variable,
+.smalltalk .hljs-number,
+.hljs-constant,
+.hljs-class .hljs-title,
+.hljs-parent,
+.haskell .hljs-label,
+.hljs-id,
+.hljs-name {
+   color: #ffcc66;
+}
+
+.hljs-tag .hljs-title,
+.hljs-rule .hljs-property,
+.django .hljs-tag .hljs-keyword {
+  font-weight: bold;
+}
+
+.hljs-attribute {
+  color: #81a2be;
+}
+
+.hljs-preprocessor,
+.hljs-pragma,
+.hljs-pi,
+.hljs-shebang,
+.hljs-symbol,
+.hljs-symbol .hljs-string,
+.diff .hljs-change,
+.hljs-special,
+.hljs-attr_selector,
+.hljs-important,
+.hljs-subst,
+.hljs-cdata {
+  color: #f99157;
+}
+
+.hljs-deletion {
+  color: #dc322f;
+}
+
+.tex .hljs-formula {
+  background: #eee8d5;
+}
diff --git a/libraries/highlight/styles/school_book.css b/libraries/highlight/styles/school_book.css
new file mode 100644
index 0000000..49371d9
--- /dev/null
+++ b/libraries/highlight/styles/school_book.css
@@ -0,0 +1,111 @@
+/*
+
+School Book style from goldblog.com.ua (c) Zaripov Yura <yur4ik7@ukr.net>
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 15px 0.5em 0.5em 30px;
+  font-size: 11px !important;
+  line-height:16px !important;
+  -webkit-text-size-adjust: none;
+}
+
+pre{
+  background:#f6f6ae url(./school_book.png);
+  border-top: solid 2px #d2e8b9;
+  border-bottom: solid 1px #d2e8b9;
+}
+
+.hljs-keyword,
+.hljs-literal,
+.hljs-change,
+.hljs-winutils,
+.hljs-flow,
+.nginx .hljs-title,
+.tex .hljs-special {
+  color:#005599;
+  font-weight:bold;
+}
+
+.hljs,
+.hljs-subst,
+.hljs-tag .hljs-keyword {
+  color: #3e5915;
+}
+
+.hljs-string,
+.hljs-title,
+.hljs-type,
+.hljs-tag .hljs-value,
+.css .hljs-rule .hljs-value,
+.hljs-preprocessor,
+.hljs-pragma,
+.ruby .hljs-symbol,
+.ruby .hljs-symbol .hljs-string,
+.ruby .hljs-class .hljs-parent,
+.hljs-built_in,
+.django .hljs-template_tag,
+.django .hljs-variable,
+.smalltalk .hljs-class,
+.ruby .hljs-string,
+.django .hljs-filter .hljs-argument,
+.smalltalk .hljs-localvars,
+.smalltalk .hljs-array,
+.hljs-attr_selector,
+.hljs-pseudo,
+.hljs-addition,
+.hljs-stream,
+.hljs-envvar,
+.apache .hljs-tag,
+.apache .hljs-cbracket,
+.nginx .hljs-built_in,
+.tex .hljs-command,
+.coffeescript .hljs-attribute,
+.hljs-name {
+  color: #2c009f;
+}
+
+.hljs-comment,
+.hljs-annotation,
+.hljs-decorator,
+.hljs-pi,
+.hljs-doctype,
+.hljs-deletion,
+.hljs-shebang,
+.apache .hljs-sqbracket {
+  color: #e60415;
+}
+
+.hljs-keyword,
+.hljs-literal,
+.css .hljs-id,
+.hljs-doctag,
+.hljs-title,
+.hljs-type,
+.vbscript .hljs-built_in,
+.rsl .hljs-built_in,
+.smalltalk .hljs-class,
+.xml .hljs-tag .hljs-title,
+.diff .hljs-header,
+.hljs-chunk,
+.hljs-winutils,
+.bash .hljs-variable,
+.apache .hljs-tag,
+.tex .hljs-command,
+.hljs-request,
+.hljs-status {
+  font-weight: bold;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/school_book.png b/libraries/highlight/styles/school_book.png
new file mode 100644
index 0000000..83958c2
--- /dev/null
+++ b/libraries/highlight/styles/school_book.png
@@ -0,0 +1,3 @@
+PNG
+
+   IHDR        Nl6   gAMA  7   tEXtSoftware Adobe ImageReadyqe<  xIDATxN0`EAyh^@H%$jq%GS_snoN9m}	   .6jcfe  -    m     @   m     @>   /,   a     @   ad  -l  	gk>nWa&*^qMc{PAm-eX]s~6J}j=U9u)\Q1	KM5Z-K3!('SafF-W5]B5/x\N] Gjdb    IENDB`
\ No newline at end of file
diff --git a/libraries/highlight/styles/solarized_dark.css b/libraries/highlight/styles/solarized_dark.css
new file mode 100644
index 0000000..f1bf4ec
--- /dev/null
+++ b/libraries/highlight/styles/solarized_dark.css
@@ -0,0 +1,107 @@
+/*
+
+Orginal Style from ethanschoonover.com/solarized (c) Jeremy Hull <sourdrums@gmail.com>
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #002b36;
+  color: #839496;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-comment,
+.diff .hljs-header,
+.hljs-doctype,
+.hljs-pi,
+.lisp .hljs-string {
+  color: #586e75;
+}
+
+/* Solarized Green */
+.hljs-keyword,
+.hljs-winutils,
+.method,
+.hljs-addition,
+.css .hljs-tag,
+.hljs-request,
+.hljs-status,
+.nginx .hljs-title {
+  color: #859900;
+}
+
+/* Solarized Cyan */
+.hljs-number,
+.hljs-command,
+.hljs-string,
+.hljs-tag .hljs-value,
+.hljs-rule .hljs-value,
+.hljs-doctag,
+.tex .hljs-formula,
+.hljs-regexp,
+.hljs-hexcolor,
+.hljs-link_url {
+  color: #2aa198;
+}
+
+/* Solarized Blue */
+.hljs-title,
+.hljs-localvars,
+.hljs-chunk,
+.hljs-decorator,
+.hljs-built_in,
+.hljs-identifier,
+.vhdl .hljs-literal,
+.hljs-id,
+.css .hljs-function,
+.hljs-name {
+  color: #268bd2;
+}
+
+/* Solarized Yellow */
+.hljs-attribute,
+.hljs-variable,
+.lisp .hljs-body,
+.smalltalk .hljs-number,
+.hljs-constant,
+.hljs-class .hljs-title,
+.hljs-parent,
+.hljs-type,
+.hljs-link_reference {
+  color: #b58900;
+}
+
+/* Solarized Orange */
+.hljs-preprocessor,
+.hljs-preprocessor .hljs-keyword,
+.hljs-pragma,
+.hljs-shebang,
+.hljs-symbol,
+.hljs-symbol .hljs-string,
+.diff .hljs-change,
+.hljs-special,
+.hljs-attr_selector,
+.hljs-subst,
+.hljs-cdata,
+.css .hljs-pseudo,
+.hljs-header {
+  color: #cb4b16;
+}
+
+/* Solarized Red */
+.hljs-deletion,
+.hljs-important {
+  color: #dc322f;
+}
+
+/* Solarized Violet */
+.hljs-link_label {
+  color: #6c71c4;
+}
+
+.tex .hljs-formula {
+  background: #073642;
+}
diff --git a/libraries/highlight/styles/solarized_light.css b/libraries/highlight/styles/solarized_light.css
new file mode 100644
index 0000000..04adb21
--- /dev/null
+++ b/libraries/highlight/styles/solarized_light.css
@@ -0,0 +1,107 @@
+/*
+
+Orginal Style from ethanschoonover.com/solarized (c) Jeremy Hull <sourdrums@gmail.com>
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #fdf6e3;
+  color: #657b83;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-comment,
+.diff .hljs-header,
+.hljs-doctype,
+.hljs-pi,
+.lisp .hljs-string {
+  color: #93a1a1;
+}
+
+/* Solarized Green */
+.hljs-keyword,
+.hljs-winutils,
+.method,
+.hljs-addition,
+.css .hljs-tag,
+.hljs-request,
+.hljs-status,
+.nginx .hljs-title {
+  color: #859900;
+}
+
+/* Solarized Cyan */
+.hljs-number,
+.hljs-command,
+.hljs-string,
+.hljs-tag .hljs-value,
+.hljs-rule .hljs-value,
+.hljs-doctag,
+.tex .hljs-formula,
+.hljs-regexp,
+.hljs-hexcolor,
+.hljs-link_url {
+  color: #2aa198;
+}
+
+/* Solarized Blue */
+.hljs-title,
+.hljs-localvars,
+.hljs-chunk,
+.hljs-decorator,
+.hljs-built_in,
+.hljs-identifier,
+.vhdl .hljs-literal,
+.hljs-id,
+.css .hljs-function,
+.hljs-name {
+  color: #268bd2;
+}
+
+/* Solarized Yellow */
+.hljs-attribute,
+.hljs-variable,
+.lisp .hljs-body,
+.smalltalk .hljs-number,
+.hljs-constant,
+.hljs-class .hljs-title,
+.hljs-parent,
+.hljs-type,
+.hljs-link_reference {
+  color: #b58900;
+}
+
+/* Solarized Orange */
+.hljs-preprocessor,
+.hljs-preprocessor .hljs-keyword,
+.hljs-pragma,
+.hljs-shebang,
+.hljs-symbol,
+.hljs-symbol .hljs-string,
+.diff .hljs-change,
+.hljs-special,
+.hljs-attr_selector,
+.hljs-subst,
+.hljs-cdata,
+.css .hljs-pseudo,
+.hljs-header {
+  color: #cb4b16;
+}
+
+/* Solarized Red */
+.hljs-deletion,
+.hljs-important {
+  color: #dc322f;
+}
+
+/* Solarized Violet */
+.hljs-link_label {
+  color: #6c71c4;
+}
+
+.tex .hljs-formula {
+  background: #eee8d5;
+}
diff --git a/libraries/highlight/styles/sunburst.css b/libraries/highlight/styles/sunburst.css
new file mode 100644
index 0000000..4f468f1
--- /dev/null
+++ b/libraries/highlight/styles/sunburst.css
@@ -0,0 +1,161 @@
+/*
+
+Sunburst-like style (c) Vasily Polovnyov <vast@whiteants.net>
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #000;
+  color: #f8f8f8;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-comment {
+  color: #aeaeae;
+  font-style: italic;
+}
+
+.hljs-keyword,
+.ruby .hljs-function .hljs-keyword,
+.hljs-request,
+.hljs-status,
+.nginx .hljs-title {
+  color: #e28964;
+}
+
+.hljs-function .hljs-keyword,
+.hljs-sub .hljs-keyword,
+.method,
+.hljs-list .hljs-title {
+  color: #99cf50;
+}
+
+.hljs-string,
+.hljs-tag .hljs-value,
+.hljs-cdata,
+.hljs-filter .hljs-argument,
+.hljs-attr_selector,
+.apache .hljs-cbracket,
+.hljs-date,
+.tex .hljs-command,
+.coffeescript .hljs-attribute,
+.hljs-name {
+  color: #65b042;
+}
+
+.hljs-subst {
+  color: #daefa3;
+}
+
+.hljs-regexp {
+  color: #e9c062;
+}
+
+.hljs-title,
+.hljs-sub .hljs-identifier,
+.hljs-pi,
+.hljs-tag,
+.hljs-tag .hljs-keyword,
+.hljs-decorator,
+.hljs-shebang,
+.hljs-prompt {
+  color: #89bdff;
+}
+
+.hljs-class .hljs-title,
+.hljs-type,
+.smalltalk .hljs-class,
+.hljs-doctag {
+  text-decoration: underline;
+}
+
+.hljs-symbol,
+.ruby .hljs-symbol .hljs-string,
+.hljs-number {
+  color: #3387cc;
+}
+
+.hljs-params,
+.hljs-variable,
+.clojure .hljs-attribute {
+  color: #3e87e3;
+}
+
+.css .hljs-tag,
+.hljs-rule .hljs-property,
+.hljs-pseudo,
+.tex .hljs-special {
+  color: #cda869;
+}
+
+.css .hljs-class {
+  color: #9b703f;
+}
+
+.hljs-rule .hljs-keyword {
+  color: #c5af75;
+}
+
+.hljs-rule .hljs-value {
+  color: #cf6a4c;
+}
+
+.css .hljs-id {
+  color: #8b98ab;
+}
+
+.hljs-annotation,
+.apache .hljs-sqbracket,
+.nginx .hljs-built_in {
+  color: #9b859d;
+}
+
+.hljs-preprocessor,
+.hljs-pragma {
+  color: #8996a8;
+}
+
+.hljs-hexcolor,
+.css .hljs-value .hljs-number {
+  color: #dd7b3b;
+}
+
+.css .hljs-function {
+  color: #dad085;
+}
+
+.diff .hljs-header,
+.hljs-chunk,
+.tex .hljs-formula {
+  background-color: #0e2231;
+  color: #f8f8f8;
+  font-style: italic;
+}
+
+.diff .hljs-change {
+  background-color: #4a410d;
+  color: #f8f8f8;
+}
+
+.hljs-addition {
+  background-color: #253b22;
+  color: #f8f8f8;
+}
+
+.hljs-deletion {
+  background-color: #420e09;
+  color: #f8f8f8;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/tomorrow-night-blue.css b/libraries/highlight/styles/tomorrow-night-blue.css
new file mode 100644
index 0000000..96e5227
--- /dev/null
+++ b/libraries/highlight/styles/tomorrow-night-blue.css
@@ -0,0 +1,96 @@
+/* Tomorrow Night Blue Theme */
+/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
+/* Original theme - https://github.com/chriskempson/tomorrow-theme */
+/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
+
+/* Tomorrow Comment */
+.hljs-comment {
+  color: #7285b7;
+}
+
+/* Tomorrow Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #ff9da4;
+}
+
+/* Tomorrow Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-pragma,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #ffc58f;
+}
+
+/* Tomorrow Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #ffeead;
+}
+
+/* Tomorrow Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.hljs-name,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #d1f1a9;
+}
+
+/* Tomorrow Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #99ffff;
+}
+
+/* Tomorrow Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #bbdaff;
+}
+
+/* Tomorrow Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #ebbbff;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #002451;
+  color: white;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/tomorrow-night-bright.css b/libraries/highlight/styles/tomorrow-night-bright.css
new file mode 100644
index 0000000..00604fb
--- /dev/null
+++ b/libraries/highlight/styles/tomorrow-night-bright.css
@@ -0,0 +1,95 @@
+/* Tomorrow Night Bright Theme */
+/* Original theme - https://github.com/chriskempson/tomorrow-theme */
+/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
+
+/* Tomorrow Comment */
+.hljs-comment {
+  color: #969896;
+}
+
+/* Tomorrow Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #d54e53;
+}
+
+/* Tomorrow Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-pragma,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #e78c45;
+}
+
+/* Tomorrow Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #e7c547;
+}
+
+/* Tomorrow Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.hljs-name,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #b9ca4a;
+}
+
+/* Tomorrow Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #70c0b1;
+}
+
+/* Tomorrow Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #7aa6da;
+}
+
+/* Tomorrow Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #c397d8;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: black;
+  color: #eaeaea;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/tomorrow-night-eighties.css b/libraries/highlight/styles/tomorrow-night-eighties.css
new file mode 100644
index 0000000..1f2791f
--- /dev/null
+++ b/libraries/highlight/styles/tomorrow-night-eighties.css
@@ -0,0 +1,95 @@
+/* Tomorrow Night Eighties Theme */
+/* Original theme - https://github.com/chriskempson/tomorrow-theme */
+/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
+
+/* Tomorrow Comment */
+.hljs-comment {
+  color: #999999;
+}
+
+/* Tomorrow Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #f2777a;
+}
+
+/* Tomorrow Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-pragma,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #f99157;
+}
+
+/* Tomorrow Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #ffcc66;
+}
+
+/* Tomorrow Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.hljs-name,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #99cc99;
+}
+
+/* Tomorrow Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #66cccc;
+}
+
+/* Tomorrow Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #6699cc;
+}
+
+/* Tomorrow Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #cc99cc;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #2d2d2d;
+  color: #cccccc;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/tomorrow-night.css b/libraries/highlight/styles/tomorrow-night.css
new file mode 100644
index 0000000..9788e08
--- /dev/null
+++ b/libraries/highlight/styles/tomorrow-night.css
@@ -0,0 +1,96 @@
+/* Tomorrow Night Theme */
+/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
+/* Original theme - https://github.com/chriskempson/tomorrow-theme */
+/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
+
+/* Tomorrow Comment */
+.hljs-comment {
+  color: #969896;
+}
+
+/* Tomorrow Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #cc6666;
+}
+
+/* Tomorrow Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-pragma,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #de935f;
+}
+
+/* Tomorrow Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #f0c674;
+}
+
+/* Tomorrow Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.hljs-name,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #b5bd68;
+}
+
+/* Tomorrow Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #8abeb7;
+}
+
+/* Tomorrow Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #81a2be;
+}
+
+/* Tomorrow Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #b294bb;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: #1d1f21;
+  color: #c5c8c6;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/tomorrow.css b/libraries/highlight/styles/tomorrow.css
new file mode 100644
index 0000000..fb2e161
--- /dev/null
+++ b/libraries/highlight/styles/tomorrow.css
@@ -0,0 +1,93 @@
+/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
+
+/* Tomorrow Comment */
+.hljs-comment {
+  color: #8e908c;
+}
+
+/* Tomorrow Red */
+.hljs-variable,
+.hljs-attribute,
+.hljs-tag,
+.hljs-regexp,
+.ruby .hljs-constant,
+.xml .hljs-tag .hljs-title,
+.xml .hljs-pi,
+.xml .hljs-doctype,
+.html .hljs-doctype,
+.css .hljs-id,
+.css .hljs-class,
+.css .hljs-pseudo {
+  color: #c82829;
+}
+
+/* Tomorrow Orange */
+.hljs-number,
+.hljs-preprocessor,
+.hljs-pragma,
+.hljs-built_in,
+.hljs-literal,
+.hljs-params,
+.hljs-constant {
+  color: #f5871f;
+}
+
+/* Tomorrow Yellow */
+.ruby .hljs-class .hljs-title,
+.css .hljs-rule .hljs-attribute {
+  color: #eab700;
+}
+
+/* Tomorrow Green */
+.hljs-string,
+.hljs-value,
+.hljs-inheritance,
+.hljs-header,
+.hljs-name,
+.ruby .hljs-symbol,
+.xml .hljs-cdata {
+  color: #718c00;
+}
+
+/* Tomorrow Aqua */
+.hljs-title,
+.css .hljs-hexcolor {
+  color: #3e999f;
+}
+
+/* Tomorrow Blue */
+.hljs-function,
+.python .hljs-decorator,
+.python .hljs-title,
+.ruby .hljs-function .hljs-title,
+.ruby .hljs-title .hljs-keyword,
+.perl .hljs-sub,
+.javascript .hljs-title,
+.coffeescript .hljs-title {
+  color: #4271ae;
+}
+
+/* Tomorrow Purple */
+.hljs-keyword,
+.javascript .hljs-function {
+  color: #8959a8;
+}
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  background: white;
+  color: #4d4d4c;
+  padding: 0.5em;
+  -webkit-text-size-adjust: none;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
diff --git a/libraries/highlight/styles/vs.css b/libraries/highlight/styles/vs.css
new file mode 100644
index 0000000..25d4308
--- /dev/null
+++ b/libraries/highlight/styles/vs.css
@@ -0,0 +1,92 @@
+/*
+
+Visual Studio-like style based on original C# coloring by Jason Diamond <jason@diamond.name>
+
+*/
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: white;
+  color: black;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-comment,
+.hljs-annotation,
+.diff .hljs-header,
+.hljs-chunk,
+.apache .hljs-cbracket {
+  color: #008000;
+}
+
+.hljs-keyword,
+.hljs-id,
+.hljs-built_in,
+.smalltalk .hljs-class,
+.hljs-winutils,
+.bash .hljs-variable,
+.tex .hljs-command,
+.hljs-request,
+.hljs-status,
+.nginx .hljs-title,
+.xml .hljs-tag,
+.xml .hljs-tag .hljs-value {
+  color: #00f;
+}
+
+.hljs-string,
+.hljs-title,
+.hljs-parent,
+.hljs-tag .hljs-value,
+.hljs-rule .hljs-value,
+.ruby .hljs-symbol,
+.ruby .hljs-symbol .hljs-string,
+.hljs-template_tag,
+.django .hljs-variable,
+.hljs-addition,
+.hljs-flow,
+.hljs-stream,
+.apache .hljs-tag,
+.hljs-date,
+.tex .hljs-formula,
+.coffeescript .hljs-attribute,
+.hljs-name {
+  color: #a31515;
+}
+
+.ruby .hljs-string,
+.hljs-decorator,
+.hljs-filter .hljs-argument,
+.hljs-localvars,
+.hljs-array,
+.hljs-attr_selector,
+.hljs-pseudo,
+.hljs-pi,
+.hljs-doctype,
+.hljs-deletion,
+.hljs-envvar,
+.hljs-shebang,
+.hljs-preprocessor,
+.hljs-pragma,
+.userType,
+.apache .hljs-sqbracket,
+.nginx .hljs-built_in,
+.tex .hljs-special,
+.hljs-prompt {
+  color: #2b91af;
+}
+
+.hljs-doctag,
+.hljs-xmlDocTag {
+  color: #808080;
+}
+
+.hljs-type,
+.hljs-typename { font-weight: bold; }
+
+.vhdl .hljs-string { color: #666666; }
+.vhdl .hljs-literal { color: #a31515; }
+.vhdl .hljs-attribute { color: #00b0e8; }
+
+.xml .hljs-attribute { color: #f00; }
diff --git a/libraries/highlight/styles/xcode.css b/libraries/highlight/styles/xcode.css
new file mode 100644
index 0000000..21bf1ff
--- /dev/null
+++ b/libraries/highlight/styles/xcode.css
@@ -0,0 +1,154 @@
+/*
+
+XCode style (c) Angel Garcia <angelgarcia.mail@gmail.com>
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #fff;
+  color: black;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-comment {
+  color: #006a00;
+}
+
+.hljs-keyword,
+.hljs-literal,
+.nginx .hljs-title {
+  color: #aa0d91;
+}
+.method,
+.hljs-list .hljs-title,
+.hljs-tag .hljs-title,
+.setting .hljs-value,
+.hljs-winutils,
+.tex .hljs-command,
+.http .hljs-title,
+.hljs-request,
+.hljs-status,
+.hljs-name {
+  color: #008;
+}
+
+.hljs-envvar,
+.tex .hljs-special {
+  color: #660;
+}
+
+.hljs-string {
+  color: #c41a16;
+}
+.hljs-tag .hljs-value,
+.hljs-cdata,
+.hljs-filter .hljs-argument,
+.hljs-attr_selector,
+.apache .hljs-cbracket,
+.hljs-date,
+.hljs-regexp {
+  color: #080;
+}
+
+.hljs-sub .hljs-identifier,
+.hljs-pi,
+.hljs-tag,
+.hljs-tag .hljs-keyword,
+.hljs-decorator,
+.ini .hljs-title,
+.hljs-shebang,
+.hljs-prompt,
+.hljs-hexcolor,
+.hljs-rule .hljs-value,
+.hljs-symbol,
+.hljs-symbol .hljs-string,
+.hljs-number,
+.css .hljs-function,
+.hljs-function .hljs-title,
+.coffeescript .hljs-attribute {
+  color: #1c00cf;
+}
+
+.hljs-class .hljs-title,
+.smalltalk .hljs-class,
+.hljs-type,
+.hljs-typename,
+.hljs-tag .hljs-attribute,
+.hljs-doctype,
+.hljs-class .hljs-id,
+.hljs-built_in,
+.setting,
+.hljs-params,
+.clojure .hljs-attribute {
+  color: #5c2699;
+}
+
+.hljs-variable {
+ color: #3f6e74;
+}
+.css .hljs-tag,
+.hljs-rule .hljs-property,
+.hljs-pseudo,
+.hljs-subst {
+  color: #000;
+}
+
+.css .hljs-class,
+.css .hljs-id {
+  color: #9b703f;
+}
+
+.hljs-value .hljs-important {
+  color: #ff7700;
+  font-weight: bold;
+}
+
+.hljs-rule .hljs-keyword {
+  color: #c5af75;
+}
+
+.hljs-annotation,
+.apache .hljs-sqbracket,
+.nginx .hljs-built_in {
+  color: #9b859d;
+}
+
+.hljs-preprocessor,
+.hljs-preprocessor *,
+.hljs-pragma {
+  color: #643820;
+}
+
+.tex .hljs-formula {
+  background-color: #eee;
+  font-style: italic;
+}
+
+.diff .hljs-header,
+.hljs-chunk {
+  color: #808080;
+  font-weight: bold;
+}
+
+.diff .hljs-change {
+  background-color: #bccff9;
+}
+
+.hljs-addition {
+  background-color: #baeeba;
+}
+
+.hljs-deletion {
+  background-color: #ffc8bd;
+}
+
+.hljs-comment .hljs-doctag {
+  font-weight: bold;
+}
+
+.method .hljs-id {
+  color: #000;
+}
diff --git a/libraries/highlight/styles/zenburn.css b/libraries/highlight/styles/zenburn.css
new file mode 100644
index 0000000..c7f5bc5
--- /dev/null
+++ b/libraries/highlight/styles/zenburn.css
@@ -0,0 +1,118 @@
+/*
+
+Zenburn style from voldmar.ru (c) Vladimir Epifanov <voldmar@voldmar.ru>
+based on dark.css by Ivan Sagalaev
+
+*/
+
+.hljs {
+  display: block;
+  overflow-x: auto;
+  padding: 0.5em;
+  background: #3f3f3f;
+  color: #dcdcdc;
+  -webkit-text-size-adjust: none;
+}
+
+.hljs-keyword,
+.hljs-tag,
+.css .hljs-class,
+.css .hljs-id,
+.lisp .hljs-title,
+.nginx .hljs-title,
+.hljs-request,
+.hljs-status,
+.clojure .hljs-attribute {
+  color: #e3ceab;
+}
+
+.django .hljs-template_tag,
+.django .hljs-variable,
+.django .hljs-filter .hljs-argument {
+  color: #dcdcdc;
+}
+
+.hljs-number,
+.hljs-date {
+  color: #8cd0d3;
+}
+
+.dos .hljs-envvar,
+.dos .hljs-stream,
+.hljs-variable,
+.apache .hljs-sqbracket,
+.hljs-name {
+  color: #efdcbc;
+}
+
+.dos .hljs-flow,
+.diff .hljs-change,
+.python .exception,
+.python .hljs-built_in,
+.hljs-literal,
+.tex .hljs-special {
+  color: #efefaf;
+}
+
+.diff .hljs-chunk,
+.hljs-subst {
+  color: #8f8f8f;
+}
+
+.dos .hljs-keyword,
+.hljs-decorator,
+.hljs-title,
+.hljs-type,
+.diff .hljs-header,
+.ruby .hljs-class .hljs-parent,
+.apache .hljs-tag,
+.nginx .hljs-built_in,
+.tex .hljs-command,
+.hljs-prompt {
+  color: #efef8f;
+}
+
+.dos .hljs-winutils,
+.ruby .hljs-symbol,
+.ruby .hljs-symbol .hljs-string,
+.ruby .hljs-string {
+  color: #dca3a3;
+}
+
+.diff .hljs-deletion,
+.hljs-string,
+.hljs-tag .hljs-value,
+.hljs-preprocessor,
+.hljs-pragma,
+.hljs-built_in,
+.smalltalk .hljs-class,
+.smalltalk .hljs-localvars,
+.smalltalk .hljs-array,
+.css .hljs-rule .hljs-value,
+.hljs-attr_selector,
+.hljs-pseudo,
+.apache .hljs-cbracket,
+.tex .hljs-formula,
+.coffeescript .hljs-attribute {
+  color: #cc9393;
+}
+
+.hljs-shebang,
+.diff .hljs-addition,
+.hljs-comment,
+.hljs-annotation,
+.hljs-pi,
+.hljs-doctype {
+  color: #7f9f7f;
+}
+
+.coffeescript .javascript,
+.javascript .xml,
+.tex .hljs-formula,
+.xml .javascript,
+.xml .vbscript,
+.xml .css,
+.xml .hljs-cdata {
+  opacity: 0.5;
+}
+
diff --git a/modules/devel/LICENSE.txt b/modules/devel/LICENSE.txt
new file mode 100644
index 0000000..d159169
--- /dev/null
+++ b/modules/devel/LICENSE.txt
@@ -0,0 +1,339 @@
+                    GNU GENERAL PUBLIC LICENSE
+                       Version 2, June 1991
+
+ Copyright (C) 1989, 1991 Free Software Foundation, Inc.,
+ 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
+ Everyone is permitted to copy and distribute verbatim copies
+ of this license document, but changing it is not allowed.
+
+                            Preamble
+
+  The licenses for most software are designed to take away your
+freedom to share and change it.  By contrast, the GNU General Public
+License is intended to guarantee your freedom to share and change free
+software--to make sure the software is free for all its users.  This
+General Public License applies to most of the Free Software
+Foundation's software and to any other program whose authors commit to
+using it.  (Some other Free Software Foundation software is covered by
+the GNU Lesser General Public License instead.)  You can apply it to
+your programs, too.
+
+  When we speak of free software, we are referring to freedom, not
+price.  Our General Public Licenses are designed to make sure that you
+have the freedom to distribute copies of free software (and charge for
+this service if you wish), that you receive source code or can get it
+if you want it, that you can change the software or use pieces of it
+in new free programs; and that you know you can do these things.
+
+  To protect your rights, we need to make restrictions that forbid
+anyone to deny you these rights or to ask you to surrender the rights.
+These restrictions translate to certain responsibilities for you if you
+distribute copies of the software, or if you modify it.
+
+  For example, if you distribute copies of such a program, whether
+gratis or for a fee, you must give the recipients all the rights that
+you have.  You must make sure that they, too, receive or can get the
+source code.  And you must show them these terms so they know their
+rights.
+
+  We protect your rights with two steps: (1) copyright the software, and
+(2) offer you this license which gives you legal permission to copy,
+distribute and/or modify the software.
+
+  Also, for each author's protection and ours, we want to make certain
+that everyone understands that there is no warranty for this free
+software.  If the software is modified by someone else and passed on, we
+want its recipients to know that what they have is not the original, so
+that any problems introduced by others will not reflect on the original
+authors' reputations.
+
+  Finally, any free program is threatened constantly by software
+patents.  We wish to avoid the danger that redistributors of a free
+program will individually obtain patent licenses, in effect making the
+program proprietary.  To prevent this, we have made it clear that any
+patent must be licensed for everyone's free use or not licensed at all.
+
+  The precise terms and conditions for copying, distribution and
+modification follow.
+
+                    GNU GENERAL PUBLIC LICENSE
+   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
+
+  0. This License applies to any program or other work which contains
+a notice placed by the copyright holder saying it may be distributed
+under the terms of this General Public License.  The "Program", below,
+refers to any such program or work, and a "work based on the Program"
+means either the Program or any derivative work under copyright law:
+that is to say, a work containing the Program or a portion of it,
+either verbatim or with modifications and/or translated into another
+language.  (Hereinafter, translation is included without limitation in
+the term "modification".)  Each licensee is addressed as "you".
+
+Activities other than copying, distribution and modification are not
+covered by this License; they are outside its scope.  The act of
+running the Program is not restricted, and the output from the Program
+is covered only if its contents constitute a work based on the
+Program (independent of having been made by running the Program).
+Whether that is true depends on what the Program does.
+
+  1. You may copy and distribute verbatim copies of the Program's
+source code as you receive it, in any medium, provided that you
+conspicuously and appropriately publish on each copy an appropriate
+copyright notice and disclaimer of warranty; keep intact all the
+notices that refer to this License and to the absence of any warranty;
+and give any other recipients of the Program a copy of this License
+along with the Program.
+
+You may charge a fee for the physical act of transferring a copy, and
+you may at your option offer warranty protection in exchange for a fee.
+
+  2. You may modify your copy or copies of the Program or any portion
+of it, thus forming a work based on the Program, and copy and
+distribute such modifications or work under the terms of Section 1
+above, provided that you also meet all of these conditions:
+
+    a) You must cause the modified files to carry prominent notices
+    stating that you changed the files and the date of any change.
+
+    b) You must cause any work that you distribute or publish, that in
+    whole or in part contains or is derived from the Program or any
+    part thereof, to be licensed as a whole at no charge to all third
+    parties under the terms of this License.
+
+    c) If the modified program normally reads commands interactively
+    when run, you must cause it, when started running for such
+    interactive use in the most ordinary way, to print or display an
+    announcement including an appropriate copyright notice and a
+    notice that there is no warranty (or else, saying that you provide
+    a warranty) and that users may redistribute the program under
+    these conditions, and telling the user how to view a copy of this
+    License.  (Exception: if the Program itself is interactive but
+    does not normally print such an announcement, your work based on
+    the Program is not required to print an announcement.)
+
+These requirements apply to the modified work as a whole.  If
+identifiable sections of that work are not derived from the Program,
+and can be reasonably considered independent and separate works in
+themselves, then this License, and its terms, do not apply to those
+sections when you distribute them as separate works.  But when you
+distribute the same sections as part of a whole which is a work based
+on the Program, the distribution of the whole must be on the terms of
+this License, whose permissions for other licensees extend to the
+entire whole, and thus to each and every part regardless of who wrote it.
+
+Thus, it is not the intent of this section to claim rights or contest
+your rights to work written entirely by you; rather, the intent is to
+exercise the right to control the distribution of derivative or
+collective works based on the Program.
+
+In addition, mere aggregation of another work not based on the Program
+with the Program (or with a work based on the Program) on a volume of
+a storage or distribution medium does not bring the other work under
+the scope of this License.
+
+  3. You may copy and distribute the Program (or a work based on it,
+under Section 2) in object code or executable form under the terms of
+Sections 1 and 2 above provided that you also do one of the following:
+
+    a) Accompany it with the complete corresponding machine-readable
+    source code, which must be distributed under the terms of Sections
+    1 and 2 above on a medium customarily used for software interchange; or,
+
+    b) Accompany it with a written offer, valid for at least three
+    years, to give any third party, for a charge no more than your
+    cost of physically performing source distribution, a complete
+    machine-readable copy of the corresponding source code, to be
+    distributed under the terms of Sections 1 and 2 above on a medium
+    customarily used for software interchange; or,
+
+    c) Accompany it with the information you received as to the offer
+    to distribute corresponding source code.  (This alternative is
+    allowed only for noncommercial distribution and only if you
+    received the program in object code or executable form with such
+    an offer, in accord with Subsection b above.)
+
+The source code for a work means the preferred form of the work for
+making modifications to it.  For an executable work, complete source
+code means all the source code for all modules it contains, plus any
+associated interface definition files, plus the scripts used to
+control compilation and installation of the executable.  However, as a
+special exception, the source code distributed need not include
+anything that is normally distributed (in either source or binary
+form) with the major components (compiler, kernel, and so on) of the
+operating system on which the executable runs, unless that component
+itself accompanies the executable.
+
+If distribution of executable or object code is made by offering
+access to copy from a designated place, then offering equivalent
+access to copy the source code from the same place counts as
+distribution of the source code, even though third parties are not
+compelled to copy the source along with the object code.
+
+  4. You may not copy, modify, sublicense, or distribute the Program
+except as expressly provided under this License.  Any attempt
+otherwise to copy, modify, sublicense or distribute the Program is
+void, and will automatically terminate your rights under this License.
+However, parties who have received copies, or rights, from you under
+this License will not have their licenses terminated so long as such
+parties remain in full compliance.
+
+  5. You are not required to accept this License, since you have not
+signed it.  However, nothing else grants you permission to modify or
+distribute the Program or its derivative works.  These actions are
+prohibited by law if you do not accept this License.  Therefore, by
+modifying or distributing the Program (or any work based on the
+Program), you indicate your acceptance of this License to do so, and
+all its terms and conditions for copying, distributing or modifying
+the Program or works based on it.
+
+  6. Each time you redistribute the Program (or any work based on the
+Program), the recipient automatically receives a license from the
+original licensor to copy, distribute or modify the Program subject to
+these terms and conditions.  You may not impose any further
+restrictions on the recipients' exercise of the rights granted herein.
+You are not responsible for enforcing compliance by third parties to
+this License.
+
+  7. If, as a consequence of a court judgment or allegation of patent
+infringement or for any other reason (not limited to patent issues),
+conditions are imposed on you (whether by court order, agreement or
+otherwise) that contradict the conditions of this License, they do not
+excuse you from the conditions of this License.  If you cannot
+distribute so as to satisfy simultaneously your obligations under this
+License and any other pertinent obligations, then as a consequence you
+may not distribute the Program at all.  For example, if a patent
+license would not permit royalty-free redistribution of the Program by
+all those who receive copies directly or indirectly through you, then
+the only way you could satisfy both it and this License would be to
+refrain entirely from distribution of the Program.
+
+If any portion of this section is held invalid or unenforceable under
+any particular circumstance, the balance of the section is intended to
+apply and the section as a whole is intended to apply in other
+circumstances.
+
+It is not the purpose of this section to induce you to infringe any
+patents or other property right claims or to contest validity of any
+such claims; this section has the sole purpose of protecting the
+integrity of the free software distribution system, which is
+implemented by public license practices.  Many people have made
+generous contributions to the wide range of software distributed
+through that system in reliance on consistent application of that
+system; it is up to the author/donor to decide if he or she is willing
+to distribute software through any other system and a licensee cannot
+impose that choice.
+
+This section is intended to make thoroughly clear what is believed to
+be a consequence of the rest of this License.
+
+  8. If the distribution and/or use of the Program is restricted in
+certain countries either by patents or by copyrighted interfaces, the
+original copyright holder who places the Program under this License
+may add an explicit geographical distribution limitation excluding
+those countries, so that distribution is permitted only in or among
+countries not thus excluded.  In such case, this License incorporates
+the limitation as if written in the body of this License.
+
+  9. The Free Software Foundation may publish revised and/or new versions
+of the General Public License from time to time.  Such new versions will
+be similar in spirit to the present version, but may differ in detail to
+address new problems or concerns.
+
+Each version is given a distinguishing version number.  If the Program
+specifies a version number of this License which applies to it and "any
+later version", you have the option of following the terms and conditions
+either of that version or of any later version published by the Free
+Software Foundation.  If the Program does not specify a version number of
+this License, you may choose any version ever published by the Free Software
+Foundation.
+
+  10. If you wish to incorporate parts of the Program into other free
+programs whose distribution conditions are different, write to the author
+to ask for permission.  For software which is copyrighted by the Free
+Software Foundation, write to the Free Software Foundation; we sometimes
+make exceptions for this.  Our decision will be guided by the two goals
+of preserving the free status of all derivatives of our free software and
+of promoting the sharing and reuse of software generally.
+
+                            NO WARRANTY
+
+  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY
+FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN
+OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES
+PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
+OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
+MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS
+TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
+PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,
+REPAIR OR CORRECTION.
+
+  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
+WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR
+REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
+INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING
+OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED
+TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY
+YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER
+PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE
+POSSIBILITY OF SUCH DAMAGES.
+
+                     END OF TERMS AND CONDITIONS
+
+            How to Apply These Terms to Your New Programs
+
+  If you develop a new program, and you want it to be of the greatest
+possible use to the public, the best way to achieve this is to make it
+free software which everyone can redistribute and change under these terms.
+
+  To do so, attach the following notices to the program.  It is safest
+to attach them to the start of each source file to most effectively
+convey the exclusion of warranty; and each file should have at least
+the "copyright" line and a pointer to where the full notice is found.
+
+    <one line to give the program's name and a brief idea of what it does.>
+    Copyright (C) <year>  <name of author>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License along
+    with this program; if not, write to the Free Software Foundation, Inc.,
+    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
+
+Also add information on how to contact you by electronic and paper mail.
+
+If the program is interactive, make it output a short notice like this
+when it starts in an interactive mode:
+
+    Gnomovision version 69, Copyright (C) year name of author
+    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
+    This is free software, and you are welcome to redistribute it
+    under certain conditions; type `show c' for details.
+
+The hypothetical commands `show w' and `show c' should show the appropriate
+parts of the General Public License.  Of course, the commands you use may
+be called something other than `show w' and `show c'; they could even be
+mouse-clicks or menu items--whatever suits your program.
+
+You should also get your employer (if you work as a programmer) or your
+school, if any, to sign a "copyright disclaimer" for the program, if
+necessary.  Here is a sample; alter the names:
+
+  Yoyodyne, Inc., hereby disclaims all copyright interest in the program
+  `Gnomovision' (which makes passes at compilers) written by James Hacker.
+
+  <signature of Ty Coon>, 1 April 1989
+  Ty Coon, President of Vice
+
+This General Public License does not permit incorporating your program into
+proprietary programs.  If your program is a subroutine library, you may
+consider it more useful to permit linking proprietary applications with the
+library.  If this is what you want to do, use the GNU Lesser General
+Public License instead of this License.
diff --git a/modules/devel/README.txt b/modules/devel/README.txt
new file mode 100644
index 0000000..90e25a3
--- /dev/null
+++ b/modules/devel/README.txt
@@ -0,0 +1,51 @@
+README.txt
+==========
+
+A module containing helper functions for Drupal developers and inquisitive admins.
+This module can print a log of all database queries for each page request at
+the bottom of each page. The summary includes how many times each query was
+executed on a page, and how long each query took.
+
+ It also offers
+ - a block for running custom PHP on a page
+ - a block for quickly accessing devel pages
+ - a block for masquerading as other users (useful for testing)
+ - reports memory usage at bottom of page
+ - A mail-system class which redirects outbound email to files
+ - more
+
+ This module is safe to use on a production site. Just be sure to only grant
+ 'access development information' permission to developers.
+
+Enabling the Devel Kint module gives you a dpr() function, which pretty prints variables.
+Useful during development. Also see similar helpers like dpm(), dvm().
+
+AJAX developers in particular ought to install FirePHP Core from
+http://www.firephp.org/ and put it in the devel directory. You may
+use the devel-download Drush command to download the library. If downloading by hand,
+your path to fb.php should look like libraries/FirePHPCore/lib/FirePHPCore/fb.php.
+You can use svn checkout http://firephp.googlecode.com/svn/trunk/trunk/Libraries/FirePHPCore.
+Then you can log php variables to the Firebug console. Is quite useful.
+
+Included in this package is also:
+
+- devel_node_access module which prints out the node_access records for a given node. Also offers hook_node_access_explain for all node access modules to implement. Handy.
+- devel_generate.module which bulk creates nodes, users, comment, terms for development.
+
+Some nifty Drush integration ships with devel and devel_generate. See `drush help` for details.
+
+DEVEL GENERATE EXTENSIONS
+=========================
+Devel Images Provider [http://drupal.org/project/devel_image_provider] allows to configure external providers for images.
+
+DRUSH UNIT TEST
+==================
+See develDrushTest.php for an example of unit testing of the Drush integration.
+This uses Drush's own test framework, based on PHPUnit. To run the tests, use
+run-tests-drush.sh. You may pass in any arguments that are valid for `phpunit`.
+
+AUTHOR/MAINTAINER
+======================
+- Moshe Weitzman <weitzman at tejasa DOT com> http://www.acquia.com
+- Hans Salvisberg <drupal at salvisberg DOT com>
+- Pedro Cambra <https://drupal.org/user/122101/contact> http://www.ymbra.com/
diff --git a/modules/devel/composer.json b/modules/devel/composer.json
new file mode 100644
index 0000000..3ca4312
--- /dev/null
+++ b/modules/devel/composer.json
@@ -0,0 +1,22 @@
+{
+  "name": "drupal/devel",
+  "description": "Various blocks, pages, and functions for developers.",
+  "type": "drupal-module",
+  "homepage": "http://drupal.org/project/devel",
+  "authors": [
+    {
+      "name": "Moshe Weitzman",
+      "email": "weitzman@tejasa.com",
+      "homepage": "https://github.com/weitzman",
+      "role": "Maintainer"
+    }
+  ],
+  "support": {
+    "issues": "http://drupal.org/project/devel",
+    "irc": "irc://irc.freenode.org/drupal-contribute",
+    "source": "http://cgit.drupalcode.org/devel"
+  },
+  "license": "GPL-2.0+",
+  "minimum-stability": "dev",
+  "require": { }
+}
diff --git a/modules/devel/config/install/devel.settings.yml b/modules/devel/config/install/devel.settings.yml
new file mode 100644
index 0000000..12a8d78
--- /dev/null
+++ b/modules/devel/config/install/devel.settings.yml
@@ -0,0 +1,10 @@
+api_url: 'api.drupal.org'
+page_alter: FALSE
+raw_names: FALSE
+error_handlers:
+  error_handler_type: 0
+  error_handler_value: 1
+krumo_skin: 'default'
+rebuild_theme: FALSE
+debug_mail_file_format: '%to-%subject-%datetime.mail.txt'
+debug_mail_directory: 'temporary://devel-mails'
diff --git a/modules/devel/config/install/system.menu.devel.yml b/modules/devel/config/install/system.menu.devel.yml
new file mode 100644
index 0000000..954cc71
--- /dev/null
+++ b/modules/devel/config/install/system.menu.devel.yml
@@ -0,0 +1,6 @@
+id: devel
+label: 'Development'
+description: 'Links related to Devel module.'
+langcode: en
+locked: true
+
diff --git a/modules/devel/config/schema/devel.schema.yml b/modules/devel/config/schema/devel.schema.yml
new file mode 100644
index 0000000..547bac7
--- /dev/null
+++ b/modules/devel/config/schema/devel.schema.yml
@@ -0,0 +1,51 @@
+# Schema for the configuration files of the Devel module.
+
+devel.settings:
+  type: config_object
+  label: 'Devel settings'
+  mapping:
+    api_url:
+      type: string
+      label: 'Drupal.org api url'
+    page_alter:
+      type: boolean
+      label: 'Page alter'
+    raw_names:
+      type: boolean
+      label: 'Raw names'
+    error_handlers:
+      label: 'Error handlers'
+      type: mapping
+      mapping:
+        error_handler_type:
+          type: integer
+          label: 'Error handler type'
+        error_handler_value:
+          type: integer
+          label: 'Error handler value'
+    krumo_skin:
+      type: string
+      label: 'Krumo skin'
+    rebuild_theme:
+      type: boolean
+      label: 'Rebuild theme information'
+    debug_mail_file_format:
+      type: string
+      label: 'Mail debug file format'
+    debug_mail_directory:
+      type: string
+      label: 'Mail debug directory'
+
+block.settings.devel_switch_user:
+  type: block_settings
+  label: 'Switch user block'
+  mapping:
+    list_size:
+      type: integer
+      label: 'List size'
+    include_anon:
+      type: boolean
+      label: 'Include Anonymous user'
+    show_form:
+      type: boolean
+      label: 'Show search form'
diff --git a/modules/devel/css/devel-rtl.css b/modules/devel/css/devel-rtl.css
new file mode 100644
index 0000000..e69de29
diff --git a/modules/devel/css/devel.css b/modules/devel/css/devel.css
new file mode 100644
index 0000000..8b07f80
--- /dev/null
+++ b/modules/devel/css/devel.css
@@ -0,0 +1,42 @@
+.devel-obj-output .field {
+  color: red;
+}
+
+.devel-obj-output dd {
+  display: block;
+}
+
+
+/**
+ * Switch User block
+ */
+#content .block-devel-switch-user ul.links,
+#footer .block-devel-switch-user ul.links {
+  margin-left: 0;
+  padding-left: 0;
+}
+
+#content .block-devel-switch-user ul.links li,
+#footer .block-devel-switch-user ul.links li {
+  display: inline-block;
+  margin-left: 0;
+  margin-right: 1.5em;
+  padding-right: 0;
+}
+
+#footer .block-devel-switch-user ul.links li a {
+  margin: 0;
+  padding: 0;
+  border: none;
+}
+
+#content #devel-switch-user-form .form-item-username,
+#footer #devel-switch-user-form .form-item-username {
+  float: left;
+  margin-right: 2em;
+}
+
+#content #devel-switch-user-form .button-primary,
+#footer #devel-switch-user-form .button-primary {
+  margin-top: 1em;
+}
diff --git a/modules/devel/devel.info.yml b/modules/devel/devel.info.yml
new file mode 100644
index 0000000..92612e6
--- /dev/null
+++ b/modules/devel/devel.info.yml
@@ -0,0 +1,14 @@
+type: module
+name: Devel
+description: 'Various blocks, pages, and functions for developers.'
+package: Development
+# core: 8.x
+configure: devel.admin_settings
+tags:
+ - developer
+
+# Information added by Drupal.org packaging script on 2015-11-08
+version: '8.x-1.x-dev'
+core: '8.x'
+project: 'devel'
+datestamp: 1446987552
diff --git a/modules/devel/devel.install b/modules/devel/devel.install
new file mode 100644
index 0000000..2b7c704
--- /dev/null
+++ b/modules/devel/devel.install
@@ -0,0 +1,19 @@
+<?php
+
+/**
+ * @file
+ * Install, update and uninstall functions for the devel module.
+ */
+
+use Drupal\system\Entity\Menu;
+
+/**
+ * Implements hook_uninstall().
+ */
+function devel_uninstall() {
+  // Delete the development menu.
+  if ($devel_menu = Menu::load('devel')) {
+    $devel_menu->delete();
+  }
+}
+
diff --git a/modules/devel/devel.libraries.yml b/modules/devel/devel.libraries.yml
new file mode 100644
index 0000000..cec6202
--- /dev/null
+++ b/modules/devel/devel.libraries.yml
@@ -0,0 +1,9 @@
+krumo_path:
+  version: VERSION
+  js:
+    js/devel_krumo_path.js: {}
+devel:
+  version: 0
+  css:
+    theme:
+      css/devel.css: {}
diff --git a/modules/devel/devel.links.menu.yml b/modules/devel/devel.links.menu.yml
new file mode 100644
index 0000000..1fdc5b5
--- /dev/null
+++ b/modules/devel/devel.links.menu.yml
@@ -0,0 +1,66 @@
+devel.admin_settings:
+  title: 'Devel settings'
+  description: 'Helper functions, pages, and blocks to assist Drupal developers. The devel blocks can be managed via the block administration page.'
+  route_name: devel.admin_settings
+  parent: 'system.admin_config_development'
+devel.admin_settings_link:
+  title: 'Devel settings'
+  description: 'Helper functions, pages, and blocks to assist Drupal developers. The devel blocks can be managed via the block administration page.'
+  route_name: devel.admin_settings
+  menu_name: devel
+devel.configs_list:
+  title: 'Config editor'
+  description: 'Edit configuration.'
+  route_name: devel.configs_list
+  menu_name: devel
+devel.reinstall:
+  title: 'Reinstall Modules'
+  route_name: devel.reinstall
+  menu_name: devel
+devel.menu_rebuild:
+  title: 'Rebuild Menu'
+  route_name: devel.menu_rebuild
+  menu_name: devel
+devel.state_system_page:
+  title: 'State editor'
+  description: 'Edit state system values.'
+  route_name: devel.state_system_page
+  menu_name: devel
+devel.theme_registry:
+  title: 'Theme registry'
+  route_name: devel.theme_registry
+  menu_name: devel
+devel.entity_info_page:
+  title: 'Entity Info'
+  route_name: devel.entity_info_page
+#  parent: 'system.admin_config_development'
+  menu_name: devel
+devel.field_info_page:
+  title: 'Field Info'
+  route_name: devel.field_info_page
+#  parent: 'system.admin_config_development'
+  menu_name: devel
+devel.phpinfo:
+  title: 'PHPinfo()'
+  route_name: system.php
+  menu_name: devel
+devel.execute_php:
+  title: 'Execute PHP'
+  route_name: devel.execute_php
+  menu_name: devel
+devel.session:
+  title: 'View Session'
+  route_name: devel.session
+  menu_name: devel
+devel.elements_page:
+  title: 'Element Info'
+  route_name: devel.elements_page
+  menu_name: devel
+devel.cache_clear:
+  title: 'Cache clear'
+  route_name: devel.cache_clear
+  menu_name: devel
+devel.run_cron:
+  title: 'Run cron'
+  route_name: devel.run_cron
+  menu_name: devel
diff --git a/modules/devel/devel.links.task.yml b/modules/devel/devel.links.task.yml
new file mode 100644
index 0000000..dd33939
--- /dev/null
+++ b/modules/devel/devel.links.task.yml
@@ -0,0 +1,8 @@
+devel.entities:
+  class: \Drupal\Core\Menu\LocalTaskDefault
+  deriver: \Drupal\devel\Plugin\Derivative\DevelLocalTask
+devel.admin_settings:
+  title: 'Settings'
+  route_name: devel.admin_settings
+  base_route: devel.admin_settings
+  weight: 0
diff --git a/modules/devel/devel.module b/modules/devel/devel.module
new file mode 100644
index 0000000..3cc22b3
--- /dev/null
+++ b/modules/devel/devel.module
@@ -0,0 +1,968 @@
+<?php
+
+/**
+ * @file
+ * This module holds functions useful for Drupal development.
+ * Please contribute!
+ */
+
+define('DEVEL_ERROR_HANDLER_NONE', 0);
+define('DEVEL_ERROR_HANDLER_STANDARD', 1);
+define('DEVEL_ERROR_HANDLER_BACKTRACE_KRUMO', 2);
+define('DEVEL_ERROR_HANDLER_BACKTRACE_DPM', 4);
+
+define('DEVEL_MIN_TEXTAREA', 50);
+
+use Drupal\comment\CommentInterface;
+use Drupal\Component\Utility\Html;
+use Drupal\Component\Utility\Unicode;
+use Drupal\Core\Render\Markup;
+use Drupal\Core\Database\Database;
+use Drupal\Core\Database\Query\AlterableInterface;
+use Drupal\Core\Entity\EntityInterface;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Logger\RfcLogLevel;
+use Drupal\Core\Render\Element;
+use Drupal\Core\Utility\Error;
+
+/**
+ * Implements hook_help().
+ */
+function devel_help($route_name) {
+  switch ($route_name) {
+    case 'devel.reinstall':
+      $output = '<p>' . t('<strong>Warning</strong> - will delete your module tables and configuration.') . '</p>';
+      $output .= '<p>' . t('Uninstall and then install the selected modules. <code>hook_uninstall()</code> and <code>hook_install()</code> will be executed and the schema version number will be set to the most recent update number.') . '</p>';
+      return $output;
+
+    case 'devel/session':
+      return '<p>' . t('Here are the contents of your <code>$_SESSION</code> variable.') . '</p>';
+  }
+}
+
+/**
+ * Implements hook_entity_type_alter().
+ */
+function devel_entity_type_alter(array &$entity_types) {
+  /** @var $entity_types \Drupal\Core\Entity\EntityTypeInterface[] */
+  foreach ($entity_types as $entity_type_id => $entity_type) {
+    if ($entity_type->hasViewBuilderClass() && $entity_type->hasLinkTemplate('canonical')) {
+      $entity_type->setLinkTemplate('devel-render', $entity_type->getLinkTemplate('canonical') . '/devel/render');
+    }
+    if ($entity_type->hasFormClasses() && $entity_type->hasLinkTemplate('edit-form')) {
+      $entity_type->setLinkTemplate('devel-load', $entity_type->getLinkTemplate('edit-form') . '/devel');
+    }
+  }
+}
+
+/**
+ * Implements hook_entity_operation().
+ */
+function devel_entity_operation(EntityInterface $entity) {
+  $operations = array();
+
+  if ($entity->hasLinkTemplate('devel-load') && \Drupal::currentUser()->hasPermission('access devel information')) {
+    $operations['devel'] = array(
+      'title' => t('Devel'),
+      'weight' => 50,
+      'url' => $entity->urlInfo('devel-load'),
+    );
+  }
+
+  return $operations;
+}
+
+/**
+ * Returns destinations.
+ */
+function devel_menu_need_destination() {
+  return array('devel/cache/clear', 'devel/reinstall', 'devel/menu/reset',
+    'admin/reports/status/run-cron');
+}
+
+/**
+ * Implements hook_menu_link_alter().
+ *
+ * Flag this link as needing alter at display time.
+ * This is more robust than setting alter in hook_menu().
+ * @see devel_translated_menu_link_alter()
+ */
+function devel_menu_link_alter(&$item) {
+  if (in_array($item['link_path'], devel_menu_need_destination()) || $item['link_path'] == 'devel/menu/item') {
+    $item['options']['alter'] = TRUE;
+  }
+}
+
+/**
+ * Implements hook_translated_menu_item_alter().
+ *
+ * Append dynamic querystring 'destination' to several of our own menu items.
+ */
+function devel_translated_menu_link_alter(&$item) {
+  if (in_array($item['href'], devel_menu_need_destination())) {
+    $item['localized_options']['query'] = \Drupal::destination()->getAsArray();
+  }
+  elseif ($item['href'] == 'devel/menu/item') {
+    $item['localized_options']['query'] = array('path' => current_path());
+  }
+}
+
+/**
+ * Sets message.
+ */
+function devel_set_message($msg, $type = NULL) {
+  if (function_exists('drush_log')) {
+    drush_log($msg, $type);
+  }
+  else {
+    drupal_set_message($msg, $type, TRUE);
+  }
+}
+
+/**
+ * @return bool. No need for cache here.
+ */
+function has_kint() {
+  if (\Drupal::moduleHandler()->moduleExists('kint') && function_exists('kint_require')) {
+    kint_require();
+    return TRUE;
+  }
+  return FALSE;
+}
+
+/**
+ * Returns boolean. No need for cache here.
+ */
+function has_krumo() {
+  @include_once DRUPAL_ROOT . '/' . drupal_get_path('module', 'devel') . '/krumo/class.krumo.php';
+  if (function_exists('krumo') && (PHP_SAPI !== 'cli')) {
+    return TRUE;
+  }
+  return FALSE;
+}
+
+/**
+ * Decides whether or not to print a debug variable using Kint.
+ *
+ * @param mixed $input
+ *   The value to check.
+ *
+ * @return boolean
+ */
+function merits_kint($input) {
+  return !is_scalar($input) && has_kint();
+}
+
+/**
+ * Calls the http://www.firephp.org/ fb() function if it is found.
+ */
+function dfb() {
+  if (function_exists('fb') && \Drupal::currentUser()->hasPermission('access devel information') && !headers_sent()) {
+    $args = func_get_args();
+    call_user_func_array('fb', $args);
+  }
+}
+
+/**
+ * Calls dfb() to output a backtrace.
+ */
+function dfbt($label) {
+  dfb($label, FirePHP::TRACE);
+}
+
+/**
+ * Wrapper for ChromePHP Class log method.
+ */
+function dcp() {
+  if (class_exists('ChromePhp', FALSE) && \Drupal::currentUser()->hasPermission('access devel information')) {
+    $args = func_get_args();
+    call_user_func_array(array('ChromePhp', 'log'), $args);
+  }
+}
+
+/**
+ * Gets error handlers.
+ */
+function devel_get_handlers() {
+  $error_handlers = \Drupal::config('devel.settings')->get('error_handlers');
+  if (!empty($error_handlers)) {
+    unset($error_handlers[DEVEL_ERROR_HANDLER_NONE]);
+  }
+  return $error_handlers;
+}
+
+/**
+ * Sets a new error handler or restores the prior one.
+ */
+function devel_set_handler($handlers) {
+  if (empty($handlers)) {
+    restore_error_handler();
+  }
+  elseif (count($handlers) == 1 && isset($handlers[DEVEL_ERROR_HANDLER_STANDARD])) {
+    // Do nothing.
+  }
+  else {
+    if (has_krumo()) {
+      set_error_handler('backtrace_error_handler');
+    }
+  }
+}
+
+/**
+ * Checks whether Devel may be active.
+ *
+ * Devel is automatically disabled when:
+ *   - The request come from a php cli.
+ *   - The request has 'XDEBUG_PROFILE' parameter set.
+ *   - The request come from Apache Benchmark.
+ *   - The currently executing script is the front controller update.php.
+ *   - The returned response isn't a \Drupal\Core\Render\HtmlResponse instance.
+ *
+ * You can manually disable devel adding the '_devel_silent' requirement
+ * to your route definitions:
+ *
+ * @code
+ * mymodule.silent_route:
+ *   path: '/my-path'
+ *   defaults:
+ *     _controller: '\Drupal\mymodule\Controller\MyController::method'
+ *   requirements:
+ *     _devel_silent: 'TRUE'
+ * @endcode
+ *
+ * @return bool
+ *   Return whether Devel may be active.
+ */
+function devel_silent() {
+  return
+    (PHP_SAPI === 'cli') ||
+    (isset($_SERVER['HTTP_USER_AGENT']) && strpos($_SERVER['HTTP_USER_AGENT'], 'ApacheBench') !== FALSE) ||
+    !empty($_REQUEST['XDEBUG_PROFILE']) ||
+    strstr($_SERVER['PHP_SELF'], 'update.php') ||
+    (($route = \Drupal::routeMatch()->getRouteObject()) && $route->getRequirement('_devel_silent'));
+}
+
+/**
+ * Displays backtrace showing the route of calls to the current error.
+ *
+ * @param int $error_level
+ *   The level of the error raised.
+ * @param string $message
+ *   The error message.
+ * @param string $filename
+ *   The filename that the error was raised in.
+ * @param int $line
+ *   The line number the error was raised at.
+ * @param array $context
+ *   An array that points to the active symbol table at the point the error
+ *   occurred.
+ */
+function backtrace_error_handler($error_level, $message, $filename, $line, $context) {
+  // Hide stack trace and parameters from unqualified users.
+  if (!\Drupal::currentUser()->hasPermission('access devel information')) {
+    // Do what core does in bootstrap.inc and errors.inc.
+    // (We need to duplicate the core code here rather than calling it
+    // to avoid having the backtrace_error_handler() on top of the call stack.)
+    if ($error_level & error_reporting()) {
+      $types = drupal_error_levels();
+      list($severity_msg, $severity_level) = $types[$error_level];
+      $backtrace = debug_backtrace();
+      $caller = Error::getLastCaller($backtrace);
+
+      // We treat recoverable errors as fatal.
+      _drupal_log_error(array(
+        '%type' => isset($types[$error_level]) ? $severity_msg : 'Unknown error',
+        '@message' => $message,
+        '%function' => $caller['function'],
+        '%file' => $caller['file'],
+        '%line' => $caller['line'],
+        'severity_level' => $severity_level,
+        'backtrace' => $backtrace,
+      ), $error_level == E_RECOVERABLE_ERROR);
+    }
+
+    return;
+  }
+
+  // Don't respond to the error if it was suppressed with a '@'
+  if (error_reporting() == 0) {
+    return;
+  }
+
+  // Don't respond to warning caused by ourselves.
+  if (preg_match('#Cannot modify header information - headers already sent by \\([^\\)]*[/\\\\]devel[/\\\\]#', $message)) {
+    return;
+  }
+
+  if ($error_level & error_reporting()) {
+    // Only write each distinct NOTICE message once, as repeats do not give any
+    // further information and can choke the page output.
+    if ($error_level == E_NOTICE) {
+      static $written = array();
+      if (!empty($written[$line][$filename][$message])) {
+        return;
+      }
+      $written[$line][$filename][$message] = TRUE;
+    }
+
+    $types = drupal_error_levels();
+    list($severity_msg, $severity_level) = $types[$error_level];
+
+    $backtrace = debug_backtrace();
+    $caller = Error::getLastCaller($backtrace);
+    $variables = array(
+      '%type' => isset($types[$error_level]) ? $severity_msg : 'Unknown error',
+      '@message' => $message,
+      '%function' => $caller['function'],
+      '%file' => $caller['file'],
+      '%line' => $caller['line'],
+    );
+    $msg = t('%type: @message in %function (line %line of %file).', $variables);
+
+    // Show message if error_level is ERROR_REPORTING_DISPLAY_SOME or higher.
+    // (This is Drupal's error_level, which is different from $error_level,
+    // and we purposely ignore the difference between _SOME and _ALL,
+    // see #970688!)
+    if (\Drupal::config('system.logging')->get('error_level') != 'hide') {
+      $error_handlers = devel_get_handlers();
+      if (!empty($error_handlers[DEVEL_ERROR_HANDLER_STANDARD])) {
+        drupal_set_message($msg, ($severity_level <= RfcLogLevel::NOTICE ? 'error' : 'warning'), TRUE);
+      }
+      if (!empty($error_handlers[DEVEL_ERROR_HANDLER_BACKTRACE_KRUMO])) {
+        print $msg . " =&gt;\n";
+        ddebug_backtrace(FALSE, 1);
+      }
+      if (!empty($error_handlers[DEVEL_ERROR_HANDLER_BACKTRACE_DPM])) {
+        dpm(ddebug_backtrace(TRUE, 1), $msg, 'warning');
+      }
+    }
+
+    \Drupal::logger('php')->log($severity_level, $msg);
+  }
+}
+
+/**
+ * Returns the core version.
+ */
+function devel_get_core_version($version) {
+  $version_parts = explode('.', $version);
+  // Map from 4.7.10 -> 4.7
+  if ($version_parts[0] < 5) {
+    return $version_parts[0] . '.' . $version_parts[1];
+  }
+  // Map from 5.5 -> 5 or 6.0-beta2 -> 6
+  else {
+    return $version_parts[0];
+  }
+}
+
+/**
+ * Implements hook_page_attachments_alter().
+ */
+function devel_page_attachments_alter(&$page) {
+  if (\Drupal::currentUser()->hasPermission('access devel information')) {
+    if (\Drupal::config('devel.settings')->get('page_alter')) {
+      dpm($page, 'page');
+    }
+
+    if (!devel_silent()) {
+      $page['#attached']['library'][] = 'devel/krumo_path';
+    }
+  }
+}
+
+/**
+ * Devel's t_safe() function.
+ */
+function t_safe($string, $args) {
+  // get_t() caused problems here with the theme registry after changing on
+  // admin/build/modules. The theme_get_registry() call is needed!
+  if (function_exists('t') && function_exists('theme_get_registry')) {
+    theme_get_registry();
+    return t($string, $args);
+  }
+  else {
+    strtr($string, $args);
+  }
+}
+
+/**
+ * Prints an object using either Kint (if enabled) or devel_print_object().
+ *
+ * @param array|object $object
+ *   An array or object to print.
+ * @param string $prefix
+ * @todo: this parameter is not needed with Kint.
+ *   Prefix for output items.
+ */
+function kdevel_print_object($object, $prefix = NULL) {
+  // @todo: quick fix to avoid Kint output floating. Remove when fixed upstream.
+  $dump = has_kint() ? '<div style="clear:both">' . @Kint::dump($object) . '</div>' : devel_print_object($object, $prefix);
+  return Markup::create($dump);
+}
+
+/**
+ * Displays an object or array.
+ *
+ * @param array|object $object
+ *   The object or array to display.
+ * @param string $prefix
+ *   Prefix for the output items (example "$node->", "$user->", "$").
+ * @param boolean $header
+ *   Set to FALSE to suppress the output of the h3 tag.
+ */
+function devel_print_object($object, $prefix = NULL, $header = TRUE) {
+  $output = '<div class="devel-obj-output">';
+  if ($header) {
+    $output .= '<h3>' . t('Display of @type @obj', array(
+      '@type' => str_replace(array('$', '->'), '', $prefix),
+      '@obj' => gettype($object),
+    )
+    ) . '</h3>';
+  }
+  $output .= _devel_print_object($object, $prefix);
+  $output .= '</div>';
+  return $output;
+}
+
+/**
+ * Returns formatted listing for an array or object.
+ *
+ * Recursive (and therefore magical) function goes through an array or object
+ * and returns a nicely formatted listing of its contents.
+ *
+ * @param array|object $obj
+ *   Array or object to recurse through.
+ * @param string $prefix
+ *   Prefix for the output items (example "$node->", "$user->", "$").
+ * @param string $parents
+ *   Used by recursion.
+ * @param boolean $object
+ *   Used by recursion.
+ *
+ * @return string
+ *   Formatted html.
+ *
+ * @todo
+ *   currently there are problems sending an array with a varname
+ */
+function _devel_print_object($obj, $prefix = NULL, $parents = NULL, $object = FALSE) {
+  static $root_type, $out_format;
+
+  // TODO: support objects with references. See http://drupal.org/node/234581.
+  if (isset($obj->view)) {
+    return;
+  }
+
+  if (!isset($root_type)) {
+    $root_type = gettype($obj);
+    if ($root_type == 'object') {
+      $object = TRUE;
+    }
+  }
+
+  if (is_object($obj)) {
+    $obj = (array) $obj;
+  }
+  if (is_array($obj)) {
+    $output = "<dl>\n";
+    foreach ($obj as $field => $value) {
+      if ($field === 'devel_flag_reference') {
+        continue;
+      }
+      if (!is_null($parents)) {
+        if ($object) {
+          $field = $parents . '->' . $field;
+        }
+        else {
+          if (is_int($field)) {
+            $field = $parents . '[' . $field . ']';
+          }
+          else {
+            $field = $parents . '[\'' . $field . '\']';
+          }
+        }
+      }
+
+      $type = gettype($value);
+
+      $show_summary = TRUE;
+      $summary = NULL;
+      if ($show_summary) {
+        switch ($type) {
+          case 'string':
+          case 'float':
+          case 'integer':
+            if (strlen($value) == 0) {
+              $summary = t("{empty}");
+            }
+            elseif (strlen($value) < 40) {
+              $summary = htmlspecialchars($value);
+            }
+            else {
+              $summary = \Drupal::translation()->formatPlural(Unicode::strlen($value), '1 character', '@count characters');
+            }
+            break;
+
+          case 'array':
+          case 'object':
+            $summary = \Drupal::translation()->formatPlural(count((array) $value), '1 element', '@count elements');
+            break;
+
+          case 'boolean':
+            $summary = $value ? t('TRUE') : t('FALSE');
+            break;
+        }
+      }
+      if (!is_null($summary)) {
+        $typesum = '(' . $type . ', <em>' . $summary . '</em>)';
+      }
+      else {
+        $typesum = '(' . $type . ')';
+      }
+
+      $output .= '<span class="devel-attr">';
+      $output .= "<dt><span class=\"field\">{$prefix}{$field}</span> $typesum</dt>\n";
+      $output .= "<dd>\n";
+      // Check for references.
+      if (is_array($value) && isset($value['devel_flag_reference'])) {
+        $value['devel_flag_reference'] = TRUE;
+      }
+      // Check for references to prevent errors from recursions.
+      if (is_array($value) && isset($value['devel_flag_reference']) && !$value['devel_flag_reference']) {
+        $value['devel_flag_reference'] = FALSE;
+        $output .= _devel_print_object($value, $prefix, $field);
+      }
+      elseif (is_object($value)) {
+        $value->devel_flag_reference = FALSE;
+        $output .= _devel_print_object((array) $value, $prefix, $field, TRUE);
+      }
+      else {
+        $value = is_bool($value) ? ($value ? 'TRUE' : 'FALSE') : $value;
+        $output .= htmlspecialchars(print_r($value, TRUE)) . "\n";
+      }
+      $output .= "</dd></span>\n";
+    }
+    $output .= "</dl>\n";
+  }
+  return $output;
+}
+
+/**
+ * An alias for drupal_debug().
+ */
+function dd($data, $label = NULL) {
+  return drupal_debug($data, $label);
+}
+
+/**
+ * Logs a variable to a drupal_debug.txt in the site's temp directory.
+ *
+ * @param mixed $data
+ *   The variable to log to the drupal_debug.txt log file.
+ * @param string $label
+ *   (optional) If set, a label to output before $data in the log file.
+ *
+ * @return void|false
+ *   Empty if successful, FALSE if the log file could not be written.
+ *
+ * @see dd()
+ * @see http://drupal.org/node/314112
+ */
+function drupal_debug($data, $label = NULL) {
+  $out = ($label ? $label . ': ' : '') . print_r($data, TRUE) . "\n";
+
+  // The temp directory does vary across multiple simpletest instances.
+  $file = file_directory_temp() . '/drupal_debug.txt';
+  if (file_put_contents($file, $out, FILE_APPEND) === FALSE) {
+    drupal_set_message(t('Devel was unable to write to %file.', array('%file' => $file)), 'error');
+    return FALSE;
+  }
+}
+
+/**
+ * Prints the arguments passed into the current function.
+ */
+function dargs($always = TRUE) {
+  static $printed;
+  if ($always || !$printed) {
+    $bt = debug_backtrace();
+    print kdevel_print_object($bt[1]['args']);
+    $printed = TRUE;
+  }
+}
+
+/**
+ * Prints a SQL string from a DBTNG Select object. Includes quoted arguments.
+ *
+ * @param object $query
+ *   An object that implements the SelectInterface interface.
+ * @param string $return
+ *   Whether to return the string. Default is FALSE, meaning to print it
+ *   and return $query instead.
+ * @param string $name
+ *   Optional name for identifying the output.
+ *
+ * @return object|string
+ *   The $query object, or the query string if $return was TRUE.
+ */
+function dpq($query, $return = FALSE, $name = NULL) {
+  if (\Drupal::currentUser()->hasPermission('access devel information')) {
+    if (method_exists($query, 'preExecute')) {
+      $query->preExecute();
+    }
+    $sql = (string) $query;
+    $quoted = array();
+    $connection = Database::getConnection();
+    foreach ((array) $query->arguments() as $key => $val) {
+      $quoted[$key] = is_null($val) ? 'NULL' : $connection->quote($val);
+    }
+    $sql = strtr($sql, $quoted);
+    if ($return) {
+      return $sql;
+    }
+    dpm($sql, $name);
+  }
+  return ($return ? NULL : $query);
+}
+
+/**
+ * Prints a variable to the 'message' area of the page.
+ *
+ * Uses drupal_set_message().
+ *
+ * @param $input
+ *   An arbitrary value to output.
+ * @param string $name
+ *   Optional name for identifying the output.
+ * @param string $type
+ *   Optional message type for drupal_set_message(), defaults to 'status'.
+ *
+ * @return input
+ *   The unaltered input value.
+ */
+function dpm($input, $name = NULL, $type = 'status') {
+  if (\Drupal::currentUser()->hasPermission('access devel information')) {
+    $export = kprint_r($input, TRUE, $name);
+    drupal_set_message($export, $type, TRUE);
+  }
+  return $input;
+}
+
+/**
+ * Displays a drupal_var_export() variable to the 'message' area of the page.
+ *
+ * Uses drupal_set_message().
+ *
+ * @param $input
+ *   An arbitrary value to output.
+ * @param string $name
+ *   Optional name for identifying the output.
+ *
+ * @return input
+ *   The unaltered input value.
+ */
+function dvm($input, $name = NULL) {
+  if (\Drupal::currentUser()->hasPermission('access devel information')) {
+    $export = dprint_r($input, TRUE, $name, ['\Drupal\Component\Utility\Variable', 'export'], FALSE);
+    drupal_set_message($export, 'status', TRUE);
+  }
+  return $input;
+}
+
+/**
+ * An alias for dpm(), for historic reasons.
+ */
+function dsm($input, $name = NULL) {
+  return dpm($input, $name);
+}
+
+/**
+ * An alias for dprint_r(). Saves carpal tunnel syndrome.
+ */
+function dpr($input, $return = FALSE, $name = NULL) {
+  return dprint_r($input, $return, $name);
+}
+
+/**
+ * An alias for kprint_r(). Saves carpal tunnel syndrome.
+ */
+function kpr($input, $return = FALSE, $name = NULL) {
+  return kprint_r($input, $return, $name);
+}
+
+/**
+ * Like dpr(), but uses drupal_var_export() instead.
+ */
+function dvr($input, $return = FALSE, $name = NULL) {
+  return dprint_r($input, $return, $name, 'drupal_var_export', FALSE);
+}
+
+/**
+ * Kint print.
+ */
+function kprint_r($input, $return = FALSE, $name = NULL, $function = 'print_r') {
+  if (\Drupal::currentUser()->hasPermission('access devel information')) {
+    // Kint is too heavy to bother with for scalars like strings and integers.
+    if (merits_kint($input)) {
+      // Had to use @d() instead of @Kint::dump() as the latter is ignoring @ modifier.
+      $output = $return ? (isset($name) ? $name . ' => ' : '') . @d($input) : Kint::dump($input);
+    }
+    else {
+      $output = dprint_r($input, $return, $name, $function);
+    }
+
+    return Markup::create($output);
+  }
+}
+
+/**
+ * Pretty-print a variable to the browser (no krumo).
+ *
+ * Displays only for users with proper permissions. If
+ * you want a string returned instead of a print, use the 2nd param.
+ */
+function dprint_r($input, $return = FALSE, $name = NULL, $function = 'print_r', $check= TRUE) {
+  if (\Drupal::currentUser()->hasPermission('access devel information')) {
+    if ($name) {
+      $name .= ' => ';
+    }
+
+    ob_start();
+    $function($input);
+    $output = ob_get_clean();
+
+    if ($check) {
+      $output = Html::escape($output);
+    }
+    if (count($input, COUNT_RECURSIVE) > DEVEL_MIN_TEXTAREA) {
+      // Don't use fapi here because sometimes fapi will not be loaded.
+      $printed_value = "<textarea rows=30 style=\"width: 100%;\">\n" . $name . $output . '</textarea>';
+    }
+    else {
+      $printed_value = '<pre>' . $name . $output . '</pre>';
+    }
+
+    if ($return) {
+      return $printed_value;
+    }
+    else {
+      print $printed_value;
+    }
+  }
+}
+
+/**
+ * Prints a renderable array element to the screen using kprint_r().
+ *
+ * #pre_render and/or #post_render pass-through callback for kprint_r().
+ *
+ * @todo Investigate appending to #suffix.
+ * @todo Investigate label derived from #id, #title, #name, and #theme.
+ */
+function devel_render() {
+  $args = func_get_args();
+  // #pre_render and #post_render pass the rendered $element as last argument.
+  kprint_r(end($args));
+  // #pre_render and #post_render expect the first argument to be returned.
+  return reset($args);
+}
+
+/**
+ * Prints the function call stack.
+ *
+ * @param $return
+ *   Pass TRUE to return the formatted backtrace rather than displaying it in
+ *   the browser via kprint_r().
+ * @param $pop
+ *   How many items to pop from the top of the stack; useful when calling from
+ *   an error handler.
+ * @param $options
+ *   Options to pass on to PHP's debug_backtrace().
+ *
+ * @return string|NULL
+ *   The formatted backtrace, if requested, or NULL.
+ *
+ * @see http://php.net/manual/en/function.debug-backtrace.php
+ */
+function ddebug_backtrace($return = FALSE, $pop = 0, $options = DEBUG_BACKTRACE_PROVIDE_OBJECT) {
+  if (\Drupal::currentUser()->hasPermission('access devel information')) {
+    $backtrace = debug_backtrace($options);
+    while ($pop-- > 0) {
+      array_shift($backtrace);
+    }
+    $counter = count($backtrace);
+    $path = $backtrace[$counter - 1]['file'];
+    $path = substr($path, 0, strlen($path) - 10);
+    $paths[$path] = strlen($path) + 1;
+    $paths[DRUPAL_ROOT] = strlen(DRUPAL_ROOT) + 1;
+    $nbsp = "\xC2\xA0";
+
+    // Show message if error_level is ERROR_REPORTING_DISPLAY_SOME or higher.
+    // (This is Drupal's error_level, which is different from $error_level,
+    // and we purposely ignore the difference between _SOME and _ALL,
+    // see #970688!)
+    if (\Drupal::config('system.logging')->get('error_level') != 'hide') {
+      while (!empty($backtrace)) {
+        $call = array();
+        if (isset($backtrace[0]['file'])) {
+          $call['file'] = $backtrace[0]['file'];
+          foreach ($paths as $path => $len) {
+            if (strpos($backtrace[0]['file'], $path) === 0) {
+              $call['file'] = substr($backtrace[0]['file'], $len);
+            }
+          }
+          $call['file'] .= ':' . $backtrace[0]['line'];
+        }
+        if (isset($backtrace[1])) {
+          if (isset($backtrace[1]['class'])) {
+            $function = $backtrace[1]['class'] . $backtrace[1]['type'] . $backtrace[1]['function'] . '()';
+          }
+          else {
+            $function = $backtrace[1]['function'] . '()';
+          }
+          $backtrace[1] += array('args' => array());
+          foreach ($backtrace[1]['args'] as $key => $value) {
+            $call['args'][$key] = (is_object($value) && get_class($value) != 'stdClass') ? print_r($value, TRUE) : $value;
+          }
+        }
+        else {
+          $function = 'main()';
+          $call['args'] = $_GET;
+        }
+        $nicetrace[($counter <= 10 ? $nbsp : '') . --$counter . ': ' . $function] = $call;
+        array_shift($backtrace);
+      }
+      if ($return) {
+        return $nicetrace;
+      }
+      kprint_r($nicetrace);
+    }
+  }
+}
+
+/**
+ * Deletes all files in a dir.
+ */
+function devel_empty_dir($dir) {
+  foreach (new DirectoryIterator($dir) as $file_info) {
+    if ($file_info->isFile()) {
+      unlink($file_info->getPathname());
+    }
+  }
+}
+
+/*
+ * Migration-related functions.
+ */
+
+/**
+ * Regenerates the data in node_comment_statistics table.
+ * Technique - http://www.artfulsoftware.com/infotree/queries.php?&bw=1280#101
+ *
+ * @return void
+ */
+function devel_rebuild_node_comment_statistics() {
+  // Empty table.
+  db_truncate('node_comment_statistics')->execute();
+
+  // TODO: DBTNG. Ignore keyword is Mysql only? Is only used in the rare case
+  // when two comments on the same node share same timestamp.
+  $sql = "
+    INSERT IGNORE INTO {node_comment_statistics} (nid, cid, last_comment_timestamp, last_comment_name, last_comment_uid, comment_count) (
+      SELECT c.nid, c.cid, c.created, c.name, c.uid, c2.comment_count FROM {comment} c
+      JOIN (
+        SELECT c.nid, MAX(c.created) AS created, COUNT(*) AS comment_count FROM {comment} c WHERE status = 1 GROUP BY c.nid
+      ) AS c2 ON c.nid = c2.nid AND c.created = c2.created
+    )";
+  db_query($sql, array(':published' => CommentInterface::PUBLISHED));
+
+  // Insert records into the node_comment_statistics for nodes that are missing.
+  $query = db_select('node', 'n');
+  $query->leftJoin('node_comment_statistics', 'ncs', 'ncs.nid = n.nid');
+  $query->addField('n', 'changed', 'last_comment_timestamp');
+  $query->addField('n', 'uid', 'last_comment_uid');
+  $query->addField('n', 'nid');
+  $query->addExpression('0', 'comment_count');
+  $query->addExpression('NULL', 'last_comment_name');
+  $query->isNull('ncs.comment_count');
+
+  db_insert('node_comment_statistics', array('return' => Database::RETURN_NULL))
+    ->from($query)
+    ->execute();
+}
+
+/**
+ * Implements hook_form_FORM_ID_alter().
+ *
+ * Adds mouse-over hints on the Permissions page to display
+ * language-independent machine names and module base names.
+ *
+ * @see \Drupal\user\Form\UserPermissionsForm::buildForm()
+ */
+function devel_form_user_admin_permissions_alter(&$form, FormStateInterface $form_state) {
+  if (\Drupal::currentUser()->hasPermission('access devel information') && \Drupal::config('devel.settings')->get('raw_names')) {
+    foreach (Element::children($form['permissions']) as $key) {
+      if (isset($form['permissions'][$key][0])) {
+        $form['permissions'][$key][0]['#wrapper_attributes']['title'] = $key;
+      }
+      elseif(isset($form['permissions'][$key]['description'])) {
+        $form['permissions'][$key]['description']['#wrapper_attributes']['title']  = $key;
+      }
+    }
+  }
+}
+
+/**
+ * Implements hook_form_FORM_ID_alter().
+ *
+ * Adds mouse-over hints on the Modules page to display module base names.
+ *
+ * @see \Drupal\system\Form\ModulesListForm::buildForm()
+ * @see theme_system_modules_details()
+ */
+function devel_form_system_modules_alter(&$form, FormStateInterface $form_state) {
+  if (\Drupal::currentUser()->hasPermission('access devel information') && \Drupal::config('devel.settings')->get('raw_names', FALSE) && isset($form['modules']) && is_array($form['modules'])) {
+    foreach (Element::children($form['modules']) as $group) {
+      if (is_array($form['modules'][$group])) {
+        foreach (Element::children($form['modules'][$group]) as $key) {
+          if (isset($form['modules'][$group][$key]['name']['#markup'])) {
+            $form['modules'][$group][$key]['name']['#markup'] = '<span title="' . $key . '">' . $form['modules'][$group][$key]['name']['#markup'] . '</span>';
+          }
+        }
+      }
+    }
+  }
+}
+
+/**
+ * Processes variables for block.tpl.php.
+ *
+ * Adding a module block class.
+ *
+ * @todo remove when http://drupal.org/node/1896098 gets in core.
+ */
+function devel_preprocess_block(&$variables) {
+  if (isset($variables['block']) && $variables['block']->module == 'devel') {
+    $variables['attributes']['class'][] = drupal_html_class('block-' . $variables['elements']['#block']->get('plugin'));
+  }
+}
+
+/**
+ * Implements hook_query_TAG_alter().
+ *
+ * Makes debugging entity query much easier.
+ *
+ * Example usage:
+ *   $query = \Drupal::entityQuery('node');
+ *   $query->condition('status', 1);
+ *   $query->addTag('debug');
+ *   $query->execute();
+ *
+ */
+function devel_query_debug_alter(AlterableInterface $query) {
+  if (!$query->hasTag('debug-semaphore')) {
+    $query->addTag('debug-semaphore');
+    dpq($query);
+  }
+}
diff --git a/modules/devel/devel.permissions.yml b/modules/devel/devel.permissions.yml
new file mode 100644
index 0000000..256919d
--- /dev/null
+++ b/modules/devel/devel.permissions.yml
@@ -0,0 +1,14 @@
+access devel information:
+  description: 'View developer output like variable printouts, query log, etc.'
+  title: 'Access developer information'
+  restrict access: TRUE
+
+execute php code:
+  title: 'Execute PHP code'
+  description: 'Run arbitrary PHP from a block.'
+  restrict access: TRUE
+
+switch users:
+  title: 'Switch users'
+  description: 'Become any user on the site with just a click.'
+  restrict access: TRUE
diff --git a/modules/devel/devel.routing.yml b/modules/devel/devel.routing.yml
new file mode 100644
index 0000000..d2372e7
--- /dev/null
+++ b/modules/devel/devel.routing.yml
@@ -0,0 +1,172 @@
+devel.admin_settings:
+  path: '/admin/config/development/devel'
+  defaults:
+    _form: '\Drupal\devel\Form\SettingsForm'
+    _title: 'Devel settings'
+  requirements:
+    _permission: 'administer site configuration'
+
+devel.reinstall:
+  path: '/devel/reinstall'
+  defaults:
+    _form: '\Drupal\devel\Form\DevelReinstall'
+    _title: 'Reinstall modules'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'administer site configuration'
+
+devel.menu_rebuild:
+  path: '/devel/menu/reset'
+  defaults:
+    _form: '\Drupal\devel\Form\DevelRebuildMenus'
+    _title: 'Rebuild menus'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'administer site configuration'
+
+devel.configs_list:
+  path: '/devel/config/{filter}'
+  options:
+    _admin_route: TRUE
+  defaults:
+    _form: '\Drupal\devel\Form\ConfigsList'
+    _title: 'Config editor'
+    filter: ''
+  requirements:
+    _permission: 'administer site configuration'
+
+devel.config_edit:
+  path: '/devel/config/edit/{config_name}'
+  defaults:
+    _form: '\Drupal\devel\Form\ConfigEditor'
+    _title: 'Edit configuration object: !config_name'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'administer site configuration'
+
+devel.state_system_page:
+  path: '/devel/state'
+  defaults:
+    _controller: '\Drupal\devel\Controller\DevelController::stateSystemPage'
+    _title: 'State editor'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'access devel information'
+
+devel.system_state_edit:
+  path: '/devel/state/edit/{state_name}'
+  defaults:
+    _form: '\Drupal\devel\Form\SystemStateEdit'
+    _title: 'Edit state variable: !state_name'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'administer site configuration'
+
+devel.menu_item:
+  path: '/devel/menu/item'
+  defaults:
+    _controller: '\Drupal\devel\Controller\DevelController::menuItem'
+    _title: 'Menu item'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'access devel information'
+
+devel.theme_registry:
+  path: '/devel/theme/registry'
+  defaults:
+    _controller: '\Drupal\devel\Controller\DevelController::themeRegistry'
+    _title: 'Theme registry'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'access devel information'
+
+devel.entity_info_page:
+  path: '/devel/entity/info'
+  defaults:
+    _controller: '\Drupal\devel\Controller\DevelController::entityInfoPage'
+    _title: 'Entity info'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'access devel information'
+
+devel.field_info_page:
+  path: '/devel/field/info'
+  defaults:
+    _controller: '\Drupal\devel\Controller\DevelController::fieldInfoPage'
+    _title: 'Field info'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'access devel information'
+
+devel.execute_php:
+  path: '/devel/php'
+  defaults:
+    _form: '\Drupal\devel\Form\ExecutePHP'
+    _title: 'Execute PHP code'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'execute php code'
+
+devel.session:
+  path: '/devel/session'
+  defaults:
+    _controller: '\Drupal\devel\Controller\DevelController::session'
+    _title: 'Session viewer'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'access devel information'
+
+devel.switch:
+  path: '/devel/switch/{name}'
+  defaults:
+    _controller: '\Drupal\devel\Controller\SwitchUserController::switchUser'
+    _title: 'Switch user'
+    name: ''
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'switch users'
+    _csrf_token: 'TRUE'
+
+devel.elements_page:
+  path: '/devel/elements'
+  defaults:
+    _controller: '\Drupal\devel\Controller\DevelController::elementsPage'
+    _title: 'Element Info'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'access devel information'
+
+devel.cache_clear:
+  path: '/devel/cache/clear'
+  defaults:
+    _controller: '\Drupal\devel\Controller\DevelController::cacheClear'
+    _title: 'Clear cache'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'access devel information'
+    _csrf_token: 'TRUE'
+
+devel.run_cron:
+  path: '/devel/run-cron'
+  defaults:
+    _controller: '\Drupal\system\CronController::runManually'
+    _title: 'Run cron'
+  options:
+    _admin_route: TRUE
+  requirements:
+    _permission: 'administer site configuration'
+    _csrf_token: 'TRUE'
diff --git a/modules/devel/devel.rules.inc b/modules/devel/devel.rules.inc
new file mode 100644
index 0000000..0a7a078
--- /dev/null
+++ b/modules/devel/devel.rules.inc
@@ -0,0 +1,24 @@
+<?php
+
+/**
+ * Implements hook_rules_action_info().
+ */
+function devel_rules_action_info() {
+  return array(
+    'devel_debug' => array(
+      'base' => 'devel_rules_debug_action',
+      'label' => t('Debug value'),
+      'group' => t('Devel'),
+      'parameter' => array(
+        'value' => array('type' => 'unknown', 'label' => t('Value to debug')),
+      ),
+    ),
+  );
+}
+
+/**
+ * Rules action for debugging values.
+ */
+function devel_rules_debug_action($value) {
+  dpm($value);
+}
diff --git a/modules/devel/devel.services.yml b/modules/devel/devel.services.yml
new file mode 100644
index 0000000..cb3b3a7
--- /dev/null
+++ b/modules/devel/devel.services.yml
@@ -0,0 +1,12 @@
+services:
+  devel.event_subscriber:
+    class: Drupal\devel\EventSubscriber\DevelEventSubscriber
+    arguments: ['@config.factory', '@current_user', '@module_handler', '@url_generator']
+    tags:
+      - { name: event_subscriber }
+
+  devel.route_subscriber:
+    class: Drupal\devel\Routing\RouteSubscriber
+    arguments: ['@entity.manager']
+    tags:
+      - { name: event_subscriber }
diff --git a/modules/devel/devel_generate/README.txt b/modules/devel/devel_generate/README.txt
new file mode 100644
index 0000000..c5279d0
--- /dev/null
+++ b/modules/devel/devel_generate/README.txt
@@ -0,0 +1,42 @@
+This module creates the "DevelGenerate" plugin type.
+
+All you need to do to provide a new instance for "DevelGenerate" plugin type
+is to create your class extending "DevelGenerateBase" and following the next steps.
+
+1 - Declaring your plugin with annotations:
+
+/**
+ * Provides a ExampleDevelGenerate plugin.
+ *
+ * @DevelGenerate(
+ *   id = "example",
+ *   label = @Translation("example"),
+ *   description = @Translation("Generate a given number of example elements. Optionally delete current example elements."),
+ *   url = "example",
+ *   permission = "administer example",
+ *   settings = {
+ *     "num" = 50,
+ *     "kill" = FALSE,
+ *     "another_property" = "default_value"
+ *   }
+ * )
+ */
+
+2 - Implement "settingsForm" method to create a form using the properties from annotations.
+
+3 - Implement "handleDrushParams" method. It should return an array of values.
+
+4 - Implement "generateElements" method. You can write here your business logic
+using the array of values.
+
+Notes:
+
+You can alter existing properties for every plugin implementing hook_devel_generate_info_alter.
+
+DevelGenerateBaseInterface details base wrapping methods that most DevelGenerate implementations
+will want to directly inherit from Drupal\devel_generate\DevelGenerateBase.
+
+DevelGenerateFieldBaseInterface details base wrapping methods that most class implementations
+for supporting new field types will want to directly inherit from Drupal\devel_generate\DevelGenerateFieldBase.
+So to give support for a new field type should be enough to create a class called
+"DevelGenerateFieldNewfieldtype" extending DevelGenerateFieldBase and to implement "generateValues" method.
diff --git a/modules/devel/devel_generate/devel_generate.batch.inc b/modules/devel/devel_generate/devel_generate.batch.inc
new file mode 100644
index 0000000..2bfa690
--- /dev/null
+++ b/modules/devel/devel_generate/devel_generate.batch.inc
@@ -0,0 +1,25 @@
+<?php
+
+/**
+ * Wrapping function for invoking the right
+ * method responsible for handle a given batch operation.
+ * Available for every DevelGeneratePlugin.
+ */
+function devel_generate_operation(Drupal\devel_generate\DevelGenerateBaseInterface $class, $method, $vars, &$context) {
+  return $class->$method($vars, $context);
+}
+
+/**
+ * Common finish batch function available for
+ * every DevelGeneratePlugin.
+ */
+function devel_generate_batch_finished($success, $results, $operations) {
+
+  if ($success) {
+    $message = t('Finished @num elements created successfully.', array('@num' => $results['num']));
+  }
+  else {
+    $message = t('Finished with an error.');
+  }
+  drupal_set_message($message);
+}
diff --git a/modules/devel/devel_generate/devel_generate.drush.inc b/modules/devel/devel_generate/devel_generate.drush.inc
new file mode 100644
index 0000000..33ae8a2
--- /dev/null
+++ b/modules/devel/devel_generate/devel_generate.drush.inc
@@ -0,0 +1,196 @@
+<?php
+
+/**
+ * @file
+ *  Generate content, taxonomy, menu, and users via drush framework.
+ */
+use Drupal\devel_generate\DevelGenerateBaseInterface;
+use Drupal\devel_generate\DevelGeneratePluginManager;
+
+/**
+ * Implementation of hook_drush_command().
+ */
+function devel_generate_drush_command() {
+  $items['generate-users'] = array(
+    'callback' => 'drush_devel_generate',
+    'callback arguments' => array(
+      'plugin_id' => 'user',
+    ),
+    'description' => 'Create users.',
+    'arguments' => array(
+      'num' => 'Number of users to generate.',
+    ),
+    'options' => array(
+      'kill' => 'Delete all users before generating new ones.',
+      'roles' => 'A comma delimited list of role IDs which should be granted to the new users. No need to specify authenticated user role.',
+      'pass' => 'Specify a password to be set for all generated users.',
+    ),
+    'aliases' => array('genu'),
+  );
+  $items['generate-terms'] = array(
+    'callback' => 'drush_devel_generate',
+    'callback arguments' => array(
+      'plugin_id' => 'term',
+    ),
+    'description' => 'Create terms in specified vocabulary.',
+    'arguments' => array(
+      'machine_name' => 'Vocabulary machine name into which new terms will be inserted.',
+      'num' => 'Number of terms to insert. Defaults to 10.',
+    ),
+    'options' => array(
+      'kill' => 'Delete all terms in specified vocabulary before generating.',
+      'feedback' => 'An integer representing interval for insertion rate logging. Defaults to 1000',
+      'pipe' => 'Returns the list of generated terms, one per line.',
+    ),
+    'aliases' => array('gent'),
+
+  );
+  $items['generate-vocabs'] = array(
+    'callback' => 'drush_devel_generate',
+    'callback arguments' => array(
+      'plugin_id' => 'vocabulary',
+    ),
+    'description' => 'Create vocabularies.',
+    'arguments' => array(
+      'num' => 'Number of vocabularies to create. Defaults to 1.',
+    ),
+    'options' => array(
+      'kill' => 'Delete all vocabularies before generating.',
+      'pipe' => 'Returns the list of generated vocabularies, one per line.',
+    ),
+    'aliases' => array('genv'),
+  );
+  $items['generate-content'] = array(
+    'callback' => 'drush_devel_generate',
+    'callback arguments' => array(
+      'plugin_id' => 'content',
+    ),
+    'description' => 'Create content.',
+    'drupal dependencies' => array('devel_generate'),
+    'arguments' => array(
+      'num' => 'Number of nodes to generate.',
+      'max_comments' => 'Maximum number of comments to generate.',
+    ),
+    'options' => array(
+      'kill' => 'Delete all content before generating new content.',
+      'types' => 'A comma delimited list of content types to create. Defaults to page,article.',
+      'feedback' => 'An integer representing interval for insertion rate logging. Defaults to 1000',
+      'skip-fields' => 'A comma delimited list of fields to omit when generating random values',
+      'languages' => 'A comma-separated list of language codes',
+    ),
+    'aliases' => array('genc'),
+  );
+  $items['generate-menus'] = array(
+    'callback' => 'drush_devel_generate',
+    'callback arguments' => array(
+      'plugin_id' => 'menu',
+    ),
+    'description' => 'Create menus and menu items.',
+    'drupal dependencies' => array('devel_generate'), // Remove these once devel.module is moved down a directory. http://drupal.org/node/925246
+    'arguments' => array(
+      'number_menus' => 'Number of menus to generate. Defaults to 2.',
+      'number_links' => 'Number of links to generate. Defaults to 50.',
+      'max_depth' => 'Max link depth. Defaults to 3',
+      'max_width' => 'Max width of first level of links. Defaults to 8.',
+    ),
+    'options' => array(
+      'kill' => 'Delete all previously generated menus and links before generating new menus and links.',
+      'pipe' => 'Returns the list of generated menus, one per line.',
+    ),
+    'aliases' => array('genm'),
+  );
+  return $items;
+}
+
+/**
+ * Implements drush_hook_COMMAND_validate().
+ */
+function drush_devel_generate_generate_users_validate() {
+
+  //Array of "Callback arguments" and "command line args".
+  $params = func_get_args();
+  _drush_plugin_validate($params);
+}
+
+/**
+ * Implements drush_hook_COMMAND_validate().
+ */
+function drush_devel_generate_generate_terms_validate() {
+
+  //Array of "Callback arguments" and "command line args".
+  $params = func_get_args();
+  _drush_plugin_validate($params);
+}
+
+/**
+ * Implements drush_hook_COMMAND_validate().
+ */
+function drush_devel_generate_generate_vocabs_validate() {
+
+  //Array of "Callback arguments" and "command line args".
+  $params = func_get_args();
+  _drush_plugin_validate($params);
+}
+
+/**
+ * Implements drush_hook_COMMAND_validate().
+ */
+function drush_devel_generate_generate_content_validate() {
+
+  //Array of "Callback arguments" and "command line args".
+  $params = func_get_args();
+  _drush_plugin_validate($params);
+}
+
+/**
+ * Implements drush_hook_COMMAND_validate().
+ */
+function drush_devel_generate_generate_menus_validate() {
+
+  //Array of "Callback arguments" and "command line args".
+  $params = func_get_args();
+  _drush_plugin_validate($params);
+}
+
+/**
+ * Helper function which returns an array with a plugin instance
+ * for a given id and the validated values ready to be used by
+ * the generate() function of the plugin.
+ */
+function _drush_plugin_validate($params) {
+
+  $instance_and_values = &drupal_static('drush_devel_generate_generate_validate');
+  //Getting plugin_id and leaving the command line args
+  $plugin_id = array_shift($params);
+
+  if (!isset($instance_and_values[$plugin_id])) {
+
+    /** @var DevelGeneratePluginManager $manager */
+    $manager = \Drupal::service('plugin.manager.develgenerate');
+
+    /** @var DevelGenerateBaseInterface $instance */
+    $instance = $manager->createInstance($plugin_id, array());
+
+    //Plugin instance suit params in order to fit for generateElements
+    $values = $instance->validateDrushParams($params);
+    $instance_and_values[$plugin_id]['instance'] = $instance;
+    $instance_and_values[$plugin_id]['values'] = $values;
+  }
+
+  return $instance_and_values[$plugin_id];
+}
+
+/**
+ * Command callback. Generate a number of elements.
+ */
+function drush_devel_generate() {
+  $params = func_get_args();
+  $plugin_id = array_shift($params);
+  $instance_and_values = drupal_static('drush_devel_generate_generate_validate');
+
+  /** @var DevelGenerateBaseInterface $instance */
+  $instance = $instance_and_values[$plugin_id]['instance'];
+  $values = $instance_and_values[$plugin_id]['values'];
+  $instance->generate($values);
+
+}
diff --git a/modules/devel/devel_generate/devel_generate.info.yml b/modules/devel/devel_generate/devel_generate.info.yml
new file mode 100644
index 0000000..b5fac9f
--- /dev/null
+++ b/modules/devel/devel_generate/devel_generate.info.yml
@@ -0,0 +1,13 @@
+type: module
+name: 'Devel generate'
+description: 'Generate dummy users, nodes, menus, taxonomy terms...'
+package: Development
+# core: 8.x
+tags:
+ - developer
+
+# Information added by Drupal.org packaging script on 2015-11-08
+version: '8.x-1.x-dev'
+core: '8.x'
+project: 'devel'
+datestamp: 1446987552
diff --git a/modules/devel/devel_generate/devel_generate.module b/modules/devel/devel_generate/devel_generate.module
new file mode 100644
index 0000000..530a4fb
--- /dev/null
+++ b/modules/devel/devel_generate/devel_generate.module
@@ -0,0 +1,145 @@
+<?php
+
+use Drupal\Core\Entity\EntityInterface;
+use Drupal\Core\Field\FieldDefinitionInterface;
+use Drupal\comment\Plugin\Field\FieldType\CommentItemInterface;
+use Drupal\Component\Utility\Random;
+use Drupal\devel_generate\DevelGenerateBase;
+use Drupal\node\NodeInterface;
+
+/**
+ * Implements hook_menu_links_discovered_alter().
+ */
+function devel_generate_menu_links_discovered_alter(&$links) {
+  $devel_generate_plugins = $devel_generate_manager = \Drupal::service('plugin.manager.develgenerate')->getDefinitions();
+  foreach ($devel_generate_plugins as $id => $plugin) {
+    $label = $plugin['label'];
+    $links["devel_generate.$id"] = array(
+      'title' => "Generate $label",
+      'parent' => 'system.admin_config_development',
+      'description' => $plugin['description'],
+      'route_name' => "devel_generate.$id",
+    );
+  }
+}
+
+/**
+ * Implements hook_entity_insert().
+ *
+ * Inserts nodes properly based on generation options.
+ *
+ * @param \Drupal\Core\Entity\EntityInterface $entity
+ *  The base node created on submit. Inspects $node->devel_generate.
+ */
+function devel_generate_entity_insert(EntityInterface $entity) {
+  if ($entity->getEntityTypeId() != 'node' || !isset($entity->devel_generate)) {
+    return;
+  }
+  /** @var \Drupal\node\NodeInterface $entity */
+  $results = $entity->devel_generate;
+
+  if (!empty($results['max_comments'])) {
+    foreach ($entity->getFieldDefinitions() as $field_name => $field_definition) {
+      if ($field_definition->getType() == 'comment' && $entity->get($field_name)->status == CommentItemInterface::OPEN) {
+        // Add comments for each comment field on entity.
+        devel_generate_add_comments($entity, $field_definition, $results['users'], $results['max_comments'], $results['title_length']);
+      }
+    }
+  }
+
+  // Add an url alias. Cannot happen before save because we don't know the nid.
+  if (!empty($results['add_alias'])) {
+    $path = array(
+      'source' => '/node/' . $entity->id(),
+      'alias' => '/node-' . $entity->id() . '-' . $entity->bundle(),
+    );
+    \Drupal::service('path.alias_storage')->save($path['source'], $path['alias']);
+  }
+
+  // Add node statistics.
+  if (!empty($results['add_statistics']) && \Drupal::moduleHandler()->moduleExists('statistics')) {
+    devel_generate_add_statistics($entity);
+  }
+}
+
+/**
+ * Create comments and add them to a node.
+ *
+ * @param \Drupal\node\NodeInterface $node
+ *   Node to add comments to.
+ * @param \Drupal\Core\Field\FieldDefinitionInterface $field_definition
+ *   The field storage definition.
+ * @param array $users
+ *   Array of users to assign comment authors.
+ * @param int $max_comments
+ *   Max number of comments to generate per node.
+ * @param int $title_length
+ *   Max length of the title of the comments.
+ */
+function devel_generate_add_comments(NodeInterface $node, FieldDefinitionInterface $field_definition, $users, $max_comments, $title_length = 8) {
+  $parents = array();
+  $field_name = $field_definition->getName();
+  $num_comments = mt_rand(1, $max_comments);
+  for ($i = 1; $i <= $num_comments; $i++) {
+    switch ($i % 3) {
+      case 0:
+        // No parent.
+      case 1:
+        // Top level parent.
+        $parents = \Drupal::entityQuery('comment')
+          ->condition('pid', 0)
+          ->condition('entity_id', $node->id())
+          ->condition('entity_type', 'node')
+          ->condition('field_name', $field_name)
+          ->range(0, 1)
+          ->execute();
+        break;
+      case 2:
+        // Non top level parent.
+        $parents = \Drupal::entityQuery('comment')
+          ->condition('pid', 0, '>')
+          ->condition('entity_id', $node->id())
+          ->condition('entity_type', 'node')
+          ->condition('field_name', $field_name)
+          ->range(0, 1)
+          ->execute();
+        break;
+    }
+    $random = new Random();
+    $stub = array(
+      'entity_type' => $node->getEntityTypeId(),
+      'entity_id' => $node->id(),
+      'field_name' => $field_name,
+      'name' => 'devel generate',
+      'mail' => 'devel_generate@example.com',
+      'timestamp' => mt_rand($node->getCreatedTime(), REQUEST_TIME),
+      'subject' => substr($random->sentences(mt_rand(2, $title_length), TRUE), 0, 63),
+      'uid' => $users[array_rand($users)],
+      'langcode' => $node->language()->getId(),
+    );
+    if ($parents) {
+      $stub['pid'] = current($parents);
+    }
+    $comment = entity_create('comment', $stub);
+
+    //Populate all core fields on behalf of field.module
+    DevelGenerateBase::populateFields($comment);
+    $comment->save();
+  }
+}
+
+/**
+ * Generate statistics information for a node.
+ *
+ * @param \Drupal\node\NodeInterface $node
+ *   A node object.
+ */
+function devel_generate_add_statistics(NodeInterface $node) {
+  $statistic = array(
+    'nid' => $node->id(),
+    'totalcount' => mt_rand(0, 500),
+    'timestamp' => REQUEST_TIME - mt_rand(0, $node->getCreatedTime()),
+  );
+  $statistic['daycount'] = mt_rand(0, $statistic['totalcount']);
+  db_insert('node_counter')->fields($statistic)->execute();
+}
diff --git a/modules/devel/devel_generate/devel_generate.permissions.yml b/modules/devel/devel_generate/devel_generate.permissions.yml
new file mode 100644
index 0000000..10f9479
--- /dev/null
+++ b/modules/devel/devel_generate/devel_generate.permissions.yml
@@ -0,0 +1,5 @@
+administer devel_generate:
+  title: 'Administer devel_generate'
+
+permission_callbacks:
+  - \Drupal\devel_generate\DevelGeneratePermissions::permissions
diff --git a/modules/devel/devel_generate/devel_generate.routing.yml b/modules/devel/devel_generate/devel_generate.routing.yml
new file mode 100644
index 0000000..eeea668
--- /dev/null
+++ b/modules/devel/devel_generate/devel_generate.routing.yml
@@ -0,0 +1,2 @@
+route_callbacks:
+  - '\Drupal\devel_generate\Routing\DevelGenerateRoutes::routes'
\ No newline at end of file
diff --git a/modules/devel/devel_generate/devel_generate.services.yml b/modules/devel/devel_generate/devel_generate.services.yml
new file mode 100644
index 0000000..16025e1
--- /dev/null
+++ b/modules/devel/devel_generate/devel_generate.services.yml
@@ -0,0 +1,4 @@
+services:
+  plugin.manager.develgenerate:
+    class: Drupal\devel_generate\DevelGeneratePluginManager
+    parent: default_plugin_manager
diff --git a/modules/devel/devel_generate/src/Annotation/DevelGenerate.php b/modules/devel/devel_generate/src/Annotation/DevelGenerate.php
new file mode 100644
index 0000000..2fb2ac8
--- /dev/null
+++ b/modules/devel/devel_generate/src/Annotation/DevelGenerate.php
@@ -0,0 +1,91 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\Annotation\DevelGenerate.
+ */
+
+namespace Drupal\devel_generate\Annotation;
+
+use Drupal\Component\Annotation\Plugin;
+
+/**
+ * Defines a DevelGenerate annotation object.
+ *
+ * DevelGenerate handle the bulk creation of entites.
+ *
+ * Additional annotation keys for DevelGenerate can be defined in
+ * hook_devel_generate_info_alter().
+ *
+ * @Annotation
+ *
+ * @see \Drupal\devel_generate\DevelGeneratePluginManager
+ * @see \Drupal\devel_generate\DevelGenerateBaseInterface
+ */
+class DevelGenerate extends Plugin {
+
+  /**
+   * The plugin ID.
+   *
+   * @var string
+   */
+  public $id;
+
+  /**
+   * The human-readable name of the DevelGenerate type.
+   *
+   * @ingroup plugin_translatable
+   *
+   * @var \Drupal\Core\Annotation\Translation
+   */
+  public $label;
+
+  /**
+   * A short description of the DevelGenerate type.
+   *
+   * @ingroup plugin_translatable
+   *
+   * @var \Drupal\Core\Annotation\Translation
+   */
+  public $description;
+
+  /**
+   * A url to access the plugin settings form.
+   *
+   * @var string
+   */
+  public $url;
+
+  /**
+   * The permission required to access the plugin settings form.
+   *
+   * @var string
+   */
+  public $permission;
+
+  /**
+   * The name of the DevelGenerate class.
+   *
+   * This is not provided manually, it will be added by the discovery mechanism.
+   *
+   * @var string
+   */
+  public $class;
+
+  /**
+   * An array whose keys are the names of the settings available to the
+   * DevelGenerate settingsForm, and whose values are the default values for those settings.
+   *
+   * @var array
+   */
+  public $settings = array();
+
+  /**
+   * An array whose keys are the settings available to the
+   * DevelGenerate drush command: "suffix", "alias", "options" and "args".
+   *
+   * @var array
+   */
+  public $drushSettings = array();
+
+}
diff --git a/modules/devel/devel_generate/src/DevelGenerateBase.php b/modules/devel/devel_generate/src/DevelGenerateBase.php
new file mode 100644
index 0000000..70367d1
--- /dev/null
+++ b/modules/devel/devel_generate/src/DevelGenerateBase.php
@@ -0,0 +1,165 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\DevelGenerateBase.
+ */
+
+namespace Drupal\devel_generate;
+
+use Drupal\Component\Utility\Random;
+use Drupal\Core\Entity\EntityInterface;
+use Drupal\Core\Field\FieldStorageDefinitionInterface;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Plugin\PluginBase;
+
+/**
+ * Provides a base DevelGenerate plugin implementation.
+ */
+abstract class DevelGenerateBase extends PluginBase implements DevelGenerateBaseInterface {
+
+  /**
+   * The plugin settings.
+   *
+   * @var array
+   */
+  protected $settings = array();
+
+  /**
+   * The random data generator.
+   *
+   * @var \Drupal\Component\Utility\Random
+   */
+  protected $random;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getSetting($key) {
+    // Merge defaults if we have no value for the key.
+    if (!array_key_exists($key, $this->settings)) {
+      $this->settings = $this->getDefaultSettings();
+    }
+    return isset($this->settings[$key]) ? $this->settings[$key] : NULL;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getDefaultSettings() {
+    $definition = $this->getPluginDefinition();
+    return $definition['settings'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getSettings() {
+    return $this->settings;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function settingsForm(array $form, FormStateInterface $form_state) {
+    return array();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function generate(array $values) {
+    $this->generateElements($values);
+    $this->setMessage('Generate process complete.');
+  }
+
+  /**
+   * Business logic relating with each DevelGenerate plugin
+   *
+   * @param array $values
+   *   The input values from the settings form.
+   */
+  protected function generateElements(array $values) {
+
+  }
+
+  /**
+   * Populate the fields on a given entity with sample values.
+   *
+   * @param $entity
+   *  The entity to be enriched with sample field values.
+   */
+  public static function populateFields(EntityInterface $entity) {
+    /** @var \Drupal\field\FieldConfigInterface[] $instances */
+    $instances = entity_load_multiple_by_properties('field_config', array('entity_type' => $entity->getEntityType()->id(), 'bundle' => $entity->bundle()));
+
+    if ($skips = function_exists('drush_get_option') ? drush_get_option('skip-fields', '') : @$_REQUEST['skip-fields']) {
+      foreach (explode(',', $skips) as $skip) {
+        unset($instances[$skip]);
+      }
+    }
+
+    foreach ($instances as $instance) {
+      $field_storage = $instance->getFieldStorageDefinition();
+      $max = $cardinality = $field_storage->getCardinality();
+      if ($cardinality == FieldStorageDefinitionInterface::CARDINALITY_UNLIMITED) {
+        // Just an arbitrary number for 'unlimited'
+        $max = rand(1, 3);
+      }
+      $field_name = $field_storage->getName();
+      $entity->$field_name->generateSampleItems($max);
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function handleDrushParams($args) {
+
+  }
+
+  /**
+   * Set a message for either drush or the web interface.
+   *
+   * @param $msg
+   *  The message to display.
+   * @param $type
+   *  The message type, as defined by drupal_set_message().
+   */
+  protected function setMessage($msg, $type = 'status') {
+    $function = 'drupal_set_message';
+    if (function_exists('drush_log')) {
+      $function = 'drush_log';
+      $msg = strip_tags($msg);
+    }
+    $function($msg, $type);
+  }
+
+  /**
+   * Check if a given param is a number.
+   *
+   * @param mixed $number
+   *  The parameter to check.
+   *
+   * @return bool
+   *   TRUE if the parameter is a number, FALSE otherwise.
+   */
+  public static function isNumber($number) {
+    if ($number == NULL) return FALSE;
+    if (!is_numeric($number)) return FALSE;
+    return TRUE;
+  }
+
+  /**
+   * Returns the random data generator.
+   *
+   * @return \Drupal\Component\Utility\Random
+   *   The random data generator.
+   */
+  protected function getRandom() {
+    if (!$this->random) {
+      $this->random = new Random();
+    }
+    return $this->random;
+  }
+}
diff --git a/modules/devel/devel_generate/src/DevelGenerateBaseInterface.php b/modules/devel/devel_generate/src/DevelGenerateBaseInterface.php
new file mode 100644
index 0000000..007f009
--- /dev/null
+++ b/modules/devel/devel_generate/src/DevelGenerateBaseInterface.php
@@ -0,0 +1,71 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\DevelGenerateInterface.
+ */
+
+namespace Drupal\devel_generate;
+use Drupal\Component\Plugin\PluginInspectionInterface;
+use Drupal\Core\Form\FormStateInterface;
+
+/**
+ * Base interface definition for "DevelGenerate" plugins.
+ *
+ * This interface details base wrapping methods that most DevelGenerate implementations
+ * will want to directly inherit from Drupal\devel_generate\DevelGenerateBase.
+ *
+ * DevelGenerate impementationa plugins should developing settingsForm() and generateElements()
+ * to achieve its own behaviour.
+ *
+ */
+interface DevelGenerateBaseInterface extends PluginInspectionInterface {
+
+  /**
+   * Returns the array of settings, including defaults for missing settings.
+   *
+   * @return array
+   *   The array of settings.
+   */
+  function getSetting($key);
+
+  /**
+   * Returns the default settings for the plugin.
+   *
+   * @return array
+   *   The array of default setting values, keyed by setting names.
+   */
+  function getDefaultSettings();
+
+  /**
+   * Returns the current settings for the plugin.
+   *
+   * @return array
+   *   The array of current setting values, keyed by setting names.
+   */
+  function getSettings();
+
+  /**
+   * Returns the form for the plugin.
+   *
+   * @return array
+   *   The array of default setting values, keyed by setting names.
+   */
+  function settingsForm(array $form, FormStateInterface $form_state);
+
+  /**
+   * Execute the instructions in common for all DevelGenerate plugin
+   *
+   * @param array $values
+   *   The input values from the settings form.
+   */
+  function generate(array $values);
+
+  /**
+   * Responsible for validating Drush params.
+   *
+   * @Return an array of values ready to be used for generateElements()
+   */
+  function validateDrushParams($args);
+
+}
diff --git a/modules/devel/devel_generate/src/DevelGenerateException.php b/modules/devel/devel_generate/src/DevelGenerateException.php
new file mode 100644
index 0000000..f80fe48
--- /dev/null
+++ b/modules/devel/devel_generate/src/DevelGenerateException.php
@@ -0,0 +1,15 @@
+<?php
+/**
+ * @file
+ * Definition of Drupal\devel_generate\DevelGenerateException.
+ */
+namespace Drupal\devel_generate;
+
+use Drupal\Component\Plugin\Exception;
+
+/**
+ * DevelGenerateException extending Generic Plugin exception class.
+ */
+class DevelGenerateException extends \Exception {
+
+}
diff --git a/modules/devel/devel_generate/src/DevelGeneratePermissions.php b/modules/devel/devel_generate/src/DevelGeneratePermissions.php
new file mode 100644
index 0000000..555ffa6
--- /dev/null
+++ b/modules/devel/devel_generate/src/DevelGeneratePermissions.php
@@ -0,0 +1,68 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\DevelGeneratePermissions.
+ */
+
+namespace Drupal\devel_generate;
+
+use Drupal\Core\DependencyInjection\ContainerInjectionInterface;
+use Drupal\devel_generate\DevelGeneratePluginManager;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides dynamic permissions of the filter module.
+ */
+class DevelGeneratePermissions implements ContainerInjectionInterface {
+
+  /**
+   * The plugin manager.
+   *
+   * @var \Drupal\devel_generate\DevelGeneratePluginManager;
+   */
+  protected $develGeneratePluginManager;
+
+  /**
+   * Constructs a new DevelGeneratePermissions instance.
+   *
+   * @param \Drupal\devel_generate\DevelGeneratePluginManager $develGeneratePluginManager
+   *   The plugin manager.
+   */
+  public function __construct(DevelGeneratePluginManager $develGeneratePluginManager) {
+    $this->develGeneratePluginManager = $develGeneratePluginManager;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static($container->get('plugin.manager.develgenerate'));
+  }
+
+  /*
+   * A permissions callback.
+   *
+   * @see devel_generate.permissions.yml.
+   *
+   * @return array
+   */
+  function permissions() {
+    $devel_generate_plugins = $this->develGeneratePluginManager->getDefinitions();
+    foreach ($devel_generate_plugins as $plugin) {
+
+      $permission = $plugin['permission'];
+      $permissions[$permission] = array(
+        'title' => t($permission),
+      );
+    }
+
+//    $permissions = array(
+//      'administer devel_generate' => array(
+//        'title' => t('Administer devel generate'),
+//      ),
+//    );
+    return $permissions;
+  }
+
+}
diff --git a/modules/devel/devel_generate/src/DevelGeneratePluginManager.php b/modules/devel/devel_generate/src/DevelGeneratePluginManager.php
new file mode 100644
index 0000000..dd33f36
--- /dev/null
+++ b/modules/devel/devel_generate/src/DevelGeneratePluginManager.php
@@ -0,0 +1,36 @@
+<?php
+/**
+ * @file
+ * Contains \Drupal\devel_generate\DevelGeneratePluginManager.
+ */
+
+namespace Drupal\devel_generate;
+
+use Drupal\Core\Plugin\DefaultPluginManager;
+use Drupal\Core\Cache\CacheBackendInterface;
+use Drupal\Core\Extension\ModuleHandlerInterface;
+use Drupal\Core\Language\LanguageManagerInterface;
+
+/**
+ * Plugin type manager for DevelGenerate plugins.
+ */
+Class DevelGeneratePluginManager extends DefaultPluginManager {
+
+  /**
+   * Constructs a DevelGeneratePluginManager object.
+   *
+   * @param \Traversable $namespaces
+   *   An object that implements \Traversable which contains the root paths
+   *   keyed by the corresponding namespace to look for plugin implementations.
+   * @param \Drupal\Core\Cache\CacheBackendInterface $cache_backend
+   *   Cache backend instance to use.
+   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   *   The module handler to invoke the alter hook with.
+   */
+  public function __construct(\Traversable $namespaces, CacheBackendInterface $cache_backend, ModuleHandlerInterface $module_handler) {
+    parent::__construct('Plugin/DevelGenerate', $namespaces, $module_handler, NULL, 'Drupal\devel_generate\Annotation\DevelGenerate');
+    $this->alterInfo('devel_generate_info');
+    $this->setCacheBackend($cache_backend, 'devel_generate_plugins');
+  }
+
+}
diff --git a/modules/devel/devel_generate/src/Form/DevelGenerateForm.php b/modules/devel/devel_generate/src/Form/DevelGenerateForm.php
new file mode 100644
index 0000000..f6605f9
--- /dev/null
+++ b/modules/devel/devel_generate/src/Form/DevelGenerateForm.php
@@ -0,0 +1,110 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\Form\DevelGenerateForm.
+ */
+
+namespace Drupal\devel_generate\Form;
+
+use Drupal\Component\Plugin\PluginManagerInterface;
+use Drupal\Core\Form\FormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\devel_generate\DevelGenerateException;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Defines a form that allows privileged users to generate entities.
+ */
+class DevelGenerateForm extends FormBase {
+
+  /**
+   * The manager to be used for instantiating plugins.
+   *
+   * @var \Drupal\Component\Plugin\PluginManagerInterface
+   */
+  protected $develGenerateManager;
+
+  /**
+   * Constructs a new DevelGenerateForm object.
+   *
+   * @param \Drupal\Component\Plugin\PluginManagerInterface $devel_generate_manager
+   *   The manager to be used for instantiating plugins.
+   */
+  public function __construct(PluginManagerInterface $devel_generate_manager) {
+    $this->develGenerateManager = $devel_generate_manager;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('plugin.manager.develgenerate')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_generate_form_' . $this->getPluginIdFromRequest();
+  }
+
+  /**
+   * Returns the value of the param _plugin_id for the current request.
+   *
+   * @see \Drupal\devel_generate\Routing\DevelGenerateRouteSubscriber
+   */
+  protected function getPluginIdFromRequest() {
+    $request = $this->getRequest();
+    return $request->get('_plugin_id');
+  }
+
+  /**
+   * Returns a DevelGenerate plugin instance for a given plugin id.
+   *
+   * @param string $plugin_id
+   *   The plugin_id for the plugin instance.
+   *
+   * @return \Drupal\devel_generate\DevelGenerateBaseInterface
+   *   A DevelGenerate plugin instance.
+   */
+  public function getPluginInstance($plugin_id) {
+    $instance = $this->develGenerateManager->createInstance($plugin_id, array());
+    return $instance;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state) {
+    $plugin_id = $this->getPluginIdFromRequest();
+    $instance = $this->getPluginInstance($plugin_id);
+    $form = $instance->settingsForm($form, $form_state);
+    $form['actions'] = array('#type' => 'actions');
+    $form['actions']['submit'] = array(
+      '#type' => 'submit',
+      '#value' => $this->t('Generate'),
+      '#button_type' => 'primary',
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    try {
+      $plugin_id = $this->getPluginIdFromRequest();
+      $instance = $this->getPluginInstance($plugin_id);
+      $instance->generate($form_state->getValues());
+    }
+    catch (DevelGenerateException $e) {
+      $this->logger('DevelGenerate', $this->t('Failed to generate elements due to "%error".', array('%error' => $e->getMessage())));
+      drupal_set_message($this->t('Failed to generate elements due to "%error".', array('%error' => $e->getMessage())));
+    }
+  }
+
+}
diff --git a/modules/devel/devel_generate/src/Plugin/DevelGenerate/ContentDevelGenerate.php b/modules/devel/devel_generate/src/Plugin/DevelGenerate/ContentDevelGenerate.php
new file mode 100644
index 0000000..8e39b28
--- /dev/null
+++ b/modules/devel/devel_generate/src/Plugin/DevelGenerate/ContentDevelGenerate.php
@@ -0,0 +1,492 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\Plugin\DevelGenerate\ContentDevelGenerate.
+ */
+
+namespace Drupal\devel_generate\Plugin\DevelGenerate;
+
+use Drupal\comment\CommentManagerInterface;
+use Drupal\Component\Utility\SafeMarkup;
+use Drupal\Core\Datetime\DateFormatterInterface;
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\Core\Extension\ModuleHandlerInterface;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Language\LanguageInterface;
+use Drupal\Core\Language\LanguageManagerInterface;
+use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
+use Drupal\Core\Routing\UrlGeneratorInterface;
+use Drupal\devel_generate\DevelGenerateBase;
+use Drupal\field\Entity\FieldConfig;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides a ContentDevelGenerate plugin.
+ *
+ * @DevelGenerate(
+ *   id = "content",
+ *   label = @Translation("content"),
+ *   description = @Translation("Generate a given number of content. Optionally delete current content."),
+ *   url = "content",
+ *   permission = "administer devel_generate",
+ *   settings = {
+ *     "num" = 50,
+ *     "kill" = FALSE,
+ *     "max_comments" = 0,
+ *     "title_length" = 4
+ *   }
+ * )
+ */
+class ContentDevelGenerate extends DevelGenerateBase implements ContainerFactoryPluginInterface {
+
+  /**
+   * The node storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $nodeStorage;
+
+  /**
+   * The node type storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $nodeTypeStorage;
+
+  /**
+   * The module handler.
+   *
+   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   */
+  protected $moduleHandler;
+
+  /**
+   * The comment manager service.
+   *
+   * @var \Drupal\comment\CommentManagerInterface
+   */
+  protected $commentManager;
+
+  /**
+   * The language manager.
+   *
+   * @var \Drupal\Core\Language\LanguageManagerInterface
+   */
+  protected $languageManager;
+
+  /**
+   * The url generator service.
+   *
+   * @var \Drupal\Core\Routing\UrlGeneratorInterface
+   */
+  protected $urlGenerator;
+
+  /**
+   * The date formatter service.
+   *
+   * @var \Drupal\Core\Datetime\DateFormatterInterface
+   */
+  protected $dateFormatter;
+
+  /**
+   * @param array $configuration
+   *   A configuration array containing information about the plugin instance.
+   * @param string $plugin_id
+   *   The plugin ID for the plugin instance.
+   * @param array $plugin_definition
+   * @param \Drupal\Core\Entity\EntityStorageInterface $node_storage
+   *   The node storage.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $node_type_storage
+   *   The node type storage.
+   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   *   The module handler.
+   * @param \Drupal\comment\CommentManagerInterface $comment_manager
+   *   The comment manager service.
+   * @param \Drupal\Core\Language\LanguageManagerInterface $language_manager
+   *   The language manager.
+   * @param \Drupal\Core\Routing\UrlGeneratorInterface $url_generator
+   *   The url generator service.
+   * @param \Drupal\Core\Datetime\DateFormatterInterface $date_formatter
+   *   The date formatter service.
+   */
+  public function __construct(array $configuration, $plugin_id, array $plugin_definition, EntityStorageInterface $node_storage, EntityStorageInterface $node_type_storage, ModuleHandlerInterface $module_handler, CommentManagerInterface $comment_manager = NULL, LanguageManagerInterface $language_manager, UrlGeneratorInterface $url_generator, DateFormatterInterface $date_formatter) {
+    parent::__construct($configuration, $plugin_id, $plugin_definition);
+
+    $this->moduleHandler = $module_handler;
+    $this->nodeStorage = $node_storage;
+    $this->nodeTypeStorage = $node_type_storage;
+    $this->commentManager = $comment_manager;
+    $this->languageManager = $language_manager;
+    $this->urlGenerator = $url_generator;
+    $this->dateFormatter = $date_formatter;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
+    $entity_manager = $container->get('entity.manager');
+    return new static(
+      $configuration, $plugin_id, $plugin_definition,
+      $entity_manager->getStorage('node'),
+      $entity_manager->getStorage('node_type'),
+      $container->get('module_handler'),
+      $container->has('comment.manager') ? $container->get('comment.manager') : NULL,
+      $container->get('language_manager'),
+      $container->get('url_generator'),
+      $container->get('date.formatter')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function settingsForm(array $form, FormStateInterface $form_state) {
+    $types = $this->nodeTypeStorage->loadMultiple();
+
+    if (empty($types)) {
+      $create_url = $this->urlGenerator->generateFromRoute('node.type_add');
+      $this->setMessage($this->t('You do not have any content types that can be generated. <a href=":create-type">Go create a new content type</a>', array(':create-type' => $create_url)), 'error', FALSE);
+      return;
+    }
+
+    $options = array();
+
+    foreach ($types as $type) {
+      $options[$type->id()] = array(
+        'type' => array('#markup' => $type->label()),
+      );
+      if ($this->commentManager) {
+        $comment_fields = $this->commentManager->getFields('node');
+        $map = array($this->t('Hidden'), $this->t('Closed'), $this->t('Open'));
+
+        $fields = array();
+        foreach ($comment_fields as $field_name => $info) {
+          // Find all comment fields for the bundle.
+          if (in_array($type->id(), $info['bundles'])) {
+            $instance = FieldConfig::loadByName('node', $type->id(), $field_name);
+            $default_value = $instance->getDefaultValueLiteral();
+            $default_mode = reset($default_value);
+            $fields[] = SafeMarkup::format('@field: @state', array(
+              '@field' => $instance->label(),
+              '@state' => $map[$default_mode['status']],
+            ));
+          }
+        }
+        // @todo Refactor display of comment fields.
+        if (!empty($fields)) {
+          $options[$type->id()]['comments'] = array(
+            'data' => array(
+              '#theme' => 'item_list',
+              '#items' => $fields,
+            ),
+          );
+        }
+        else {
+          $options[$type->id()]['comments'] = $this->t('No comment fields');
+        }
+      }
+    }
+
+    $header = array(
+      'type' => $this->t('Content type'),
+    );
+    if ($this->commentManager) {
+      $header['comments'] = array(
+        'data' => $this->t('Comments'),
+        'class' => array(RESPONSIVE_PRIORITY_MEDIUM),
+      );
+    }
+
+    $form['node_types'] = array(
+      '#type' => 'tableselect',
+      '#header' => $header,
+      '#options' => $options,
+    );
+
+    $form['kill'] = array(
+      '#type' => 'checkbox',
+      '#title' => $this->t('<strong>Delete all content</strong> in these content types before generating new content.'),
+      '#default_value' => $this->getSetting('kill'),
+    );
+    $form['num'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('How many nodes would you like to generate?'),
+      '#default_value' => $this->getSetting('num'),
+      '#required' => TRUE,
+      '#min' => 0,
+    );
+
+    $options = array(1 => $this->t('Now'));
+    foreach (array(3600, 86400, 604800, 2592000, 31536000) as $interval) {
+      $options[$interval] = $this->dateFormatter->formatInterval($interval, 1) . ' ' . $this->t('ago');
+    }
+    $form['time_range'] = array(
+      '#type' => 'select',
+      '#title' => $this->t('How far back in time should the nodes be dated?'),
+      '#description' => $this->t('Node creation dates will be distributed randomly from the current time, back to the selected time.'),
+      '#options' => $options,
+      '#default_value' => 604800,
+    );
+
+    $form['max_comments'] = array(
+      '#type' => $this->moduleHandler->moduleExists('comment') ? 'number' : 'value',
+      '#title' => $this->t('Maximum number of comments per node.'),
+      '#description' => $this->t('You must also enable comments for the content types you are generating. Note that some nodes will randomly receive zero comments. Some will receive the max.'),
+      '#default_value' => $this->getSetting('max_comments'),
+      '#min' => 0,
+      '#access' => $this->moduleHandler->moduleExists('comment'),
+    );
+    $form['title_length'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('Maximum number of words in titles'),
+      '#default_value' => $this->getSetting('title_length'),
+      '#required' => TRUE,
+      '#min' => 1,
+      '#max' => 255,
+    );
+    $form['add_alias'] = array(
+      '#type' => 'checkbox',
+      '#disabled' => !$this->moduleHandler->moduleExists('path'),
+      '#description' => $this->t('Requires path.module'),
+      '#title' => $this->t('Add an url alias for each node.'),
+      '#default_value' => FALSE,
+    );
+    $form['add_statistics'] = array(
+      '#type' => 'checkbox',
+      '#title' => $this->t('Add statistics for each node (node_counter table).'),
+      '#default_value' => TRUE,
+      '#access' => $this->moduleHandler->moduleExists('statistics'),
+    );
+
+    $options = array();
+    // We always need a language.
+    $languages = $this->languageManager->getLanguages(LanguageInterface::STATE_ALL);
+    foreach ($languages as $langcode => $language) {
+      $options[$langcode] = $language->getName();
+    }
+
+    $form['add_language'] = array(
+      '#type' => 'select',
+      '#title' => $this->t('Set language on nodes'),
+      '#multiple' => TRUE,
+      '#description' => $this->t('Requires locale.module'),
+      '#options' => $options,
+      '#default_value' => array(
+        $this->languageManager->getDefaultLanguage()->getId(),
+      ),
+    );
+
+    $form['#redirect'] = FALSE;
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function generateElements(array $values) {
+    if ($values['num'] <= 50 && $values['max_comments'] <= 10) {
+      $this->generateContent($values);
+    }
+    else {
+      $this->generateBatchContent($values);
+    }
+  }
+
+  /**
+   * Method responsible for creating content when
+   * the number of elements is less than 50.
+   */
+  private function generateContent($values) {
+    $values['node_types'] = array_filter($values['node_types']);
+    if (!empty($values['kill']) && $values['node_types']) {
+      $this->contentKill($values);
+    }
+
+    if (!empty($values['node_types'])) {
+      // Generate nodes.
+      $this->develGenerateContentPreNode($values);
+      $start = time();
+      for ($i = 1; $i <= $values['num']; $i++) {
+        $this->develGenerateContentAddNode($values);
+        if (function_exists('drush_log') && $i % drush_get_option('feedback', 1000) == 0) {
+          $now = time();
+          drush_log(dt('Completed @feedback nodes (@rate nodes/min)', array('@feedback' => drush_get_option('feedback', 1000), '@rate' => (drush_get_option('feedback', 1000) * 60) / ($now - $start))), 'ok');
+          $start = $now;
+        }
+      }
+    }
+    $this->setMessage($this->formatPlural($values['num'], '1 node created.', 'Finished creating @count nodes'));
+  }
+
+  /**
+   * Method responsible for creating content when
+   * the number of elements is greater than 50.
+   */
+  private function generateBatchContent($values) {
+    // Setup the batch operations and save the variables.
+    $operations[] = array('devel_generate_operation', array($this, 'batchContentPreNode', $values));
+
+    // Add the kill operation.
+    if ($values['kill']) {
+      $operations[] = array('devel_generate_operation', array($this, 'batchContentKill', $values));
+    }
+
+    // Add the operations to create the nodes.
+    for ($num = 0; $num < $values['num']; $num ++) {
+      $operations[] = array('devel_generate_operation', array($this, 'batchContentAddNode', $values));
+    }
+
+    // Start the batch.
+    $batch = array(
+      'title' => $this->t('Generating Content'),
+      'operations' => $operations,
+      'finished' => 'devel_generate_batch_finished',
+      'file' => drupal_get_path('module', 'devel_generate') . '/devel_generate.batch.inc',
+    );
+    batch_set($batch);
+  }
+
+  public function batchContentPreNode($vars, &$context) {
+    $context['results'] = $vars;
+    $context['results']['num'] = 0;
+    $this->develGenerateContentPreNode($context['results']);
+  }
+
+  public function batchContentAddNode($vars, &$context) {
+    $this->develGenerateContentAddNode($context['results']);
+    $context['results']['num']++;
+  }
+
+  public function batchContentKill($vars, &$context) {
+    $this->contentKill($context['results']);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateDrushParams($args) {
+    $add_language = drush_get_option('languages');
+    if (!empty($add_language)) {
+      $add_language = explode(',', str_replace(' ', '', $add_language));
+      // Intersect with the enabled languages to make sure the language args
+      // passed are actually enabled.
+      $values['values']['add_language'] = array_intersect($add_language, array_keys($this->languageManager->getLanguages(LanguageInterface::STATE_ALL)));
+    }
+
+    $values['kill'] = drush_get_option('kill');
+    $values['title_length'] = 6;
+    $values['num'] = array_shift($args);
+    $values['max_comments'] = array_shift($args);
+    $all_types = array_keys(node_type_get_names());
+    $default_types = array_intersect(array('page', 'article'), $all_types);
+    $selected_types = _convert_csv_to_array(drush_get_option('types', $default_types));
+
+    if (empty($selected_types)) {
+      return drush_set_error('DEVEL_GENERATE_NO_CONTENT_TYPES', dt('No content types available'));
+    }
+
+    $values['node_types'] = array_combine($selected_types, $selected_types);
+    $node_types = array_filter($values['node_types']);
+
+    if (!empty($values['kill']) && empty($node_types)) {
+      return drush_set_error('DEVEL_GENERATE_INVALID_INPUT', dt('Please provide content type (--types) in which you want to delete the content.'));
+    }
+
+    return $values;
+  }
+
+  /**
+   * Deletes all nodes of given node types.
+   *
+   * @param array $values
+   *   The input values from the settings form.
+   */
+  protected function contentKill($values) {
+    $nids = $this->nodeStorage->getQuery()
+      ->condition('type', $values['node_types'], 'IN')
+      ->execute();
+
+    if (!empty($nids)) {
+      $nodes = $this->nodeStorage->loadMultiple($nids);
+      $this->nodeStorage->delete($nodes);
+      $this->setMessage($this->t('Deleted %count nodes.', array('%count' => count($nids))));
+    }
+  }
+
+  /**
+   * Return the same array passed as parameter
+   * but with an array of uids for the key 'users'.
+   */
+  protected function develGenerateContentPreNode(&$results) {
+    // Get user id.
+    $users = $this->getUsers();
+    $users = array_merge($users, array('0'));
+    $results['users'] = $users;
+  }
+
+  /**
+   * Create one node. Used by both batch and non-batch code branches.
+   */
+  protected function develGenerateContentAddNode(&$results) {
+    if (!isset($results['time_range'])) {
+      $results['time_range'] = 0;
+    }
+    $users = $results['users'];
+
+    $node_type = array_rand(array_filter($results['node_types']));
+    $uid = $users[array_rand($users)];
+
+    $node = $this->nodeStorage->create(array(
+      'nid' => NULL,
+      'type' => $node_type,
+      'title' => $this->getRandom()->sentences(mt_rand(1, $results['title_length']), TRUE),
+      'uid' => $uid,
+      'revision' => mt_rand(0, 1),
+      'status' => TRUE,
+      'promote' => mt_rand(0, 1),
+      'created' => REQUEST_TIME - mt_rand(0, $results['time_range']),
+      'langcode' => $this->getLangcode($results),
+    ));
+
+    // A flag to let hook_node_insert() implementations know that this is a
+    // generated node.
+    $node->devel_generate = $results;
+
+    // Populate all fields with sample values.
+    $this->populateFields($node);
+
+    // See devel_generate_node_insert() for actions that happen before and after
+    // this save.
+    $node->save();
+  }
+
+  /**
+   * Determine language based on $results.
+   */
+  protected function getLangcode($results) {
+    if (isset($results['add_language'])) {
+      $langcodes = $results['add_language'];
+      $langcode = $langcodes[array_rand($langcodes)];
+    }
+    else {
+      $langcode = $this->languageManager->getDefaultLanguage()->getId();
+    }
+    return $langcode;
+  }
+
+  /**
+   * Retrive 50 uids from the database.
+   */
+  protected function getUsers() {
+    $users = array();
+    $result = db_query_range("SELECT uid FROM {users}", 0, 50);
+    foreach ($result as $record) {
+      $users[] = $record->uid;
+    }
+    return $users;
+  }
+
+}
diff --git a/modules/devel/devel_generate/src/Plugin/DevelGenerate/MenuDevelGenerate.php b/modules/devel/devel_generate/src/Plugin/DevelGenerate/MenuDevelGenerate.php
new file mode 100644
index 0000000..98c2970
--- /dev/null
+++ b/modules/devel/devel_generate/src/Plugin/DevelGenerate/MenuDevelGenerate.php
@@ -0,0 +1,412 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\Plugin\DevelGenerate\MenuDevelGenerate.
+ */
+
+namespace Drupal\devel_generate\Plugin\DevelGenerate;
+
+use Drupal\Component\Utility\Unicode;
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\Core\Extension\ModuleHandlerInterface;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Menu\MenuLinkTreeInterface;
+use Drupal\Core\Menu\MenuTreeParameters;
+use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
+use Drupal\devel_generate\DevelGenerateBase;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides a MenuDevelGenerate plugin.
+ *
+ * @DevelGenerate(
+ *   id = "menu",
+ *   label = @Translation("menus"),
+ *   description = @Translation("Generate a given number of menus and menu links. Optionally delete current menus."),
+ *   url = "menu",
+ *   permission = "administer devel_generate",
+ *   settings = {
+ *     "num_menus" = 2,
+ *     "num_links" = 50,
+ *     "title_length" = 12,
+ *     "max_width" = 6,
+ *     "kill" = FALSE,
+ *   }
+ * )
+ */
+class MenuDevelGenerate extends DevelGenerateBase implements ContainerFactoryPluginInterface {
+
+  /**
+   * The menu tree service.
+   *
+   * @var \Drupal\Core\Menu\MenuLinkTreeInterface
+   */
+  protected $menuLinkTree;
+
+  /**
+   * The menu storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $menuStorage;
+
+  /**
+   * The menu link storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $menuLinkContentStorage;
+
+  /**
+   * The module handler.
+   *
+   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   */
+  protected $moduleHandler;
+
+  /**
+   * Constructs a MenuDevelGenerate object.
+   *
+   * @param array $configuration
+   *   A configuration array containing information about the plugin instance.
+   * @param string $plugin_id
+   *   The plugin ID for the plugin instance.
+   * @param mixed $plugin_definition
+   *   The plugin implementation definition.
+   * @param \Drupal\Core\Menu\MenuLinkTreeInterface $menu_tree
+   *   The menu tree service.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $menu_storage
+   *   The menu storage.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $menu_link_storage
+   *   The menu storage.
+   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   *   The module handler.
+   */
+  public function __construct(array $configuration, $plugin_id, $plugin_definition, MenuLinkTreeInterface $menu_tree, EntityStorageInterface $menu_storage, EntityStorageInterface $menu_link_storage, ModuleHandlerInterface $module_handler) {
+    parent::__construct($configuration, $plugin_id, $plugin_definition);
+
+    $this->menuLinkTree = $menu_tree;
+    $this->menuStorage = $menu_storage;
+    $this->menuLinkContentStorage = $menu_link_storage;
+    $this->moduleHandler = $module_handler;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
+    $entity_manager = $container->get('entity.manager');
+    return new static(
+      $configuration, $plugin_id, $plugin_definition,
+      $container->get('menu.link_tree'),
+      $entity_manager->getStorage('menu'),
+      $entity_manager->getStorage('menu_link_content'),
+      $container->get('module_handler')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function settingsForm(array $form, FormStateInterface $form_state) {
+    $menu_enabled = $this->moduleHandler->moduleExists('menu_ui');
+    if ($menu_enabled) {
+      $menus = array('__new-menu__' => $this->t('Create new menu(s)')) + menu_ui_get_menus();
+    }
+    else {
+      $menus = menu_list_system_menus();
+    }
+    $form['existing_menus'] = array(
+      '#type' => 'checkboxes',
+      '#title' => $this->t('Generate links for these menus'),
+      '#options' => $menus,
+      '#default_value' => array('__new-menu__'),
+      '#required' => TRUE,
+    );
+    if ($menu_enabled) {
+      $form['num_menus'] = array(
+        '#type' => 'number',
+        '#title' => $this->t('Number of new menus to create'),
+        '#default_value' => $this->getSetting('num_menus'),
+        '#min' => 0,
+        '#states' => array(
+          'visible' => array(
+            ':input[name="existing_menus[__new-menu__]"]' => array('checked' => TRUE),
+          ),
+        ),
+      );
+    }
+    $form['num_links'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('Number of links to generate'),
+      '#default_value' => $this->getSetting('num_links'),
+      '#required' => TRUE,
+      '#min' => 0,
+    );
+    $form['title_length'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('Maximum number of characters in menu and menu link names'),
+      '#description' => $this->t('The minimum length is 2.'),
+      '#default_value' => $this->getSetting('title_length'),
+      '#required' => TRUE,
+      '#min' => 2,
+      '#max' => 128,
+    );
+    $form['link_types'] = array(
+      '#type' => 'checkboxes',
+      '#title' => $this->t('Types of links to generate'),
+      '#options' => array(
+        'node' => $this->t('Nodes'),
+        'front' => $this->t('Front page'),
+        'external' => $this->t('External'),
+      ),
+      '#default_value' => array('node', 'front', 'external'),
+      '#required' => TRUE,
+    );
+    $form['max_depth'] = array(
+      '#type' => 'select',
+      '#title' => $this->t('Maximum link depth'),
+      '#options' => range(0, $this->menuLinkTree->maxDepth()),
+      '#default_value' => floor($this->menuLinkTree->maxDepth() / 2),
+      '#required' => TRUE,
+    );
+    unset($form['max_depth']['#options'][0]);
+    $form['max_width'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('Maximum menu width'),
+      '#default_value' => $this->getSetting('max_width'),
+      '#description' => $this->t('Limit the width of the generated menu\'s first level of links to a certain number of items.'),
+      '#required' => TRUE,
+      '#min' => 0,
+    );
+    $form['kill'] = array(
+      '#type' => 'checkbox',
+      '#title' => $this->t('Delete existing custom generated menus and menu links before generating new ones.'),
+      '#default_value' => $this->getSetting('kill'),
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function generateElements(array $values) {
+    // If the create new menus checkbox is off, set the number of new menus to 0.
+    if (!isset($values['existing_menus']['__new-menu__']) || !$values['existing_menus']['__new-menu__']) {
+      $values['num_menus'] = 0;
+    }
+    else {
+      // Unset the aux menu to avoid attach menu new items.
+      unset($values['existing_menus']['__new-menu__']);
+    }
+
+    // Delete custom menus.
+    if ($values['kill']) {
+      $this->deleteMenus();
+      $this->setMessage($this->t('Deleted existing menus and links.'));
+    }
+
+    // Generate new menus.
+    $new_menus = $this->generateMenus($values['num_menus'], $values['title_length']);
+    if (!empty($new_menus)) {
+      $this->setMessage($this->t('Created the following new menus: @menus', array('@menus' => implode(', ', $new_menus))));
+    }
+
+    // Generate new menu links.
+    $menus = $new_menus;
+    if (isset($values['existing_menus'])) {
+      $menus = $menus + $values['existing_menus'];
+    }
+    $new_links = $this->generateLinks($values['num_links'], $menus, $values['title_length'], $values['link_types'], $values['max_depth'], $values['max_width']);
+    $this->setMessage($this->t('Created @count new menu links.', array('@count' => count($new_links))));
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateDrushParams($args) {
+
+    $link_types = array('node', 'front', 'external');
+    $values = array(
+      'num_menus' => array_shift($args),
+      'num_links' => array_shift($args),
+      'kill' => drush_get_option('kill'),
+      'pipe' => drush_get_option('pipe'),
+      'link_types' => array_combine($link_types, $link_types),
+    );
+
+    $max_depth = array_shift($args);
+    $max_width = array_shift($args);
+    $values['max_depth'] = $max_depth ? $max_depth : 3;
+    $values['max_width'] = $max_width ? $max_width : 8;
+    $values['title_length'] = $this->getSetting('title_length');
+    $values['existing_menus']['__new-menu__'] = TRUE;
+
+    if ($this->isNumber($values['num_menus']) == FALSE) {
+      return drush_set_error('DEVEL_GENERATE_INVALID_INPUT', dt('Invalid number of menus'));
+    }
+    if ($this->isNumber($values['num_links']) == FALSE) {
+      return drush_set_error('DEVEL_GENERATE_INVALID_INPUT', dt('Invalid number of links'));
+    }
+    if ($this->isNumber($values['max_depth']) == FALSE || $values['max_depth'] > 9 || $values['max_depth'] < 1) {
+      return drush_set_error('DEVEL_GENERATE_INVALID_INPUT', dt('Invalid maximum link depth. Use a value between 1 and 9'));
+    }
+    if ($this->isNumber($values['max_width']) == FALSE || $values['max_width'] < 1) {
+      return drush_set_error('DEVEL_GENERATE_INVALID_INPUT', dt('Invalid maximum menu width. Use a positive numeric value.'));
+    }
+
+    return $values;
+  }
+
+  /**
+   * Deletes custom generated menus.
+   */
+  protected function deleteMenus() {
+    if ($this->moduleHandler->moduleExists('menu_ui')) {
+      $menu_ids = array();
+      foreach (menu_ui_get_menus(FALSE) as $menu => $menu_title) {
+        if (strpos($menu, 'devel-') === 0) {
+          $menu_ids[] = $menu;
+        }
+      }
+
+      if ($menu_ids) {
+        $menus = $this->menuStorage->loadMultiple($menu_ids);
+        $this->menuStorage->delete($menus);
+      }
+    }
+
+    // Delete menu links generated by devel.
+    $link_ids = $this->menuLinkContentStorage->getQuery()
+      ->condition('menu_name', 'devel', '<>')
+      ->condition('link__options', '%' . db_like('s:5:"devel";b:1') . '%', 'LIKE')
+      ->execute();
+
+    if ($link_ids) {
+      $links = $this->menuLinkContentStorage->loadMultiple($link_ids);
+      $this->menuLinkContentStorage->delete($links);
+    }
+
+  }
+
+  /**
+   * Generates new menus.
+   *
+   * @param int $num_menus
+   *   Number of menus to create.
+   * @param int $title_length
+   *   (optional) Maximum length per menu name.
+   *
+   * @return array
+   *   Array containing the generated vocabularies id.
+   */
+  protected function generateMenus($num_menus, $title_length = 12) {
+    $menus = array();
+
+    if ($this->moduleHandler->moduleExists('menu_ui')) {
+      for ($i = 1; $i <= $num_menus; $i++) {
+        $name = $this->getRandom()->word(mt_rand(2, max(2, $title_length)));
+
+        $menu = $this->menuStorage->create(array(
+          'label' => $name,
+          'id' => 'devel-' . Unicode::strtolower($name),
+          'description' => $this->t('Description of @name', array('@name' => $name)),
+        ));
+
+        $menu->save();
+        $menus[$menu->id()] = $menu->label();
+      }
+    }
+
+    return $menus;
+  }
+
+  /**
+   * Generates menu links in a tree structure.
+   */
+  protected function generateLinks($num_links, $menus, $title_length, $link_types, $max_depth, $max_width) {
+    $links = array();
+    $menus = array_keys(array_filter($menus));
+    $link_types = array_keys(array_filter($link_types));
+
+    $nids = array();
+    for ($i = 1; $i <= $num_links; $i++) {
+      // Pick a random menu.
+      $menu_name = $menus[array_rand($menus)];
+      // Build up our link.
+      $link_title = $this->getRandom()->word(mt_rand(2, max(2, $title_length)));
+      $link = $this->menuLinkContentStorage->create(array(
+        'menu_name' => $menu_name,
+        'weight' => mt_rand(-50, 50),
+        'title' => $link_title,
+        'bundle' => 'menu_link_content',
+        'description' => $this->t('Description of @title.', array('@title' => $link_title)),
+      ));
+      $link->link->options = array('devel' => TRUE);
+
+      // For the first $max_width items, make first level links.
+      if ($i <= $max_width) {
+        $depth = 0;
+      }
+      else {
+        // Otherwise, get a random parent menu depth.
+        $depth = mt_rand(1, max(1, $max_depth - 1));
+      }
+      // Get a random parent link from the proper depth.
+      do {
+        $parameters = new MenuTreeParameters();
+        $parameters->setMinDepth($depth);
+        $parameters->setMaxDepth($depth);
+        $tree = $this->menuLinkTree->load($menu_name, $parameters);
+
+        if ($tree) {
+          $link->parent = array_rand($tree);
+        }
+        $depth--;
+      } while (!$link->parent && $depth > 0);
+
+      $link_type = array_rand($link_types);
+      switch ($link_types[$link_type]) {
+        case 'node':
+          // Grab a random node ID.
+          $select = db_select('node_field_data', 'n')
+            ->fields('n', array('nid', 'title'))
+            ->condition('n.status', 1)
+            ->range(0, 1)
+            ->orderRandom();
+          // Don't put a node into the menu twice.
+          if (!empty($nids[$menu_name])) {
+            $select->condition('n.nid', $nids[$menu_name], 'NOT IN');
+          }
+          $node = $select->execute()->fetchAssoc();
+          if (isset($node['nid'])) {
+            $nids[$menu_name][] = $node['nid'];
+            $link->link->uri = 'entity:node/' . $node['nid'];
+            $link->title = $node['title'];
+            break;
+          }
+
+        case 'external':
+          $link->link->uri = 'http://www.example.com/';
+          break;
+
+        case 'front':
+          $link->link->uri = 'internal:/<front>';
+          break;
+
+        default:
+          $link->devel_link_type = $link_type;
+          break;
+      }
+
+      $link->save();
+
+      $links[$link->id()] = $link->link_title;
+    }
+
+    return $links;
+  }
+
+}
diff --git a/modules/devel/devel_generate/src/Plugin/DevelGenerate/TermDevelGenerate.php b/modules/devel/devel_generate/src/Plugin/DevelGenerate/TermDevelGenerate.php
new file mode 100644
index 0000000..ef61055
--- /dev/null
+++ b/modules/devel/devel_generate/src/Plugin/DevelGenerate/TermDevelGenerate.php
@@ -0,0 +1,261 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\Plugin\DevelGenerate\TermDevelGenerate.
+ */
+
+namespace Drupal\devel_generate\Plugin\DevelGenerate;
+
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Language\Language;
+use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
+use Drupal\devel_generate\DevelGenerateBase;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides a TermDevelGenerate plugin.
+ *
+ * @DevelGenerate(
+ *   id = "term",
+ *   label = @Translation("terms"),
+ *   description = @Translation("Generate a given number of terms. Optionally delete current terms."),
+ *   url = "term",
+ *   permission = "administer devel_generate",
+ *   settings = {
+ *     "num" = 10,
+ *     "title_length" = 12,
+ *     "kill" = FALSE,
+ *   }
+ * )
+ */
+class TermDevelGenerate extends DevelGenerateBase implements ContainerFactoryPluginInterface {
+
+  /**
+   * The vocabulary storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $vocabularyStorage;
+
+  /**
+   * The term storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $termStorage;
+
+  /**
+   * Constructs a new TermDevelGenerate object.
+   *
+   * @param array $configuration
+   *   A configuration array containing information about the plugin instance.
+   * @param string $plugin_id
+   *   The plugin_id for the plugin instance.
+   * @param mixed $plugin_definition
+   *   The plugin implementation definition.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $vocabulary_storage
+   *   The vocabulary storage.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $term_storage
+   *   The term storage.
+   */
+  public function __construct(array $configuration, $plugin_id, $plugin_definition, EntityStorageInterface $vocabulary_storage, EntityStorageInterface $term_storage) {
+    parent::__construct($configuration, $plugin_id, $plugin_definition);
+
+    $this->vocabularyStorage = $vocabulary_storage;
+    $this->termStorage = $term_storage;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
+    $entity_manager = $container->get('entity.manager');
+    return new static(
+      $configuration, $plugin_id, $plugin_definition,
+      $entity_manager->getStorage('taxonomy_vocabulary'),
+      $entity_manager->getStorage('taxonomy_term')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function settingsForm(array $form, FormStateInterface $form_state) {
+    $options = array();
+    foreach ($this->vocabularyStorage->loadMultiple() as $vocabulary) {
+      $options[$vocabulary->id()] = $vocabulary->label();
+    }
+    $form['vids'] = array(
+      '#type' => 'select',
+      '#multiple' => TRUE,
+      '#title' => $this->t('Vocabularies'),
+      '#required' => TRUE,
+      '#default_value' => 'tags',
+      '#options' => $options,
+      '#description' => $this->t('Restrict terms to these vocabularies.'),
+    );
+    $form['num'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('Number of terms?'),
+      '#default_value' => $this->getSetting('num'),
+      '#required' => TRUE,
+      '#min' => 0,
+    );
+    $form['title_length'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('Maximum number of characters in term names'),
+      '#default_value' => $this->getSetting('title_length'),
+      '#required' => TRUE,
+      '#min' => 2,
+      '#max' => 255,
+    );
+    $form['kill'] = array(
+      '#type' => 'checkbox',
+      '#title' => $this->t('Delete existing terms in specified vocabularies before generating new terms.'),
+      '#default_value' => $this->getSetting('kill'),
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function generateElements(array $values) {
+    if ($values['kill']) {
+      $this->deleteVocabularyTerms($values['vids']);
+      $this->setMessage($this->t('Deleted existing terms.'));
+    }
+
+    $vocabs = $this->vocabularyStorage->loadMultiple($values['vids']);
+    $new_terms = $this->generateTerms($values['num'], $vocabs, $values['title_length']);
+    if (!empty($new_terms)) {
+      $this->setMessage($this->t('Created the following new terms: @terms', array('@terms' => implode(', ', $new_terms))));
+    }
+  }
+
+  /**
+   * Deletes all terms of given vocabularies.
+   *
+   * @param array $vids
+   *   Array of vocabulary vid.
+   */
+  protected function deleteVocabularyTerms($vids) {
+    $tids = $this->vocabularyStorage->getToplevelTids($vids);
+    $terms = $this->termStorage->loadMultiple($tids);
+    $this->termStorage->delete($terms);
+  }
+
+  /**
+   * Generates taxonomy terms for a list of given vocabularies.
+   *
+   * @param int $records
+   *   Number of terms to create in total.
+   * @param \Drupal\taxonomy\TermInterface[] $vocabs
+   *   List of vocabularies to populate.
+   * @param int $maxlength
+   *   (optional) Maximum length per term.
+   *
+   * @return array
+   *   The list of names of the created terms.
+   */
+  protected function generateTerms($records, $vocabs, $maxlength = 12) {
+    $terms = array();
+
+    // Insert new data:
+    $max = db_query('SELECT MAX(tid) FROM {taxonomy_term_data}')->fetchField();
+    $start = time();
+    for ($i = 1; $i <= $records; $i++) {
+      $name = $this->getRandom()->word(mt_rand(2, $maxlength));
+
+      $values = array(
+        'name' => $name,
+        'description' => 'description of ' . $name,
+        'format' => filter_fallback_format(),
+        'weight' => mt_rand(0, 10),
+        'langcode' => Language::LANGCODE_NOT_SPECIFIED,
+      );
+
+      switch ($i % 2) {
+        case 1:
+          $vocab = $vocabs[array_rand($vocabs)];
+          $values['vid'] = $vocab->id();
+          $values['parent'] = array(0);
+          break;
+
+        default:
+          while (TRUE) {
+            // Keep trying to find a random parent.
+            $candidate = mt_rand(1, $max);
+            $query = db_select('taxonomy_term_data', 't');
+            $parent = $query
+              ->fields('t', array('tid', 'vid'))
+              ->condition('t.vid', array_keys($vocabs), 'IN')
+              ->condition('t.tid', $candidate, '>=')
+              ->range(0, 1)
+              ->execute()
+              ->fetchAssoc();
+            if ($parent['tid']) {
+              break;
+            }
+          }
+          $values['parent'] = array($parent['tid']);
+          // Slight speedup due to this property being set.
+          $values['vid'] = $parent['vid'];
+          break;
+      }
+
+      $term = $this->termStorage->create($values);
+
+      // Populate all fields with sample values.
+      $this->populateFields($term);
+      $term->save();
+
+      $max++;
+
+      if (function_exists('drush_log')) {
+        $feedback = drush_get_option('feedback', 1000);
+        if ($i % $feedback == 0) {
+          $now = time();
+          drush_log(dt('Completed @feedback terms (@rate terms/min)', array('@feedback' => $feedback, '@rate' => $feedback * 60 / ($now - $start))), 'ok');
+          $start = $now;
+        }
+      }
+
+      // Limit memory usage. Only report first 20 created terms.
+      if ($i < 20) {
+        $terms[] = $term->label();
+      }
+
+      unset($term);
+    }
+
+    return $terms;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateDrushParams($args) {
+    $vname = array_shift($args);
+    $values = array(
+      'num' => array_shift($args),
+      'kill' => drush_get_option('kill'),
+      'title_length' => 12,
+    );
+    // Try to convert machine name to a vocab ID
+    if (!$vocab = $this->vocabularyStorage->load($vname)) {
+      return drush_set_error('DEVEL_GENERATE_INVALID_INPUT', dt('Invalid vocabulary name: @name', array('@name' => $vname)));
+    }
+    if ($this->isNumber($values['num']) == FALSE) {
+      return drush_set_error('DEVEL_GENERATE_INVALID_INPUT', dt('Invalid number of terms: @num', array('@num' => $values['num'])));
+    }
+
+    $values['vids'] = array($vocab->id());
+
+    return $values;
+  }
+
+}
diff --git a/modules/devel/devel_generate/src/Plugin/DevelGenerate/UserDevelGenerate.php b/modules/devel/devel_generate/src/Plugin/DevelGenerate/UserDevelGenerate.php
new file mode 100644
index 0000000..ae08d00
--- /dev/null
+++ b/modules/devel/devel_generate/src/Plugin/DevelGenerate/UserDevelGenerate.php
@@ -0,0 +1,196 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\Plugin\DevelGenerate\UserDevelGenerate.
+ */
+
+namespace Drupal\devel_generate\Plugin\DevelGenerate;
+
+use Drupal\Core\Datetime\DateFormatterInterface;
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
+use Drupal\devel_generate\DevelGenerateBase;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides a UserDevelGenerate plugin.
+ *
+ * @DevelGenerate(
+ *   id = "user",
+ *   label = @Translation("users"),
+ *   description = @Translation("Generate a given number of users. Optionally delete current users."),
+ *   url = "user",
+ *   permission = "administer devel_generate",
+ *   settings = {
+ *     "num" = 50,
+ *     "kill" = FALSE,
+ *     "pass" = ""
+ *   }
+ * )
+ */
+class UserDevelGenerate extends DevelGenerateBase implements ContainerFactoryPluginInterface {
+
+  /**
+   * The user storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $userStorage;
+
+  /**
+   * The date formatter service.
+   *
+   * @var \Drupal\Core\Datetime\DateFormatterInterface
+   */
+  protected $dateFormatter;
+
+  /**
+   * Constructs a new UserDevelGenerate object.
+   *
+   * @param array $configuration
+   *   A configuration array containing information about the plugin instance.
+   * @param string $plugin_id
+   *   The plugin_id for the plugin instance.
+   * @param mixed $plugin_definition
+   *   The plugin implementation definition.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $entity_storage
+   *   The user storage.
+   * @param \Drupal\Core\Datetime\DateFormatterInterface $date_formatter
+   *   The date formatter service.
+   */
+  public function __construct(array $configuration, $plugin_id, $plugin_definition, EntityStorageInterface $entity_storage, DateFormatterInterface $date_formatter) {
+    parent::__construct($configuration, $plugin_id, $plugin_definition);
+
+    $this->userStorage = $entity_storage;
+    $this->dateFormatter = $date_formatter;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
+    return new static(
+      $configuration, $plugin_id, $plugin_definition,
+      $container->get('entity.manager')->getStorage('user'),
+      $container->get('date.formatter')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function settingsForm(array $form, FormStateInterface $form_state) {
+    $form['num'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('How many users would you like to generate?'),
+      '#default_value' => $this->getSetting('num'),
+      '#required' => TRUE,
+      '#min' => 0,
+    );
+
+    $form['kill'] = array(
+      '#type' => 'checkbox',
+      '#title' => $this->t('Delete all users (except user id 1) before generating new users.'),
+      '#default_value' => $this->getSetting('kill'),
+    );
+
+    $options = user_role_names(TRUE);
+    unset($options[DRUPAL_AUTHENTICATED_RID]);
+    $form['roles'] = array(
+      '#type' => 'checkboxes',
+      '#title' => $this->t('Which roles should the users receive?'),
+      '#description' => $this->t('Users always receive the <em>authenticated user</em> role.'),
+      '#options' => $options,
+    );
+
+    $form['pass'] = array(
+      '#type' => 'textfield',
+      '#title' => $this->t('Password to be set'),
+      '#default_value' => $this->getSetting('pass'),
+      '#size' => 32,
+      '#description' => $this->t('Leave this field empty if you do not need to set a password'),
+    );
+
+    $options = array(1 => $this->t('Now'));
+    foreach (array(3600, 86400, 604800, 2592000, 31536000) as $interval) {
+      $options[$interval] = $this->dateFormatter->formatInterval($interval, 1) . ' ' . $this->t('ago');
+    }
+    $form['time_range'] = array(
+      '#type' => 'select',
+      '#title' => $this->t('How old should user accounts be?'),
+      '#description' => $this->t('User ages will be distributed randomly from the current time, back to the selected time.'),
+      '#options' => $options,
+      '#default_value' => 604800,
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function generateElements(array $values) {
+    $num = $values['num'];
+    $kill = $values['kill'];
+    $pass = $values['pass'];
+    $age = $values['time_range'];
+    $roles = array_filter($values['roles']);
+
+    if ($kill) {
+      $uids = $this->userStorage->getQuery()
+        ->condition('uid', 1, '>')
+        ->execute();
+      $users = $this->userStorage->loadMultiple($uids);
+      $this->userStorage->delete($users);
+
+      $this->setMessage($this->formatPlural(count($uids), '1 user deleted', '@count users deleted.'));
+    }
+
+    if ($num > 0) {
+      $names = array();
+      while (count($names) < $num) {
+        $name = $this->getRandom()->word(mt_rand(6, 12));
+        $names[$name] = '';
+      }
+
+      if (empty($roles)) {
+        $roles = array(DRUPAL_AUTHENTICATED_RID);
+      }
+      foreach ($names as $name => $value) {
+        $account = $this->userStorage->create(array(
+          'uid' => NULL,
+          'name' => $name,
+          'pass' => $pass,
+          'mail' => $name . '@example.com',
+          'status' => 1,
+          'created' => REQUEST_TIME - mt_rand(0, $age),
+          'roles' => array_values($roles),
+          // A flag to let hook_user_* know that this is a generated user.
+          'devel_generate' => TRUE,
+        ));
+
+        // Populate all fields with sample values.
+        $this->populateFields($account);
+        $account->save();
+      }
+    }
+    $this->setMessage($this->t('@num_users created.', array('@num_users' => $this->formatPlural($num, '1 user', '@count users'))));
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateDrushParams($args) {
+    $values = array(
+      'num' => array_shift($args),
+      'roles' => drush_get_option('roles') ? explode(',', drush_get_option('roles')) : array(),
+      'kill' => drush_get_option('kill'),
+      'pass' => drush_get_option('pass', NULL),
+      'time_range' => 0,
+    );
+    return $values;
+  }
+
+}
diff --git a/modules/devel/devel_generate/src/Plugin/DevelGenerate/VocabularyDevelGenerate.php b/modules/devel/devel_generate/src/Plugin/DevelGenerate/VocabularyDevelGenerate.php
new file mode 100644
index 0000000..9a83e94
--- /dev/null
+++ b/modules/devel/devel_generate/src/Plugin/DevelGenerate/VocabularyDevelGenerate.php
@@ -0,0 +1,180 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\Plugin\DevelGenerate\VocabularyDevelGenerate.
+ */
+
+namespace Drupal\devel_generate\Plugin\DevelGenerate;
+
+use Drupal\Component\Utility\Unicode;
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Language\Language;
+use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
+use Drupal\devel_generate\DevelGenerateBase;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides a VocabularyDevelGenerate plugin.
+ *
+ * @DevelGenerate(
+ *   id = "vocabulary",
+ *   label = @Translation("vocabularies"),
+ *   description = @Translation("Generate a given number of vocabularies. Optionally delete current vocabularies."),
+ *   url = "vocabs",
+ *   permission = "administer devel_generate",
+ *   settings = {
+ *     "num" = 1,
+ *     "title_length" = 12,
+ *     "kill" = FALSE
+ *   }
+ * )
+ */
+class VocabularyDevelGenerate extends DevelGenerateBase implements ContainerFactoryPluginInterface {
+
+  /**
+   * The vocabulary storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $vocabularyStorage;
+
+  /**
+   * Constructs a new VocabularyDevelGenerate object.
+   *
+   * @param array $configuration
+   *   A configuration array containing information about the plugin instance.
+   * @param string $plugin_id
+   *   The plugin_id for the plugin instance.
+   * @param mixed $plugin_definition
+   *   The plugin implementation definition.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $entity_storage
+   *   The vocabulary storage.
+   */
+  public function __construct(array $configuration, $plugin_id, $plugin_definition, EntityStorageInterface $entity_storage) {
+    parent::__construct($configuration, $plugin_id, $plugin_definition);
+
+    $this->vocabularyStorage = $entity_storage;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
+    return new static(
+      $configuration, $plugin_id, $plugin_definition,
+      $container->get('entity.manager')->getStorage('taxonomy_vocabulary')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function settingsForm(array $form, FormStateInterface $form_state) {
+    $form['num'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('Number of vocabularies?'),
+      '#default_value' => $this->getSetting('num'),
+      '#required' => TRUE,
+      '#min' => 0,
+    );
+    $form['title_length'] = array(
+      '#type' => 'number',
+      '#title' => $this->t('Maximum number of characters in vocabulary names'),
+      '#default_value' => $this->getSetting('title_length'),
+      '#required' => TRUE,
+      '#min' => 2,
+      '#max' => 255,
+    );
+    $form['kill'] = array(
+      '#type' => 'checkbox',
+      '#title' => $this->t('Delete existing vocabularies before generating new ones.'),
+      '#default_value' => $this->getSetting('kill'),
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function generateElements(array $values) {
+    if ($values['kill']) {
+      $this->deleteVocabularies();
+      $this->setMessage($this->t('Deleted existing vocabularies.'));
+    }
+
+    $new_vocs = $this->generateVocabularies($values['num'], $values['title_length']);
+    if (!empty($new_vocs)) {
+      $this->setMessage($this->t('Created the following new vocabularies: @vocs', array('@vocs' => implode(', ', $new_vocs))));
+    }
+  }
+
+  /**
+   * Deletes all vocabularies.
+   */
+  protected function deleteVocabularies() {
+    $vocabularies = $this->vocabularyStorage->loadMultiple();
+    $this->vocabularyStorage->delete($vocabularies);
+  }
+
+  /**
+   * Generates vocabularies.
+   *
+   * @param int $records
+   *   Number of vocabularies to create.
+   * @param int $maxlength
+   *   (optional) Maximum length for vocabulary name.
+   *
+   * @return array
+   *   Array containing the generated vocabularies id.
+   */
+  protected function generateVocabularies($records, $maxlength = 12) {
+    $vocabularies = array();
+
+    // Insert new data:
+    for ($i = 1; $i <= $records; $i++) {
+      $name = $this->getRandom()->word(mt_rand(2, $maxlength));
+
+      $vocabulary = $this->vocabularyStorage->create(array(
+        'name' => $name,
+        'vid' => Unicode::strtolower($name),
+        'langcode' => Language::LANGCODE_NOT_SPECIFIED,
+        'description' => "Description of $name",
+        'hierarchy' => 1,
+        'weight' => mt_rand(0, 10),
+        'multiple' => 1,
+        'required' => 0,
+        'relations' => 1,
+      ));
+
+      // Populate all fields with sample values.
+      $this->populateFields($vocabulary);
+      $vocabulary->save();
+
+      $vocabularies[] = $vocabulary->id();
+      unset($vocabulary);
+    }
+
+    return $vocabularies;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateDrushParams($args) {
+    $values = array(
+      'num' => array_shift($args),
+      'kill' => drush_get_option('kill'),
+      'title_length' => 12,
+    );
+
+    if ($this->isNumber($values['num']) == FALSE) {
+      return drush_set_error('DEVEL_GENERATE_INVALID_INPUT', dt('Invalid number of vocabularies: @num.', array('@num' => $values['num'])));
+    }
+
+    return $values;
+  }
+
+}
diff --git a/modules/devel/devel_generate/src/Routing/DevelGenerateRoutes.php b/modules/devel/devel_generate/src/Routing/DevelGenerateRoutes.php
new file mode 100644
index 0000000..9e0224d
--- /dev/null
+++ b/modules/devel/devel_generate/src/Routing/DevelGenerateRoutes.php
@@ -0,0 +1,62 @@
+<?php
+
+/**
+ * @file
+ *
+ * Definition of \Drupal\devel_generate\Routing\DevelGenerateRouteSubscriber.
+ */
+namespace Drupal\devel_generate\Routing;
+
+use Drupal\Core\DependencyInjection\ContainerInjectionInterface;
+use Drupal\Component\Plugin\PluginManagerInterface;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+use Symfony\Component\Routing\Route;
+
+/**
+ * Provides dynamic routes for devel_generate.
+ */
+class DevelGenerateRoutes implements ContainerInjectionInterface {
+
+  /**
+   * Constructs a new devel_generate route subscriber.
+   *
+   * @param \Drupal\Component\Plugin\PluginManagerInterface $devel_generate_manager
+   *   The DevelGeneratePluginManager.
+   */
+  public function __construct(PluginManagerInterface $devel_generate_manager) {
+    $this->DevelGenerateManager = $devel_generate_manager;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('plugin.manager.develgenerate')
+    );
+  }
+
+  public function routes() {
+    $devel_generate_plugins = $this->DevelGenerateManager->getDefinitions();
+
+    $routes = array();
+    foreach ($devel_generate_plugins as $id => $plugin) {
+      $label = $plugin['label'];
+      $type_url_str = str_replace('_', '-', $plugin['url']);
+      $routes["devel_generate.$id"] = new Route(
+        "admin/config/development/generate/$type_url_str",
+        array(
+          '_form' => '\Drupal\devel_generate\Form\DevelGenerateForm',
+          '_title' => "Generate $label",
+          '_plugin_id' => $id,
+        ),
+        array(
+          '_permission' => $plugin['permission'],
+        )
+      );
+    }
+
+    return $routes;
+  }
+
+}
diff --git a/modules/devel/devel_generate/src/Tests/DevelGenerateTest.php b/modules/devel/devel_generate/src/Tests/DevelGenerateTest.php
new file mode 100644
index 0000000..2aa04a3
--- /dev/null
+++ b/modules/devel/devel_generate/src/Tests/DevelGenerateTest.php
@@ -0,0 +1,172 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate\Tests\DevelGenerateTest.
+ */
+
+namespace Drupal\devel_generate\Tests;
+
+use Drupal\comment\Tests\CommentTestTrait;
+use Drupal\Component\Utility\Unicode;
+use Drupal\Core\Field\FieldStorageDefinitionInterface;
+use Drupal\Core\Language\Language;
+use Drupal\field\Tests\EntityReference\EntityReferenceTestTrait;
+use Drupal\node\Entity\Node;
+use Drupal\simpletest\WebTestBase;
+
+/**
+ * Tests the logic to generate data.
+ *
+ * @group devel_generate
+ */
+class DevelGenerateTest extends WebTestBase {
+
+  use CommentTestTrait;
+  use EntityReferenceTestTrait;
+
+  /**
+   * Vocabulary for testing.
+   *
+   * @var \Drupal\taxonomy\VocabularyInterface
+   */
+  protected $vocabulary;
+
+  /**
+   * Modules to enable.
+   *
+   * @var array
+   */
+  public static $modules = array('menu_ui', 'node', 'comment', 'taxonomy', 'path', 'devel_generate');
+
+  /**
+   * Prepares the testing environment
+   */
+  public function setUp() {
+    parent::setUp();
+
+    // Create Basic page and Article node types.
+    if ($this->profile != 'standard') {
+      $this->drupalCreateContentType(array('type' => 'page', 'name' => 'Basic Page'));
+      $this->drupalCreateContentType(array('type' => 'article', 'name' => 'Article'));
+      $this->addDefaultCommentField('node', 'article');
+    }
+
+    // Creating a vocabulary to associate taxonomy terms generated.
+    $this->vocabulary = entity_create('taxonomy_vocabulary', array(
+      'name' => $this->randomMachineName(),
+      'description' => $this->randomMachineName(),
+      'vid' => Unicode::strtolower($this->randomMachineName()),
+      'langcode' => Language::LANGCODE_NOT_SPECIFIED,
+      'weight' => mt_rand(0, 10),
+    ));
+    $this->vocabulary->save();
+
+    // Creates a field of an entity reference field storage on article.
+    $field_name = 'taxonomy_' . $this->vocabulary->id();
+
+    $handler_settings = array(
+      'target_bundles' => array(
+        $this->vocabulary->id() => $this->vocabulary->id(),
+      ),
+      'auto_create' => TRUE,
+    );
+    $this->createEntityReferenceField('node', 'article', $field_name, NULL, 'taxonomy_term', 'default', $handler_settings, FieldStorageDefinitionInterface::CARDINALITY_UNLIMITED);
+
+    entity_get_form_display('node', 'article', 'default')
+      ->setComponent($field_name, array(
+        'type' => 'options_select',
+      ))
+      ->save();
+
+    entity_get_display('node', 'article', 'default')
+      ->setComponent($field_name, array(
+        'type' => 'entity_reference_label',
+      ))
+      ->save();
+
+    $admin_user = $this->drupalCreateUser(array('administer devel_generate'));
+    $this->drupalLogin($admin_user);
+  }
+
+  /**
+   * Tests generate commands
+   */
+  public function testDevelGenerate() {
+    // Creating users.
+    $edit = array(
+      'num' => 4,
+    );
+    $this->drupalPostForm('admin/config/development/generate/user', $edit, t('Generate'));
+    $this->assertText(t('4 users created.'));
+    $this->assertText(t('Generate process complete.'));
+
+    // Creating content.
+    // First we create a node in order to test the Delete content checkbox.
+    $this->drupalCreateNode(array('type' => 'article'));
+
+    $edit = array(
+      'num' => 4,
+      'kill' => TRUE,
+      'node_types[article]' => TRUE,
+      'time_range' => 604800,
+      'max_comments' => 3,
+      'title_length' => 4,
+      'add_alias' => 1,
+    );
+    $this->drupalPostForm('admin/config/development/generate/content', $edit, t('Generate'));
+    $this->assertText(t('Deleted 1 nodes.'));
+    $this->assertText(t('Finished creating 4 nodes'));
+    $this->assertText(t('Generate process complete.'));
+
+    // Tests that nodes have been created in the generation process.
+    $nodes = Node::loadMultiple();
+    $this->assert(count($nodes) == 4, 'Nodes generated successfully.');
+
+    // Tests url alias for the generated nodes.
+    foreach ($nodes as $node) {
+      $alias = 'node-' . $node->id() . '-' . $node->bundle();
+      $this->drupalGet($alias);
+      $this->assertResponse('200');
+      $this->assertText($node->getTitle(), 'Generated url alias for the node works.');
+    }
+
+    // Creating terms.
+    $edit = array(
+      'vids[]' => $this->vocabulary->id(),
+      'num' => 5,
+      'title_length' => 12,
+    );
+    $this->drupalPostForm('admin/config/development/generate/term', $edit, t('Generate'));
+    $this->assertText(t('Created the following new terms: '));
+    $this->assertText(t('Generate process complete.'));
+
+    // Creating vocabularies.
+    $edit = array(
+      'num' => 5,
+      'title_length' => 12,
+      'kill' => TRUE,
+    );
+    $this->drupalPostForm('admin/config/development/generate/vocabs', $edit, t('Generate'));
+    $this->assertText(t('Created the following new vocabularies: '));
+    $this->assertText(t('Generate process complete.'));
+
+    // Creating menus.
+    $edit = array(
+      'num_menus' => 5,
+      'num_links' => 7,
+      'title_length' => 12,
+      'link_types[node]' => 1,
+      'link_types[front]' => 1,
+      'link_types[external]' => 1,
+      'max_depth' => 4,
+      'max_width' => 6,
+      'kill' => 1,
+    );
+    $this->drupalPostForm('admin/config/development/generate/menu', $edit, t('Generate'));
+    $this->assertText(t('Created the following new menus: '));
+    $this->assertText(t('Created 7 new menu links'));
+    $this->assertText(t('Generate process complete.'));
+  }
+
+}
diff --git a/modules/devel/devel_generate/tests/modules/devel_generate_example/devel_generate_example.info.yml b/modules/devel/devel_generate/tests/modules/devel_generate_example/devel_generate_example.info.yml
new file mode 100644
index 0000000..f4d341d
--- /dev/null
+++ b/modules/devel/devel_generate/tests/modules/devel_generate_example/devel_generate_example.info.yml
@@ -0,0 +1,14 @@
+name: 'Devel generate Example'
+type: module
+description: 'Create an example of DevelGenerate plugin type for testing purposing.'
+package: Development
+# core: 8.x
+configure: admin/config/development/generate
+tags:
+ - developer
+
+# Information added by Drupal.org packaging script on 2015-11-08
+version: '8.x-1.x-dev'
+core: '8.x'
+project: 'devel'
+datestamp: 1446987552
diff --git a/modules/devel/devel_generate/tests/modules/devel_generate_example/devel_generate_example.module b/modules/devel/devel_generate/tests/modules/devel_generate_example/devel_generate_example.module
new file mode 100644
index 0000000..b3d9bbc
--- /dev/null
+++ b/modules/devel/devel_generate/tests/modules/devel_generate_example/devel_generate_example.module
@@ -0,0 +1 @@
+<?php
diff --git a/modules/devel/devel_generate/tests/modules/devel_generate_example/src/Plugin/DevelGenerate/ExampleDevelGenerate.php b/modules/devel/devel_generate/tests/modules/devel_generate_example/src/Plugin/DevelGenerate/ExampleDevelGenerate.php
new file mode 100644
index 0000000..0608276
--- /dev/null
+++ b/modules/devel/devel_generate/tests/modules/devel_generate_example/src/Plugin/DevelGenerate/ExampleDevelGenerate.php
@@ -0,0 +1,93 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_generate_example\Plugin\DevelGenerate\ExampleDevelGenerate.
+ */
+
+namespace Drupal\devel_generate_example\Plugin\DevelGenerate;
+
+use Drupal\devel_generate\DevelGenerateBase;
+use Drupal\Core\Form\FormStateInterface;
+
+/**
+ * Provides a ExampleDevelGenerate plugin.
+ *
+ * @DevelGenerate(
+ *   id = "devel_generate_example",
+ *   label = "Example",
+ *   description = "Generate a given number of examples. Optionally delete current examples.",
+ *   url = "devel_generate_example",
+ *   permission = "administer devel_generate",
+ *   settings = {
+ *     "num" = 50,
+ *     "kill" = FALSE
+ *   }
+ * )
+ */
+class ExampleDevelGenerate extends DevelGenerateBase {
+
+  public function settingsForm(array $form, FormStateInterface $form_state) {
+
+    $form['num'] = array(
+      '#type' => 'textfield',
+      '#title' => $this->t('How many examples would you like to generate?'),
+      '#default_value' => $this->getSetting('num'),
+      '#size' => 10,
+    );
+
+    $form['kill'] = array(
+      '#type' => 'checkbox',
+      '#title' => $this->t('Delete all examples before generating new examples.'),
+      '#default_value' => $this->getSetting('kill'),
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function generateElements(array $values) {
+    $num = $values['num'];
+    $kill = $values['kill'];
+
+    if ($kill) {
+        $this->setMessage($this->t('Old examples have been deleted.'));
+    }
+
+    //Creating user in order to demonstrate
+    // how to override default business login generation.
+    $edit = array(
+      'uid'     => NULL,
+      'name'    => 'example_devel_generate',
+      'pass'    => '',
+      'mail'    => 'example_devel_generate@example.com',
+      'status'  => 1,
+      'created' => REQUEST_TIME,
+      'roles' => '',
+      'devel_generate' => TRUE // A flag to let hook_user_* know that this is a generated user.
+    );
+
+    $account = user_load_by_name('example_devel_generate');
+    if (!$account) {
+      $account = entity_create('user', $edit);
+    }
+
+    // Populate all fields with sample values.
+    $this->populateFields($node);
+
+    $account->save();
+
+    $this->setMessage($this->t('@num_examples created.', array('@num_examples' => $this->formatPlural($num, '1 example', '@count examples'))));
+  }
+
+  public function validateDrushParams($args) {
+    $values = array(
+      'num' => array_shift($args),
+      'kill' => drush_get_option('kill'),
+    );
+    return $values;
+  }
+
+}
diff --git a/modules/devel/devel_generate/tests/src/DevelGenerateManagerTest.php b/modules/devel/devel_generate/tests/src/DevelGenerateManagerTest.php
new file mode 100644
index 0000000..28e66e4
--- /dev/null
+++ b/modules/devel/devel_generate/tests/src/DevelGenerateManagerTest.php
@@ -0,0 +1,93 @@
+<?php
+
+namespace Drupal\Tests\devel_generate;
+
+use Drupal\Component\Plugin\Discovery\DiscoveryInterface;
+use Drupal\devel_generate\DevelGeneratePluginManager;
+use Drupal\Tests\UnitTestCase;
+use Drupal\Core\Language\Language;
+
+if (!defined('DRUPAL_ROOT')) {
+  //Looping to find drupal root folder.
+  $current_dir = dirname(__DIR__);
+  while (!file_exists("$current_dir/index.php")) {
+    $current_dir = dirname($current_dir);
+  }
+  define('DRUPAL_ROOT', $current_dir);
+}
+
+/**
+ * @coversDefaultClass \Drupal\devel_generate\DevelGeneratePluginManager
+ * @group devel_generate
+ */
+class DevelGenerateManagerTest extends UnitTestCase {
+
+  /**
+   * The plugin discovery.
+   *
+   * @var \Drupal\Component\Plugin\Discovery\DiscoveryInterface|\PHPUnit_Framework_MockObject_MockObject
+   */
+  protected $discovery;
+
+  /**
+   * A list of devel generate plugin definitions.
+   *
+   * @var array
+   */
+  protected $definitions = array(
+    'devel_generate_example' => array(
+      'id' => 'devel_generate_example',
+      'class' => 'Drupal\devel_generate_example\Plugin\DevelGenerate\ExampleDevelGenerate',
+      'url' => 'devel_generate_example',
+    ),
+  );
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function setUp() {
+    parent::setUp();
+    // Mock a Discovery object to replace AnnotationClassDiscovery.
+    $this->discovery = $this->getMock('Drupal\Component\Plugin\Discovery\DiscoveryInterface');
+    $this->discovery->expects($this->any())
+      ->method('getDefinitions')
+      ->will($this->returnValue($this->definitions));
+
+  }
+
+  /**
+   * Test creating an instance of the DevelGenerateManager.
+   */
+  public function testCreateInstance() {
+    $namespaces = new \ArrayObject(array('Drupal\devel_generate_example' => realpath(dirname(__FILE__) . '/../../../modules/devel_generate_example/lib')));
+    $cache_backend = $this->getMock('Drupal\Core\Cache\CacheBackendInterface');
+
+    $module_handler = $this->getMock('Drupal\Core\Extension\ModuleHandlerInterface');
+    $manager = new TestDevelGeneratePluginManager($namespaces, $cache_backend, $module_handler);
+    $manager->setDiscovery($this->discovery);
+
+    $example_instance = $manager->createInstance('devel_generate_example');
+    $plugin_def = $example_instance->getPluginDefinition();
+
+    $this->assertInstanceOf('Drupal\devel_generate_example\Plugin\DevelGenerate\ExampleDevelGenerate', $example_instance);
+    $this->assertArrayHasKey('url', $plugin_def);
+    $this->assertTrue($plugin_def['url'] == 'devel_generate_example');
+  }
+
+}
+
+/**
+ * Provides a testing version of DevelGeneratePluginManager with an empty
+ * constructor.
+ */
+class TestDevelGeneratePluginManager extends DevelGeneratePluginManager {
+  /**
+   * Sets the discovery for the manager.
+   *
+   * @param \Drupal\Component\Plugin\Discovery\DiscoveryInterface $discovery
+   *   The discovery object.
+   */
+  public function setDiscovery(DiscoveryInterface $discovery) {
+    $this->discovery = $discovery;
+  }
+}
diff --git a/modules/devel/devel_node_access/README.txt b/modules/devel/devel_node_access/README.txt
new file mode 100644
index 0000000..1d9362f
--- /dev/null
+++ b/modules/devel/devel_node_access/README.txt
@@ -0,0 +1,42 @@
+README
+======
+
+This module contains tools for developers using access control modules
+to restrict access to some nodes.  It is intended to help catch some
+common mistakes and provide feedback to confirm that restricted nodes
+are in fact visible only to the intended users.
+
+Provides a summary page which queries the node_access table and
+reports common mistakes such as the presence of Drupal's default entry
+which grants all users read access to all nodes.  Also reports the
+presence of nodes not represented in node_access table.  This may
+occur when an access control module is installed after nodes have
+already been created.
+
+Provides a block which shows all node_access entries for the nodes
+shown on a given page.  This gives developers a quick check to see
+that grants are provided as they should be.  This block auto-enables
+to the footer region. You may move it as desired.
+
+If Views module is installed, allows browsing of nodes by realm,
+including those nodes not in the node_access table (NULL realm).
+
+WISHLIST
+========
+
+Things I'd like to see but haven't had time to do:
+
+* Automatically solve common problems.  I.e. delete the "all" realm
+  entry, and automatically save all nodes not in the node_access table.
+
+* Nicer feedback indicating whether nodes are visible to the public or
+  not.  I.e. use color coding or icons.
+
+* Summary does not differentiate between view grants and other types
+  of grants.  I personally use node_access only for view grants so I'm
+  not sure exactly what else it should show.
+
+AUTHOR
+======
+
+Dave Cohen AKA yogadex on drupal.org
diff --git a/modules/devel/devel_node_access/config/install/devel_node_access.settings.yml b/modules/devel/devel_node_access/config/install/devel_node_access.settings.yml
new file mode 100644
index 0000000..717234e
--- /dev/null
+++ b/modules/devel/devel_node_access/config/install/devel_node_access.settings.yml
@@ -0,0 +1,2 @@
+debug_mode: TRUE
+user_ajax: FALSE
diff --git a/modules/devel/devel_node_access/config/menu.menu.devel.yml b/modules/devel/devel_node_access/config/menu.menu.devel.yml
new file mode 100644
index 0000000..987075e
--- /dev/null
+++ b/modules/devel/devel_node_access/config/menu.menu.devel.yml
@@ -0,0 +1,3 @@
+id: devel
+label: Development
+description: Development link
diff --git a/modules/devel/devel_node_access/config/schema/devel_node_access.schema.yml b/modules/devel/devel_node_access/config/schema/devel_node_access.schema.yml
new file mode 100644
index 0000000..4dc862c
--- /dev/null
+++ b/modules/devel/devel_node_access/config/schema/devel_node_access.schema.yml
@@ -0,0 +1,12 @@
+# Schema for the configuration files of the Action module.
+
+devel_node_access.settings:
+  type: mapping
+  label: 'Devel node access settings'
+  mapping:
+    debug_mode:
+      type: boolean
+      label: 'Debug mode'
+    user_ajax:
+      type: boolean
+      label: 'User ajax'
diff --git a/modules/devel/devel_node_access/devel_node_access.api.php b/modules/devel/devel_node_access/devel_node_access.api.php
new file mode 100644
index 0000000..49395c9
--- /dev/null
+++ b/modules/devel/devel_node_access/devel_node_access.api.php
@@ -0,0 +1,78 @@
+<?php
+
+/**
+ * @file
+ * Hook provided by the Devel Node Access module.
+ */
+
+/**
+ * @addtogroup hooks
+ * @{
+ */
+
+/**
+ * Explain your records in the {node_access} table.
+ *
+ * In order to help developers and administrators understand the forces
+ * that control access to any given node, the DNA module provides the
+ * Devel Node Access block, which lists all the grant records in the
+ * {node_access} table for that node.
+ *
+ * However, every Node Access module is free in how it defines and uses the
+ * 'realm' and 'gid' fields in its records in the {node_access} table, and
+ * it's often difficult to interpret them. This hook passes each record
+ * that DNA wants to display, and the owning module is expected to return
+ * an explanation of that record.
+ *
+ * The explanation should not be localized (not be passed through t()), so
+ * that administrators seeking help can present English explanations.
+ *
+ * @param $row
+ *   The record from the {node_access} table, as object. The member fields are:
+ *   nid, gid, realm, grant_view, grant_update, grant_delete.
+ *
+ * @return
+ *   A string with a (short!) explanation of the given {node_access} row,
+ *   to be displayed in DNA's 'Devel Node Access' block. It will be displayed
+ *   as HTML; any variable parts must already be sanitized.
+ *
+ * @see hook_node_access_records()
+ * @see devel_node_access_node_access_explain()
+ *
+ * @ingroup node_access
+ */
+function hook_node_access_explain($row) {
+  if ($row->realm == 'mymodule_myrealm') {
+    if ($row->grant_view) {
+      $role = user_role_load($row->gid);
+      return \Drupal\Component\Utility\SafeMarkup::format('Role %role may view this node.', array('%role' => $role->name)) ;
+    }
+    else {
+      return 'No access.';
+    }
+  }
+}
+
+/**
+ * Acknowledge ownership of 'alien' grant records.
+ *
+ * Some node access modules store grant records directly into the {node_access}
+ * table rather than returning them through hook_node_access_records(). This
+ * practice is not recommended and DNA will flag all such records as 'alien'.
+ *
+ * If this is unavoidable, a module can confess to being the owner of these
+ * grant records, so that DNA can properly attribute them.
+ *
+ * @see hook_node_access_records()
+ *
+ * @ingroup node_access
+ */
+function hook_node_access_acknowledge($grant) {
+  if ($grant['realm'] == 'mymodule_all' && $grant['nid'] == 0) {
+    return TRUE;
+  }
+}
+
+/**
+ * @} End of "addtogroup hooks".
+ */
diff --git a/modules/devel/devel_node_access/devel_node_access.info.yml b/modules/devel/devel_node_access/devel_node_access.info.yml
new file mode 100644
index 0000000..63cf16c
--- /dev/null
+++ b/modules/devel/devel_node_access/devel_node_access.info.yml
@@ -0,0 +1,17 @@
+type: module
+name: 'Devel node access'
+description: 'Developer blocks and page illustrating relevant node_access records.'
+package: Development
+# core: 8.x
+configure: admin/config/development/devel
+dependencies:
+ - devel
+ - menu_ui
+tags:
+ - developer
+
+# Information added by Drupal.org packaging script on 2015-11-08
+version: '8.x-1.x-dev'
+core: '8.x'
+project: 'devel'
+datestamp: 1446987552
diff --git a/modules/devel/devel_node_access/devel_node_access.install b/modules/devel/devel_node_access/devel_node_access.install
new file mode 100644
index 0000000..8b74555
--- /dev/null
+++ b/modules/devel/devel_node_access/devel_node_access.install
@@ -0,0 +1,11 @@
+<?php
+
+/**
+ * Implements hook_uninstall().
+ */
+function devel_node_access_uninstall() {
+  if (!\Drupal::moduleHandler()->moduleExists('devel') && ($devel_menu = menu_load('devel'))) {
+    // Delete the development menu.
+    $devel_menu->delete();
+  }
+}
diff --git a/modules/devel/devel_node_access/devel_node_access.js b/modules/devel/devel_node_access/devel_node_access.js
new file mode 100644
index 0000000..064b8f2
--- /dev/null
+++ b/modules/devel/devel_node_access/devel_node_access.js
@@ -0,0 +1,64 @@
+/**
+ * @file devel_node_access.js.
+ */
+
+(function ($) {
+
+  /**
+   * Perform the access by user ajax request.
+   */
+  function devel_node_access_user_ajax(context, settings) {
+    // Get the cell ID for the first .dna-permission that isn't processed.
+    var cell = $('td.dna-permission', context)
+               .not('.ajax-processed', context)
+               .attr('id');
+    if (cell !== undefined) {
+      // Generate the URI from the basePath, path, data type, cell ID, and a
+      // random token to bypass caching.
+      var url = settings.path.basePath
+              + "?q="
+              + 'devel/node_access/by_user/json/'
+              + cell
+              + '/'
+              + Math.floor((1000000000 * Math.random())).toString(16);
+      // Execute Ajax callback and handle the response.
+      $.getJSON(url, function(data) {
+        $('#' + cell, context).html(data).addClass('ajax-processed');
+        // Call this function again.
+        devel_node_access_user_ajax(context);
+      });
+      // Ajax fails silently on error, mark bad requests with an error message.
+      // If the request is just slow this will update when the request succeeds.
+      setTimeout(
+        function() {
+          if ($('#' + cell, context).hasClass('ajax-processed') == false) {
+            $('#' + cell, context)
+              .html(
+                '<span class="error">'
+                + '<a href="' + url.replace('/json/', '/html/') + '">'
+                + Drupal.t('Error: could not explain access')
+                + '</a>'
+                + '</span>'
+              )
+              .addClass('ajax-processed');
+            // Call this function again.
+            devel_node_access_user_ajax(context);
+          }
+        },
+        3000
+      );
+
+    }
+  }
+
+  /**
+   * Attach the access by user behavior which initiates ajax.
+   */
+  Drupal.behaviors.develNodeAccessUserAjax = {
+    attach: function(context, settings) {
+      // Start the ajax.
+      devel_node_access_user_ajax(context, settings);
+    }
+  };
+
+})(jQuery);
diff --git a/modules/devel/devel_node_access/devel_node_access.libraries.yml b/modules/devel/devel_node_access/devel_node_access.libraries.yml
new file mode 100644
index 0000000..9a21de6
--- /dev/null
+++ b/modules/devel/devel_node_access/devel_node_access.libraries.yml
@@ -0,0 +1,4 @@
+node_access:
+  version: VERSION
+  js:
+    devel_node_access.js: {}
diff --git a/modules/devel/devel_node_access/devel_node_access.module b/modules/devel/devel_node_access/devel_node_access.module
new file mode 100644
index 0000000..bff7ba3
--- /dev/null
+++ b/modules/devel/devel_node_access/devel_node_access.module
@@ -0,0 +1,316 @@
+<?php
+/**
+ * @file
+ *
+ * This module gives developers feedback as to what their
+ * node_access table contains, and which nodes are protected or
+ * visible to the public.
+ *
+ */
+
+use Drupal\devel_node_access\DnaBlockBase;
+
+define('DNA_ACCESS_VIEW', 'view devel_node_access information');
+
+/**
+ * Implements hook_help().
+ */
+function devel_node_access_help($path, $arg) {
+  switch ($path) {
+    case 'admin/settings/modules#description':
+      return t('Development helper for node_access table');
+      break;
+    case 'admin/help#devel_node_access':
+      $output  = '<p>' . t('This module helps in site development.  Specifically, when an access control module is used to limit access to some or all nodes, this module provides some feedback showing the node_access table in the database.') . "</p>\n";
+      $output .= '<p>' . t('The node_access table is one method Drupal provides to hide content from some users while displaying it to others.  By default, Drupal shows all nodes to all users.  There are a number of optional modules which may be installed to hide content from some users.') . "</p>\n";
+      $output .= '<p>' . t('If you have not installed any of these modules, you really have no need for the devel_node_access module.  This module is intended for use during development, so that developers and admins can confirm that the node_access table is working as expected.  You probably do not want this module enabled on a production site.') . "</p>\n";
+      $output .= '<p>' . t('This module provides two blocks.  One called Devel Node Access by User is visible when a single node is shown on a page.  This block shows which users can view, update or delete the node shown.  Note that this block uses an inefficient algorithm to produce its output.  You should only enable this block on sites with very few user accounts.') . "</p>\n";
+      $output .= '<p>' . t('The second block provided by this module shows the entries in the node_access table for any nodes shown on the current page.  You can enable the debug mode on the <a href="@settings_page">settings page</a> to display much more information, but this can cause considerable overhead.  Because the tables shown are wide, it is recommended to enable the blocks in the page footer rather than a sidebar.',
+                          array('@settings_page' => url('admin/config/development/devel', array('fragment' => 'edit-devel-node-access')))
+                          ) . "</p>\n";
+      $output .= '<p>' . t('This module also provides a <a href="@summary_page">summary page</a> which shows general information about your node_access table.  If you have installed the Views module, you may browse node_access by realm.',
+                          array('@summary_page' => url('devel/node_access/summary'))
+                          ) . "</p>\n";
+      return $output;
+  }
+}
+
+/**
+ * Implements hook_menu().
+ */
+function devel_node_access_menu() {
+  $items = array();
+
+  if (!\Drupal::moduleHandler()->moduleExists('devel')) {
+    // We have to create the 'Devel settings' menu item ourselves.
+    $items['admin/config/development/devel'] = array(
+      'title'            => 'Devel settings',
+      'description'      => 'Helper pages and blocks to assist Drupal developers and admins with node_access. The devel blocks can be managed via the <a href="' . url('admin/structure/block') . '">block administration</a> page.',
+      'page callback'    => 'drupal_get_form',
+      'page arguments'   => array('devel_node_access_admin_settings'),
+      'access arguments' => array('administer site configuration'),
+    );
+    $items['devel/settings'] = $items['admin/config/development/devel'] + array(
+      'menu_name' => 'devel',
+    );
+  }
+
+  // Create a callback for use by devel_node_access_user_ajax().
+  $items['devel/node_access/by_user/%/%'] = array(
+    'page callback'    => 'devel_node_access_user_ajax',
+    'page arguments'   => array(3, 4),
+    'access arguments' => array(DNA_ACCESS_VIEW),
+    'type'             => MENU_CALLBACK,
+  );
+
+  // Add this to the custom menu 'devel' created by the devel module.
+  $items['devel/node_access/summary'] = array(
+    'title'            => 'Node_access summary',
+    'page callback'    => 'dna_summary',
+    'access arguments' => array(DNA_ACCESS_VIEW),
+    'menu_name'        => 'devel',
+  );
+
+  return $items;
+}
+
+/**
+ * Builds the DNA settings form.
+ *
+ * Actually, this returns just an empty settings form, which is then
+ * form_altered(), just like the Devel settings form.
+ *
+ * @see devel_node_access_form_alter()
+ */
+function devel_node_access_admin_settings($form, &$form_state) {
+  return system_config_form($form, $form_state);
+}
+
+/**
+ * Submit handler for the DNA settings form.
+ */
+function devel_node_access_admin_settings_submit($form, &$form_state) {
+  $values = $form_state->getValues();
+  \Drupal::config('devel_node_access.settings')
+    ->set('debug_mode', $values['debug_mode'])
+    ->set('user_ajax', $values['user_ajax'])
+    ->save();
+}
+
+/**
+ * Implements hook_form_alter().
+ */
+function devel_node_access_form_alter(&$form, $form_state, $form_id) {
+  $tr = 't';
+  $config_devel_node_access = \Drupal::config('devel_node_access.settings');
+  if ($form_id == 'devel_admin_settings' || $form_id == 'devel_node_access_admin_settings') {
+    $form['devel_node_access'] = array(
+      '#type'        => 'fieldset',
+      '#title'       => t('Devel Node Access'),
+      '#collapsible' => TRUE,
+    );
+    $form['devel_node_access']['debug_mode'] = array(
+      '#type'          => 'checkbox',
+      '#title'         => t('Debug mode'),
+      '#default_value' => $config_devel_node_access->get('debug_mode'),
+      '#description'   => t('Debug mode verifies the grant records in the node_access table against those that would be set by running !Rebuild_permissions, and displays them all; this can cause considerable overhead.<br />For even more information enable the <a href="@link">%DNAbU block</a>, too.', array(
+        '!Rebuild_permissions' => l('[' . $tr('Rebuild permissions') . ']', 'admin/reports/status/rebuild'),
+        '%DNAbU' => t('Devel Node Access by User'),
+        '@link' => url('admin/structure/block/list'),
+      )),
+    );
+    $form['devel_node_access']['user_ajax'] = array(
+      '#type'          => 'checkbox',
+      '#title'         => t('Asynchronously populate the <em>Devel Node Access by User</em> block'),
+      '#default_value' => $config_devel_node_access->get('user_ajax'),
+      '#description'   => t("Use Ajax to populate the second DNA block. This loads the initial page faster and uses dynamic calls to build the data in the table, one request at a time. It's especially useful during development, if some of the calls are failing.") . '<br />' . t('JavaScript must be enabled in your browser.'),
+    );
+    // Push the Save button down.
+    $form['actions']['#weight'] = 10;
+    $form['#submit'][] = 'devel_node_access_admin_settings_submit';
+  }
+}
+
+/**
+ * Builds the DNA Summary page.
+ */
+function dna_summary() {
+  // Warn user if they have any entries that could grant access to all nodes.
+  $output = '';
+  $result = db_query('SELECT DISTINCT realm FROM {node_access} WHERE nid = 0 AND gid = 0');
+  $rows = array();
+  foreach ($result as $row) {
+    $rows[] = array($row->realm);
+  }
+  if (!empty($rows)) {
+    $output .= '<h3>' . t('Access Granted to All Nodes (All Users)') . "</h3>\n";
+    $output .= '<p>' . t('Your node_access table contains entries that may be granting all users access to all nodes.  Depending on which access control module(s) you use, you may want to delete these entries.  If you are not using an access control module, you should probably leave these entries as is.') . "</p>\n";
+    $headers = array(t('realm'));
+    $output .= theme('table', array('header' => $headers, 'rows' => $rows));
+    $access_granted_to_all_nodes = TRUE;
+  }
+
+  // How many nodes are not represented in the node_access table?
+  $num = db_query('SELECT COUNT(n.nid) AS num_nodes FROM {node} n LEFT JOIN {node_access} na ON n.nid = na.nid WHERE na.nid IS NULL')->fetchField();
+  if ($num) {
+    $output .= '<h3>' . t('Legacy Nodes') . "</h3>\n";
+    $output .= '<p>' .
+      t('You have !num nodes in your node table which are not represented in your node_access table.  If you have an access control module installed, these nodes may be hidden from all users.  This could be caused by publishing nodes before enabling the access control module.  If this is the case, manually updating each node should add it to the node_access table and fix the problem.', array('!num' => l($num, 'devel/node_access/view/NULL')))
+      . "</p>\n";
+    if (!empty($access_granted_to_all_nodes)) {
+      $output .= '<p>' .
+        t('This issue may be masked by the one above, so look into the former first.')
+        . "</p>\n";
+    }
+  }
+  else {
+    $output .= '<h3>' . t('All Nodes Represented') . "</h3>\n";
+    $output .= '<p>' . t('All nodes are represented in the node_access table.') . "</p>\n";
+  }
+
+
+  // A similar warning to the one above, but slightly more specific.
+  $result = db_query('SELECT DISTINCT realm FROM {node_access} WHERE nid = 0 AND gid <> 0');
+  $rows = array();
+  foreach ($result as $row) {
+    $rows[] = array($row->realm);
+  }
+  if (!empty($rows)) {
+    $output .= '<h3>' . t('Access Granted to All Nodes (Some Users)') . "</h3>\n";
+    $output .= '<p>' . t('Your node_access table contains entries that may be granting some users access to all nodes.  This may be perfectly normal, depending on which access control module(s) you use.') . "</p>\n";
+    $headers = array(t('realm'));
+    $output .= theme('table', array('header' => $headers, 'rows' => $rows));
+  }
+
+
+  // Find specific nodes which may be visible to all users.
+  $result = db_query('SELECT DISTINCT realm, COUNT(DISTINCT nid) as node_count FROM {node_access} WHERE gid = 0 AND nid > 0 GROUP BY realm');
+  $rows = array();
+  foreach ($result as $row) {
+    $rows[] = array(
+      $row->realm,
+      array(
+        'data'  => $row->node_count,
+        'align' => 'center',
+      ),
+    );
+  }
+  if (!empty($rows)) {
+    $output .= '<h3>' . t('Access Granted to Some Nodes') . "</h3>\n";
+    $output .= '<p>' .
+      t('The following realms appear to grant all users access to some specific nodes. This may be perfectly normal, if some of your content is available to the public.')
+      . "</p>\n";
+    $headers = array(t('realm'), t('public nodes'));
+    $output .= theme('table', array('header' => $headers, 'rows' => $rows, 'caption' => t('Public Nodes')));
+  }
+
+
+  // Find specific nodes protected by node_access table.
+  $result = db_query('SELECT DISTINCT realm, COUNT(DISTINCT nid) as node_count FROM {node_access} WHERE gid <> 0 AND nid > 0 GROUP BY realm');
+  $rows = array();
+  foreach ($result as $row) {
+    // No Views yet:
+    //$rows[] = array(l($row->realm, "devel/node_access/view/$row->realm"),
+    $rows[] = array(
+      $row->realm,
+      array(
+        'data' => $row->node_count,
+        'align' => 'center',
+      ),
+    );
+  }
+  if (!empty($rows)) {
+    $output .= '<h3>' . t('Summary by Realm') . "</h3>\n";
+    $output .= '<p>' . t('The following realms grant limited access to some specific nodes.') . "</p>\n";
+    $headers = array(t('realm'), t('private nodes'));
+    $output .= theme('table', array('header' => $headers, 'rows' => $rows, 'caption' => t('Protected Nodes')));
+  }
+
+  return $output;
+}
+
+/**
+ * Implements hook_node_view().
+ */
+function devel_node_access_node_view($build, $node, $display, $view_mode, $langcode) {
+  // Remember this node, for display in our block.
+  DnaBlockBase::visible_nodes($node->id());
+}
+
+/**
+ * Callback function for Node Access by User block ajax.
+ */
+function devel_node_access_user_ajax($data_type, $cell) {
+  list($op, $nid, $uid) = explode('-', $cell);
+  $node = node_load($nid);
+  $account = user_load($uid);
+  $output = array(
+    '#theme' => 'dna_permission',
+    '#permission' => DnaBlockBase::explain_access($op, $node, $account),
+  );
+  // JSON output for Ajax callbacks.
+  if ($data_type == 'json') {
+    drupal_json_output(drupal_render($output));
+    exit;
+  }
+  // HTML output for error message click-throughs.
+  if ($node) {
+    $node_title = l($node->title, 'node/' . $node->id());
+  }
+  else {
+    $node_title = t('unknown node %nid', array('%nid' => $nid));
+  }
+  drupal_set_title(
+    t(
+      'Devel node access: %op permission for !user on !node',
+      array(
+        '%op'   => $op,
+        '!user' => theme('username', array('account' => $account)),
+        '!node' => $node_title,
+      )
+    ),
+    PASS_THROUGH
+  );
+  return $output;
+}
+
+/**
+ * Implements hook_node_access_explain().
+ */
+function devel_node_access_node_access_explain($row) {
+  if ($row->gid == 0 && $row->realm == 'all') {
+    foreach (array('view', 'update', 'delete') as $op) {
+      $gop = 'grant_' . $op;
+      if (!empty($row->$gop)) {
+        $ops[] = $op;
+      }
+    }
+    if (empty($ops)) {
+      return '(No access granted to ' . ($row->nid == 0 ? 'any nodes.)' : 'this node.)');
+    }
+    else {
+      return 'All users may ' . implode('/', $ops) . ($row->nid == 0 ? ' all nodes.' : ' this node.');
+    }
+  }
+}
+
+/**
+ * Implements hook_theme().
+ */
+function devel_node_access_theme() {
+  return array(
+    'dna_permission' => array(
+      'variables'    => array(
+        'permission' => NULL,
+      ),
+    ),
+  );
+}
+
+/**
+ * Indicates whether user has a permission or not.
+ */
+function theme_dna_permission($variables) {
+  $permission = &$variables['permission'];
+  return '<span class="' . ($permission[0] ? 'ok' : 'error') . '" title="' . $permission[2] . '">' . $permission[1] . '</span>';
+}
diff --git a/modules/devel/devel_node_access/devel_node_access.permissions.yml b/modules/devel/devel_node_access/devel_node_access.permissions.yml
new file mode 100644
index 0000000..a24f707
--- /dev/null
+++ b/modules/devel/devel_node_access/devel_node_access.permissions.yml
@@ -0,0 +1,4 @@
+view devel_node_access information:
+  description: 'View the node access information blocks on node pages and the summary page.'
+  title: 'Access DNA information'
+  restrict access: TRUE
diff --git a/modules/devel/devel_node_access/src/DnaBlockBase.php b/modules/devel/devel_node_access/src/DnaBlockBase.php
new file mode 100644
index 0000000..539fe2b
--- /dev/null
+++ b/modules/devel/devel_node_access/src/DnaBlockBase.php
@@ -0,0 +1,195 @@
+<?php
+/**
+* @file
+* Contains \Drupal\devel_node_access\DnaBlockBase.
+*/
+
+namespace Drupal\devel_node_access;
+
+use Drupal\block\BlockBase;
+
+/**
+ * Provides the base class for the Devel Node Access blocks.
+ */
+abstract class DnaBlockBase extends BlockBase {
+
+  /**
+   * Helper function that mimics node.module's node_access() function.
+   *
+   * Unfortunately, this needs to be updated manually whenever node.module
+   * changes!
+   *
+   * @param $op
+   * @param $node
+   * @param null $account
+   * @param null $langcode
+   *
+   * @return array
+   *   An array suitable for theming with theme_dna_permission().
+   */
+  public static function explain_access($op, $node, $account = NULL, $langcode = NULL) {
+    global $user;
+
+    if (!$node) {
+      return array(
+        FALSE,
+        '???',
+        t('No node passed to node_access(); this should never happen!'),
+      );
+    }
+    if (!in_array($op, array('view', 'update', 'delete', 'create'), TRUE)) {
+      return array(
+        FALSE,
+        t('!NO: invalid $op', array('!NO' => t('NO'))),
+        t("'@op' is an invalid operation!", array('@op' => $op)),
+      );
+    }
+
+    if ($op == 'create' && is_object($node)) {
+      $node = $node->bundle();
+    }
+
+    if (!empty($account)) {
+      // To try to get the most authentic result we impersonate the given user!
+      // This may reveal bugs in other modules, leading to contradictory
+      // results.
+      $saved_user = $user;
+      drupal_save_session(FALSE);
+      $user = $account;
+      $result = DnaBlockBase::explain_access($op, $node, NULL, $langcode);
+      $user = $saved_user;
+      drupal_save_session(TRUE);
+      $second_opinion = node_access($op, $node, $account);
+      if ($second_opinion != $result[0]) {
+        $result[1] .= '<span class="' . ($second_opinion ? 'ok' : 'error') . '" title="Core seems to disagree on this item. This is a bug in either DNA or Core and should be fixed! Try to look at this node as this user and check whether there is still disagreement.">*</span>';
+      }
+      return $result;
+    }
+
+    if (empty($langcode)) {
+      $langcode = (is_object($node) && $node->id()) ? $node->langcode->value : '';
+    }
+
+    $variables = array(
+      '!NO'                 => t('NO'),
+      '!YES'                => t('YES'),
+      '!bypass_node_access' => t('bypass node access'),
+      '!access_content'     => t('access content'),
+    );
+
+    if (\Drupal::currentUser()->hasPermission('bypass node access')) {
+      return array(
+        TRUE,
+        t('!YES: bypass node access', $variables),
+        t("!YES: This user has the '!bypass_node_access' permission and may do everything with nodes.", $variables),
+      );
+    }
+
+    if (!\Drupal::currentUser()->hasPermission('access content')) {
+      return array(
+        FALSE,
+        t('!NO: access content', $variables),
+        t("!NO: This user does not have the '!access_content' permission and is denied doing anything with content.", $variables),
+      );
+    }
+
+    foreach (\Drupal::moduleHandler()->getImplementations('node_access') as $module) {
+      $function = $module . '_node_access';
+      if (function_exists($function)) {
+        $result = $function($node, $op, $user, $langcode);
+        if ($module == 'node') {
+          $module = 'node (permissions)';
+        }
+        if (isset($result)) {
+          if ($result === NODE_ACCESS_DENY) {
+            $denied_by[] = $module;
+          }
+          elseif ($result === NODE_ACCESS_ALLOW) {
+            $allowed_by[] = $module;
+          }
+          $access[] = $result;
+        }
+      }
+    }
+    $variables += array(
+      '@deniers'  => (empty($denied_by) ? NULL : implode(', ', $denied_by)),
+      '@allowers' => (empty($allowed_by) ? NULL : implode(', ', $allowed_by)),
+    );
+    if (!empty($denied_by)) {
+      $variables += array(
+        '%module' => $denied_by[0] . (count($denied_by) > 1 ? '+' : ''),
+      );
+      return array(
+        FALSE,
+        t('!NO: by %module', $variables),
+        empty($allowed_by)
+          ? t("!NO: hook_node_access() of the following module(s) denies this: @deniers.", $variables)
+          : t("!NO: hook_node_access() of the following module(s) denies this: @deniers &ndash; even though the following module(s) would allow it: @allowers.", $variables),
+      );
+    }
+    if (!empty($allowed_by)) {
+      $variables += array(
+        '%module' => $allowed_by[0] . (count($allowed_by) > 1 ? '+' : ''),
+        '!view_own_unpublished_content' => t('view own unpublished content'),
+      );
+      return array(
+        TRUE,
+        t('!YES: by %module', $variables),
+        t("!YES: hook_node_access() of the following module(s) allows this: @allowers.", $variables),
+      );
+    }
+
+    if ($op == 'view' && !$node->get('status', $langcode) && \Drupal::currentUser()->hasPermission('view own unpublished content') && $user->uid == $node->get('uid', $langcode) && $user->uid != 0) {
+      return array(
+        TRUE,
+        t('!YES: view own unpublished content', $variables),
+        t("!YES: The node is unpublished, but the user has the '!view_own_unpublished_content' permission.", $variables),
+      );
+    }
+
+    if ($op != 'create' && $node->id()) {
+      if (node_access($op, $node, $user, $langcode)) {  // delegate this part
+        $variables['@node_access_table'] = '{node_access}';
+        return array(
+          TRUE,
+          t('!YES: @node_access_table', $variables),
+          t('!YES: Node access allows this based on one or more records in the @node_access_table table (see the other DNA block!).', $variables),
+        );
+      }
+    }
+
+    return array(
+      FALSE,
+      t('!NO: no reason', $variables),
+      t("!NO: None of the checks resulted in allowing this, so it's denied.", $variables)
+        . ($op == 'create' ? ' ' . t('This is most likely due to a withheld permission.') : ''),
+    );
+  }
+
+  /**
+   * Collects the IDs of the visible nodes on the current page.
+   *
+   * @param null $nid
+   *   A node ID to save.
+   *
+   * @return array
+   *   The array of saved node IDs.
+   */
+  public static function visible_nodes($nid = NULL) {
+    static $nids = array();
+    if (isset($nid)) {
+      $nids[$nid] = $nid;
+    }
+    elseif (empty($nids)) {
+      $menu_item = menu_get_item();
+      $map = $menu_item['original_map'];
+      if ($map[0] == 'node' && isset($map[1]) && is_numeric($map[1]) && !isset($map[2])) {
+        // Show DNA information on node/NID even if access is denied
+        // (IF the user has the 'view devel_node_access information' perm)!
+        $nids[$map[1]] = $map[1];
+      }
+    }
+    return $nids;
+  }
+
+}
diff --git a/modules/devel/devel_node_access/src/Plugin/Block/DnaNode.php b/modules/devel/devel_node_access/src/Plugin/Block/DnaNode.php
new file mode 100644
index 0000000..8283681
--- /dev/null
+++ b/modules/devel/devel_node_access/src/Plugin/Block/DnaNode.php
@@ -0,0 +1,863 @@
+<?php
+/**
+ * @file
+ * Contains \Drupal\devel_node_access\Plugin\Block\DnaNode.
+ */
+
+namespace Drupal\devel_node_access\Plugin\Block;
+
+use Drupal\Component\Utility\Html;
+use Drupal\Core\Access\AccessResult;
+use Drupal\Core\Session\AccountInterface;
+use Drupal\devel_node_access\DnaBlockBase;
+
+/**
+ * Provides the "Devel Node Access" block.
+ *
+ * @Block(
+ *   id = "devel_dna_node_block",
+ *   admin_label = @Translation("Devel Node Access")
+ * )
+ */
+class DnaNode extends DnaBlockBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function access(AccountInterface $account) {
+    return AccessResult::allowedIfHasPermission($account, DNA_ACCESS_VIEW);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function build() {
+    $form_state = array();
+    $form_state->addBuildInfo('args', array());
+    $form_state->addBuildInfo('callback', array($this, 'buildForm'));
+    $form = drupal_build_form('devel_node_access_form', $form_state);
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm() {
+    global $user;
+
+    $visible_nodes = self::visible_nodes();
+    if (count($visible_nodes) == 0) {
+      return array();
+    }
+    else {
+      $single_nid = reset($visible_nodes);
+    }
+
+    // Find out whether our DnaUser block is active or not.
+    $blocks = \Drupal::entityManager()->getListController('block')->load();
+    $user_block_active = FALSE;
+    foreach ($blocks as $block) {
+      if ($block->get('plugin') == 'devel_dna_user_block') {
+        $user_block_active = TRUE;
+      }
+    }
+    $hint = '';
+    if (!$user_block_active) {
+      $hint = t('For per-user access permissions enable the <a href="@link">%DNAbU block</a>.', array('@link' => url('admin/structure/block'), '%DNAbU' => t('Devel Node Access by User')));
+    }
+
+    $output = array('title' => array(
+      '#prefix' => '<h2>',
+      '#markup' => t('node_access entries for nodes shown on this page'),
+      '#suffix' => '</h2>',
+    ));
+
+    // Include rows where nid == 0.
+    $nids = array_merge(array(0 => 0), $visible_nodes);
+    $query = db_select('node_access', 'na');
+    $query
+      ->fields('na')
+      ->condition('na.nid', $nids, 'IN')
+      ->orderBy('na.nid')
+      ->orderBy('na.realm')
+      ->orderBy('na.gid');
+    $nodes = node_load_multiple($nids);
+
+    if (!\Drupal::config('devel_node_access.settings')->get('debug_mode')) {
+      $headers = array(t('node'), t('realm'), t('gid'), t('view'), t('update'), t('delete'), t('explained'));
+      $rows = array();
+      foreach ($query->execute() as $row) {
+        $explained = \Drupal::moduleHandler()->invokeAll('node_access_explain', $row);
+        $rows[] = array(
+          (empty($row->nid) ? '0' : '<a href="#node-' . $row->nid . '">' . self::get_node_title($nodes[$row->nid], TRUE) . '</a>'),
+          $row->realm,
+          $row->gid,
+          $row->grant_view,
+          $row->grant_update,
+          $row->grant_delete,
+          implode('<br />', $explained),
+        );
+      }
+      $output[] = array(
+        '#theme'      => 'table',
+        '#header'     => $headers,
+        '#rows'       => $rows,
+        '#attributes' => array('style' => 'text-align: left')
+      );
+
+      $hint = t('To see more details enable <a href="@debug_mode">debug mode</a>.', array('@debug_mode' => url('admin/config/development/devel', array('fragment' => 'edit-devel-node-access')))) . (empty($hint) ? '' : ' ' . $hint);
+    }
+    else {
+      $tr = 't';
+      $variables = array('!na' => '{node_access}');
+      $states = array(
+        'default'      => array(t('default'),      'ok',      t('Default record supplied by core in the absence of any other non-empty records; in !na.', $variables)),
+        'ok'           => array(t('ok'),           'ok',      t('Highest priority record; in !na.', $variables)),
+        'removed'      => array(t('removed'),      '',        t('Was removed in @func; not in !na.', $variables + array('@func' => 'hook_node_access_records_alter()'))),
+        'static'       => array(t('static'),       'ok',      t('Non-standard record in !na.', $variables)),
+        'unexpected'   => array(t('unexpected'),   'warning', t('The 0/all/0/... record applies to all nodes and all users -- usually it should not be present in !na if any node access module is active!')),
+        'ignored'      => array(t('ignored'),      'warning', t('Lower priority record; not in !na and thus ignored.', $variables)),
+        'empty'        => array(t('empty'),        'warning', t('Does not grant any access, but could block lower priority records; not in !na.', $variables)),
+        'wrong'        => array(t('wrong'),        'error',   t('Is rightfully in !na but at least one access flag is wrong!', $variables)),
+        'missing'      => array(t('missing'),      'error',   t("Should be in !na but isn't!", $variables)),
+        'removed!'     => array(t('removed!'),     'error',   t('Was removed in @func; should NOT be in !na!', $variables + array('@func' => 'hook_node_access_records_alter()'))),
+        'illegitimate' => array(t('illegitimate'), 'error',   t('Should NOT be in !na because of lower priority!', $variables)),
+        'alien'        => array(t('alien'),        'error',   t('Should NOT be in !na because of unknown origin!', $variables)),
+      );
+      $active_states = array('default', 'ok', 'static', 'unexpected', 'wrong', 'illegitimate', 'alien');
+      $headers = array(t('node'), t('prio'), t('status'), t('realm'), t('gid'), t('view'), t('update'), t('delete'), t('explained'));
+      $headers = self::format_row($headers);
+      $active_records = array();
+      foreach ($query->execute() as $active_record) {
+        $active_records[$active_record->nid][$active_record->realm][$active_record->gid] = $active_record;
+      }
+      $all_records = $grants_data = $checked_grants = $grants = array();
+
+      foreach (array('view', 'update', 'delete') as $op) {
+        $grants[$op] = self::simulate_module_invoke_all('node_grants', $user, $op);
+        // Call all hook_node_grants_alter() implementations.
+        $grants_data[$op] = self::simulate_node_grants_alter($grants[$op], $user, $op);
+      }
+
+      foreach ($nids as $nid) {
+        $top_priority = -99999;
+        $acquired_records_nid = array();
+        if ($node = node_load($nid)) {
+          // Check node_access_acquire_grants().
+          $records = self::simulate_module_invoke_all('node_access_records', $node);
+          // Check drupal_alter('node_access_records').
+          $data = self::simulate_node_access_records_alter($records, $node);
+          if (!empty($data)) {
+            foreach ($data as $data_by_realm) {
+              foreach ($data_by_realm as $data_by_realm_gid) {
+                if (isset($data_by_realm_gid['current'])) {
+                  $record = $data_by_realm_gid['current'];
+                }
+                elseif (isset($data_by_realm_gid['original'])) {
+                  $record = $data_by_realm_gid['original'];
+                  $record['#removed'] = 1;
+                }
+                else {
+                  continue;
+                }
+                $priority = intval(isset($record['priority']) ? $record['priority'] : 0);
+                $top_priority = (isset($top_priority) ? max($top_priority, $priority) : $priority);
+                $record['priority'] = (isset($record['priority']) ? $priority : '&ndash;&nbsp;');
+                $record['history'] = $data_by_realm_gid;
+                $acquired_records_nid[$priority][$record['realm']][$record['gid']] = $record + array(
+                  '#title'  => self::get_node_title($node),
+                  '#module' => (isset($record['#module']) ? $record['#module'] : ''),
+                );
+              }
+            }
+            krsort($acquired_records_nid);
+          }
+          //dpm($acquired_records_nid, "acquired_records_nid =");
+
+          // Check node_access_grants().
+          if ($node->id()) {
+            foreach (array('view', 'update', 'delete') as $op) {
+              $checked_grants[$nid][$op] = array_merge(array('all' => array(0)), $grants[$op]);
+            }
+          }
+        }
+
+        // Check for records in the node_access table that aren't returned by
+        // node_access_acquire_grants().
+
+        if (isset($active_records[$nid])) {
+          foreach ($active_records[$nid] as $realm => $active_records_realm) {
+            foreach ($active_records_realm as $gid => $active_record) {
+              $found = FALSE;
+              $count_nonempty_records = 0;
+              foreach ($acquired_records_nid as $priority => $acquired_records_nid_priority) {
+                if (isset($acquired_records_nid_priority[$realm][$gid])) {
+                  $found = TRUE;
+                }
+              }
+              // Take the highest priority only.
+              // TODO This has changed in D8!
+              if ($acquired_records_nid_priority = reset($acquired_records_nid)) {
+                foreach ($acquired_records_nid_priority as $acquired_records_nid_priority_realm) {
+                  foreach ($acquired_records_nid_priority_realm as $acquired_records_nid_priority_realm_gid) {
+                    $count_nonempty_records += (!empty($acquired_records_nid_priority_realm_gid['grant_view']) || !empty($acquired_records_nid_priority_realm_gid['grant_update']) || !empty($acquired_records_nid_priority_realm_gid['grant_delete']));
+                  }
+                }
+              }
+              $fixed_record = (array) $active_record;
+              if ($count_nonempty_records == 0 && $realm == 'all' && $gid == 0) {
+                $fixed_record += array(
+                  'priority' => '&ndash;',
+                  'state'    => 'default',
+                );
+              }
+              elseif (!$found) {
+                $acknowledged = self::simulate_module_invoke_all('node_access_acknowledge', $fixed_record);
+                if (empty($acknowledged)) {
+                  // No module acknowledged this record, mark it as alien.
+                  $fixed_record += array(
+                    'priority' => '?',
+                    'state'    => 'alien',
+                  );
+                }
+                else {
+                  // At least one module acknowledged the record,
+                  // attribute it to the first one.
+                  $fixed_record += array(
+                    'priority' => '&ndash;',
+                    'state'    => 'static',
+                    '#module'  => reset(array_keys($acknowledged)),
+                  );
+                }
+              }
+              else {
+                continue;
+              }
+              $fixed_record += array(
+                'nid'    => $nid,
+                '#title' => self::get_node_title($node),
+              );
+              $all_records[] = $fixed_record;
+            }
+          }
+        }
+
+        // Order records and evaluate their status.
+        foreach ($acquired_records_nid as $priority => $acquired_records_priority) {
+          ksort($acquired_records_priority);
+          foreach ($acquired_records_priority as $realm => $acquired_records_realm) {
+            ksort($acquired_records_realm);
+            foreach ($acquired_records_realm as $gid => $acquired_record) {
+              // TODO: Handle priority.
+              //if ($priority == $top_priority) {
+                if (empty($acquired_record['grant_view']) && empty($acquired_record['grant_update']) && empty($acquired_record['grant_delete'])) {
+                  $acquired_record['state'] = 'empty';
+                }
+                else {
+                  if (isset($active_records[$nid][$realm][$gid])) {
+                    $acquired_record['state'] = (isset($acquired_record['#removed']) ? 'removed!' : 'ok');
+                  }
+                  else {
+                    $acquired_record['state'] = (isset($acquired_record['#removed']) ? 'removed' : 'missing');
+                  }
+                  if ($acquired_record['state'] == 'ok') {
+                    foreach (array('view', 'update', 'delete') as $op) {
+                      $active_record = (array) $active_records[$nid][$realm][$gid];
+                      if (empty($acquired_record["grant_$op"]) != empty($active_record["grant_$op"])) {
+                        $acquired_record["grant_$op!"] = $active_record["grant_$op"];
+                      }
+                    }
+                  }
+                }
+              //}
+              //else {
+              //  $acquired_record['state'] = (isset($active_records[$nid][$realm][$gid]) ? 'illegitimate' : 'ignored');
+              //}
+              $all_records[] = $acquired_record + array('nid' => $nid);
+            }
+          }
+        }
+      }
+
+      // Fill in the table rows.
+      $rows = array();
+      $error_count = 0;
+      foreach ($all_records as $record) {
+        $row = new \stdClass();
+        $row->nid = $record['nid'];
+        $row->title = $record['#title'];
+        $row->priority = $record['priority'];
+        $row->state = array('data' => $states[$record['state']][0], 'title' => $states[$record['state']][2]);
+        $row->realm = $record['realm'];
+        $row->gid = $record['gid'];
+        $row->grant_view = $record['grant_view'];
+        $row->grant_update = $record['grant_update'];
+        $row->grant_delete = $record['grant_delete'];
+        $row->explained = implode('<br />', \Drupal::moduleHandler()->invokeAll('node_access_explain', $row));
+        unset($row->title);
+        if ($row->nid == 0 && $row->gid == 0 && $row->realm == 'all' && count($all_records) > 1) {
+          $row->state = array('data' => $states['unexpected'][0], 'title' => $states['unexpected'][2]);
+          $class = $states['unexpected'][1];
+        }
+        else {
+          $class = $states[$record['state']][1];
+        }
+        $row = (array) $row;
+        foreach (array('view', 'update', 'delete') as $op) {
+          $row["grant_$op"] = array('data' => $row["grant_$op"]);
+          if ((isset($checked_grants[$record['nid']][$op][$record['realm']]) && in_array($record['gid'], $checked_grants[$record['nid']][$op][$record['realm']]) || ($row['nid'] == 0 && $row['gid'] == 0 && $row['realm'] == 'all')) && !empty($row["grant_$op"]['data']) && in_array($record['state'], $active_states)) {
+            $row["grant_$op"]['data'] .= '&prime;';
+            $row["grant_$op"]['title'] = t('This entry grants access to this node to this user.');
+          }
+          if (isset($record["grant_$op!"])) {
+            $row["grant_$op"]['data'] = $record["grant_$op!"] . '&gt;' . (!$row["grant_$op"]['data'] ? 0 : $row["grant_$op"]['data']);
+            $row["grant_$op"]['class'][] = 'error';
+            if ($class == 'ok') {
+              $row['state'] = array('data' => $states['wrong'][0], 'title' => $states['wrong'][2]);
+              $class = $states['wrong'][1];
+            }
+          }
+        }
+        $error_count += ($class == 'error');
+        $row['nid'] = array(
+          'data'  => '<a href="#node-' . $record['nid'] . '">' . $row['nid'] . '</a>',
+          'title' => $record['#title'],
+        );
+        if (empty($record['#module']) || strpos($record['realm'], $record['#module']) === 0) {
+          $row['realm'] = $record['realm'];
+        }
+        else {
+          $row['realm'] = array(
+            'data' => '(' . $record['#module'] . '::) ' . $record['realm'],
+            'title' => t("The '@module' module fails to adhere to the best practice of naming its realm(s) after itself.", array('@module' => $record['#module'])),
+          );
+        }
+
+        // Prepend information from the D7 hook_node_access_records_alter().
+        $next_style = array();
+        if (isset($record['history'])) {
+          $history = $record['history'];
+          if (($num_changes = count($history['changes']) - empty($history['current'])) > 0) {
+            $first_row = TRUE;
+            while (isset($history['original']) || $num_changes--) {
+              if (isset($history['original'])) {
+                $this_record = $history['original'];
+                $this_action = '[ Original by ' . $this_record['#module'] . ':';
+                unset($history['original']);
+              }
+              else {
+                $change = $history['changes'][0];
+                $this_record = $change['record'];
+                $this_action = ($first_row ? '[ ' : '') . $change['op'] . ':';
+                array_shift($history['changes']);
+              }
+              $rows[] = array(
+                'data'  => array(
+                  'data'  => array(
+                    'data'    => $this_action,
+                    'style'   => array('padding-bottom: 0;'),
+                  ),
+                ),
+                'style' => array_merge(($first_row ? array() : array('border-top-style: dashed;', 'border-top-width: 1px;')), array('border-bottom-style: none;')),
+              );
+              $next_style = array('border-top-style: none;');
+              if (count($history['changes'])) {
+                $g = $this_record;
+                $rows[] = array(
+                  'data'  => array('v', $g['priority'], '', $g['realm'], $g['gid'], $g['grant_view'], $g['grant_update'], $g['grant_delete'], 'v'),
+                  'style' => array('border-top-style: none;', 'border-bottom-style: dashed;'),
+                );
+                $next_style = array('border-top-style: dashed;');
+              }
+              $first_row = FALSE;
+            }
+          }
+        }
+
+        // Fix up the main row cells with the proper class (needed for Bartik).
+        foreach ($row as $key => $value) {
+          if (!is_array($value)) {
+            $row[$key] = array('data' => $value);
+          }
+          $row[$key]['class'] = array($class);
+        }
+        // Add the main row.
+        $will_append = empty($history['current']) && !empty($history['changes']);
+        $rows[] = array(
+          'data'  => array_values($row),
+          'class' => array($class),
+          'style' => array_merge($next_style, ($will_append ? array('border-bottom-style: none;') : array())),
+        );
+
+        // Append information from the D7 hook_node_access_records_alter().
+        if ($will_append) {
+          $last_change = end($history['changes']);
+          $rows[] = array(
+            'data'  => array(
+              'data'  => array(
+                'data'    => $last_change['op'] . ' ]',
+                'style' => array('padding-top: 0;'),
+              ),
+            ),
+            'style' => array('border-top-style: none;'),
+          );
+        }
+      }
+
+      foreach ($rows as $i => $row) {
+        $rows[$i] = self::format_row($row);
+      }
+
+      $output[] = array(
+        '#theme'      => 'table',
+        '#header'     => $headers,
+        '#rows'       => $rows,
+        '#attributes' => array(
+          'class'       => array('system-status-report'),
+          'style'       => 'text-align: left;',
+        ),
+      );
+
+      $output[] = array(
+        '#theme'       => 'form_element',
+        '#description' => t('(Some of the table elements provide additional information if you hover your mouse over them.)'),
+      );
+
+      if ($error_count > 0) {
+        $variables['!Rebuild_permissions'] = '<a href="' . url('admin/reports/status/rebuild') . '">' . $tr('Rebuild permissions') . '</a>';
+        $output[] = array(
+          '#prefix' => "\n<span class=\"error\">",
+          '#markup' => t("You have errors in your !na table! You may be able to fix these for now by running !Rebuild_permissions, but this is likely to destroy the evidence and make it impossible to identify the underlying issues. If you don't fix those, the errors will probably come back again. <br /> DON'T do this just yet if you intend to ask for help with this situation.", $variables),
+          '#suffix' => "</span><br />\n",
+        );
+      }
+
+      // Explain whether access is granted or denied, and why
+      // (using code from node_access()).
+      $tr = 't';
+      array_shift($nids);  // Remove the 0.
+      $accounts = array();
+      $variables += array(
+        '!username' => '<em class="placeholder">' . theme('username', array('account' => $user)) . '</em>',
+        '%uid'      => $user->id(),
+      );
+
+      if (\Drupal::currentUser()->hasPermission('bypass node access')) {
+        $variables['%bypass_node_access'] = $tr('bypass node access');
+        $output[] = array(
+          '#markup' => t('!username has the %bypass_node_access permission and thus full access to all nodes.', $variables),
+          '#suffix' => '<br />&nbsp;',
+        );
+      }
+      else {
+        $variables['!list'] = '<div style="margin-left: 2em">' . self::get_grant_list($grants_data['view']) . '</div>';
+        $variables['%access'] = 'view';
+        $output[] = array(
+          '#prefix' => "\n<div style='text-align: left' title='" . t('These are the grants returned by hook_node_grants() for this user.') . "'>",
+          '#markup' => t('!username (user %uid) can use these grants (if they are present above) for %access access: !list', $variables),
+          '#suffix' => "</div>\n",
+        );
+        $accounts[] = $user;
+      }
+
+      if (isset($single_nid) && !$user_block_active) {
+        // Only for single nodes.
+        if (user_is_logged_in()) {
+          $accounts[] = user_load(0);  // Anonymous, too.
+        }
+        foreach ($accounts as $account) {
+          $nid_items = array();
+          foreach ($nids as $nid) {
+            $op_items = array();
+            foreach (array('create', 'view', 'update', 'delete') as $op) {
+              $explain = self::explain_access($op, node_load($nid), $account);
+              $op_items[] = "<div style='width: 5em; display: inline-block'>" . t('%op:', array('%op' => $op)) . ' </div>' . $explain[2];
+            }
+            $nid_items[] = array(
+              '#theme'  => 'item_list',
+              '#items'  => $op_items,
+              '#type'   => 'ul',
+              '#prefix' => t('to node !nid:', array('!nid' => l($nid, 'node/' . $nid))) . "\n<div style='margin-left: 2em'>",
+              '#suffix' => '</div>',
+            );
+          }
+          if (count($nid_items) == 1) {
+            $account_items = $nid_items[0];
+          }
+          else {
+            $account_items = array(
+              '#theme'  => 'item_list',
+              '#items'  => $nid_items,
+              '#type'   => 'ul',
+              '#prefix' => "\n<div style='margin-left: 2em'>",
+              '#suffix' => '</div>',
+            );
+          }
+          $variables['!username'] = '<em class="placeholder">' . theme('username', array('account' => $account)) . '</em>';
+          $output[] = array(
+            '#prefix' => "\n<div style='text-align: left'>",
+            '#type'   => 'item',
+            'lead-in' => array('#markup' => t("!username has the following access", $variables) . ' '),
+            'items'   => $account_items,
+            '#suffix' => "\n</div>\n",
+          );
+        }
+      }
+    }
+
+    if (!empty($hint)) {
+      $output[] = array(
+        '#theme'        => 'form_element',
+        '#description'  => '(' . $hint . ')',
+      );
+    }
+    return $output;
+  }
+
+  /**
+   * Helper function to mimic \Drupal::moduleHandler()->invokeAll() and include
+   * the name of the responding module(s).
+   *
+   * @param $hook
+   *   The name of the hook.
+   *
+   * @return array
+   *   An array of results.
+   *   In the case of scalar results, the array is keyed by the name of the
+   *   modules that returned the result (rather than by numeric index), and
+   *   in the case of array results, a '#module' key is added.
+   */
+  private static function simulate_module_invoke_all($hook) {
+    $args = func_get_args();
+    // Remove $hook from the arguments.
+    array_shift($args);
+    $return = array();
+    foreach (\Drupal::moduleHandler()->getImplementations($hook) as $module) {
+      $function = $module . '_' . $hook;
+      $result = call_user_func_array($function, $args);
+      if (isset($result)) {
+        if (is_array($result)) {
+          foreach ($result as $key => $value) {
+            // Add name of module that returned the value.
+            $result[$key]['#module'] = $module;
+          }
+        }
+        else {
+          // Build array with result keyed by $module.
+          $result = array($module => $result);
+        }
+        $return = \Drupal\Component\Utility\NestedArray::mergeDeep($return, $result);
+      }
+    }
+    return $return;
+  }
+
+  /**
+   * Helper function to mimic hook_node_access_records_alter() and trace what
+   * each module does with it.
+   *
+   * @param array $records
+   *   An indexed array of NA records, augmented by the '#module' key,
+   *   as created by simulate_module_invoke_all('node_access_records').
+   *   This array is updated by the hook_node_access_records_alter()
+   *   implementations.
+   * @param $node
+   *   The node that the NA records belong to.
+   *
+   * @return array
+   *   A tree representation of the NA records in $records including their
+   *   history:
+   *   $data[$realm][$gid]
+   *     ['original']  - NA record before processing
+   *     ['current']   - NA record after processing (if still present)
+   *     ['changes'][]['op']     - change message (add/change/delete by $module)
+   *                  ['record'] - NA record after change (unless deleted)
+   */
+  private static function simulate_node_access_records_alter(&$records, $node) {
+    //dpm($records, 'simulate_node_access_records_alter(): records IN');
+    $hook = 'node_access_records_alter';
+
+    // Build the initial tree (and check for duplicates).
+    $data = self::build_node_access_records_data($records, $node, 'hook_node_access_records()');
+
+    // Simulate drupal_alter('node_access_records', $records, $node).
+    foreach (\Drupal::moduleHandler()->getImplementations($hook) as $module) {
+      // Call hook_node_access_records_alter() for one module at a time
+      // and analyze.
+      $function = $module . '_' . $hook;
+      $function($records, $node);
+
+      foreach ($records as $i => $record) {
+        if (empty($data[$record['realm']][$record['gid']]['current'])) {
+          // It's an added record.
+          $data[$record['realm']][$record['gid']]['current'] = $record;
+          $data[$record['realm']][$record['gid']]['current']['#module'] = $module;
+          $data[$record['realm']][$record['gid']]['changes'][] = array(
+            'op'     => 'added by ' . $module,
+            'record' => $record,
+          );
+          $records[$i]['#module'] = $module;
+        }
+        else {
+          // It's an existing record, check for changes.
+          $view = $update = $delete = FALSE;
+          foreach (array('view', 'update', 'delete') as $op) {
+            $$op = $record["grant_$op"] - $data[$record['realm']][$record['gid']]['current']["grant_$op"];
+          }
+          $old_priority = isset($record['priority']) ? $record['priority'] : 0;
+          $new_priority = isset($data[$record['realm']][$record['gid']]['current']['priority']) ? $data[$record['realm']][$record['gid']]['current']['priority'] : 0;
+          if ($view || $update || $delete || $old_priority != $new_priority) {
+            // It was changed.
+            $data[$record['realm']][$record['gid']]['current'] = $record;
+            $data[$record['realm']][$record['gid']]['current']['#module'] = $module;
+            $data[$record['realm']][$record['gid']]['changes'][] = array(
+              'op'     => 'altered by ' . $module,
+              'record' => $record,
+            );
+            $records[$i]['#module'] = $module;
+          }
+        }
+        $data[$record['realm']][$record['gid']]['found'] = TRUE;
+      }
+
+      // Check for newly introduced duplicates.
+      self::build_node_access_records_data($records, $node, 'hook_node_access_records_alter()');
+
+      // Look for records that have disappeared.
+      foreach ($data as $realm => $data2) {
+        foreach ($data2 as $gid => $data3) {
+          if (empty($data[$realm][$gid]['found']) && isset($data[$realm][$gid]['current'])) {
+            unset($data[$realm][$gid]['current']);
+            $data[$realm][$gid]['changes'][] = array('op' => 'removed by ' . $module);
+          }
+          else {
+            unset($data[$realm][$gid]['found']);
+          }
+        }
+      }
+    }
+    //dpm($data, 'simulate_node_access_records_alter() returns');
+    //dpm($records, 'simulate_node_access_records_alter(): records OUT');
+    return $data;
+  }
+
+  /**
+   * Helper function to build an associative array of node access records and
+   * their history. If there are duplicate records, display an error message.
+   *
+   * @param $records
+   *   An indexed array of node access records, augmented by the '#module' key,
+   *   as created by simulate_module_invoke_all('node_access_records').
+   * @param $node
+   *   The node that the NA records belong to.
+   * @param $function
+   *   The name of the hook that produced the records array, in case we need to
+   *   display an error message.
+   *
+   * @return array
+   *   See _devel_node_access_nar_alter() for the description of the result.
+   */
+  private static function build_node_access_records_data($records, $node, $function) {
+    $data = array();
+    $duplicates = array();
+    foreach ($records as $record) {
+      if (empty($data[$record['realm']][$record['gid']])) {
+        $data[$record['realm']][$record['gid']] = array('original' => $record, 'current' => $record, 'changes' => array());
+      }
+      else {
+        if (empty($duplicates[$record['realm']][$record['gid']])) {
+          $duplicates[$record['realm']][$record['gid']][] = $data[$record['realm']][$record['gid']]['original'];
+        }
+        $duplicates[$record['realm']][$record['gid']][] = $record;
+      }
+    }
+    if (!empty($duplicates)) {
+      // Generate an error message.
+      $msg = t('Devel Node Access has detected duplicate records returned from %function:', array('%function' => $function));
+      $msg .= '<ul>';
+      foreach ($duplicates as $realm => $data_by_realm) {
+        foreach ($data_by_realm as $gid => $data_by_realm_gid) {
+          $msg .= '<li><ul>';
+          foreach ($data_by_realm_gid as $record) {
+            $msg .= "<li>$node->id()/$realm/$gid/" . ($record['grant_view'] ? 1 : 0) . ($record['grant_update'] ? 1 : 0) . ($record['grant_delete'] ? 1 : 0) . ' by ' . $record['#module'] . '</li>';
+          }
+          $msg .= '</ul></li>';
+        }
+      }
+      $msg .= '</ul>';
+      drupal_set_message($msg, 'error', FALSE);
+    }
+    return $data;
+  }
+
+  /**
+   * Helper function to mimic hook_node_grants_alter() and trace what
+   * each module does with it.
+   *
+   * @param array $grants
+   *   An indexed array of grant records, augmented by the '#module' key,
+   *   as created by simulate_module_invoke_all('node_grants').
+   *   This array is updated by the hook_node_grants_alter()
+   *   implementations.
+   * @param $account
+   *   The user account requesting access to content.
+   * @param $op
+   *   The operation being performed, 'view', 'update' or 'delete'.
+   *
+   * @return array
+   *   A tree representation of the grant records in $grants including their
+   *   history:
+   *   $data[$realm][$gid]
+   *     ['cur']    - TRUE or FALSE whether the gid is present or not
+   *     ['ori'][]  - array of module names that contributed this grant (if any)
+   *     ['chg'][]  - array of changes, such as
+   *                     - 'added' if module name is a prefix if the $realm,
+   *                     - 'added by module' otherwise, or
+   *                     - 'removed by module'
+   */
+  private static function simulate_node_grants_alter(&$grants, $account, $op) {
+    //dpm($grants, "simulate_node_grants_alter($account->name, $op): grants IN");
+    $hook = 'node_grants_alter';
+
+    // Build the initial structure.
+    $data = array();
+    foreach ($grants as $realm => $gids) {
+      foreach ($gids as $i => $gid) {
+        if ($i !== '#module') {
+          $data[$realm][$gid]['cur'] = TRUE;
+          $data[$realm][$gid]['ori'][] = $gids['#module'];
+        }
+      }
+      unset($grants[$realm]['#module']);
+    }
+
+    // Simulate drupal_alter('node_grants', $grants, $account, $op).
+    foreach (\Drupal::moduleHandler()->getImplementations($hook) as $module) {
+      // Call hook_node_grants_alter() for one module at a time and analyze.
+      $function = $module . '_' . $hook;
+      $function($grants, $account, $op);
+
+      // Check for new gids.
+      foreach ($grants as $realm => $gids) {
+        foreach ($gids as $i => $gid) {
+          if (empty($data[$realm][$gid]['cur'])) {
+            $data[$realm][$gid]['cur'] = TRUE;
+            $data[$realm][$gid]['chg'][] = 'added by ' . $module;
+          }
+        }
+      }
+
+      // Check for removed gids.
+      foreach ($data as $realm => $gids) {
+        foreach  ($gids as $gid => $history) {
+          if ($history['cur'] && array_search($gid, $grants[$realm]) === FALSE) {
+            $data[$realm][$gid]['cur'] = FALSE;
+            $data[$realm][$gid]['chg'][] = 'removed by ' . $module;
+          }
+        }
+      }
+    }
+
+    //dpm($data, "simulate_node_grants_alter($account->name, $op) returns");
+    //dpm($grants, "simulate_node_grants_alter($account->name, $op): grants OUT");
+    return $data;
+  }
+
+  /**
+   * Helper function to create a list of grants returned by hook_node_grants().
+   */
+  private static function get_grant_list($grants_data) {
+    //dpm($grants_data, "get_grant_list() IN:");
+    $grants_data = array_merge(array('all' => array(0 => array('cur' => TRUE, 'ori' => array('all')))), $grants_data);
+    $items = array();
+    if (count($grants_data)) {
+      foreach ($grants_data as $realm => $gids) {
+        ksort($gids);
+        $gs = array();
+        foreach ($gids as $gid => $history) {
+          if ($history['cur']) {
+            if (isset($history['ori'])) {
+              $g = $gid;                     // Original grant, still active.
+            }
+            else {
+              $g = '<u>' . $gid . '</u>';    // New grant, still active.
+            }
+          }
+          else {
+            $g = '<del>' . $gid . '</del>';  // Deleted grant.
+          }
+
+          $ghs = array();
+          if (isset($history['ori']) && strpos($realm, $history['ori'][0]) !== 0) {
+            $realm = '(' . $history['ori'][0] . '::) ' . $realm;
+          }
+          if (isset($history['chg'])) {
+            foreach ($history['chg'] as $h) {
+              $ghs[] = $h;
+            }
+          }
+          if (!empty($ghs)) {
+            $g .= ' (' . implode(', ', $ghs) . ')';
+          }
+          $gs[] = $g;
+        }
+        $items[] = $realm . ': ' . implode(', ', $gs);
+      }
+      if (!empty($items)) {
+        return theme('item_list', array('items' => $items, 'type' => 'ul'));
+      }
+    }
+    return '';
+  }
+
+  /**
+   * Helper function to return a sanitized node title.
+   */
+  private static function get_node_title($node, $clip_and_decorate = FALSE) {
+    if (isset($node)) {
+      $nid = $node->id();
+      if ($node_title = $node->title->value) {
+        $node_title = Html::escape($node_title);
+        if ($clip_and_decorate) {
+          if (drupal_strlen($node_title) > 20) {
+            $node_title = "<span title='node/$nid: $node_title'>" . drupal_substr($node_title, 0, 15) . '...</span>';
+          }
+          $node_title = '<span title="node/' . $nid . '">' . $node_title . '</span>';
+        }
+        return $node_title;
+      }
+      elseif ($nid) {
+        return $nid;
+      }
+    }
+    return '&mdash;';
+  }
+
+  /**
+   * Helper function to apply common formatting to a debug-mode table row.
+   */
+  private static function format_row($row, $may_unpack = TRUE) {
+    if ($may_unpack && isset($row['data'])) {
+      $row['data'] = self::format_row($row['data'], FALSE);
+      $row['class'][] = 'even';
+      return $row;
+    }
+    if (count($row) == 1) {
+      if (is_scalar($row['data'])) {
+        $row['data'] = array('data' => $row['data']);
+      }
+      $row['data']['colspan'] = 9;
+    }
+    else {
+      $row = array_values($row);
+      foreach (array(0, 1, 4) as $j) {  // node, prio, gid
+        if (is_scalar($row[$j])) {
+          $row[$j] = array('data' => $row[$j]);
+        }
+        $row[$j]['style'][] = 'text-align: right;';
+      }
+    }
+    return $row;
+  }
+
+}
diff --git a/modules/devel/devel_node_access/src/Plugin/Block/DnaUser.php b/modules/devel/devel_node_access/src/Plugin/Block/DnaUser.php
new file mode 100644
index 0000000..8c6c1ee
--- /dev/null
+++ b/modules/devel/devel_node_access/src/Plugin/Block/DnaUser.php
@@ -0,0 +1,140 @@
+<?php
+/**
+* @file
+* Contains \Drupal\devel_node_access\Plugin\Block\DnaUser.
+*/
+
+namespace Drupal\devel_node_access\Plugin\Block;
+
+use Drupal\Core\Access\AccessResult;
+use Drupal\Core\Session\AccountInterface;
+use Drupal\devel_node_access\DnaBlockBase;
+use Drupal\Component\Annotation\Plugin;
+use Drupal\Core\Annotation\Translation;
+use Drupal\Component\Plugin\Discovery\DiscoveryInterface;
+
+/**
+ * Provides the "Devel Node Access by User" block.
+ *
+ *
+ * @Block(
+ *   id = "devel_dna_user_block",
+ *   admin_label = @Translation("Devel Node Access by User")
+ * )
+ */
+class DnaUser extends DnaBlockBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function access(AccountInterface $account) {
+    return AccessResult::allowedIfHasPermission($account, DNA_ACCESS_VIEW);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function build() {
+    $form_state = array();
+    $form_state->addBuildInfo('args', array());
+    $form_state->addBuildInfo('callback', array($this, 'buildForm'));
+    $form = drupal_build_form('devel_node_access_by_user_form', $form_state);
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm() {
+    global $user;
+
+    $output = array();
+
+    // Show which users can access this node.
+    $menu_item = menu_get_item();
+    $map = $menu_item['original_map'];
+    if ($map[0] != 'node' || !isset($map[1]) || !is_numeric($map[1]) || isset($map[2])) {
+      // Ignore anything but node/%.
+      return NULL;
+    }
+
+    if (isset($menu_item['map'][1]) && is_object($node = $menu_item['map'][1])) {
+      // We have the node.
+    }
+    elseif (is_numeric($menu_item['original_map'][1])) {
+      $node = node_load($menu_item['original_map'][1]);
+    }
+    if (isset($node)) {
+      $nid = $node->id();
+      $langcode = $node->langcode->value;
+      $language = language_load($langcode);
+      $node_type = node_type_load($node->bundle());
+      $headers = array(t('username'), '<span title="' . t("Create '@langname'-language nodes of the '@Node_type' type.", array('@langname' => $language->name, '@Node_type' => $node_type->name)) . '">' . t('create') . '</span>', t('view'), t('update'), t('delete'));
+      $rows = array();
+      // Determine whether to use Ajax or pre-populate the tables.
+      if ($ajax = \Drupal::config('devel_node_access.settings')->get('user_ajax')) {
+        $output['#attached']['library'][] = 'devel_node_access/node_access';
+      }
+      // Find all users. The following operations are very inefficient, so we
+      // limit the number of users returned.  It would be better to make a
+      // pager query, or at least make the number of users configurable.  If
+      // anyone is up for that please submit a patch.
+      $query = db_select('users', 'u')
+        ->fields('u', array('uid'))
+        ->orderBy('u.access', 'DESC')
+        ->range(0, 9);
+      $uids = $query->execute()->fetchCol();
+      array_unshift($uids, 0);
+      $accounts = user_load_multiple($uids);
+      foreach ($accounts as $account) {
+        $username = theme('username', array('account' => $account));
+        $uid = $account->id();
+        if ($uid == $user->id()) {
+          $username = '<strong>' . $username . '</strong>';
+        }
+        $rows[] = array(
+          $username,
+          array(
+            'id' => 'create-' . $nid . '-' . $uid,
+            'class' => 'dna-permission',
+            'data' => $ajax ? NULL : theme('dna_permission', array('permission' => self::explain_access('create', $node, $account, $langcode))),
+          ),
+          array(
+            'id' => 'view-' . $nid . '-' . $uid,
+            'class' => 'dna-permission',
+            'data' => $ajax ? NULL : theme('dna_permission', array('permission' => self::explain_access('view', $node, $account, $langcode))),
+          ),
+          array(
+            'id' => 'update-' . $nid . '-' . $uid,
+            'class' => 'dna-permission',
+            'data' => $ajax ? NULL : theme('dna_permission', array('permission' => self::explain_access('update', $node, $account, $langcode))),
+          ),
+          array(
+            'id' => 'delete-' . $nid . '-' . $uid,
+            'class' => 'dna-permission',
+            'data' => $ajax ? NULL : theme('dna_permission', array('permission' => self::explain_access('delete', $node, $account, $langcode))),
+          ),
+        );
+      }
+      if (count($rows)) {
+        $output['title'] = array(
+          '#prefix' => '<h2>',
+          '#markup' => t('Access permissions by user for the %langname language', array('%langname' => $language->name)),
+          '#postfix' => '</h2>',
+        );
+        $output[] = array(
+          '#theme'      => 'table',
+          '#header'     => $headers,
+          '#rows'       => $rows,
+          '#attributes' => array('style' => 'text-align: left'),
+        );
+        $output[] = array(
+          '#theme'        => 'form_element',
+          '#description'  => t('(This table lists the most-recently active users. Hover your mouse over each result for more details.)'),
+        );
+      }
+    }
+    return $output;
+  }
+
+}
diff --git a/modules/devel/drush/devel.drush.inc b/modules/devel/drush/devel.drush.inc
new file mode 100644
index 0000000..049e69a
--- /dev/null
+++ b/modules/devel/drush/devel.drush.inc
@@ -0,0 +1,299 @@
+<?php
+
+/**
+ * @file
+ * Drush integration for the devel module.
+ */
+
+use Drupal\Component\Uuid\Php;
+
+/**
+ * Implements hook_drush_command().
+ */
+function devel_drush_command() {
+  $items['devel-download'] = array(
+    'description' => dt('Downloads the FirePHP library from http://firephp.org/.'),
+    'arguments' => array(
+      'path' => dt('Path to the download folder. This path is relative to the Drupal root folder. If omitted Drush will use the default location.'),
+    ),
+  );
+  $items['devel-reinstall'] = array(
+    'description' => dt('Uninstall, and Install a list of projects.'),
+    'drush dependencies' => array('pm'),
+    'arguments' => array(
+      'projects' => dt('A space-separated list of project names.'),
+    ),
+    'allow-additional-options' => array('pm-uninstall', 'pm-enable'),
+    'required-arguments' => 1,
+    'aliases' => array('dre'),
+  );
+  $items['fn-hook'] = array(
+    'description' => 'List implementations of a given hook and explore the source of the selected one.',
+    'arguments' => array(
+      'hook' => 'The name of the hook to explore (e.g. "menu" for hook_menu()).'
+    ),
+    'examples' => array(
+      'fn-hook cron' => 'List implementations of hook_cron().',
+    ),
+    'allow-additional-options' => array('fn-view'),
+    'required-arguments' => 1,
+    'aliases' => array('fnh', 'hook'),
+  );
+  $items['fn-event'] = array(
+    'description' => 'List implementations of a given event and explore source of specified one.',
+    'arguments' => array(
+      'event' => 'The name of the event to explore. If omitted, a list of events is shown.'
+    ),
+    'examples' => array(
+      'fn-event' => 'Pick a Kernel event, then pick an implementation, and then view its source code.',
+      'fn-event kernel.terminate' => 'Pick a terminate subscribers and view its source code.',
+    ),
+    'allow-additional-options' => array('fn-view'),
+    'aliases' => array('fne', 'event'),
+  );
+  $items['fn-view'] = array(
+    'description' => 'Show the source of specified function or method.',
+    'arguments' => array(
+      'function' => 'The name of the function or method to view.',
+    ),
+    'options' => array(
+      'pipe' => 'Output just the filename of the function or method',
+      'format' => 'Specify how the filename should be printed. Available placeholders are !startline, !endline and !file',
+    ),
+    'examples' => array(
+      'fn-view drupal_set_breadcrumb' => 'View the source code for function "drupal_set_breadcrumb"',
+      'vi `drush --pipe fn-view user_access --format=\'+!startline !file\'`' => 'Edit the file that contains the function "user_access"',
+      'fn-view NodeController::load' => 'View the source code for method load in the class NodeController'
+    ),
+    'aliases' => array('fnv'),
+    'required-arguments' => 1,
+  );
+  $items['devel-token'] = array(
+    'description' => dt('List available tokens'),
+    'aliases' => array('token'),
+    //@todo support --format option for json, csv, etc.
+  );
+
+  $items['devel-container-services'] = array(
+    'description' => 'Get a list of available container services.',
+    'bootstrap' => DRUSH_BOOTSTRAP_DRUPAL_FULL,
+    'core' => array('8+'),
+    'aliases' => array('dcs'),
+    'options' => array(
+      'format' => 'Format to output. Allowed values are: json, export, html.',
+    ),
+    'arguments' => array(
+      'prefix' => 'A prefix to filter the service list by.',
+    ),
+    'examples' => array(
+      'drush container-services' => 'Gets a list of all available container services',
+      'drush container-services plugin.manager' => 'Get all services containing "plugin.manager"',
+    ),
+    'outputformat' => array(
+      'default' => 'list',
+      'pipe-format' => 'export',
+    ),
+  );
+
+  $items['devel-generate-uuid'] = array(
+    'description' => 'Generate a UUID.',
+    'core' => array('8+'),
+    'examples' => array(
+      "drush devel-generate-uuid" => "Outputs a Universally Unique IDentifier.",
+    ),
+    'aliases' => array('uuid'),
+    'outputformat' => array(
+      'default' => 'string',
+    ),
+  );
+
+  return $items;
+}
+
+/**
+ * A command callback. This is faster than 3 separate bootstraps.
+ */
+function drush_devel_reinstall() {
+  $projects = func_get_args();
+
+  $args = array_merge(array('pm-uninstall'), $projects);
+  call_user_func_array('drush_invoke', $args);
+
+  $args = array_merge(array('pm-enable'), $projects);
+  call_user_func_array('drush_invoke', $args);
+}
+
+/**
+ * A command callback.
+ */
+function drush_devel_download($path = 'libraries') {
+  $path = $path . '/FirePHPCore';
+  if (\Drupal::moduleHandler()->moduleExists('libraries')) {
+    $path = libraries_get_path('FirePHPCore');
+  }
+  if (is_dir($path)) {
+    drush_log(dt('FirePHP already present at @path. No download required.', array('@path' => $path)), 'ok');
+  }
+  elseif (drush_shell_exec('svn export http://firephp.googlecode.com/svn/branches/Library-FirePHPCore-0.3 %s', $path)) {
+    drush_log(dt('FirePHP has been exported via svn to @path.', array('@path' => $path)), 'success');
+  }
+  else {
+    drush_log(dt('Drush was unable to export FirePHP to @path.', array('@path' => $path)), 'warning');
+  }
+}
+
+/**
+ * Command handler. Show hook implementations.
+ */
+function drush_devel_fn_hook($hook) {
+  // Get implementations in the .install files as well.
+  include_once './core/includes/install.inc';
+  drupal_load_updates();
+
+  if ($hook_implementations = \Drupal::moduleHandler()->getImplementations($hook)) {
+    if ($choice = drush_choice(array_combine($hook_implementations, $hook_implementations), 'Enter the number of the hook implementation you wish to view.')) {
+      return drush_devel_fn_view($choice . "_$hook");
+    }
+  }
+  else {
+    drush_log(dt('No implementations.'), 'ok');
+  }
+}
+
+/**
+ * Command handler. Show hook implementations.
+ */
+function drush_devel_fn_event($event = NULL) {
+  $dispatcher = Drupal::service('event_dispatcher');
+  if (empty($event)) {
+    $events = array('kernel.controller', 'kernel.exception', 'kernel.request', 'kernel.response', 'kernel.terminate', 'kernel.view');
+    $events = array_combine($events, $events);
+    if (!$event = drush_choice($events, 'Enter the event you wish to explore.')) {
+      return drush_user_abort();
+    }
+  }
+  if ($implementations = $dispatcher->getListeners($event)) {
+    foreach ($implementations as $implementation) {
+      $callable = get_class($implementation[0]) . '::' . $implementation[1];
+      $choices[$callable] = $callable;
+    }
+    if ($choice = drush_choice($choices, 'Enter the number of the implementation you wish to view.')) {
+      return drush_devel_fn_view($choice);
+    }
+  }
+  else {
+    drush_log(dt('No implementations.'), 'ok');
+  }
+}
+/**
+ * Command handler.  Show source code of specified function or method.
+ */
+function drush_devel_fn_view($function_name) {
+  // Get implementations in the .install files as well.
+  include_once './core/includes/install.inc';
+  drupal_load_updates();
+
+  if (strpos($function_name, '::') === FALSE) {
+    if (!function_exists($function_name)) {
+      return drush_set_error(dt('Function not found'));
+    }
+    $reflect = new ReflectionFunction($function_name);
+  }
+  else {
+    list($class, $method) = explode('::', $function_name);
+    if (!method_exists($class, $method)) {
+      return drush_set_error(dt('Method not found'));
+    }
+    $reflect = new ReflectionMethod($class, $method);
+  }
+  $func_info = array('!file' => $reflect->getFileName(), '!startline' => $reflect->getStartLine(), '!endline' => $reflect->getEndLine());
+  $format = drush_get_option('format', '!file');
+  drush_print_pipe(dt($format, $func_info));
+  drush_print(dt("// file: !file, lines !startline-!endline", $func_info));
+
+  _drush_devel_print_function($reflect->getFileName(), $reflect->getStartLine(), $reflect->getEndLine());
+}
+
+/**
+ * Command callback. List available tokens.
+ */
+function drush_devel_token() {
+  $rows[] = array(dt('Group'), dt('Token'), dt('Name'));
+  $all = \Drupal::token()->getInfo();
+  foreach ($all['tokens'] as $group => $tokens) {
+    foreach ($tokens as $key => $token) {
+      $rows[] = array($group, $key, $token['name']);
+    }
+  }
+  drush_print_table($rows, TRUE);
+}
+
+/**
+ * Command callback. Outputs a UUID.
+ *
+ * @return string
+ *   A freshly generated UUID.
+ */
+function drush_devel_generate_uuid() {
+  $uuid = new Php();
+  return $uuid->generate();
+}
+
+/**
+ * Print the specified function, including any
+ * doxygen-style comments that come before it.
+ */
+function _drush_devel_print_function($file, $start_line, $end_line) {
+  $line_num = 0;
+  $doxygen = NULL;
+  $fp = fopen( $file, 'r' );
+
+  while (!feof($fp) && ($line_num < ($start_line - 1))) {
+    $line = fgets($fp);
+    ++$line_num;
+
+    if (substr($line,0,3) == '/**') {
+      $doxygen = $line;
+    }
+    elseif (isset($doxygen)) {
+      $doxygen .= $line;
+      if ($line_num + 1 == $start_line) {
+        drush_print(rtrim($doxygen));
+      }
+      if (strstr($line, '*/') !== FALSE) {
+        $doxygen = NULL;
+      }
+    }
+  }
+  while (!feof($fp) && ($line_num < $end_line)) {
+    $line = fgets($fp);
+    ++$line_num;
+    drush_print(rtrim($line));
+  }
+}
+
+/**
+ * Command callback to list available container services.
+ */
+function drush_devel_container_services($prefix = NULL) {
+  $container = Drupal::getContainer();
+
+  if (empty($container)) {
+    return drush_set_error(dt('No container was found.'));
+  }
+
+  // Get a list of all available service IDs.
+  $services = $container->getServiceIds();
+
+  // If there is a prefix, try to find matches.
+  if (isset($prefix)) {
+    $services = preg_grep("/$prefix/", $services);
+  }
+
+  if (empty($services)) {
+    return drush_log(dt('No container services found.'), 'ok');
+  }
+
+  sort($services);
+  return $services;
+}
diff --git a/modules/devel/drush/develDrushTest.php b/modules/devel/drush/develDrushTest.php
new file mode 100644
index 0000000..37c6f7f
--- /dev/null
+++ b/modules/devel/drush/develDrushTest.php
@@ -0,0 +1,39 @@
+<?php
+
+namespace Unish;
+
+if (class_exists('Unish\CommandUnishTestCase')) {
+
+    /*
+   * @file
+   *   PHPUnit Tests for devel. This uses Drush's own test framework, based on PHPUnit.
+   *   To run the tests, use run-tests-drush.sh from the devel directory.
+   */
+  class develCase extends CommandUnishTestCase {
+
+    public function testFnCommands() {
+      // Specify '8' just in case user has not set UNISH_DRUPAL_MAJOR_VERSION env variable.
+      $sites = $this->setUpDrupal(1, TRUE, '8');
+
+      // Symlink this module into the Site Under test so it can be enabled.
+      $target = dirname(__DIR__);
+      \symlink($target, $this->webroot() . '/modules/devel');
+      $options = array(
+        'root' => $this->webroot(),
+        'uri' => key($sites),
+      );
+      $this->drush('pm-enable', array('devel'), $options + array('skip' => NULL, 'yes' => NULL));
+
+      $this->drush('fn-view', array('drush_main'), $options);
+      $output = $this->getOutput();
+      $this->assertContains('@return', $output, 'Output contain @return Doxygen.');
+      $this->assertContains('function drush_main() {', $output, 'Output contains function drush_main() declaration');
+
+  //    $this->drush('fn-hook', array('cron'), $options);
+  //    $output = $this->getOutputAsList();
+  //    $expected = array('dblog', 'file', 'field', 'system', 'update');
+  //    $this->assertSame($expected, $output);
+    }
+  }
+
+}
diff --git a/modules/devel/drush/phpstorm.drush.inc b/modules/devel/drush/phpstorm.drush.inc
new file mode 100644
index 0000000..a6c3f49
--- /dev/null
+++ b/modules/devel/drush/phpstorm.drush.inc
@@ -0,0 +1,104 @@
+<?php
+
+/**
+ * @file
+ * Generate PhpStorm metadata file.
+ */
+
+/**
+ * Implements of hook_drush_command().
+ */
+function phpstorm_drush_command() {
+  $items = array();
+
+  $items['phpstorm-metadata'] = array(
+    'description' => 'Save the PhpStorm Metadata file to Drupal root.',
+    'core' => array('8+'),
+    'aliases' => array('phpm'),
+    'category' => 'devel',
+  );
+
+  return $items;
+}
+
+/**
+ * Implements hook_drush_help_alter().
+ */
+function phpstorm_drush_help_alter(&$command) {
+  if ($command['command'] == 'cache-rebuild') {
+    $command['options']['storm'] = 'Write a new PHPstorm metadata file to Drupal root.';
+  }
+}
+
+/*
+ * Implements drush_hook_post_COMMAND().
+ */
+function drush_phpstorm_post_cache_rebuild() {
+  if (drush_get_option('storm')) {
+    drush_invoke_process('@self', 'phpstorm-metadata');
+  }
+}
+
+/**
+ * Generate PhpStorm Metadata file.
+ *
+ * @see http://confluence.jetbrains.com/display/PhpStorm/PhpStorm+Advanced+Metadata
+ */
+function drush_phpstorm_metadata() {
+  $container = \Drupal::getContainer();
+
+  $reflectedClass = new ReflectionClass($container);
+
+  $map = array();
+
+  // Map for all services of the container.
+  // @see \Symfony\Component\DependencyInjection\Container::getServiceIds().
+  foreach ($reflectedClass->getMethods() as $method) {
+    if (preg_match('/^get(.+)Service$/', $method->name, $match)) {
+      $id = strtolower(preg_replace(array('/([A-Z]+)([A-Z][a-z])/', '/([a-z\d])([A-Z])/'), array('\\1_\\2', '\\1_\\2'), strtr($match[1], '_', '.')));
+      $service = \Drupal::service($id);
+      if (is_object($service)) {
+        $map["\\Drupal::service('')"][$id] = '\\' . get_class($service);
+      }
+    }
+  }
+
+  // Entity Manager - getStorage
+  foreach (\Drupal::entityManager()->getDefinitions() as $type => $definition) {
+    $class = Drupal::entityManager()->getStorage($type);
+    $map["\\Drupal::entityManager()->getStorage('')"][$type] = '\\' . get_class($class);
+  }
+
+  $content = _drush_phpstorm_metadata_phpstorm_metadata_template($map);
+  file_put_contents(DRUPAL_ROOT . '/.phpstorm.meta.php', $content);
+}
+
+function _drush_phpstorm_metadata_phpstorm_metadata_template($data) {
+  $file = '<?php
+
+namespace PHPSTORM_META {
+
+  /** @noinspection PhpUnusedLocalVariableInspection */
+  /** @noinspection PhpIllegalArrayKeyTypeInspection */
+  $STATIC_METHOD_TYPES = [
+';
+
+  foreach ($data as $method => $map) {
+    $file .= "\n";
+    $file .= "    {$method} => [\n";
+
+    foreach ($map as $argument => $class) {
+      $file .= "      '{$argument}' instanceof {$class},\n";
+    }
+
+    $file .= "    ],";
+    $file .= "\n";
+  }
+
+  $file .= '
+    ];
+  }
+  ';
+
+  return $file;
+}
diff --git a/modules/devel/js/devel_krumo_path.js b/modules/devel/js/devel_krumo_path.js
new file mode 100644
index 0000000..363493f
--- /dev/null
+++ b/modules/devel/js/devel_krumo_path.js
@@ -0,0 +1,66 @@
+(function ($) {
+
+/**
+ * Attaches double-click behavior to toggle full path of Krumo elements.
+ */
+Drupal.behaviors.devel = {
+  attach: function (context, settings) {
+
+    // Add hint to footnote
+    $('.krumo-footnote .krumo-call', context).once().before('<img style="vertical-align: middle;" title="Click to expand. Double-click to show path." src="' + settings.path.basePath + 'core/misc/help.png"/>');
+
+    var krumo_name = [];
+    var krumo_type = [];
+
+    function krumo_traverse(el) {
+      krumo_name.push($(el).html());
+      krumo_type.push($(el).siblings('em').html().match(/\w*/)[0]);
+
+      if ($(el).closest('.krumo-nest').length > 0) {
+        krumo_traverse($(el).closest('.krumo-nest').prev().find('.krumo-name'));
+      }
+    }
+
+    $('.krumo-child > div:first-child', context).dblclick(
+      function(e) {
+        if ($(this).find('> .krumo-php-path').length > 0) {
+          // Remove path if shown.
+          $(this).find('> .krumo-php-path').remove();
+        }
+        else {
+          // Get elements.
+          krumo_traverse($(this).find('> a.krumo-name'));
+
+          // Create path.
+          var krumo_path_string = '';
+          for (var i = krumo_name.length - 1; i >= 0; --i) {
+            // Start element.
+            if ((krumo_name.length - 1) == i)
+              krumo_path_string += '$' + krumo_name[i];
+
+            if (typeof krumo_name[(i-1)] !== 'undefined') {
+              if (krumo_type[i] == 'Array') {
+                krumo_path_string += "[";
+                if (!/^\d*$/.test(krumo_name[(i-1)]))
+                  krumo_path_string += "'";
+                krumo_path_string += krumo_name[(i-1)];
+                if (!/^\d*$/.test(krumo_name[(i-1)]))
+                  krumo_path_string += "'";
+                krumo_path_string += "]";
+              }
+              if (krumo_type[i] == 'Object')
+                krumo_path_string += '->' + krumo_name[(i-1)];
+            }
+          }
+          $(this).append('<div class="krumo-php-path" style="font-family: Courier, monospace; font-weight: bold;">' + krumo_path_string + '</div>');
+
+          // Reset arrays.
+          krumo_name = [];
+          krumo_type = [];
+        }
+      }
+    );
+  }
+};
+
+})(jQuery);
diff --git a/modules/devel/kint/README.txt b/modules/devel/kint/README.txt
new file mode 100644
index 0000000..75b68b9
--- /dev/null
+++ b/modules/devel/kint/README.txt
@@ -0,0 +1,37 @@
+WHAT IS IT?
+-----------
+Kint for PHP is a tool designed to present your debugging data in the absolutely
+best way possible.
+
+In other words, it's var_dump() and debug_backtrace() on steroids. Easy to use,
+but powerful and customizable. An essential addition to your development
+toolbox.
+
+USAGE
+-----
+This module allows to use these aliases:
+    kint($data1, $data2, $data3, ...);
+    ksm($data1, $data2, $data3, ...)
+    kint_trace();
+
+But to get the most out of Kint, you will want to use directly the Kint class:
+    kint_require();
+    Kint::dump($data);
+
+Learn more about Kint: http://raveren.github.io/kint/
+
+
+The Kint class function dd() will not work as expected, because this alias
+is already defined in devel.module for other purposes.
+
+CONTACTS
+--------
+Module author:
+    Alexander Danilenko
+    danilenko.dn@gmail.com
+    https://drupal.org/user/1072104
+
+Kint author:
+    Rokas leinius a.k.a. Raveren
+    raveren@gmail.com
+    https://github.com/raveren
\ No newline at end of file
diff --git a/modules/devel/kint/kint.info.yml b/modules/devel/kint/kint.info.yml
new file mode 100644
index 0000000..36d156a
--- /dev/null
+++ b/modules/devel/kint/kint.info.yml
@@ -0,0 +1,13 @@
+name: 'Devel Kint'
+type: module
+description: 'Wrapper for Kint debugging tool'
+package: Development
+# core: 8.x
+tags:
+ - developer
+
+# Information added by Drupal.org packaging script on 2015-11-08
+version: '8.x-1.x-dev'
+core: '8.x'
+project: 'devel'
+datestamp: 1446987552
diff --git a/modules/devel/kint/kint.module b/modules/devel/kint/kint.module
new file mode 100644
index 0000000..417c86d
--- /dev/null
+++ b/modules/devel/kint/kint.module
@@ -0,0 +1,60 @@
+<?php
+
+use Drupal\Core\Render\Markup;
+
+/**
+ * Alias of Kint::dump().
+ *
+ * Prints passed argument(s) using Kint debug tool.
+ */
+function kint() {
+  kint_require();
+  if (\Drupal::currentUser()->hasPermission('access kint')) {
+    $args = func_get_args();
+    call_user_func_array((PHP_SAPI === 'cli') ? 's' : array('Kint', 'dump'), $args);
+  }
+}
+
+/**
+ * Alias of Kint::trace().
+ *
+ * Prints backtrace in Kint debug tool.
+ */
+function kint_trace() {
+  kint_require();
+  if (\Drupal::currentUser()->hasPermission('access kint')) {
+    call_user_func_array(array('Kint', 'trace'), array());
+  }
+}
+
+/**
+ * Alias of Kint::kintLite().
+ *
+ * Prints with lightweight formatting, using whitespace for formatting instead
+ * of HTML.
+ */
+function kint_lite() {
+  if (\Drupal::currentUser()->hasPermission('access kint')) {
+    $args = func_get_args();
+    call_user_func_array('kintLite', $args);
+  }
+}
+
+/**
+ * Prints passed argument(s) to the 'message' area of the page.
+ */
+function ksm() {
+  kint_require();
+  if (\Drupal::currentUser()->hasPermission('access kint')) {
+    $args = func_get_args();
+    $msg = @Kint::dump($args);
+    drupal_set_message(Markup::create($msg));
+  }
+}
+
+/**
+ * Load the Kint class.
+ */
+function kint_require() {
+  require_once DRUPAL_ROOT . '/' . drupal_get_path('module', 'kint') . '/kint/Kint.class.php';
+}
diff --git a/modules/devel/kint/kint.permissions.yml b/modules/devel/kint/kint.permissions.yml
new file mode 100644
index 0000000..fe28b85
--- /dev/null
+++ b/modules/devel/kint/kint.permissions.yml
@@ -0,0 +1,4 @@
+access kint:
+  description: 'View developer debug output.'
+  title: 'Access kint information'
+  restrict access: TRUE
diff --git a/modules/devel/kint/kint.services.yml b/modules/devel/kint/kint.services.yml
new file mode 100644
index 0000000..5ae75ae
--- /dev/null
+++ b/modules/devel/kint/kint.services.yml
@@ -0,0 +1,5 @@
+services:
+  kint.twig.kint_extension:
+    class: Drupal\kint\Twig\KintExtension
+    tags:
+      - { name: twig.extension }
diff --git a/modules/devel/kint/kint/.gitignore b/modules/devel/kint/kint/.gitignore
new file mode 100644
index 0000000..21a6284
--- /dev/null
+++ b/modules/devel/kint/kint/.gitignore
@@ -0,0 +1,3 @@
+
+/config.php
+/.idea
\ No newline at end of file
diff --git a/modules/devel/kint/kint/Kint.class.php b/modules/devel/kint/kint/Kint.class.php
new file mode 100644
index 0000000..9827db2
--- /dev/null
+++ b/modules/devel/kint/kint/Kint.class.php
@@ -0,0 +1,855 @@
+<?php
+/**
+ * Kint is a zero-setup debugging tool to output information about variables and stack traces prettily and comfortably.
+ *
+ * https://github.com/raveren/kint
+ */
+define( 'KINT_DIR', dirname( __FILE__ ) . '/' );
+
+require KINT_DIR . 'config.default.php';
+require KINT_DIR . 'parsers/parser.class.php';
+require KINT_DIR . 'decorators/cli.php';
+require KINT_DIR . 'decorators/rich.php';
+require KINT_DIR . 'decorators/plain.php';
+require KINT_DIR . 'decorators/whitespace.php';
+require KINT_DIR . 'decorators/concise.php';
+
+if ( is_readable( KINT_DIR . 'config.php' ) ) {
+	require KINT_DIR . 'config.php';
+}
+
+# init settings
+if ( !empty( $GLOBALS['_kint_settings'] ) ) {
+	foreach ( $GLOBALS['_kint_settings'] as $key => $val ) {
+		property_exists( 'Kint', $key ) and Kint::$$key = $val;
+	}
+
+	unset( $GLOBALS['_kint_settings'] );
+}
+
+if ( PHP_SAPI === 'cli' ) {
+	Kint::$_detected = 'cli';
+} elseif ( Kint::$ajaxDetection && isset( $_SERVER['HTTP_X_REQUESTED_WITH'] )
+	&& strtolower( $_SERVER['HTTP_X_REQUESTED_WITH'] ) === 'xmlhttprequest'
+) {
+	Kint::$_detected = 'ajax';
+}
+
+if ( Kint::$ajaxDetection && Kint::$_detected !== 'ajax' && Kint::$_detected !== 'cli' ) {
+	register_shutdown_function( 'Kint::_ajaxHandler' );
+}
+
+class Kint
+{
+	// these are all public and 1:1 config array keys so you can switch them easily
+	public static $traceCleanupCallback;
+	public static $fileLinkFormat;
+	public static $hideSequentialKeys;
+	public static $showClassConstants;
+	public static $keyFilterCallback;
+	public static $displayCalledFrom;
+	public static $charEncodings;
+	public static $maxStrLength;
+	public static $appRootDirs;
+	public static $maxLevels;
+	public static $enabled;
+	public static $theme;
+	public static $expandedByDefault;
+
+	public static $cliDetection;
+	public static $cliColors;
+	public static $ajaxDetection;
+
+	private static $_isAjax;
+	public static $_detected;
+
+	/** @var  string cli|plain|whitespace|rich */
+	public static $mode = 'rich';
+
+	public static $aliases = array(
+		'methods'   => array(
+			array( 'kint', 'dump' ),
+			array( 'kint', 'trace' ),
+		),
+		'functions' => array(
+			'd',
+			'dd',
+			's',
+			'sd',
+		)
+	);
+
+	protected static $_firstRun = true;
+	protected static $_headerNo = 0;
+
+	# non-standard function calls
+	protected static $_statements = array( 'include', 'include_once', 'require', 'require_once' );
+
+	/**
+	 * getter/setter for the enabled parameter, called at the beginning of every public function as getter, also
+	 * initializes the settings if te first time it's run.
+	 *
+	 * @param null $value
+	 *
+	 * @return void|bool
+	 */
+	public static function enabled( $value = null )
+	{
+		# act both as a setter...
+		if ( func_num_args() > 0 ) {
+			self::$enabled = $value;
+			return;
+		}
+
+		# ...and a getter
+		return self::$enabled;
+	}
+
+	/**
+	 * Prints a debug backtrace, same as `Kint::dump(1)`
+	 *
+	 * @param array $trace [OPTIONAL] you can pass your own trace, otherwise, `debug_backtrace` will be called
+	 *
+	 * @return void
+	 */
+	public static function trace( $trace = null )
+	{
+		if ( !Kint::enabled() ) return;
+
+		return self::dump( isset( $trace ) ? $trace : debug_backtrace( true ) );
+	}
+
+
+	/**
+	 * Dump information about variables, accepts any number of parameters, supports modifiers:
+	 *
+	 *  clean up any output before kint and place the dump at the top of page:
+	 *   - Kint::dump()
+	 *  *****
+	 *  expand all nodes on display:
+	 *   ! Kint::dump()
+	 *  *****
+	 *  dump variables disregarding their depth:
+	 *   + Kint::dump()
+	 *  *****
+	 *  return output instead of displaying it (also disables ajax/cli detection):
+	 *   @ Kint::dump()
+	 *  *****
+	 *  disable ajax and cli auto-detection and just output as requested (plain/rich):
+	 *   ~ Kint::dump()
+	 *
+	 * Modifiers are supported by all dump wrapper functions, including Kint::trace(). Space is optional.
+	 *
+	 *
+	 * You can also use the following shorthand to display debug_backtrace():
+	 *   Kint::dump( 1 );
+	 *
+	 * Passing the result from debug_backtrace() to kint::dump() as a single parameter will display it as trace too:
+	 *   $trace = debug_backtrace( true );
+	 *   Kint::dump( $trace );
+	 *  Or simply:
+	 *   Kint::dump( debug_backtrace() );
+	 *
+	 *
+	 * @param mixed $data
+	 *
+	 * @return void|string
+	 */
+	public static function dump( $data = null )
+	{
+		if ( !Kint::enabled() ) return '';
+
+		# find caller information
+		list( $names, $modifiers, $callee, $previousCaller, $miniTrace ) = self::_getPassedNames(
+			defined( 'DEBUG_BACKTRACE_IGNORE_ARGS' )
+				? debug_backtrace( DEBUG_BACKTRACE_IGNORE_ARGS )
+				: debug_backtrace()
+		);
+
+		# process modifiers: @, +, !, ~ and -
+		if ( strpos( $modifiers, '-' ) !== false ) {
+			self::$_firstRun = true;
+			while ( ob_get_level() ) {
+				ob_end_clean();
+			}
+		}
+		if ( strpos( $modifiers, '!' ) !== false ) {
+			$expandedByDefaultOldValue = self::$expandedByDefault;
+			self::$expandedByDefault   = true;
+		}
+		if ( strpos( $modifiers, '+' ) !== false ) {
+			$maxLevelsOldValue = self::$maxLevels;
+			self::$maxLevels   = false;
+		}
+		if ( strpos( $modifiers, '@' ) !== false ) {
+			$firstRunOldValue = self::$_firstRun;
+			self::$_firstRun  = true;
+		}
+		# disable mode detection
+		if ( strpos( $modifiers, '@' ) !== false || strpos( $modifiers, '~' ) === false ) {
+			$modeOldValue   = self::$mode;
+			$isAjaxOldValue = self::$_isAjax;
+			if ( self::$_detected === 'ajax' ) {
+				self::$_isAjax = true;
+			} elseif ( self::$_detected === 'cli' && self::$cliDetection ) {
+				# cli detection is checked here as you can toggle the feature for individual dumps
+				self::$mode = self::$cliColors ? 'cli' : 'whitespace';
+			}
+		}
+
+
+		$decoratorsMap = array(
+			'cli'        => 'Kint_Decorators_Cli',
+			'plain'      => 'Kint_Decorators_Plain',
+			'rich'       => 'Kint_Decorators_Rich',
+			'whitespace' => 'Kint_Decorators_Whitespace',
+		);
+		$decorator     = $decoratorsMap[self::$mode];
+		$output        = $decorator::wrapStart( $callee );
+
+		$trace = false;
+		if ( $names === array( null ) && func_num_args() === 1 && $data === 1 ) {
+			$trace = debug_backtrace( true ); # Kint::dump(1) shorthand
+		} elseif ( func_num_args() === 1 && is_array( $data ) ) {
+			$trace = $data; # test if the single parameter is result of debug_backtrace()
+		}
+		$trace and $trace = self::_parseTrace( $trace );
+
+		if ( $trace ) {
+			$output .= $decorator::decorateTrace( $trace );
+		} else {
+			$data = func_num_args() === 0
+				? array( "[[no arguments passed]]" )
+				: func_get_args();
+
+			foreach ( $data as $k => $argument ) {
+				kintParser::reset();
+				$output .= $decorator::decorate( kintParser::factory( $argument, $names[$k] ) );
+			}
+		}
+
+
+		$output .= $decorator::wrapEnd( $callee, $miniTrace, $previousCaller );
+
+		if ( strpos( $modifiers, '~' ) === false ) {
+			self::$mode = $modeOldValue;
+		}
+		if ( strpos( $modifiers, '!' ) !== false ) {
+			self::$expandedByDefault = $expandedByDefaultOldValue;
+		}
+		if ( strpos( $modifiers, '+' ) !== false ) {
+			self::$maxLevels = $maxLevelsOldValue;
+		}
+		if ( strpos( $modifiers, '@' ) !== false ) {
+			self::$_firstRun = $firstRunOldValue;
+			return $output;
+		}
+
+		if ( self::$_isAjax ) {
+			$data   = rawurlencode( $output );
+			$chunks = array();
+
+			while ( strlen( $data ) > 4096 ) {
+				$chunks[] = substr( $data, 0, 4096 );
+				$data     = substr( $data, 4096 );
+			}
+			$chunks[] = $data;
+
+			for ( $i = 0, $c = count( $chunks ); $i < $c; $i++ ) {
+				$index = self::$_headerNo++;
+				$name  = 'kint' . ( $index > 0 ? "-$index" : '' );
+				header( "$name: {$chunks[$i]}" );
+			}
+
+			if ( strpos( $modifiers, '~' ) === false ) {
+				self::$_isAjax = $isAjaxOldValue;
+			}
+			return '';
+		}
+
+		echo $output;
+		return '';
+	}
+
+
+	/**
+	 * generic path display callback, can be configured in the settings; purpose is to show relevant path info and hide
+	 * as much of the path as possible.
+	 *
+	 * @param string $file
+	 * @param int    $line [OPTIONAL]
+	 * @param bool   $wrapInHtml
+	 *
+	 * @return string
+	 */
+	public static function shortenPath( $file, $line = null, $wrapInHtml = true )
+	{
+		$file          = str_replace( '\\', '/', $file );
+		$shortenedName = $file;
+		$replaced      = false;
+		if ( is_array( self::$appRootDirs ) ) foreach ( self::$appRootDirs as $path => $replaceString ) {
+			if ( empty( $path ) ) continue;
+
+			$path = str_replace( '\\', '/', $path );
+
+			if ( strpos( $file, $path ) === 0 ) {
+				$shortenedName = $replaceString . substr( $file, strlen( $path ) );
+				$replaced      = true;
+				break;
+			}
+		}
+
+		if ( !$replaced ) {
+			$pathParts = explode( '/', str_replace( '\\', '/', KINT_DIR ) );
+			$fileParts = explode( '/', $file );
+			$i         = 0;
+			foreach ( $fileParts as $i => $filePart ) {
+				if ( !isset( $pathParts[$i] ) || $pathParts[$i] !== $filePart ) break;
+			}
+			$shortenedName = '.../' . implode( '/', array_slice( $fileParts, $i ) );
+		}
+
+
+		if ( !$line ) { # means this is called from resource type dump
+			return $shortenedName;
+		}
+
+		if ( !self::$fileLinkFormat ) {
+			return "{$shortenedName}:{$line}";
+		}
+
+		$url = str_replace( array( '%f', '%l' ), array( $file, $line ), self::$fileLinkFormat );
+
+		if ( $wrapInHtml ) {
+			$class = ( strpos( $url, 'http://' ) === 0 ) ? 'class="kint-ide-link" ' : '';
+			return "<a {$class}href=\"{$url}\">{$shortenedName}:{$line}</a>";
+		} else {
+			return array( $url, $shortenedName . ':' . $line );
+		}
+	}
+
+	/**
+	 * trace helper, shows the place in code inline
+	 *
+	 * @param string $file full path to file
+	 * @param int    $lineNumber the line to display
+	 * @param int    $padding surrounding lines to show besides the main one
+	 *
+	 * @return bool|string
+	 */
+	private static function _showSource( $file, $lineNumber, $padding = 7 )
+	{
+		if ( !$file OR !is_readable( $file ) ) {
+			# continuing will cause errors
+			return false;
+		}
+
+		# open the file and set the line position
+		$file = fopen( $file, 'r' );
+		$line = 0;
+
+		# Set the reading range
+		$range = array(
+			'start' => $lineNumber - $padding,
+			'end'   => $lineNumber + $padding
+		);
+
+		# set the zero-padding amount for line numbers
+		$format = '% ' . strlen( $range['end'] ) . 'd';
+
+		$source = '';
+		while ( ( $row = fgets( $file ) ) !== false ) {
+			# increment the line number
+			if ( ++$line > $range['end'] ) {
+				break;
+			}
+
+			if ( $line >= $range['start'] ) {
+				# make the row safe for output
+				$row = htmlspecialchars( $row, ENT_NOQUOTES, 'UTF-8' );
+
+				# trim whitespace and sanitize the row
+				$row = '<span>' . sprintf( $format, $line ) . '</span> ' . $row;
+
+				if ( $line === $lineNumber ) {
+					# apply highlighting to this row
+					$row = '<div class="kint-highlight">' . $row . '</div>';
+				} else {
+					$row = '<div>' . $row . '</div>';
+				}
+
+				# add to the captured source
+				$source .= $row;
+			}
+		}
+
+		# close the file
+		fclose( $file );
+
+		return $source;
+	}
+
+
+	/**
+	 * returns parameter names that the function was passed, as well as any predefined symbols before function
+	 * call (modifiers)
+	 *
+	 * @param array $trace
+	 *
+	 * @return array( $parameters, $modifier, $callee, $previousCaller )
+	 */
+	private static function _getPassedNames( $trace )
+	{
+		list( $previousCaller, $miniTrace, $callee ) = self::_getCallerInfo( $trace );
+
+		if ( !isset( $callee['file'] ) || !is_readable( $callee['file'] ) ) {
+			return false;
+		}
+
+		# open the file and read it up to the position where the function call expression ended
+		$file   = fopen( $callee['file'], 'r' );
+		$line   = 0;
+		$source = '';
+		while ( ( $row = fgets( $file ) ) !== false ) {
+			if ( ++$line > $callee['line'] ) break;
+			$source .= $row;
+		}
+		fclose( $file );
+		$source = self::_removeAllButCode( $source );
+
+
+		$codePattern = empty( $callee['class'] )
+			? $callee['function']
+			: $callee['class'] . "\x07*" . $callee['type'] . "\x07*" . $callee['function'];
+
+
+		# get the position of the last call to the function
+		preg_match_all(
+			$r = "~
+			# beginning of statement
+			[\x07{(]
+
+			# search for modifiers (group 1)
+			([-+!@\\~]*)?
+
+			# spaces, spaces everywhere
+			\x07*
+
+			# check if output is assigned to a variable (group 2)
+			(
+				\\$[a-z0-9_]+ # variable
+				\x07*\\.?=\x07*  # assignment
+			)?
+
+			# possibly a namespace symbol
+			\\\\?
+
+			\x07*
+
+			# main call to Kint
+			{$codePattern}
+
+			\x07*
+
+			# find the character where kint's opening bracket resides (group 3)
+			(\\()
+
+			~ix",
+			$source,
+			$matches,
+			PREG_OFFSET_CAPTURE
+		);
+
+		$modifiers  = end( $matches[1] );
+		$assignment = end( $matches[2] );
+		$bracket    = end( $matches[3] );
+
+		$modifiers = $modifiers[0];
+		if ( $assignment[1] !== -1 ) {
+			$modifiers .= '@';
+		}
+
+		$passedParameters = preg_replace( "[\x07+]", ' ', substr( $source, $bracket[1] + 1 ) );
+		# we now have a string like this:
+		# <parameters passed>); <the rest of the last read line>
+
+		# remove everything in brackets and quotes, we don't need nested statements nor literal strings which would
+		# only complicate separating individual arguments
+		$c          = strlen( $passedParameters );
+		$inString   = $escaped = false;
+		$i          = 0;
+		$inBrackets = 0;
+		while ( $i < $c ) {
+			$letter = $passedParameters[$i];
+			if ( $inString === false ) {
+				if ( $letter === '\'' || $letter === '"' ) {
+					$inString = $letter;
+				} elseif ( $letter === '(' ) {
+					$inBrackets++;
+				} elseif ( $letter === ')' ) {
+					$inBrackets--;
+					if ( $inBrackets === -1 ) { # this means we are out of the brackets that denote passed parameters
+						$passedParameters = substr( $passedParameters, 0, $i );
+						break;
+					}
+				}
+			} elseif ( $letter === $inString && !$escaped ) {
+				$inString = false;
+			}
+
+			# place an untype-able character instead of whatever was inside quotes or brackets, we don't
+			# need that info. We'll later replace it with '...'
+			if ( $inBrackets > 0 ) {
+				if ( $inBrackets > 1 || $letter !== '(' ) {
+					$passedParameters[$i] = "\x07";
+				}
+			}
+			if ( $inString !== false ) {
+				if ( $letter !== $inString || $escaped ) {
+					$passedParameters[$i] = "\x07";
+				}
+			}
+
+			$escaped = !$escaped && ( $letter === '\\' );
+			$i++;
+		}
+
+		# by now we have an unnested arguments list, lets make it to an array for processing further
+		$arguments = explode( ',', preg_replace( "~\x07+~", '...', $passedParameters ) );
+
+		# test each argument whether it was passed literary or was it an expression or a variable name
+		$parameters = array();
+		$blacklist  = array( 'null', 'true', 'false', 'array(...)', 'array()', '"..."', 'b"..."', );
+		foreach ( $arguments as $argument ) {
+			$argument = trim( $argument );
+
+			if ( is_numeric( $argument )
+				|| in_array( str_replace( "'", '"', strtolower( $argument ) ), $blacklist, true )
+			) {
+				$parameters[] = null;
+			} else {
+				$parameters[] = $argument;
+			}
+		}
+
+		return array( $parameters, $modifiers, $callee, $previousCaller, $miniTrace );
+	}
+
+	/**
+	 * removes comments and zaps whitespace & <?php tags from php code, makes for easier further parsing
+	 *
+	 * @param string $source
+	 *
+	 * @return string
+	 */
+	private static function _removeAllButCode( $source )
+	{
+		$newStr        = '';
+		$tokens        = token_get_all( $source );
+		$commentTokens = array( T_COMMENT => true, T_INLINE_HTML => true, T_DOC_COMMENT => true );
+
+		defined( 'T_NS_SEPARATOR' ) or define( 'T_NS_SEPARATOR', 380 );
+
+		$whiteSpaceTokens = array(
+			T_WHITESPACE => true, T_CLOSE_TAG => true,
+			T_OPEN_TAG   => true, T_OPEN_TAG_WITH_ECHO => true,
+		);
+
+		foreach ( $tokens as $token ) {
+			if ( is_array( $token ) ) {
+				if ( isset( $commentTokens[$token[0]] ) ) continue;
+
+				if ( $token[0] === T_NEW ) {
+					$token = 'new ';
+				} elseif ( $token[0] === T_NS_SEPARATOR ) {
+					$token = "\\\x07";
+				} elseif ( isset( $whiteSpaceTokens[$token[0]] ) ) {
+					$token = "\x07";
+				} else {
+					$token = $token[1];
+				}
+			} elseif ( $token === ';' ) {
+				$token = "\x07";
+			}
+
+			$newStr .= $token;
+		}
+		return $newStr;
+	}
+
+	/**
+	 * @param $trace
+	 *
+	 * @return array
+	 */
+	private static function _getCallerInfo( $trace )
+	{
+		$previousCaller = array();
+		$miniTrace      = array();
+		$prevStep       = array();
+
+		# go from back of trace to find first occurrence of call to Kint or its wrappers
+		while ( $step = array_pop( $trace ) ) {
+
+			if ( self::_stepIsInternal( $step ) ) {
+				$previousCaller = $prevStep;
+				break;
+			} elseif ( isset( $step['file'], $step['line'] ) ) {
+				unset( $step['object'], $step['args'] );
+				array_unshift( $miniTrace, $step );
+			}
+
+			$prevStep = $step;
+		}
+
+		return array( $previousCaller, $miniTrace, $step );
+	}
+
+	/**
+	 * returns whether current trace step belongs to Kint or its wrappers
+	 *
+	 * @param $step
+	 *
+	 * @return array
+	 */
+	private static function _stepIsInternal( $step )
+	{
+		if ( isset( $step['class'] ) ) {
+			foreach ( self::$aliases['methods'] as $alias ) {
+				if ( $alias[0] === strtolower( $step['class'] ) && $alias[1] === strtolower( $step['function'] ) ) {
+					return true;
+				}
+			}
+			return false;
+		} else {
+			return in_array( strtolower( $step['function'] ), self::$aliases['functions'], true );
+		}
+	}
+
+	private static function _parseTrace( array $data )
+	{
+		$trace          = array();
+		$tracePrototype = array( 'file', 'line', 'args', 'class' );
+		while ( $step = array_pop( $data ) ) {
+			if ( !is_array( $step ) ) return false;
+
+			$valid = false; # this method also validates whether a trace was indeed passed
+			if ( sizeof( $step ) <= 7 ) {
+				$found = 0;
+				foreach ( $tracePrototype as $element ) {
+					if ( isset( $step[$element] ) ) {
+						if ( ++$found === 2 ) {
+							$valid = true;
+							break;
+						}
+					}
+				}
+
+				if ( !$valid && isset( $step['function'] )
+					&& substr( $step['function'], -9, 9 ) === '{closure}'
+				) {
+					$valid = true;
+				}
+			}
+
+			if ( !$valid ) return false;
+
+			if ( self::_stepIsInternal( $step ) ) {
+				$step = array(
+					'file'     => $step['file'],
+					'line'     => $step['line'],
+					'function' => '',
+				);
+				array_unshift( $trace, $step );
+				break;
+			}
+			array_unshift( $trace, $step );
+		}
+
+		$output = array();
+		foreach ( $trace as $step ) {
+			if ( isset( self::$traceCleanupCallback ) ) {
+				$step = call_user_func( self::$traceCleanupCallback, $step );
+
+				# if the user defined trace cleanup function returns null, skip this line
+				if ( $step === null ) {
+					continue;
+				}
+			}
+
+			if ( isset( $step['file'] ) ) {
+				$file = $step['file'];
+
+				if ( isset( $step['line'] ) ) {
+					$line = $step['line'];
+					# include the source of this step
+					if ( self::$mode === 'rich' ) {
+						$source = self::_showSource( $file, $line );
+					}
+				}
+			}
+
+			# still, might be not a trace
+			if ( !isset( $step['function'] ) ) return false;
+
+
+			$function = $step['function'];
+
+			if ( in_array( $function, self::$_statements ) ) { # include, require
+				if ( empty( $step['args'] ) ) {
+					# no arguments
+					$args = array();
+				} else {
+					# sanitize the file path
+					$args = array( self::shortenPath( $step['args'][0] ) );
+				}
+			} elseif ( isset( $step['args'] ) ) {
+				if ( empty( $step['class'] ) && !function_exists( $function ) ) {
+					# introspection on closures or language constructs in a stack trace is impossible before PHP 5.3
+					$params = null;
+				} else {
+					try {
+						if ( isset( $step['class'] ) ) {
+							if ( method_exists( $step['class'], $function ) ) {
+								$reflection = new ReflectionMethod( $step['class'], $function );
+							} else if ( isset( $step['type'] ) && $step['type'] == '::' ) {
+								$reflection = new ReflectionMethod( $step['class'], '__callStatic' );
+							} else {
+								$reflection = new ReflectionMethod( $step['class'], '__call' );
+							}
+						} else {
+							$reflection = new ReflectionFunction( $function );
+						}
+
+						# get the function parameters
+						$params = $reflection->getParameters();
+					} catch ( Exception $e ) { # avoid various PHP version incompatibilities
+						$params = null;
+					}
+				}
+
+				$args = array();
+				foreach ( $step['args'] as $i => $arg ) {
+					if ( isset( $params[$i] ) ) {
+						# assign the argument by the parameter name
+						$args[$params[$i]->name] = $arg;
+					} else {
+						# assign the argument by number
+						$args['#' . ( $i + 1 )] = $arg;
+					}
+				}
+			}
+
+			if ( isset( $step['class'] ) ) {
+				# Class->method() or Class::method()
+				$function = $step['class'] . $step['type'] . $function;
+			}
+
+			$output[] = array(
+				'function' => $function,
+				'args'     => isset( $args ) ? $args : null,
+				'file'     => isset( $file ) ? $file : null,
+				'line'     => isset( $line ) ? $line : null,
+				'source'   => isset( $source ) ? $source : null,
+				'object'   => isset( $step['object'] ) ? $step['object'] : null,
+			);
+
+			unset( $function, $args, $file, $line, $source );
+		}
+
+		return $output;
+	}
+
+	public static function _ajaxHandler()
+	{
+		if ( !Kint::$enabled ) return;
+
+		# if content type is not HTML (e.g. csv export) and/or is downloaded - skip
+		foreach ( headers_list() as $header ) {
+			if ( substr( strtolower( $header ), 0, 13 ) === "content-type:" ) {
+				if ( strpos( $header, 'text/html' ) === false ) {
+					return;
+				}
+			} elseif ( substr( strtolower( $header ), 0, 20 ) === "content-disposition:" ) {
+				return;
+			}
+		}
+
+		$baseDir = KINT_DIR . 'view/compiled/modular-window/';
+
+		if ( !is_readable( $cssFile = $baseDir . Kint::$theme . '.css' ) ) {
+			$cssFile = $baseDir . 'original.css';
+		}
+
+		echo '<script>' . file_get_contents( $baseDir . 'kint.js' ) . '</script>'
+			. '<style>' . file_get_contents( $cssFile ) . "</style>";
+	}
+}
+
+
+if ( !function_exists( 'd' ) ) {
+	/**
+	 * Alias of Kint::dump()
+	 *
+	 * @return string
+	 */
+	function d()
+	{
+		if ( !Kint::enabled() ) return null;
+
+		$args = func_get_args();
+		return call_user_func_array( array( 'Kint', 'dump' ), $args );
+	}
+}
+
+if ( !function_exists( 'dd' ) ) {
+	/**
+	 * Alias of Kint::dump()
+	 * [!!!] IMPORTANT: execution will halt after call to this function
+	 *
+	 * @return string
+	 */
+	function dd()
+	{
+		if ( !Kint::enabled() ) return;
+
+		$args = func_get_args();
+		call_user_func_array( array( 'Kint', 'dump' ), $args );
+		die;
+	}
+}
+
+if ( !function_exists( 's' ) ) {
+
+	/**
+	 * Alias of kintLite()
+	 *
+	 * @return string
+	 */
+	function s()
+	{
+		if ( !Kint::enabled() ) return;
+		$mode       = Kint::$mode;
+		Kint::$mode = 'plain';
+		$o          = call_user_func_array( 'Kint::dump', func_get_args() );
+		Kint::$mode = $mode;
+		return $o;
+	}
+
+	/**
+	 * Alias of kintLite()
+	 * [!!!] IMPORTANT: execution will halt after call to this function
+	 *
+	 * @return string
+	 */
+	function sd()
+	{
+		if ( !Kint::enabled() ) return;
+		$mode       = Kint::$mode;
+		Kint::$mode = 'plain';
+		call_user_func_array( 'Kint::dump', func_get_args() );
+		Kint::$mode = $mode;
+		die;
+	}
+
+}
diff --git a/modules/devel/kint/kint/LICENCE b/modules/devel/kint/kint/LICENCE
new file mode 100644
index 0000000..936fe1f
--- /dev/null
+++ b/modules/devel/kint/kint/LICENCE
@@ -0,0 +1,20 @@
+The MIT License (MIT)
+
+Copyright (c) 2013 Rokas leinius (raveren@gmail.com)
+
+Permission is hereby granted, free of charge, to any person obtaining a copy of
+this software and associated documentation files (the "Software"), to deal in
+the Software without restriction, including without limitation the rights to
+use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
+the Software, and to permit persons to whom the Software is furnished to do so,
+subject to the following conditions:
+
+The above copyright notice and this permission notice shall be included in all
+copies or substantial portions of the Software.
+
+THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
+FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
+COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
+IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
+CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
\ No newline at end of file
diff --git a/modules/devel/kint/kint/README.md b/modules/devel/kint/kint/README.md
new file mode 100644
index 0000000..9fa5b48
--- /dev/null
+++ b/modules/devel/kint/kint/README.md
@@ -0,0 +1,62 @@
+# Kint - debugging helper for PHP developers
+
+[![Total Downloads](https://poser.pugx.org/raveren/kint/downloads.png)](https://packagist.org/packages/raveren/kint)
+
+http://raveren.github.com/kint/
+
+![Screenshot](http://raveren.github.com/kint/img/preview.png)
+
+Kint for PHP is a powerful and modern, zero-setup replacement for **[var_dump()](http://php.net/manual/en/function.var-dump.php)**, **[print_r()](http://php.net/manual/en/function.print-r.php)** and **[debug_backtrace()](http://php.net/manual/en/function.debug-backtrace.php)**. You'll wonder how you developed without it.
+
+
+----
+
+
+## Installation and usage
+```php
+<?php
+require '/kint/Kint.class.php';
+
+########## DUMP VARIABLE ###########################
+Kint::dump($GLOBALS, $_SERVER); // any nuber of parameters
+// or simply use d() as a shorthand:
+d($_SERVER);
+
+
+########## DEBUG BACKTRACE #########################
+Kint::trace();
+// or via shorthand:
+d(1);
+
+
+########## TEXT-ONLY OUTPUT ########################
+s($GLOBALS);
+
+
+########## MISCELLANEOUS ###########################
+// to disable all output
+Kint::enabled(false);
+// further calls, this one included, will not yield any output
+d('Get off my lawn!'); // no effect
+
+```
+
+### Furthermore
+
+* `sd()` and `dd()` are shorthands for `s();die;` and `d();die;` respectively.
+* `!Kint::dump()` and `!dd()` will display the dump expanded by default.
+
+----
+
+
+[Visit the project page](http://raveren.github.com/kint/) for documentation, configuration, and more advanced usage examples.
+
+### Author
+
+**Rokas leinius** (Raveren)
+
+![](http://img199.yfrog.com/img199/4323/imageda.png)
+
+### License
+
+Licensed under the MIT License
\ No newline at end of file
diff --git a/modules/devel/kint/kint/composer.json b/modules/devel/kint/kint/composer.json
new file mode 100644
index 0000000..b14ffbd
--- /dev/null
+++ b/modules/devel/kint/kint/composer.json
@@ -0,0 +1,29 @@
+{
+    "name": "raveren/kint",
+    "description": "Kint - debugging helper for PHP developers",
+    "keywords": ["kint", "php", "debug"],
+    "type": "library",
+    "homepage": "https://github.com/raveren/kint",
+    "license": "MIT",
+    "authors": [
+        {
+            "name": "Rokas leinius",
+            "homepage": "https://github.com/raveren"
+        },
+        {
+            "name": "Contributors",
+            "homepage": "https://github.com/raveren/kint/contributors"
+        }
+    ],
+    "require": {
+        "php": ">=5.2.0"
+    },
+    "autoload": {
+        "files": ["Kint.class.php"]
+    },
+    "extra": {
+        "branch-alias": {
+            "dev-1.0.0-wip": "1.0-dev"
+        }
+    }
+}
diff --git a/modules/devel/kint/kint/config.default.php b/modules/devel/kint/kint/config.default.php
new file mode 100644
index 0000000..bcb6825
--- /dev/null
+++ b/modules/devel/kint/kint/config.default.php
@@ -0,0 +1,148 @@
+<?php
+isset( $GLOBALS['_kint_settings'] ) or $GLOBALS['_kint_settings'] = array();
+$_kintSettings = &$GLOBALS['_kint_settings'];
+
+
+/** @var bool if set to false, kint will become silent, same as Kint::enabled(false) or Kint::$enabled = false */
+$_kintSettings['enabled'] = true;
+
+
+/**
+ * @var bool whether to display where kint was called from
+ */
+$_kintSettings['displayCalledFrom'] = true;
+
+
+/**
+ * @var string format of the link to the source file in trace entries. Use %f for file path, %l for line number.
+ * Defaults to xdebug.file_link_format if not set.
+ *
+ * [!] EXAMPLE (works with for phpStorm and RemoteCall Plugin):
+ *
+ * $_kintSettings['fileLinkFormat'] = 'http://localhost:8091/?message=%f:%l';
+ *
+ */
+$_kintSettings['fileLinkFormat'] = ini_get( 'xdebug.file_link_format' );
+
+
+/**
+ * @var array base directories of your application that will be displayed instead of the full path. Keys are paths,
+ * values are replacement strings
+ *
+ * Defaults to array( $_SERVER['DOCUMENT_ROOT'] => '&lt;ROOT&gt;' )
+ *
+ * [!] EXAMPLE (for Kohana framework):
+ *
+ * $_kintSettings['appRootDirs'] = array(
+ *      APPPATH => 'APPPATH', // make sure the constants are already defined at the time of including this config file
+ *      SYSPATH => 'SYSPATH',
+ *      MODPATH => 'MODPATH',
+ *      DOCROOT => 'DOCROOT',
+ * );
+ *
+ * [!] EXAMPLE #2 (for a semi-universal approach)
+ *
+ * $_kintSettings['appRootDirs'] = array(
+ *      realpath( __DIR__ . '/../../..' ) => 'ROOT', // go up as many levels as needed in the realpath() param
+ * );
+ *
+ * $_kintSettings['fileLinkFormat'] = 'http://localhost:8091/?message=%f:%l';
+ *
+ */
+$_kintSettings['appRootDirs'] = isset( $_SERVER['DOCUMENT_ROOT'] )
+	? array( $_SERVER['DOCUMENT_ROOT'] => '&lt;ROOT&gt;' )
+	: array();
+
+
+/**
+ * @var callable|null
+ *
+ * @param array $step each step of the backtrace is passed to this callback to clean it up or skip it entirely
+ *
+ * @return array|null you can return null if you want to bypass outputting this step
+ *
+ * [!] EXAMPLE:
+ *
+ * $_kintSettings['traceCleanupCallback'] = function( $traceStep ) {
+ *      if ( isset( $traceStep['class'] ) && strtolower( $traceStep['class'] ) === 'errorHandler' ) {
+ *           return null;
+ *      }
+ *
+ *      if ( isset( $traceStep['function'] ) && strtolower( $traceStep['function'] ) === '__tostring' ) {
+ *          $traceStep['function'] = "[object converted to string]";
+ *      }
+ *
+ *       return $traceStep;
+ * };
+ */
+$_kintSettings['traceCleanupCallback'] = null;
+
+
+/** @var int max length of string before it is truncated and displayed separately in full. Zero or false to disable */
+$_kintSettings['maxStrLength'] = 60;
+
+/** @var array possible alternative char encodings in order of probability, eg. array('windows-1251') */
+$_kintSettings['charEncodings'] = array();
+
+
+/** @var int max array/object levels to go deep, if zero no limits are applied */
+$_kintSettings['maxLevels'] = 5;
+
+
+/** @var bool whether dumped indexed arrays that are in ideal sequence are displayed */
+$_kintSettings['hideSequentialKeys'] = true;
+
+
+/** @var string name of theme for rich view */
+$_kintSettings['theme'] = 'original';
+
+
+
+/** @var bool enable detection when a Kint dump was outputted in a (background) ajax request. The output with some
+ * additional features is then presented to the user on-screen.
+ *
+ * CAVEATS:
+ * 1) you must use jQuery and/or always append HTTP_X_REQUESTED_WITH header to ajax requests
+ * 2) if not outputting HTML source, you must denote that in the headers (content-type and/or content-disposition)
+ * 3) some js&css is always outputted after page HTML. It's not displayed and has no side effects, but it's there unless
+ *    content-type is not HTML, or a content-disposition header is sent
+ *
+ * Basically, the caveats boil down to that you have to adhere to general best practice guidelines in your code.
+ */
+$_kintSettings['ajaxDetection'] = false;
+
+/** @var bool enable detection when Kint is command line. Formats output with whitespace only; does not HTML-escape it */
+$_kintSettings['cliDetection'] = true;
+
+/** @var bool in addition to above setting, enable detection when Kint is run in *UNIX* command line.
+ * Attempts to add coloring, but if seen as plain text, the color information is visible as gibberish
+ */
+$_kintSettings['cliColors'] = false;
+
+
+/**
+ * @var callback filters array/object keys before outputting; return false if you do not wish to see it in the output
+ *
+ * @param string $key the key being output
+ * @param mixed  $val the contents of the dumped element in case you need it
+ *
+ * @return bool return false to skip displaying
+ *
+ * [!] EXAMPLE:
+ *
+ * $_kintSettings['keyFilterCallback'] = function( $key, $val ) {
+ *     if ( preg_match( '#_mt$#', $key ) ) {
+ *         return false;
+ *     }
+ *
+ *     if ( $val === '--testing--' ) {
+ *         return false;
+ *     }
+ *
+ *     // no need to return true to continue output
+ * };
+ *
+ */
+$_kintSettings['keyFilterCallback'] = null;
+
+unset( $_kintSettings );
\ No newline at end of file
diff --git a/modules/devel/kint/kint/decorators/cli.php b/modules/devel/kint/kint/decorators/cli.php
new file mode 100644
index 0000000..36992a2
--- /dev/null
+++ b/modules/devel/kint/kint/decorators/cli.php
@@ -0,0 +1,187 @@
+<?php
+class Kint_Decorators_Cli extends Kint
+{
+	private static $_enableColors;
+
+	public static function decorate( kintVariableData $kintVar, $level = 0 )
+	{
+		self::_init();
+
+		$output = '';
+		if ( $level === 0 ) {
+			$name = $kintVar->name ? $kintVar->name : 'literal';
+			if ( self::$_enableColors ) {
+				$output .= "\033[0;32m#-----------------{$name}#-----------------#\033[0m\n";
+			} else {
+				$output .= "#-----------------{$name}#-----------------#\n";
+			}
+			$kintVar->name = null;
+		}
+
+		$space = str_repeat( $s = '    ', $level );
+		$output .= $space . self::_drawHeader( $kintVar );
+
+
+		if ( $kintVar->extendedValue !== null ) {
+			$output .= " [\n";
+
+			if ( is_array( $kintVar->extendedValue ) ) {
+				foreach ( $kintVar->extendedValue as $v ) {
+					$output .= self::decorate( $v, $level + 1 );
+				}
+			} elseif ( is_string( $kintVar->extendedValue ) ) {
+				$output .= $space . $s . $kintVar->extendedValue . "\n"; # depth too great or similar
+			} else {
+				$output .= self::decorate( $kintVar->extendedValue, $level + 1 ); //it's kint's container
+			}
+			$output .= $space . "]\n";
+		} else {
+			$output .= "\n";
+		}
+
+		return $output;
+	}
+
+	public static function decorateTrace( $traceData )
+	{
+		$output = '';
+		foreach ( $traceData as $i => $step ) {
+			$output .= $i + 1 . ': ';
+
+			if ( isset( $step['file'] ) ) {
+				$output .= self::_buildCalleeString( $step );
+			} else {
+				$output .= 'PHP internal call';
+			}
+
+			$output .= ' ' . $step['function'];
+
+			if ( isset( $step['args'] ) ) {
+				$output .= '(' . implode( ', ', array_keys( $step['args'] ) ) . ')';
+			}
+			$output .= "\n";
+
+
+			if ( !empty( $step['object'] ) ) {
+				$calleeDump = kintParser::factory( $step['object'] );
+				$output .= "## Callee object ##\n";
+				$output .= self::decorate( $calleeDump, 1 );
+			}
+			if ( !empty( $step['args'] ) ) {
+				$output .= "## Arguments ##\n";
+				foreach ( $step['args'] as $k => $arg ) {
+					kintParser::reset();
+					$output .= self::decorate( kintParser::factory( $arg, $k ), 1 );
+				}
+			}
+		}
+
+		return $output;
+	}
+
+
+	/**
+	 * called for each dump, opens the html tag
+	 *
+	 * @param array $callee caller information taken from debug backtrace
+	 *
+	 * @return string
+	 */
+	public static function wrapStart( $callee )
+	{
+		return "";
+	}
+
+
+	/**
+	 * closes Kint::_wrapStart() started html tags and displays callee information
+	 *
+	 * @param array $callee caller information taken from debug backtrace
+	 * @param array $miniTrace full path to kint call
+	 * @param array $prevCaller previous caller information taken from debug backtrace
+	 *
+	 * @return string
+	 */
+	public static function wrapEnd( $callee, $miniTrace, $prevCaller )
+	{
+		if ( !Kint::$displayCalledFrom ) {
+			return "\n";
+		}
+
+		$callingFunction = '';
+		if ( isset( $prevCaller['class'] ) ) {
+			$callingFunction = $prevCaller['class'];
+		}
+		if ( isset( $prevCaller['type'] ) ) {
+			$callingFunction .= $prevCaller['type'];
+		}
+		if ( isset( $prevCaller['function'] ) && !in_array( $prevCaller['function'], Kint::$_statements ) ) {
+			$callingFunction .= $prevCaller['function'] . '()';
+		}
+		$callingFunction and $callingFunction = " in {$callingFunction}";
+
+		$calleeInfo = null;
+		if ( isset( $callee['file'] ) ) {
+			$calleeInfo = self::_buildCalleeString( $callee );
+		}
+
+
+		return $calleeInfo || $callingFunction
+			? "\033[0;32mCalled from {$calleeInfo}{$callingFunction}\033[0m\n"
+			: "\n";
+	}
+
+
+	private static function _drawHeader( kintVariableData $kintVar )
+	{
+		$output = '';
+
+		if ( $kintVar->access ) {
+			$output .= ' ' . $kintVar->access;
+		}
+
+		if ( $kintVar->name !== null && $kintVar->name !== '' ) {
+			$output .= ' ' . $kintVar->name;
+		}
+
+		if ( $kintVar->operator ) {
+			$output .= ' ' . $kintVar->operator;
+		}
+
+		if ( self::$_enableColors ) {
+			$output .= " \033[1;35m" . $kintVar->type . "\033[0m";
+		} else {
+			$output .= $kintVar->type;
+		}
+
+		if ( $kintVar->subtype ) {
+			$output .= ' ' . $kintVar->subtype;
+		}
+
+
+		if ( $kintVar->size !== null ) {
+			$output .= ' (' . $kintVar->size . ')';
+		}
+
+
+		if ( $kintVar->value !== null && $kintVar->value !== '' ) {
+			$output .= ' ' . $kintVar->value;
+		}
+
+		return ltrim( $output );
+	}
+
+	private static function _buildCalleeString( $callee )
+	{
+		list( , $shortenedName ) = self::shortenPath( $callee['file'], $callee['line'], false );
+
+		return $shortenedName;
+	}
+
+	private static function _init()
+	{
+		if ( !isset( self::$_enableColors ) ) {
+			self::$_enableColors = strtoupper( substr( PHP_OS, 0, 3 ) ) !== 'WIN' || getenv( 'ANSICON' );
+		}
+	}
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/decorators/concise.php b/modules/devel/kint/kint/decorators/concise.php
new file mode 100644
index 0000000..74c3db6
--- /dev/null
+++ b/modules/devel/kint/kint/decorators/concise.php
@@ -0,0 +1,58 @@
+<?php
+class Kint_Decorators_Concise extends Kint
+{
+	/**
+	 * output:
+	 *
+	 * [value]
+	 *
+	 * value [title="[access] [name] [operator *] [subtype] [size] "]
+	 * OR
+	 * type [title="[access] [name] type [operator *] [subtype] [size] "]
+	 * <ul>extendedValue
+	 *
+	 * @param kintVariableData $kintVar
+	 *
+	 * @return string
+	 */
+	public static function decorate( kintVariableData $kintVar )
+	{
+		if ( $kintVar->extendedValue !== null || !empty( $kintVar->_alternatives ) ) {
+			return Kint_Decorators_Rich::decorate( $kintVar );
+		}
+
+		if ( $kintVar->value !== null ) {
+			$output = '<p title="';
+
+			if ( $kintVar->access !== null ) {
+				$output .= $kintVar->access . " ";
+			}
+
+			if ( $kintVar->name !== null ) {
+				$output .= $kintVar->name . " ";
+			}
+
+			if ( $kintVar->type !== null ) {
+				$output .= $kintVar->type;
+				if ( $kintVar->subtype !== null ) {
+					$output .= " " . $kintVar->subtype;
+				}
+				$output .= " ";
+			}
+
+			if ( $kintVar->operator !== null ) {
+				$output .= $kintVar->operator . "";
+			}
+
+			if ( $kintVar->size !== null ) {
+				$output .= "(" . $kintVar->size . ") ";
+			}
+
+			$output = trim( $output ) . '">' . $kintVar->value . '</p>';
+		} else {
+			$output = '<u>NULL</u>';
+		}
+
+		return $output;
+	}
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/decorators/plain.php b/modules/devel/kint/kint/decorators/plain.php
new file mode 100644
index 0000000..fb19fe8
--- /dev/null
+++ b/modules/devel/kint/kint/decorators/plain.php
@@ -0,0 +1,178 @@
+<?php
+// todo make cli, plain and whitespace decorators DRY
+class Kint_Decorators_Plain extends Kint
+{
+	public static function decorate( kintVariableData $kintVar, $level = 0 )
+	{
+		$output = '';
+		if ( $level === 0 ) {
+			$name = $kintVar->name ? $kintVar->name : 'literal';
+			$output .= "#-----------------$name-----------------#\n";
+			$kintVar->name = null;
+		}
+
+		$space = str_repeat( $s = '    ', $level );
+		$output .= $space . self::_drawHeader( $kintVar );
+
+
+		if ( $kintVar->extendedValue !== null ) {
+			$output .= " [\n";
+
+			if ( is_array( $kintVar->extendedValue ) ) {
+				foreach ( $kintVar->extendedValue as $v ) {
+					$output .= self::decorate( $v, $level + 1 );
+				}
+			} elseif ( is_string( $kintVar->extendedValue ) ) {
+				$output .= $space . $s . $kintVar->extendedValue . "\n"; # depth too great or similar
+			} else {
+				$output .= self::decorate( $kintVar->extendedValue, $level + 1 ); //it's kint's container
+			}
+			$output .= $space . "]\n";
+		} else {
+			$output .= "\n";
+		}
+
+		return $output;
+	}
+
+	public static function decorateTrace( $traceData )
+	{
+		$output = '';
+		foreach ( $traceData as $i => $step ) {
+			$output .= $i + 1 . ': ';
+
+			if ( isset( $step['file'] ) ) {
+				$output .= self::_buildCalleeString( $step );
+			} else {
+				$output .= 'PHP internal call';
+			}
+
+			$output .= ' ' . $step['function'];
+
+			if ( isset( $step['args'] ) ) {
+				$output .= '(' . implode( ', ', array_keys( $step['args'] ) ) . ')';
+			}
+			$output .= "\n";
+
+
+			if ( !empty( $step['object'] ) ) {
+				$calleeDump = kintParser::factory( $step['object'] );
+				$output .= "## Callee object ##\n";
+				$output .= self::decorate( $calleeDump, 1 );
+			}
+			if ( !empty( $step['args'] ) ) {
+				$output .= "## Arguments ##\n";
+				foreach ( $step['args'] as $k => $arg ) {
+					kintParser::reset();
+					$output .= self::decorate( kintParser::factory( $arg, $k ), 1 );
+				}
+			}
+		}
+
+		return $output;
+	}
+
+
+	/**
+	 * called for each dump, opens the html tag
+	 *
+	 * @param array $callee caller information taken from debug backtrace
+	 *
+	 * @return string
+	 */
+	public static function wrapStart( $callee )
+	{
+		return "<pre>\n";
+	}
+
+
+	/**
+	 * closes Kint::_wrapStart() started html tags and displays callee information
+	 *
+	 * @param array $callee caller information taken from debug backtrace
+	 * @param array $miniTrace full path to kint call
+	 * @param array $prevCaller previous caller information taken from debug backtrace
+	 *
+	 * @return string
+	 */
+	public static function wrapEnd( $callee, $miniTrace, $prevCaller )
+	{
+		if ( !Kint::$displayCalledFrom ) {
+			return '</pre>';
+		}
+
+		$callingFunction = '';
+		if ( isset( $prevCaller['class'] ) ) {
+			$callingFunction = $prevCaller['class'];
+		}
+		if ( isset( $prevCaller['type'] ) ) {
+			$callingFunction .= $prevCaller['type'];
+		}
+		if ( isset( $prevCaller['function'] ) && !in_array( $prevCaller['function'], Kint::$_statements ) ) {
+			$callingFunction .= $prevCaller['function'] . '()';
+		}
+		$callingFunction and $callingFunction = " in {$callingFunction}";
+
+		$calleeInfo = null;
+		if ( isset( $callee['file'] ) ) {
+			$calleeInfo = self::_buildCalleeString( $callee );
+		}
+
+
+		return $calleeInfo || $callingFunction
+			? "Called from {$calleeInfo}{$callingFunction}</pre>"
+			: "</pre>";
+	}
+
+
+	private static function _drawHeader( kintVariableData $kintVar )
+	{
+		$output = '';
+
+		if ( $kintVar->access ) {
+			$output .= ' ' . $kintVar->access;
+		}
+
+		if ( $kintVar->name !== null && $kintVar->name !== '' ) {
+			$output .= ' ' . $kintVar->name;
+		}
+
+		if ( $kintVar->operator ) {
+			$output .= ' ' . $kintVar->operator;
+		}
+
+
+		$output .= ' <b>' . $kintVar->type . '</b>';
+		if ( $kintVar->subtype ) {
+			$output .= ' ' . $kintVar->subtype;
+		}
+
+
+		if ( $kintVar->size !== null ) {
+			$output .= ' (' . $kintVar->size . ')';
+		}
+
+
+		if ( $kintVar->value !== null && $kintVar->value !== '' ) {
+			$output .= ' ' . $kintVar->value;
+		}
+
+		return ltrim( $output );
+	}
+
+	private static function _buildCalleeString( $callee )
+	{
+		list( $url, $shortenedName ) = self::shortenPath( $callee['file'], $callee['line'], false );
+
+		if ( strpos( $url, 'http://' ) === 0 ) {
+			return
+				"<a href=\"#\"onclick=\""
+				. "X=new XMLHttpRequest;"
+				. "X.open('GET','{$url}');"
+				. "X.send();"
+				. "return!1\">{$shortenedName}</a>";
+		} else {
+			return "<a href=\"{$url}\">{$shortenedName}</a>";
+		}
+	}
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/decorators/rich.php b/modules/devel/kint/kint/decorators/rich.php
new file mode 100644
index 0000000..538c736
--- /dev/null
+++ b/modules/devel/kint/kint/decorators/rich.php
@@ -0,0 +1,325 @@
+<?php
+class Kint_Decorators_Rich extends Kint
+{
+	# make calls to Kint::dump() from different places in source coloured differently.
+	private static $_usedColors = array();
+
+	public static function decorate( kintVariableData $kintVar )
+	{
+		$output = '<dl>';
+
+		$extendedPresent = $kintVar->extendedValue !== null || $kintVar->_alternatives !== null;
+
+		if ( $extendedPresent ) {
+			$class = 'kint-parent';
+			if ( Kint::$expandedByDefault ) {
+				$class .= ' kint-show';
+			}
+			$output .= '<dt class="' . $class . '">';
+		} else {
+			$output .= '<dt>';
+		}
+
+		if ( $extendedPresent ) {
+			$output .= '<span class="kint-popup-trigger" title="Open in new window">&rarr;</span><nav></nav>';
+		}
+
+		$output .= self::_drawHeader( $kintVar ) . $kintVar->value . '</dt>';
+
+
+		if ( $extendedPresent ) {
+			$output .= '<dd>';
+		}
+
+		if ( isset( $kintVar->extendedValue ) ) {
+
+			if ( is_array( $kintVar->extendedValue ) ) {
+				foreach ( $kintVar->extendedValue as $v ) {
+					$output .= self::decorate( $v );
+				}
+			} elseif ( is_string( $kintVar->extendedValue ) ) {
+				$output .= '<pre>' . $kintVar->extendedValue . '</pre>';
+			} else {
+				$output .= self::decorate( $kintVar->extendedValue ); //it's kint's container
+			}
+
+		} elseif ( isset( $kintVar->_alternatives ) ) {
+			$output .= "<ul class=\"kint-tabs\">";
+
+			foreach ( $kintVar->_alternatives as $k => $var ) {
+				$active = $k === 0 ? ' class="kint-active-tab"' : '';
+				$output .= "<li{$active}>" . self::_drawHeader( $var, false ) . '</li>';
+			}
+
+			$output .= "</ul><ul>";
+
+			foreach ( $kintVar->_alternatives as $var ) {
+				$output .= "<li>";
+
+				$var = $var->value;
+
+				if ( is_array( $var ) ) {
+					foreach ( $var as $v ) {
+						$output .= is_string( $v )
+							? '<pre>' . $v . '</pre>'
+							: self::decorate( $v );
+					}
+				} elseif ( is_string( $var ) ) {
+					$output .= '<pre>' . $var . '</pre>';
+				} elseif ( isset( $var ) ) {
+					throw new Exception(
+						'Kint has encountered an error, '
+						. 'please paste this report to https://github.com/raveren/kint/issues<br>'
+						. 'Error encountered at ' . basename( __FILE__ ) . ':' . __LINE__ . '<br>'
+						. ' variables: '
+						. htmlspecialchars( var_export( $kintVar->_alternatives, true ), ENT_QUOTES )
+					);
+				}
+
+				$output .= "</li>";
+			}
+
+			$output .= "</ul>";
+		}
+		if ( $extendedPresent ) {
+			$output .= '</dd>';
+		}
+
+		$output .= '</dl>';
+
+		return $output;
+	}
+
+	public static function decorateTrace( $traceData )
+	{
+		$output = '<dl class="kint-trace">';
+
+		foreach ( $traceData as $i => $step ) {
+			$class = 'kint-parent';
+			if ( Kint::$expandedByDefault ) {
+				$class .= ' kint-show';
+			}
+
+			$output .= '<dt class="' . $class . '">'
+				. '<b>' . ( $i + 1 ) . '</b> '
+				. '<nav></nav>'
+				. '<var>';
+
+			if ( isset( $step['file'] ) ) {
+				$output .= Kint::shortenPath( $step['file'], $step['line'] );
+			} else {
+				$output .= 'PHP internal call';
+			}
+
+			$output .= '</var>';
+
+			$output .= $step['function'];
+
+			if ( isset( $step['args'] ) ) {
+				$output .= '(' . implode( ', ', array_keys( $step['args'] ) ) . ')';
+			}
+			$output .= '</dt><dd>';
+			$firstTab = ' class="kint-active-tab"';
+			$output .= '<ul class="kint-tabs">';
+
+			if ( !empty( $step['source'] ) ) {
+				$output .= "<li{$firstTab}>Source</li>";
+				$firstTab = '';
+			}
+
+			if ( !empty( $step['args'] ) ) {
+				$output .= "<li{$firstTab}>Arguments</li>";
+				$firstTab = '';
+			}
+
+			if ( !empty( $step['object'] ) ) {
+				kintParser::reset();
+				$calleeDump = kintParser::factory( $step['object'] );
+
+				$output .= "<li{$firstTab}>Callee object [{$calleeDump->subtype}]</li>";
+			}
+
+
+			$output .= '</ul><ul>';
+
+
+			if ( !empty( $step['source'] ) ) {
+				$output .= "<li><pre class=\"kint-source\">{$step['source']}</pre></li>";
+			}
+
+			if ( !empty( $step['args'] ) ) {
+				$output .= "<li>";
+				foreach ( $step['args'] as $k => $arg ) {
+					kintParser::reset();
+					$output .= self::decorate( kintParser::factory( $arg, $k ) );
+				}
+				$output .= "</li>";
+			}
+			if ( !empty( $step['object'] ) ) {
+				$output .= "<li>" . self::decorate( $calleeDump ) . "</li>";
+			}
+
+			$output .= '</ul></dd>';
+		}
+		$output .= '</dl>';
+
+		return $output;
+	}
+
+
+	/**
+	 * called for each dump, opens the html tag
+	 *
+	 * @param array $callee caller information taken from debug backtrace
+	 *
+	 * @return string
+	 */
+	public static function wrapStart( $callee )
+	{
+		// colors looping outputs the same (i.e. if same line in code dumps variables multiple time,
+		// we assume it's in a loop)
+
+		$uid = isset( $callee['file'] ) ? crc32( $callee['file'] . $callee['line'] ) : 'no-file';
+
+		if ( isset( self::$_usedColors[$uid] ) ) {
+			$class = self::$_usedColors[$uid];
+		} else {
+			$class                   = sizeof( self::$_usedColors );
+			self::$_usedColors[$uid] = $class;
+		}
+
+		$class = "kint_{$class}";
+
+
+		return self::_css() . "<div class=\"kint {$class}\">";
+	}
+
+
+	/**
+	 * closes Kint::_wrapStart() started html tags and displays callee information
+	 *
+	 * @param array $callee caller information taken from debug backtrace
+	 * @param array $miniTrace full path to kint call
+	 * @param array $prevCaller previous caller information taken from debug backtrace
+	 *
+	 * @return string
+	 */
+	public static function wrapEnd( $callee, $miniTrace, $prevCaller )
+	{
+		if ( !Kint::$displayCalledFrom ) {
+			return '</div>';
+		}
+
+		$callingFunction = '';
+		$calleeInfo      = '';
+		$traceDisplay    = '';
+		if ( isset( $prevCaller['class'] ) ) {
+			$callingFunction = $prevCaller['class'];
+		}
+		if ( isset( $prevCaller['type'] ) ) {
+			$callingFunction .= $prevCaller['type'];
+		}
+		if ( isset( $prevCaller['function'] ) && !in_array( $prevCaller['function'], Kint::$_statements ) ) {
+			$callingFunction .= $prevCaller['function'] . '()';
+		}
+		$callingFunction and $callingFunction = " [{$callingFunction}]";
+
+
+		if ( isset( $callee['file'] ) ) {
+			$calleeInfo .= 'Called from ' . self::shortenPath( $callee['file'], $callee['line'], true );
+		}
+
+		if ( !empty( $miniTrace ) ) {
+			$traceDisplay = '<ol>';
+			foreach ( $miniTrace as $step ) {
+				$traceDisplay .= '<li>' . self::shortenPath( $step['file'], $step['line'], true ); // closing tag not required
+				if ( isset( $step['function'] ) && !in_array( $step['function'], Kint::$_statements ) ) {
+					$classString = ' [';
+					if ( isset( $step['class'] ) ) {
+						$classString .= $step['class'];
+					}
+					if ( isset( $step['type'] ) ) {
+						$classString .= $step['type'];
+					}
+					$classString .= $step['function'] . '()]';
+					$traceDisplay .= $classString;
+				}
+			}
+			$traceDisplay .= '</ol>';
+
+			$calleeInfo = '<nav></nav>' . $calleeInfo;
+		}
+
+
+		return "<footer>"
+		. '<span class="kint-popup-trigger" title="Open in new window">&rarr;</span> '
+		. "{$calleeInfo}{$callingFunction}{$traceDisplay}"
+		. "</footer></div>";
+	}
+
+
+	private static function _drawHeader( kintVariableData $kintVar, $verbose = true )
+	{
+		$output = '';
+		if ( $verbose ) {
+			if ( $kintVar->access !== null ) {
+				$output .= "<var>" . $kintVar->access . "</var> ";
+			}
+
+			if ( $kintVar->name !== null && $kintVar->name !== '' ) {
+				$output .= "<dfn>" . $kintVar->name . "</dfn> ";
+			}
+
+			if ( $kintVar->operator !== null ) {
+				$output .= $kintVar->operator . " ";
+			}
+		}
+
+		if ( $kintVar->type !== null ) {
+			if ( $verbose ) {
+				$output .= "<var>";
+			}
+
+			$output .= $kintVar->type;
+			if ( $kintVar->subtype !== null ) {
+				$output .= " " . $kintVar->subtype;
+			}
+
+			if ( $verbose ) {
+				$output .= "</var>";
+			} else {
+				$output .= " ";
+			}
+		}
+
+
+		if ( $kintVar->size !== null ) {
+			$output .= "(" . $kintVar->size . ") ";
+		}
+
+		return $output;
+	}
+
+
+	/**
+	 * produces css and js required for display. May be called multiple times, will only produce output once per
+	 * pageload or until `-` or `@` modifier is used
+	 *
+	 * @return string
+	 */
+	private static function _css()
+	{
+		if ( !Kint::$_firstRun ) return '';
+		Kint::$_firstRun = false;
+
+		$baseDir = KINT_DIR . 'view/compiled/main/';
+
+		if ( !is_readable( $cssFile = $baseDir . self::$theme . '.css' ) ) {
+			$cssFile = $baseDir . 'original.css';
+		}
+
+		return
+			'<script class="-kint-js">' . file_get_contents( $baseDir . 'kint.js' ) . '</script>'
+			. '<style class="-kint-css">' . file_get_contents( $cssFile ) . "</style>\n";
+	}
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/decorators/whitespace.php b/modules/devel/kint/kint/decorators/whitespace.php
new file mode 100644
index 0000000..da3f8c6
--- /dev/null
+++ b/modules/devel/kint/kint/decorators/whitespace.php
@@ -0,0 +1,168 @@
+<?php
+class Kint_Decorators_Whitespace extends Kint
+{
+	public static function decorate( kintVariableData $kintVar, $level = 0 )
+	{
+		$output = '';
+		if ( $level === 0 ) {
+			$name = $kintVar->name ? $kintVar->name : 'literal';
+			$output .= "#-----------------$name-----------------#\n";
+			$kintVar->name = null;
+		}
+
+		$space = str_repeat( $s = '    ', $level );
+		$output .= $space . self::_drawHeader( $kintVar );
+
+
+		if ( $kintVar->extendedValue !== null ) {
+			$output .= " [\n";
+
+			if ( is_array( $kintVar->extendedValue ) ) {
+				foreach ( $kintVar->extendedValue as $v ) {
+					$output .= self::decorate( $v, $level + 1 );
+				}
+			} elseif ( is_string( $kintVar->extendedValue ) ) {
+				$output .= $space . $s . $kintVar->extendedValue . "\n"; # depth too great or similar
+			} else {
+				$output .= self::decorate( $kintVar->extendedValue, $level + 1 ); //it's kint's container
+			}
+			$output .= $space . "]\n";
+		} else {
+			$output .= "\n";
+		}
+
+		return $output;
+	}
+
+	public static function decorateTrace( $traceData )
+	{
+		$output = '';
+		foreach ( $traceData as $i => $step ) {
+			$output .= $i + 1 . ': ';
+
+			if ( isset( $step['file'] ) ) {
+				$output .= self::_buildCalleeString( $step );
+			} else {
+				$output .= 'PHP internal call';
+			}
+
+			$output .= ' ' . $step['function'];
+
+			if ( isset( $step['args'] ) ) {
+				$output .= '(' . implode( ', ', array_keys( $step['args'] ) ) . ')';
+			}
+			$output .= "\n";
+
+
+			if ( !empty( $step['object'] ) ) {
+				$calleeDump = kintParser::factory( $step['object'] );
+				$output .= "## Callee object ##\n";
+				$output .= self::decorate( $calleeDump, 1 );
+			}
+			if ( !empty( $step['args'] ) ) {
+				$output .= "## Arguments ##\n";
+				foreach ( $step['args'] as $k => $arg ) {
+					kintParser::reset();
+					$output .= self::decorate( kintParser::factory( $arg, $k ), 1 );
+				}
+			}
+		}
+
+		return $output;
+	}
+
+
+	/**
+	 * called for each dump, opens the html tag
+	 *
+	 * @param array $callee caller information taken from debug backtrace
+	 *
+	 * @return string
+	 */
+	public static function wrapStart( $callee )
+	{
+		return "\n";
+	}
+
+
+	/**
+	 * closes Kint::_wrapStart() started html tags and displays callee information
+	 *
+	 * @param array $callee caller information taken from debug backtrace
+	 * @param array $miniTrace full path to kint call
+	 * @param array $prevCaller previous caller information taken from debug backtrace
+	 *
+	 * @return string
+	 */
+	public static function wrapEnd( $callee, $miniTrace, $prevCaller )
+	{
+		if ( !Kint::$displayCalledFrom ) {
+			return "\n";
+		}
+
+		$callingFunction = '';
+		if ( isset( $prevCaller['class'] ) ) {
+			$callingFunction = $prevCaller['class'];
+		}
+		if ( isset( $prevCaller['type'] ) ) {
+			$callingFunction .= $prevCaller['type'];
+		}
+		if ( isset( $prevCaller['function'] ) && !in_array( $prevCaller['function'], Kint::$_statements ) ) {
+			$callingFunction .= $prevCaller['function'] . '()';
+		}
+		$callingFunction and $callingFunction = " in {$callingFunction}";
+
+		$calleeInfo = null;
+		if ( isset( $callee['file'] ) ) {
+			$calleeInfo = self::_buildCalleeString( $callee );
+		}
+
+
+		return $calleeInfo || $callingFunction
+			? "Called from {$calleeInfo}{$callingFunction}\n"
+			: "\n";
+	}
+
+
+	private static function _drawHeader( kintVariableData $kintVar )
+	{
+		$output = '';
+
+		if ( $kintVar->access ) {
+			$output .= ' ' . $kintVar->access;
+		}
+
+		if ( $kintVar->name !== null && $kintVar->name !== '' ) {
+			$output .= ' ' . $kintVar->name;
+		}
+
+		if ( $kintVar->operator ) {
+			$output .= ' ' . $kintVar->operator;
+		}
+
+
+		$output .= $kintVar->type;
+		if ( $kintVar->subtype ) {
+			$output .= ' ' . $kintVar->subtype;
+		}
+
+
+		if ( $kintVar->size !== null ) {
+			$output .= ' (' . $kintVar->size . ')';
+		}
+
+
+		if ( $kintVar->value !== null && $kintVar->value !== '' ) {
+			$output .= ' ' . $kintVar->value;
+		}
+
+		return ltrim( $output );
+	}
+
+	private static function _buildCalleeString( $callee )
+	{
+		list( , $shortenedName ) = self::shortenPath( $callee['file'], $callee['line'], false );
+
+		return $shortenedName;
+	}
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/examples/overview.php b/modules/devel/kint/kint/examples/overview.php
new file mode 100644
index 0000000..57a0a6d
--- /dev/null
+++ b/modules/devel/kint/kint/examples/overview.php
@@ -0,0 +1,181 @@
+<html>
+<?php
+require('../Kint.class.php');
+
+$selectedTheme = isset($_GET['theme']) ? $_GET['theme'] : 'original';
+$allowedThemes = array();
+$dh  = opendir('../view/inc');
+while(($filename = readdir($dh)) !== false) {
+     if(strpos($filename, '.css') !== false) {
+         $allowedThemes[] = str_replace('.css', '', $filename);
+     }
+}
+
+sort($allowedThemes);
+
+if(in_array($selectedTheme, $allowedThemes)) {
+    Kint::$theme = $selectedTheme;
+}
+
+class BaseUser
+{
+    /**
+     * @return string
+     */
+    public function getFullName() {}
+}
+
+class User extends BaseUser
+{
+    CONST DEFAULT_PATH = 'some/default/path';
+    CONST ROLE_DISALLOWED = 1;
+    CONST ROLE_ALLOWED = 2;
+    CONST ROLE_FORBIDDEN = 3;
+
+    public $additionalData;
+    private $username = 'demo_username';
+    private $password = 'demo_password';
+    private $createdDate;
+
+    public function __construct() {}
+
+    /**
+     * Check is user is equal to another user
+     */
+    public function isEqualTo(BaseUser $user) {}
+
+    /**
+     * Get data from this demo class
+     *
+     * @param string $username
+     * @return array
+     */
+    public function setUsername($username) {}
+
+    /**
+     * Set additional data
+     *
+     * @array $data
+     */
+    public function setAdditionalData(array $data) { $this->additionalData = $data; }
+
+    /**
+     * @return \DateTime date object
+     */
+    public function getCreatedDate() {}
+
+    /**
+     * @param \DateTime $date
+     */
+    public function setCreatedDate(DateTime $date) { $this->createdDate = $date; }
+
+    /**
+     * Dummy method that triggers trace
+     */
+    public function ensure() { Kint::trace(); }
+}
+
+class UserManager
+{
+    private $user;
+
+    /**
+     * Get user from manager
+     */
+    public function getUser() { return $this->user; }
+
+    /**
+     * Debug specific user
+     *
+     * @param \User $user
+     */
+    public function debugUser($user) {
+        $this->user = $user;
+        d($this->getUser());
+    }
+
+    /**
+     * Ensure user (triggers ensure() method on \User object that trace)
+     *
+     * @void
+     */
+    public function ensureUser() { $this->user->ensure(); }
+}
+
+$user = new User;
+$user->setAdditionalData(array(
+    'last_login' => new DateTime(),
+    'current_unix_timestamp' => time(),
+    'random_rgb_color_code' => '#FF9900',
+    'impressions' => 60,
+    'nickname' => 'Someuser',
+));
+$user->setCreatedDate(new DateTime('2013-10-10'));
+$userManager = new UserManager();
+
+for($i = 1; $i < 6; $i ++) {
+    $tabularData[] = array(
+        'date' => "2013-01-0{$i}",
+        'allowed' => $i % 3 == 0,
+        'action' => "action {$i}",
+        'clicks' => rand(100, 50000),
+        'impressions' => rand(10000, 500000),
+    );
+
+    if($i % 2 == 0) {
+        unset($tabularData[$i - 1]['clicks']);
+    }
+}
+
+$nestedArray = array();
+
+for($i = 1; $i < 6; $i ++) {
+    $nestedArray["user group {$i}"] = array(
+        "user {$i}" => array(
+            'name' => "Name {$i}",
+            'surname' => "Surname {$i}"
+        ),
+
+        'data' => array(
+            'conversions' => rand(100, 5000),
+            'spent' => array('currency' => 'EUR', 'amount' => rand(10000, 500000))
+        ),
+    );
+}
+?>
+<head>
+	<title>Kint PHP debugging tool - overview</title>
+	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
+	<script>
+		$(function() {
+			$('#themeSelect').val('<?php echo isset($_GET['theme']) ? $_GET['theme'] : 'original' ?>');
+
+			$('#themeSelect').change(function(e) {
+				window.location = '?theme=' + $(this).val();
+			});
+		});
+	</script>
+</head>
+<body>
+<div>
+    <div style="float: right">Switch theme:
+        <select id="themeSelect">
+            <?php foreach($allowedThemes as $theme) : ?>
+                <option value="<?php echo $theme ?>">
+                    <?php echo ucfirst(str_replace('-', ' ', $theme)) ?>
+                </option>
+            <?php endforeach ?>
+        </select>
+    </div>
+    <h2>Kint PHP debugging tool - overview</h2>
+</div>
+<h3>Debug variables</h3>
+<?php
+    $userManager->debugUser($user);
+    d($userManager, $tabularData);
+    d($nestedArray);
+?>
+<h3>Trace</h3>
+<?php $userManager->ensureUser(); ?>
+</body>
+</html>
\ No newline at end of file
diff --git a/modules/devel/kint/kint/parsers/custom/classmethods.php b/modules/devel/kint/kint/parsers/custom/classmethods.php
new file mode 100644
index 0000000..7b6e949
--- /dev/null
+++ b/modules/devel/kint/kint/parsers/custom/classmethods.php
@@ -0,0 +1,153 @@
+<?php
+
+class Kint_Parsers_ClassMethods extends kintParser
+{
+	private static $cache = array();
+
+	protected function _parse( &$variable )
+	{
+		if ( !is_object( $variable ) ) return false;
+
+		$className = get_class( $variable );
+
+		# assuming class definition will not change inside one request
+		if ( !isset( self::$cache[$className] ) ) {
+			$reflection = new \ReflectionClass( $variable );
+
+			$public = $private = $protected = array();
+
+			// Class methods
+			foreach ( $reflection->getMethods() as $method ) {
+				$params = array();
+
+				// Access type
+				$access = implode( ' ', \Reflection::getModifierNames( $method->getModifiers() ) );
+
+				// Method parameters
+				foreach ( $method->getParameters() as $param ) {
+					$paramString = '';
+
+					if ( $param->isArray() ) {
+						$paramString .= 'array ';
+					} else {
+						try {
+							if ( $paramClassName = $param->getClass() ) {
+								$paramString .= $paramClassName->name . ' ';
+							}
+						} catch ( ReflectionException $e ) {
+							preg_match( '/\[\s\<\w+?>\s([\w]+)/s', $param->__toString(), $matches );
+							$paramClassName = isset( $matches[1] ) ? $matches[1] : '';
+
+							$paramString .= ' UNDEFINED CLASS (' . $paramClassName . ') ';
+						}
+					}
+
+					$paramString .= ( $param->isPassedByReference() ? '&' : '' ) . '$' . $param->getName();
+
+					if ( $param->isDefaultValueAvailable() ) {
+						if ( is_array( $param->getDefaultValue() ) ) {
+							$arrayValues = array();
+							foreach ( $param->getDefaultValue() as $key => $value ) {
+								$arrayValues[] = $key . ' => ' . $value;
+							}
+
+							$defaultValue = 'array(' . implode( ', ', $arrayValues ) . ')';
+						} elseif ( $param->getDefaultValue() === null ) {
+							$defaultValue = 'NULL';
+						} elseif ( $param->getDefaultValue() === false ) {
+							$defaultValue = 'false';
+						} elseif ( $param->getDefaultValue() === true ) {
+							$defaultValue = 'true';
+						} elseif ( $param->getDefaultValue() === '' ) {
+							$defaultValue = '""';
+						} else {
+							$defaultValue = $param->getDefaultValue();
+						}
+
+						$paramString .= ' = ' . $defaultValue;
+					}
+
+					$params[] = $paramString;
+				}
+
+				$output = new kintVariableData;
+
+				// Simple DocBlock parser, look for @return
+				if ( ( $docBlock = $method->getDocComment() ) ) {
+					$matches = array();
+					if ( preg_match_all( '/@(\w+)\s+(.*)\r?\n/m', $docBlock, $matches ) ) {
+						$lines = array_combine( $matches[1], $matches[2] );
+						if ( isset( $lines['return'] ) ) {
+							$output->operator = '->';
+							# since we're outputting code, assumption that the string is utf8 is most likely correct
+							# and saves resources
+							$output->type = self::_escape( $lines['return'], 'UTF-8' );
+						}
+					}
+				}
+
+				$output->name   = ( $method->returnsReference() ? '&' : '' ) . $method->getName() . '('
+					. implode( ', ', $params ) . ')';
+				$output->access = $access;
+
+				if ( is_string( $docBlock ) ) {
+					$lines = array();
+					foreach ( explode( "\n", $docBlock ) as $line ) {
+						$line = trim( $line );
+
+						if ( in_array( $line, array( '/**', '/*', '*/' ) ) ) {
+							continue;
+						} elseif ( strpos( $line, '*' ) === 0 ) {
+							$line = substr( $line, 1 );
+						}
+
+						$lines[] = self::_escape( trim( $line ), 'UTF-8' );
+					}
+
+					$output->extendedValue = implode( "\n", $lines ) . "\n\n";
+				}
+
+				$declaringClass     = $method->getDeclaringClass();
+				$declaringClassName = $declaringClass->getName();
+
+				if ( $declaringClassName !== $className ) {
+					$output->extendedValue .= "<small>Inherited from <i>{$declaringClassName}</i></small>\n";
+				}
+
+				$fileName = \Kint::shortenPath( $method->getFileName(), $method->getStartLine() );
+
+				if ( $fileName ) {
+					$output->extendedValue .= "<small>Defined in {$fileName}</small>";
+				}
+
+				$sortName = $access . $method->getName();
+
+				if ( $method->isPrivate() ) {
+					$private[$sortName] = $output;
+				} elseif ( $method->isProtected() ) {
+					$protected[$sortName] = $output;
+				} else {
+					$public[$sortName] = $output;
+				}
+			}
+
+			if ( !$private && !$protected && !$public ) {
+				self::$cache[$className] = false;
+			}
+
+			ksort( $public );
+			ksort( $protected );
+			ksort( $private );
+
+			self::$cache[$className] = $public + $protected + $private;
+		}
+
+		if ( count( self::$cache[$className] ) === 0 ) {
+			return false;
+		}
+
+		$this->value = self::$cache[$className];
+		$this->type  = 'Available methods';
+		$this->size  = count( self::$cache[$className] );
+	}
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/parsers/custom/classstatics.php b/modules/devel/kint/kint/parsers/custom/classstatics.php
new file mode 100644
index 0000000..1c6d0e4
--- /dev/null
+++ b/modules/devel/kint/kint/parsers/custom/classstatics.php
@@ -0,0 +1,54 @@
+<?php
+class Kint_Parsers_ClassStatics extends kintParser
+{
+	protected function _parse( & $variable )
+	{
+		if ( !is_object( $variable ) ) return false;
+
+		$extendedValue = array();
+
+		$reflection = new ReflectionClass( $variable );
+		// first show static values
+		foreach ( $reflection->getProperties( ReflectionProperty::IS_STATIC ) as $property ) {
+			if ( $property->isPrivate() ) {
+				if ( !method_exists( $property, 'setAccessible' ) ) {
+					break;
+				}
+				$property->setAccessible( true );
+				$access = "private";
+			} elseif ( $property->isProtected() ) {
+				$property->setAccessible( true );
+				$access = "protected";
+			} else {
+				$access = 'public';
+			}
+
+			if ( Kint::$keyFilterCallback
+				&& call_user_func( Kint::$keyFilterCallback, $property->getName(), $property->getValue() ) === false
+			) {
+				continue;
+			}
+
+			$_      = $property->getValue();
+			$output = kintParser::factory( $_, '$' . $property->getName() );
+
+			$output->access   = $access;
+			$output->operator = '::';
+			$extendedValue[]  = $output;
+		}
+
+		foreach ( $reflection->getConstants() as $constant => $val ) {
+			$output = kintParser::factory( $val, $constant );
+
+			$output->access   = 'constant';
+			$output->operator = '::';
+			$extendedValue[]  = $output;
+		}
+
+		if ( empty( $extendedValue ) ) return false;
+
+		$this->value = $extendedValue;
+		$this->type  = 'Static class properties';
+		$this->size  = count( $extendedValue );
+	}
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/parsers/custom/color.php b/modules/devel/kint/kint/parsers/custom/color.php
new file mode 100644
index 0000000..7e5c211
--- /dev/null
+++ b/modules/devel/kint/kint/parsers/custom/color.php
@@ -0,0 +1,400 @@
+<?php
+class Kint_Parsers_Color extends kintParser
+{
+	private static $_css3Named = array(
+		'aliceblue'=>'#f0f8ff','antiquewhite'=>'#faebd7','aqua'=>'#00ffff','aquamarine'=>'#7fffd4','azure'=>'#f0ffff',
+		'beige'=>'#f5f5dc','bisque'=>'#ffe4c4','black'=>'#000000','blanchedalmond'=>'#ffebcd','blue'=>'#0000ff',
+		'blueviolet'=>'#8a2be2','brown'=>'#a52a2a','burlywood'=>'#deb887','cadetblue'=>'#5f9ea0','chartreuse'=>'#7fff00',
+		'chocolate'=>'#d2691e','coral'=>'#ff7f50','cornflowerblue'=>'#6495ed','cornsilk'=>'#fff8dc','crimson'=>'#dc143c',
+		'cyan'=>'#00ffff','darkblue'=>'#00008b','darkcyan'=>'#008b8b','darkgoldenrod'=>'#b8860b','darkgray'=>'#a9a9a9',
+		'darkgrey'=>'#a9a9a9','darkgreen'=>'#006400','darkkhaki'=>'#bdb76b','darkmagenta'=>'#8b008b',
+		'darkolivegreen'=>'#556b2f','darkorange'=>'#ff8c00','darkorchid'=>'#9932cc','darkred'=>'#8b0000',
+		'darksalmon'=>'#e9967a','darkseagreen'=>'#8fbc8f','darkslateblue'=>'#483d8b','darkslategray'=>'#2f4f4f',
+		'darkslategrey'=>'#2f4f4f','darkturquoise'=>'#00ced1','darkviolet'=>'#9400d3','deeppink'=>'#ff1493',
+		'deepskyblue'=>'#00bfff','dimgray'=>'#696969','dimgrey'=>'#696969','dodgerblue'=>'#1e90ff',
+		'firebrick'=>'#b22222','floralwhite'=>'#fffaf0','forestgreen'=>'#228b22','fuchsia'=>'#ff00ff',
+		'gainsboro'=>'#dcdcdc','ghostwhite'=>'#f8f8ff','gold'=>'#ffd700','goldenrod'=>'#daa520','gray'=>'#808080',
+		'grey'=>'#808080','green'=>'#008000','greenyellow'=>'#adff2f','honeydew'=>'#f0fff0','hotpink'=>'#ff69b4',
+		'indianred'=>'#cd5c5c','indigo'=>'#4b0082','ivory'=>'#fffff0','khaki'=>'#f0e68c','lavender'=>'#e6e6fa',
+		'lavenderblush'=>'#fff0f5','lawngreen'=>'#7cfc00','lemonchiffon'=>'#fffacd','lightblue'=>'#add8e6',
+		'lightcoral'=>'#f08080','lightcyan'=>'#e0ffff','lightgoldenrodyellow'=>'#fafad2','lightgray'=>'#d3d3d3',
+		'lightgrey'=>'#d3d3d3','lightgreen'=>'#90ee90','lightpink'=>'#ffb6c1','lightsalmon'=>'#ffa07a',
+		'lightseagreen'=>'#20b2aa','lightskyblue'=>'#87cefa','lightslategray'=>'#778899','lightslategrey'=>'#778899',
+		'lightsteelblue'=>'#b0c4de','lightyellow'=>'#ffffe0','lime'=>'#00ff00','limegreen'=>'#32cd32','linen'=>'#faf0e6',
+		'magenta'=>'#ff00ff','maroon'=>'#800000','mediumaquamarine'=>'#66cdaa','mediumblue'=>'#0000cd',
+		'mediumorchid'=>'#ba55d3','mediumpurple'=>'#9370d8','mediumseagreen'=>'#3cb371','mediumslateblue'=>'#7b68ee',
+		'mediumspringgreen'=>'#00fa9a','mediumturquoise'=>'#48d1cc','mediumvioletred'=>'#c71585',
+		'midnightblue'=>'#191970','mintcream'=>'#f5fffa','mistyrose'=>'#ffe4e1','moccasin'=>'#ffe4b5',
+		'navajowhite'=>'#ffdead','navy'=>'#000080','oldlace'=>'#fdf5e6','olive'=>'#808000','olivedrab'=>'#6b8e23',
+		'orange'=>'#ffa500','orangered'=>'#ff4500','orchid'=>'#da70d6','palegoldenrod'=>'#eee8aa','palegreen'=>'#98fb98',
+		'paleturquoise'=>'#afeeee','palevioletred'=>'#d87093','papayawhip'=>'#ffefd5','peachpuff'=>'#ffdab9',
+		'peru'=>'#cd853f','pink'=>'#ffc0cb','plum'=>'#dda0dd','powderblue'=>'#b0e0e6','purple'=>'#800080',
+		'red'=>'#ff0000','rosybrown'=>'#bc8f8f','royalblue'=>'#4169e1','saddlebrown'=>'#8b4513','salmon'=>'#fa8072',
+		'sandybrown'=>'#f4a460','seagreen'=>'#2e8b57','seashell'=>'#fff5ee','sienna'=>'#a0522d','silver'=>'#c0c0c0',
+		'skyblue'=>'#87ceeb','slateblue'=>'#6a5acd','slategray'=>'#708090','slategrey'=>'#708090','snow'=>'#fffafa',
+		'springgreen'=>'#00ff7f','steelblue'=>'#4682b4','tan'=>'#d2b48c','teal'=>'#008080','thistle'=>'#d8bfd8',
+		'tomato'=>'#ff6347','turquoise'=>'#40e0d0','violet'=>'#ee82ee','wheat'=>'#f5deb3','white'=>'#ffffff',
+		'whitesmoke'=>'#f5f5f5','yellow'=>'#ffff00','yellowgreen'=>'#9acd32'
+	);
+
+
+	protected function _parse( & $variable )
+	{
+		if ( !self::_fits( $variable ) ) return false;
+
+		$this->type  = 'CSS color';
+		$variants    = self::_convert( $variable );
+		$this->value =
+			"<div style=\"background:{$variable}\" class=\"kint-color-preview\">{$variable}</div>"
+			. "<strong>hex :</strong> {$variants['hex']}\n"
+			. "<strong>rgb :</strong> {$variants['rgb']}\n"
+			. ( isset( $variants['name'] ) ? "<strong>name:</strong> {$variants['name']}\n" : '' )
+			. "<strong>hsl :</strong> {$variants['hsl']}";
+	}
+
+
+	private static function _fits( $variable )
+	{
+		if ( !is_string( $variable ) ) return false;
+
+		$var = strtolower( trim( $variable ) );
+
+		return isset( self::$_css3Named[$var] )
+			|| preg_match(
+				'/^(?:#[0-9A-Fa-f]{3}|#[0-9A-Fa-f]{6}|(?:rgb|hsl)a?\s*\((?:\s*[0-9.%]+\s*,?){3,4}\))$/',
+				$var
+			);
+	}
+
+	private static function _convert( $color )
+	{
+		$color         = strtolower( $color );
+		$decimalColors = array();
+		$variants      = array(
+			'hex'   => null,
+			'rgb'   => null,
+			'name'  => null,
+			'hsl'   => null,
+		);
+
+		if ( isset( self::$_css3Named[$color] ) ) {
+			$variants['name'] = $color;
+			$color            = self::$_css3Named[$color];
+		}
+
+		if ( $color{0} === '#' ) {
+			$variants['hex'] = $color;
+			$color           = substr( $color, 1 );
+			if ( strlen( $color ) === 6 ) {
+				$colors = str_split( $color, 2 );
+			} else {
+				$colors = array(
+					$color{0} . $color{0},
+					$color{1} . $color{1},
+					$color{2} . $color{2},
+				);
+			}
+
+			$decimalColors = array_map( 'hexdec', $colors );
+		} elseif ( substr( $color, 0, 3 ) === 'rgb' ) {
+			$variants['rgb'] = $color;
+			preg_match_all( '#([0-9.%]+)#', $color, $matches );
+			$decimalColors = $matches[1];
+			foreach ( $decimalColors as &$color ) {
+				if ( strpos( $color, '%' ) !== false ) {
+					$color = str_replace( '%', '', $color ) * 2.55;
+				}
+			}
+
+
+		} elseif ( substr( $color, 0, 3 ) === 'hsl' ) {
+			$variants['hsl'] = $color;
+			preg_match_all( '#([0-9.%]+)#', $color, $matches );
+
+			$colors = $matches[1];
+			$colors[0] /= 360;
+			$colors[1] = str_replace( '%', '', $colors[1] ) / 100;
+			$colors[2] = str_replace( '%', '', $colors[2] ) / 100;
+
+			$decimalColors = self::_HSLtoRGB( $colors );
+			if ( isset( $colors[3] ) ) {
+				$decimalColors[] = $colors[3];
+			}
+		}
+
+		if ( isset( $decimalColors[3] ) ) {
+			$alpha = $decimalColors[3];
+			unset( $decimalColors[3] );
+		} else {
+			$alpha = null;
+		}
+		foreach ( $variants as $type => &$variant ) {
+			if ( isset( $variant ) ) continue;
+
+			switch ( $type ) {
+				case 'hex':
+					$variant = '#';
+					foreach ( $decimalColors as &$color ) {
+						$variant .= str_pad( dechex( $color ), 2, "0", STR_PAD_LEFT );
+					}
+					$variant .= isset( $alpha ) ? ' (alpha omitted)' : '';
+					break;
+				case 'rgb':
+					$rgb = $decimalColors;
+					if ( isset( $alpha ) ) {
+						$rgb[] = $alpha;
+						$a     = 'a';
+					} else {
+						$a = '';
+					}
+					$variant = "rgb{$a}( " . implode( ', ', $rgb ) . " )";
+					break;
+				case 'hsl':
+					$rgb = self::_RGBtoHSL( $decimalColors );
+					if ( $rgb === null ) {
+						unset( $variants[$type] );
+						break;
+					}
+					if ( isset( $alpha ) ) {
+						$rgb[] = $alpha;
+						$a     = 'a';
+					} else {
+						$a = '';
+					}
+
+					$variant = "hsl{$a}( " . implode( ', ', $rgb ) . " )";
+					break;
+				case 'name':
+					// [!] name in initial variants array must go after hex
+					if ( ( $key = array_search( $variants['hex'], self::$_css3Named, true ) ) !== false ) {
+						$variant = $key;
+					} else {
+						unset( $variants[$type] );
+					}
+					break;
+			}
+
+		}
+
+		return $variants;
+	}
+
+
+	private static function _HSLtoRGB( array $hsl )
+	{
+		list( $h, $s, $l ) = $hsl;
+		$m2 = ( $l <= 0.5 ) ? $l * ( $s + 1 ) : $l + $s - $l * $s;
+		$m1 = $l * 2 - $m2;
+		return array(
+			round( self::_hue2rgb( $m1, $m2, $h + 0.33333 ) * 255 ),
+			round( self::_hue2rgb( $m1, $m2, $h ) * 255 ),
+			round( self::_hue2rgb( $m1, $m2, $h - 0.33333 ) * 255 ),
+		);
+	}
+
+
+	/**
+	 * Helper function for _color_hsl2rgb().
+	 */
+	private static function _hue2rgb( $m1, $m2, $h )
+	{
+		$h = ( $h < 0 ) ? $h + 1 : ( ( $h > 1 ) ? $h - 1 : $h );
+		if ( $h * 6 < 1 ) return $m1 + ( $m2 - $m1 ) * $h * 6;
+		if ( $h * 2 < 1 ) return $m2;
+		if ( $h * 3 < 2 ) return $m1 + ( $m2 - $m1 ) * ( 0.66666 - $h ) * 6;
+		return $m1;
+	}
+
+
+	private static function _RGBtoHSL( array $rgb )
+	{
+		list( $clrR, $clrG, $clrB ) = $rgb;
+
+		$clrMin   = min( $clrR, $clrG, $clrB );
+		$clrMax   = max( $clrR, $clrG, $clrB );
+		$deltaMax = $clrMax - $clrMin;
+
+		$L = ( $clrMax + $clrMin ) / 510;
+
+		if ( 0 == $deltaMax ) {
+			$H = 0;
+			$S = 0;
+		} else {
+			if ( 0.5 > $L ) {
+				$S = $deltaMax / ( $clrMax + $clrMin );
+			} else {
+				$S = $deltaMax / ( 510 - $clrMax - $clrMin );
+			}
+
+			if ( $clrMax == $clrR ) {
+				$H = ( $clrG - $clrB ) / ( 6.0 * $deltaMax );
+			} else if ( $clrMax == $clrG ) {
+				$H = 1 / 3 + ( $clrB - $clrR ) / ( 6.0 * $deltaMax );
+			} else {
+				$H = 2 / 3 + ( $clrR - $clrG ) / ( 6.0 * $deltaMax );
+			}
+
+			if ( 0 > $H ) $H += 1;
+			if ( 1 < $H ) $H -= 1;
+		}
+		return array(
+			round( $H * 360 ),
+			round( $S * 100 ) . '%',
+			round( $L * 100 ) . '%'
+		);
+
+	}
+}
+
+/* *************
+ * TEST DATA
+ *
+dd(array(
+'hsl(0,  100%,50%)',
+'hsl(30, 100%,50%)',
+'hsl(60, 100%,50%)',
+'hsl(90, 100%,50%)',
+'hsl(120,100%,50%)',
+'hsl(150,100%,50%)',
+'hsl(180,100%,50%)',
+'hsl(210,100%,50%)',
+'hsl(240,100%,50%)',
+'hsl(270,100%,50%)',
+'hsl(300,100%,50%)',
+'hsl(330,100%,50%)',
+'hsl(360,100%,50%)',
+'hsl(120,100%,25%)',
+'hsl(120,100%,50%)',
+'hsl(120,100%,75%)',
+'hsl(120,100%,50%)',
+'hsl(120, 67%,50%)',
+'hsl(120, 33%,50%)',
+'hsl(120,  0%,50%)',
+'hsl(120, 60%,70%)',
+'#f03',
+'#F03',
+'#ff0033',
+'#FF0033',
+'rgb(255,0,51)',
+'rgb(255, 0, 51)',
+'rgb(100%,0%,20%)',
+'rgb(100%, 0%, 20%)',
+'hsla(240,100%,50%,0.05)',
+'hsla(240,100%,50%, 0.4)',
+'hsla(240,100%,50%, 0.7)',
+'hsla(240,100%,50%,   1)',
+'rgba(255,0,0,0.1)',
+'rgba(255,0,0,0.4)',
+'rgba(255,0,0,0.7)',
+'rgba(255,0,0,  1)',
+'black',
+'silver',
+'gray',
+'white',
+'maroon',
+'red',
+'purple',
+'fuchsia',
+'green',
+'lime',
+'olive',
+'yellow',
+'navy',
+'blue',
+'teal',
+'aqua',
+'orange',
+'aliceblue',
+'antiquewhite',
+'aquamarine',
+'azure',
+'beige',
+'bisque',
+'blanchedalmond',
+'blueviolet',
+'brown',
+'burlywood',
+'cadetblue',
+'chartreuse',
+'chocolate',
+'coral',
+'cornflowerblue',
+'cornsilk',
+'crimson',
+'darkblue',
+'darkcyan',
+'darkgoldenrod',
+'darkgray',
+'darkgreen',
+'darkgrey',
+'darkkhaki',
+'darkmagenta',
+'darkolivegreen',
+'darkorange',
+'darkorchid',
+'darkred',
+'darksalmon',
+'darkseagreen',
+'darkslateblue',
+'darkslategray',
+'darkslategrey',
+'darkturquoise',
+'darkviolet',
+'deeppink',
+'deepskyblue',
+'dimgray',
+'dimgrey',
+'dodgerblue',
+'firebrick',
+'floralwhite',
+'forestgreen',
+'gainsboro',
+'ghostwhite',
+'gold',
+'goldenrod',
+'greenyellow',
+'grey',
+'honeydew',
+'hotpink',
+'indianred',
+'indigo',
+'ivory',
+'khaki',
+'lavender',
+'lavenderblush',
+'lawngreen',
+'lemonchiffon',
+'lightblue',
+'lightcoral',
+'lightcyan',
+'lightgoldenrodyellow',
+'lightgray',
+'lightgreen',
+'lightgrey',
+'lightpink',
+'lightsalmon',
+'lightseagreen',
+'lightskyblue',
+'lightslategray',
+'lightslategrey',
+'lightsteelblue',
+'lightyellow',
+'limegreen',
+'linen',
+'mediumaquamarine',
+'mediumblue',
+'mediumorchid',
+'mediumpurple',
+'mediumseagreen',
+'mediumslateblue',
+'mediumspringgreen',
+'mediumturquoise',
+'mediumvioletred',
+'midnightblue',
+'mintcream',
+'mistyrose',
+'moccasin',
+'navajowhite',
+'oldlace',
+'olivedrab',
+));*/
\ No newline at end of file
diff --git a/modules/devel/kint/kint/parsers/custom/fspath.php b/modules/devel/kint/kint/parsers/custom/fspath.php
new file mode 100644
index 0000000..0425cc7
--- /dev/null
+++ b/modules/devel/kint/kint/parsers/custom/fspath.php
@@ -0,0 +1,67 @@
+<?php
+class Kint_Parsers_FsPath extends kintParser
+{
+	protected function _parse( & $variable )
+	{
+		if ( !is_string( $variable )
+			|| strlen( $variable ) > 2048
+			|| preg_match( '[[:?<>"*|]]', $variable )
+			|| !@is_readable( $variable ) # f@#! PHP and its random warnings
+		) return false;
+
+		try {
+			$fileInfo = new \SplFileInfo( $variable );
+			$flags    = array();
+			$perms    = $fileInfo->getPerms();
+
+			if ( ( $perms & 0xC000 ) === 0xC000 ) {
+				$type    = 'File socket';
+				$flags[] = 's';
+			} elseif ( ( $perms & 0xA000 ) === 0xA000 ) {
+				$type    = 'File symlink';
+				$flags[] = 'l';
+			} elseif ( ( $perms & 0x8000 ) === 0x8000 ) {
+				$type    = 'File';
+				$flags[] = '-';
+			} elseif ( ( $perms & 0x6000 ) === 0x6000 ) {
+				$type    = 'Block special file';
+				$flags[] = 'b';
+			} elseif ( ( $perms & 0x4000 ) === 0x4000 ) {
+				$type    = 'Directory';
+				$flags[] = 'd';
+			} elseif ( ( $perms & 0x2000 ) === 0x2000 ) {
+				$type    = 'Character special file';
+				$flags[] = 'c';
+			} elseif ( ( $perms & 0x1000 ) === 0x1000 ) {
+				$type    = 'FIFO pipe file';
+				$flags[] = 'p';
+			} else {
+				$type    = 'Unknown file';
+				$flags[] = 'u';
+			}
+
+			// owner
+			$flags[] = ( ( $perms & 0x0100 ) ? 'r' : '-' );
+			$flags[] = ( ( $perms & 0x0080 ) ? 'w' : '-' );
+			$flags[] = ( ( $perms & 0x0040 ) ? ( ( $perms & 0x0800 ) ? 's' : 'x' ) : ( ( $perms & 0x0800 ) ? 'S' : '-' ) );
+
+			// group
+			$flags[] = ( ( $perms & 0x0020 ) ? 'r' : '-' );
+			$flags[] = ( ( $perms & 0x0010 ) ? 'w' : '-' );
+			$flags[] = ( ( $perms & 0x0008 ) ? ( ( $perms & 0x0400 ) ? 's' : 'x' ) : ( ( $perms & 0x0400 ) ? 'S' : '-' ) );
+
+			// world
+			$flags[] = ( ( $perms & 0x0004 ) ? 'r' : '-' );
+			$flags[] = ( ( $perms & 0x0002 ) ? 'w' : '-' );
+			$flags[] = ( ( $perms & 0x0001 ) ? ( ( $perms & 0x0200 ) ? 't' : 'x' ) : ( ( $perms & 0x0200 ) ? 'T' : '-' ) );
+
+			$this->type  = $type;
+			$this->size  = sprintf( '%.2fK', $fileInfo->getSize() / 1024 );
+			$this->value = implode( $flags );
+
+		} catch ( Exception $e ) {
+			return false;
+		}
+
+	}
+}
diff --git a/modules/devel/kint/kint/parsers/custom/json.php b/modules/devel/kint/kint/parsers/custom/json.php
new file mode 100644
index 0000000..0327468
--- /dev/null
+++ b/modules/devel/kint/kint/parsers/custom/json.php
@@ -0,0 +1,17 @@
+<?php
+class Kint_Parsers_Json extends kintParser
+{
+	protected function _parse( & $variable )
+	{
+		if ( !is_string( $variable )
+			|| !isset( $variable{0} ) || ( $variable{0} !== '{' && $variable{0} !== '[' )
+			|| ( $json = json_decode( $variable ) ) === null
+		) return false;
+
+		$val = (array)$json;
+		if ( empty( $val ) ) return false;
+
+		$this->value = kintParser::factory( $val )->extendedValue;
+		$this->type  = 'JSON';
+	}
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/parsers/custom/microtime.php b/modules/devel/kint/kint/parsers/custom/microtime.php
new file mode 100644
index 0000000..3251b7d
--- /dev/null
+++ b/modules/devel/kint/kint/parsers/custom/microtime.php
@@ -0,0 +1,55 @@
+<?php
+class Kint_Parsers_Microtime extends kintParser
+{
+	private static $_times = array();
+	private static $_laps = array();
+
+	protected function _parse( & $variable )
+	{
+		if ( !is_string( $variable ) || !preg_match( '[0\.[0-9]{8} [0-9]{10}]', $variable ) ) {
+			return false;
+		}
+
+		list( $usec, $sec ) = explode( " ", $variable );
+
+		$time = (float) $usec + (float) $sec;
+		$size = memory_get_usage( true );
+
+		# '@' is used to prevent the dreaded timezone not set error
+		$this->value = @date( 'Y-m-d H:i:s', $sec ) . '.' . substr( $usec, 2, 4 );
+
+		$numberOfCalls = count( self::$_times );
+		if ( $numberOfCalls > 0 ) { # meh, faster than count($times) > 1
+			$lap           = $time - end( self::$_times );
+			self::$_laps[] = $lap;
+
+			$this->value .= "\n<b>SINCE LAST CALL:</b> <b class=\"kint-microtime\">" . round( $lap, 4 ) . '</b>s.';
+			if ( $numberOfCalls > 1 ) {
+				$this->value .= "\n<b>SINCE START:</b> " . round( $time - self::$_times[0], 4 ) . 's.';
+				$this->value .= "\n<b>AVERAGE DURATION:</b> "
+					. round( array_sum( self::$_laps ) / $numberOfCalls, 4 ) . 's.';
+			}
+		}
+
+		$unit = array( 'B', 'KB', 'MB', 'GB', 'TB' );
+		$this->value .= "\n<b>MEMORY USAGE:</b> " . $size . " bytes ("
+			. round( $size / pow( 1024, ( $i = floor( log( $size, 1024 ) ) ) ), 3 ) . ' ' . $unit[$i] . ")";
+
+		self::$_times[] = $time;
+		$this->type     = 'Stats';
+	}
+
+	/*
+	function test() {
+		d( 'start', microtime() );
+		for ( $i = 0; $i < 10; $i++ ) {
+			d(
+				$duration = mt_rand( 0, 200000 ), // the reported duration will be larger because of Kint overhead
+				usleep( $duration ),
+				microtime()
+	        );
+		}
+		dd(  );
+	}
+	 */
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/parsers/custom/objectiterateable.php b/modules/devel/kint/kint/parsers/custom/objectiterateable.php
new file mode 100644
index 0000000..d307e94
--- /dev/null
+++ b/modules/devel/kint/kint/parsers/custom/objectiterateable.php
@@ -0,0 +1,15 @@
+<?php
+
+class Kint_Parsers_objectIterateable extends kintParser
+{
+	protected function _parse( & $variable )
+	{
+		if ( !is_object( $variable ) || !$variable instanceof Traversable ) return false;
+
+
+		$arrayCopy   = iterator_to_array( $variable, true );
+		$this->value = kintParser::factory( $arrayCopy )->extendedValue;
+		$this->type  = 'Iterator contents';
+		$this->size  = count( $arrayCopy );
+	}
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/parsers/custom/splfileinfo.php b/modules/devel/kint/kint/parsers/custom/splfileinfo.php
new file mode 100644
index 0000000..6338141
--- /dev/null
+++ b/modules/devel/kint/kint/parsers/custom/splfileinfo.php
@@ -0,0 +1,13 @@
+<?php
+class Kint_Parsers_SplFileInfo extends kintParser
+{
+	protected function _parse( & $variable )
+	{
+		if ( !is_object( $variable ) || !$variable instanceof SplFileInfo ) return false;
+
+		$this->type    = 'object';
+		$this->subtype = 'SplFileInfo';
+		$realPath      = $variable->getRealPath();
+		$this->value   = Kint::shortenPath( $realPath ) . " ( {$realPath} )";
+	}
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/parsers/custom/splobjectstorage.php b/modules/devel/kint/kint/parsers/custom/splobjectstorage.php
new file mode 100644
index 0000000..c355771
--- /dev/null
+++ b/modules/devel/kint/kint/parsers/custom/splobjectstorage.php
@@ -0,0 +1,20 @@
+<?php
+class Kint_Parsers_SplObjectStorage extends kintParser
+{
+	protected function _parse( & $variable )
+	{
+		if ( !is_object( $variable ) || get_class( $variable ) !== 'SplObjectStorage' ) return false;
+
+		/** @var $variable SplObjectStorage */
+
+		$variable->rewind();
+		while ( $variable->valid() ) {
+			$current       = $variable->current();
+			$this->value[] = kintParser::factory( $current );
+			$variable->next();
+		}
+
+		$this->type = 'Storage contents';
+		$this->size = $variable->count();
+	}
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/parsers/custom/timestamp.php b/modules/devel/kint/kint/parsers/custom/timestamp.php
new file mode 100644
index 0000000..4c5f487
--- /dev/null
+++ b/modules/devel/kint/kint/parsers/custom/timestamp.php
@@ -0,0 +1,22 @@
+<?php
+class Kint_Parsers_Timestamp extends kintParser
+{
+	private static function _fits( $variable )
+	{
+		if ( !is_string( $variable ) && !is_int( $variable ) ) return false;
+
+		$len = strlen( (int)$variable );
+		return ( $len === 9 || $len === 10 ) // a little naive
+			&& ( (string)(int)$variable == $variable );
+	}
+
+
+	protected function _parse( & $variable )
+	{
+		if ( !self::_fits( $variable ) ) return false;
+
+		$this->type = 'timestamp';
+		# avoid dreaded "Timezone must be set" error
+		$this->value = @date( 'Y-m-d H:i:s', $variable );
+	}
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/parsers/custom/xml.php b/modules/devel/kint/kint/parsers/custom/xml.php
new file mode 100644
index 0000000..50d0def
--- /dev/null
+++ b/modules/devel/kint/kint/parsers/custom/xml.php
@@ -0,0 +1,18 @@
+<?php
+class Kint_Parsers_Xml extends kintParser
+{
+	protected function _parse( & $variable )
+	{
+		try {
+			if ( !is_string( $variable )
+				|| substr( $variable, 0, 5 ) !== '<?xml'
+				|| ( $xml = simplexml_load_string( $variable ) ) === null
+			) return false;
+		} catch ( Exception $e ) {
+			return false;
+		}
+
+		$this->value = kintParser::factory( $xml )->extendedValue;
+		$this->type  = 'XML';
+	}
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/parsers/objects/smarty.php b/modules/devel/kint/kint/parsers/objects/smarty.php
new file mode 100644
index 0000000..b30937c
--- /dev/null
+++ b/modules/devel/kint/kint/parsers/objects/smarty.php
@@ -0,0 +1,32 @@
+<?php
+class Kint_Objects_Smarty extends KintObject
+{
+	public function parse( & $variable )
+	{
+		if ( !$variable instanceof Smarty
+			|| !defined( 'Smarty::SMARTY_VERSION' ) # lower than 3.x
+		) return false;
+
+
+		$this->name = 'object Smarty (v' . substr( Smarty::SMARTY_VERSION, 7 ) . ')'; # trim 'Smarty-'
+
+		$assigned = $globalAssigns = array();
+		foreach ( $variable->tpl_vars as $name => $var ) {
+			$assigned[$name] = $var->value;
+		}
+		foreach ( Smarty::$global_tpl_vars as $name => $var ) {
+			if ( $name === 'SCRIPT_NAME' ) continue;
+
+			$globalAssigns[$name] = $var->value;
+		}
+
+		return array(
+			'Assigned'          => $assigned,
+			'Assigned globally' => $globalAssigns,
+			'Configuration'     => array(
+				'Compiled files stored in' => $variable->compile_dir,
+			)
+		);
+
+	}
+}
diff --git a/modules/devel/kint/kint/parsers/parser.class.php b/modules/devel/kint/kint/parsers/parser.class.php
new file mode 100644
index 0000000..5a83691
--- /dev/null
+++ b/modules/devel/kint/kint/parsers/parser.class.php
@@ -0,0 +1,698 @@
+<?php
+abstract class kintParser extends kintVariableData
+{
+	private static $_level = 0;
+	private static $_customDataTypes;
+	private static $_objectParsers;
+	private static $_objects;
+	private static $_marker;
+
+	private static $_skipAlternatives = false;
+
+
+	private static function _init()
+	{
+		$fh = opendir( KINT_DIR . 'parsers/custom/' );
+		while ( $fileName = readdir( $fh ) ) {
+			if ( substr( $fileName, -4 ) !== '.php' ) continue;
+
+			require KINT_DIR . 'parsers/custom/' . $fileName;
+			self::$_customDataTypes[] = substr( $fileName, 0, -4 );
+		}
+		$fh = opendir( KINT_DIR . 'parsers/objects/' );
+		while ( $fileName = readdir( $fh ) ) {
+			if ( substr( $fileName, -4 ) !== '.php' ) continue;
+
+			require KINT_DIR . 'parsers/objects/' . $fileName;
+			self::$_objectParsers[] = substr( $fileName, 0, -4 );
+		}
+	}
+
+	public static function reset()
+	{
+		self::$_level   = 0;
+		self::$_objects = self::$_marker = null;
+	}
+
+	/**
+	 * main and usually single method a custom parser must implement
+	 *
+	 * @param mixed $variable
+	 *
+	 * @return mixed [!!!] false is returned if the variable is not of current type
+	 */
+	abstract protected function _parse( & $variable );
+
+
+	/**
+	 * the only public entry point to return a parsed representation of a variable
+	 *
+	 * @static
+	 *
+	 * @param      $variable
+	 * @param null $name
+	 *
+	 * @throws Exception
+	 * @return \kintParser
+	 */
+	public final static function factory( & $variable, $name = null )
+	{
+		isset( self::$_customDataTypes ) or self::_init();
+
+		# save internal data to revert after dumping to properly handle recursions etc
+		$revert = array(
+			'level'   => self::$_level,
+			'objects' => self::$_objects,
+		);
+
+		self::$_level++;
+
+		$name          = self::_escape( $name );
+		$varData       = new kintVariableData;
+		$varData->name = $name;
+
+		# first parse the variable based on its type
+		$varType = gettype( $variable );
+		$varType === 'unknown type' and $varType = 'unknown'; # PHP 5.4 inconsistency
+		$methodName = '_parse_' . $varType;
+
+		# objects can be presented in a different way altogether, INSTEAD, not ALONGSIDE the generic parser
+		if ( $varType === 'object' ) {
+			foreach ( self::$_objectParsers as $parserClass ) {
+				$className = 'Kint_Objects_' . $parserClass;
+
+				/** @var $object KintObject */
+				$object = new $className;
+				if ( ( $alternatives = $object->parse( $variable ) ) !== false ) {
+					self::$_skipAlternatives  = true;
+					$alternativeDisplay       = new kintVariableData;
+					$alternativeDisplay->type = $object->name;
+
+					foreach ( $alternatives as $name => $values ) {
+						$alternative       = kintParser::factory( $values );
+						$alternative->type = $name;
+						if ( Kint::$mode === 'text' || Kint::$mode === 'cli' ) {
+							$alternativeDisplay->extendedValue[] = $alternative;
+						} else {
+							empty( $alternative->value ) and $alternative->value = $alternative->extendedValue;
+							$alternativeDisplay->_alternatives[] = $alternative;
+						}
+					}
+
+					self::$_skipAlternatives = false;
+					return $alternativeDisplay;
+				}
+			}
+		}
+
+		# base type parser returning false means "stop processing further": e.g. recursion
+		if ( self::$methodName( $variable, $varData ) === false ) {
+			self::$_level--;
+			return $varData;
+		}
+
+		if ( Kint::$mode === 'rich' && !self::$_skipAlternatives ) {
+			# if an alternative returns something that can be represented in an alternative way, don't :)
+			self::$_skipAlternatives = true;
+
+			# now check whether the variable can be represented in a different way
+			foreach ( self::$_customDataTypes as $parserClass ) {
+				$className = 'Kint_Parsers_' . $parserClass;
+
+				/** @var $parser kintParser */
+				$parser       = new $className;
+				$parser->name = $name; # the parser may overwrite the name value, so set it first
+
+				if ( $parser->_parse( $variable ) !== false ) {
+					$varData->_alternatives[] = $parser;
+				}
+			}
+
+
+			# if alternatives exist, push extendedValue to their front and display it as one of alternatives
+			if ( !empty( $varData->_alternatives ) && isset( $varData->extendedValue ) ) {
+				$_ = new kintVariableData;
+
+				$_->value = $varData->extendedValue;
+				$_->type  = $varData->type;
+				$_->size  = $varData->size;
+
+				array_unshift( $varData->_alternatives, $_ );
+				$varData->extendedValue = null;
+			}
+
+			self::$_skipAlternatives = false;
+		}
+
+		self::$_level   = $revert['level'];
+		self::$_objects = $revert['objects'];
+		return $varData;
+	}
+
+	private static function _checkDepth()
+	{
+		return Kint::$maxLevels != 0 && self::$_level > Kint::$maxLevels;
+	}
+
+	private static function _isArrayTabular( $variable )
+	{
+		if ( Kint::$mode === 'plain' || Kint::$mode === 'cli' ) return false;
+
+		foreach ( $variable as $row ) {
+			if ( is_array( $row ) && !empty( $row ) ) {
+				if ( isset( $keys ) ) {
+					if ( $keys === array_keys( $row ) ) { // two rows have same keys in a row? Close enough.
+						return true;
+					}
+				} else {
+
+					foreach ( $row as $col ) {
+						if ( !is_scalar( $col ) && $col !== null ) {
+							break 2;
+						}
+					}
+
+					$keys = array_keys( $row );
+				}
+			} else {
+				break;
+			}
+		}
+
+		return false;
+	}
+
+	private static $_dealingWithGlobals = false;
+
+	private static function _parse_array( &$variable, kintVariableData $variableData )
+	{
+		isset( self::$_marker ) or self::$_marker = "\x00" . uniqid();
+
+		# naturally, $GLOBALS variable is an intertwined recursion nightmare, use black magic
+		$globalsDetector = false;
+		if ( array_key_exists( 'GLOBALS', $variable ) && is_array( $variable['GLOBALS'] ) ) {
+			$globalsDetector = "\x01" . uniqid();
+
+			$variable['GLOBALS'][$globalsDetector] = true;
+			if ( isset( $variable[$globalsDetector] ) ) {
+				unset( $variable[$globalsDetector] );
+				self::$_dealingWithGlobals = true;
+			} else {
+				unset( $variable['GLOBALS'][$globalsDetector] );
+				$globalsDetector = false;
+			}
+		}
+
+		$variableData->type = 'array';
+		$variableData->size = count( $variable );
+
+		if ( $variableData->size === 0 ) {
+			return;
+		}
+		if ( isset( $variable[self::$_marker] ) ) { # recursion; todo mayhaps show from where
+			if ( self::$_dealingWithGlobals ) {
+				$variableData->value = '*RECURSION*';
+			} else {
+				unset( $variable[self::$_marker] );
+				$variableData->value = self::$_marker;
+			}
+			return false;
+		}
+		if ( self::_checkDepth() ) {
+			$variableData->extendedValue = "*DEPTH TOO GREAT*";
+			return false;
+		}
+
+		$isSequential = self::_isSequential( $variable );
+
+		$tabular = self::_isArrayTabular( $variable );
+		if ( $tabular ) {
+
+			$firstRow      = true;
+			$extendedValue = '<table class="kint-report">';
+			$arrayKeys     = array();
+
+
+			// assure no values are unreported if an extra key appears in one of the lines
+			foreach ( $variable as $row ) {
+				// todo process all keys in _isArrayTabular()
+				if ( !is_array( $row ) ) {
+					$tabular = false;
+					break;
+				}
+				$arrayKeys = array_unique( array_merge( $arrayKeys, array_keys( $row ) ) );
+
+				if ( Kint::$keyFilterCallback ) {
+					foreach ( $arrayKeys as $k => $key ) {
+						if ( call_user_func( Kint::$keyFilterCallback, $key ) === false ) {
+							unset( $arrayKeys[$k] );
+						}
+					}
+				}
+			}
+		}
+
+
+		if ( $tabular ) {
+			$variable[self::$_marker] = true;
+			foreach ( $variable as $rowIndex => &$row ) {
+				if ( $rowIndex === self::$_marker ) continue;
+
+				if ( isset( $row[self::$_marker] ) ) {
+					$variableData->value = "*RECURSION*";
+					return false;
+				}
+
+
+				$extendedValue .= '<tr>';
+				$output = '<td>' . ( $isSequential ? '#' . ( $rowIndex + 1 ) : $rowIndex ) . '</td>';
+				if ( $firstRow ) {
+					$extendedValue .= '<th>&nbsp;</th>';
+				}
+
+				foreach ( $arrayKeys as $key ) {
+					if ( $firstRow ) {
+						$extendedValue .= '<th>' . self::_escape( $key ) . '</th>';
+					}
+
+					if ( !array_key_exists( $key, $row ) ) {
+						$output .= '<td class="kint-empty"></td>';
+						continue;
+					}
+
+					# display strings in their full length so as not to trigger rich decoration
+					$maxStrLength       = kint::$maxStrLength;
+					kint::$maxStrLength = false;
+					$var                = kintParser::factory( $row[$key] );
+					kint::$maxStrLength = $maxStrLength;
+
+					if ( $var->value === self::$_marker ) {
+						$variableData->value = '*RECURSION*';
+						return false;
+					} elseif ( $var->value === '*RECURSION*' ) {
+						$output .= '<td class="kint-empty">' . Kint_Decorators_Concise::decorate( $var ) . '</td>';
+					} else {
+						$output .= '<td>' . Kint_Decorators_Concise::decorate( $var ) . '</td>';
+					}
+					unset( $var );
+				}
+
+				if ( $firstRow ) {
+					$extendedValue .= '</tr><tr>';
+					$firstRow = false;
+				}
+
+				$extendedValue .= $output . '</tr>';
+			}
+
+			$variableData->extendedValue = $extendedValue . '</table>';
+
+		} else {
+			$variable[self::$_marker] = true;
+			$extendedValue            = array();
+
+			foreach ( $variable as $key => & $val ) {
+				if ( $key === self::$_marker
+					|| ( Kint::$keyFilterCallback && call_user_func( Kint::$keyFilterCallback, $key, $val ) === false )
+				) {
+					continue;
+				}
+
+
+				$output = kintParser::factory( $val );
+				if ( $output->value === self::$_marker ) {
+					$variableData->value = "*RECURSION*"; // recursion occurred on a higher level, thus $this is recursion
+					return false;
+				}
+				if ( !$isSequential ) {
+					$output->operator = '=>';
+				}
+				$output->name    = $isSequential ? null : "'" . self::_escape( $key ) . "'";
+				$extendedValue[] = $output;
+			}
+			$variableData->extendedValue = $extendedValue;
+		}
+
+		if ( $globalsDetector ) {
+			self::$_dealingWithGlobals = false;
+		}
+
+		unset( $variable[self::$_marker] );
+	}
+
+
+	private static function _parse_object( &$variable, kintVariableData $variableData )
+	{
+		if ( function_exists( 'spl_object_hash' ) ) {
+			$hash = spl_object_hash( $variable );
+		} else {
+			ob_start();
+			var_dump( $variable );
+			preg_match( '[#(\d+)]', ob_get_clean(), $match );
+			$hash = $match[1];
+		}
+
+		$castedArray           = (array) $variable;
+		$variableData->type    = 'object';
+		$variableData->subtype = get_class( $variable );
+		$variableData->size    = count( $castedArray );
+
+		if ( isset( self::$_objects[$hash] ) ) {
+			$variableData->value = '*RECURSION*';
+			return false;
+		}
+		if ( self::_checkDepth() ) {
+			$variableData->extendedValue = "*DEPTH TOO GREAT*";
+			return false;
+		}
+
+
+		# ArrayObject (and maybe ArrayIterator, did not try yet) unsurprisingly consist of mainly dark magic.
+		# What bothers me most, var_dump sees no problem with it, and ArrayObject also uses a custom,
+		# undocumented serialize function, so you can see the properties in internal functions, but
+		# can never iterate some of them if the flags are not STD_PROP_LIST. Fun stuff.
+		if ( $variableData->subtype === 'ArrayObject' || is_subclass_of( $variable, 'ArrayObject' ) ) {
+			$arrayObjectFlags = $variable->getFlags();
+			$variable->setFlags( ArrayObject::STD_PROP_LIST );
+		}
+
+		self::$_objects[$hash] = true; // todo store reflectorObject here for alternatives cache
+		$reflector             = new \ReflectionObject( $variable );
+
+		if ( Kint::$mode !== 'cli' && Kint::$mode !== 'whitespace' && Kint::$fileLinkFormat && $reflector->isUserDefined() ) {
+			list( $url ) = Kint::shortenPath(
+				$reflector->getFileName(),
+				$reflector->getStartLine(),
+				false
+			);
+
+			$_                     = ( strpos( $url, 'http://' ) === 0 ) ? 'class="kint-ide-link" ' : '';
+			$variableData->subtype = "<a {$_}href=\"{$url}\">{$variableData->subtype}</a>";
+		}
+		$variableData->size = 0;
+
+		$extendedValue = array();
+		$encountered   = array();
+
+		# copy the object as an array as it provides more info than Reflection (depends)
+		foreach ( $castedArray as $key => $value ) {
+			if ( Kint::$keyFilterCallback
+				&& call_user_func_array( Kint::$keyFilterCallback, array( $key, $value ) ) === false
+			) {
+				continue;
+			}
+
+			/* casting object to array:
+			 * integer properties are inaccessible;
+			 * private variables have the class name prepended to the variable name;
+			 * protected variables have a '*' prepended to the variable name.
+			 * These prepended values have null bytes on either side.
+			 * http://www.php.net/manual/en/language.types.array.php#language.types.array.casting
+			 */
+			if ( $key{0} === "\x00" ) {
+
+				$access = $key{1} === "*" ? "protected" : "private";
+
+				// Remove the access level from the variable name
+				$key = substr( $key, strrpos( $key, "\x00" ) + 1 );
+			} else {
+				$access = "public";
+			}
+
+			$encountered[$key] = true;
+
+			$output           = kintParser::factory( $value, self::_escape( $key ) );
+			$output->access   = $access;
+			$output->operator = '->';
+			$extendedValue[]  = $output;
+			$variableData->size++;
+		}
+
+		foreach ( $reflector->getProperties() as $property ) {
+			$name = $property->name;
+			if ( $property->isStatic() || isset( $encountered[$name] ) ) continue;
+
+			if ( $property->isProtected() ) {
+				$property->setAccessible( true );
+				$access = "protected";
+			} elseif ( $property->isPrivate() ) {
+				$property->setAccessible( true );
+				$access = "private";
+			} else {
+				$access = "public";
+			}
+
+			$value = $property->getValue( $variable );
+
+			if ( Kint::$keyFilterCallback
+				&& call_user_func_array( Kint::$keyFilterCallback, array( $name, $value ) ) === false
+			) {
+				continue;
+			}
+
+			$output           = kintParser::factory( $value, self::_escape( $name ) );
+			$output->access   = $access;
+			$output->operator = '->';
+			$extendedValue[]  = $output;
+			$variableData->size++;
+		}
+
+		if ( isset( $arrayObjectFlags ) ) {
+			$variable->setFlags( $arrayObjectFlags );
+		}
+
+		if ( $variableData->size ) {
+			$variableData->extendedValue = $extendedValue;
+		}
+	}
+
+
+	private static function _parse_boolean( &$variable, kintVariableData $variableData )
+	{
+		$variableData->type  = 'bool';
+		$variableData->value = $variable ? 'TRUE' : 'FALSE';
+	}
+
+	private static function _parse_double( &$variable, kintVariableData $variableData )
+	{
+		$variableData->type  = 'float';
+		$variableData->value = $variable;
+	}
+
+	private static function _parse_integer( &$variable, kintVariableData $variableData )
+	{
+		$variableData->type  = 'integer';
+		$variableData->value = $variable;
+	}
+
+	private static function _parse_null( &$variable, kintVariableData $variableData )
+	{
+		$variableData->type = 'NULL';
+	}
+
+	private static function _parse_resource( &$variable, kintVariableData $variableData )
+	{
+		$variableData->type    = 'resource';
+		$variableData->subtype = get_resource_type( $variable );
+
+		if ( $variableData->subtype === 'stream' && $meta = stream_get_meta_data( $variable ) ) {
+
+			if ( isset( $meta['uri'] ) ) {
+				$file = $meta['uri'];
+
+				if ( function_exists( 'stream_is_local' ) ) {
+					// Only exists on PHP >= 5.2.4
+					if ( stream_is_local( $file ) ) {
+						$file = Kint::shortenPath( $file );
+					}
+				}
+
+				$variableData->value = $file;
+			}
+		}
+	}
+
+	private static function _parse_string( &$variable, kintVariableData $variableData )
+	{
+		$variableData->type = 'string';
+
+		if ( Kint::$mode === 'cli' || Kint::$mode === 'whitespace' ) {
+			$variableData->value = '"' . $variable . '"';
+			return;
+		}
+
+
+		$encoding = self::_detectEncoding( $variable );
+		if ( $encoding !== 'ASCII' ) {
+			$variableData->subtype = $encoding;
+		}
+
+		$variableData->size = self::_strlen( $variable, $encoding );
+		$strippedString     = Kint::$mode === 'rich' ? self::_stripWhitespace( $variable ) : $variable;
+		if ( Kint::$mode === 'rich' && Kint::$maxStrLength && $variableData->size > Kint::$maxStrLength ) {
+
+			// encode and truncate
+			$variableData->value         = '"'
+				. self::_escape( self::_substr( $strippedString, Kint::$maxStrLength, $encoding ), $encoding )
+				. '&nbsp;&hellip;"';
+			$variableData->extendedValue = self::_escape( $variable, $encoding );
+
+		} elseif ( $variable !== $strippedString ) { // omit no data from display
+
+			$variableData->value         = '"' . self::_escape( $variable, $encoding ) . '"';
+			$variableData->extendedValue = self::_escape( $variable, $encoding );
+		} else {
+			$variableData->value = '"' . self::_escape( $variable, $encoding ) . '"';
+		}
+	}
+
+	private static function _parse_unknown( &$variable, kintVariableData $variableData )
+	{
+		$variableData->type    = "UNKNOWN";
+		$variableData->subtype = gettype( $variable );
+		$variableData->value   = var_export( $variable, true );
+	}
+
+}
+
+# todo separate classes into separate files
+
+class kintVariableData
+{
+	/** @var string */
+	public $type;
+	/** @var string */
+	public $access;
+	/** @var string */
+	public $name;
+	/** @var string */
+	public $operator;
+	/** @var string */
+	public $subtype;
+	/** @var int */
+	public $size;
+	/**
+	 * @var kintVariableData[] array of kintVariableData objects or strings; displayed collapsed, each element from
+	 * the array is a separate possible representation of the dumped var
+	 */
+	public $extendedValue;
+	/** @var string inline value */
+	public $value;
+
+	/** @var kintVariableData[] array of alternative representations for same variable, don't use in custom parsers */
+	public $_alternatives;
+
+	/* *******************************************
+	 * HELPERS
+	 */
+
+	protected static function _escape( $value, $encoding = null )
+	{
+		if ( Kint::$mode === 'cli' || Kint::$mode === 'whitespace' || empty( $value ) ) return $value;
+
+		$value = htmlspecialchars( $value, ENT_QUOTES );
+		if ( function_exists( 'mb_encode_numericentity' ) ) {
+			$encoding or $encoding = self::_detectEncoding( $value );
+			$value = mb_encode_numericentity(
+				$value,
+				array( 0x80, 0xffff, 0, 0xffff, ),
+				$encoding
+			);
+		}
+
+		# when possible force invisible characters to have some sort of display (experimental)
+		// todo we could make the symbols hover-title show the code for the invisible symbol
+		return preg_replace( '/[\x00-\x08\x0B\x0C\x0E-\x1F\x80-\x9F]/u', '', $value );
+	}
+
+	protected static function _detectEncoding( $value )
+	{
+		$ret = null;
+		if ( function_exists( 'mb_detect_encoding' ) ) {
+			$mbDetected = mb_detect_encoding( $value );
+			if ( $mbDetected === 'ASCII' ) {
+				return 'ASCII';
+			}
+		}
+
+		if ( empty( Kint::$charEncodings ) || !function_exists( 'iconv' ) ) {
+			return !empty( $mbDetected ) ? $mbDetected : 'UTF-8';
+		}
+
+		$md5 = md5( $value );
+		foreach ( array_merge( array( 'UTF-8' ), Kint::$charEncodings ) as $encoding ) {
+			if ( empty( $encoding ) ) continue;
+
+			# fuck knows why, //IGNORE and //TRANSLIT still throw notice
+			if ( md5( @iconv( $encoding, $encoding, $value ) ) === $md5 ) {
+				return $encoding;
+			}
+		}
+
+		return 'ASCII';
+	}
+
+	/**
+	 * zaps all excess whitespace from string, compacts it but hurts readability
+	 *
+	 * @param string $string
+	 *
+	 * @return string
+	 */
+	protected static function _stripWhitespace( $string )
+	{
+		return preg_replace( '[\s+]', ' ', $string );
+	}
+
+
+	/**
+	 * returns whether the array:
+	 *  1) is numeric and
+	 *  2) in sequence starting from zero
+	 *
+	 * @param array $array
+	 *
+	 * @return bool
+	 */
+	protected static function _isSequential( array $array )
+	{
+		return Kint::$hideSequentialKeys
+			? array_keys( $array ) === range( 0, count( $array ) - 1 )
+			: false;
+	}
+
+	protected static function _strlen( $string, $encoding = null )
+	{
+		if ( function_exists( 'mb_strlen' ) ) {
+			$encoding or $encoding = self::_detectEncoding( $string );
+			return mb_strlen( $string, $encoding );
+		} else {
+			return strlen( $string );
+		}
+	}
+
+	protected static function _substr( $string, $end, $encoding = null )
+	{
+		if ( function_exists( 'mb_substr' ) ) {
+			$encoding or $encoding = self::_detectEncoding( $string );
+			return mb_substr( $string, 0, $end, $encoding );
+		} else {
+			return substr( $string, 0, $end );
+		}
+	}
+}
+
+abstract class KintObject
+{
+	/** @var string type of variable, can be set in inherited object or in static::parse() method */
+	public $name = 'NOT SET';
+
+	/**
+	 * returns false or associative array - each key represents a tab in default view, values may be anything
+	 *
+	 * @param $variable
+	 *
+	 * @return mixed
+	 */
+	abstract public function parse( & $variable );
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/scripts/source.reg b/modules/devel/kint/kint/scripts/source.reg
new file mode 100644
index 0000000..3d80930
--- /dev/null
+++ b/modules/devel/kint/kint/scripts/source.reg
@@ -0,0 +1,12 @@
+REGEDIT4
+
+[HKEY_CLASSES_ROOT\source]
+@="URL:source Protocol"
+"URL Protocol"=""
+
+[HKEY_CLASSES_ROOT\source\shell]
+
+[HKEY_CLASSES_ROOT\source\shell\open]
+
+[HKEY_CLASSES_ROOT\source\shell\open\command]
+@="wscript.exe \"C:\\Program Files\\bin\\source.vbs\" \"%1\"" 
\ No newline at end of file
diff --git a/modules/devel/kint/kint/scripts/source.vbs b/modules/devel/kint/kint/scripts/source.vbs
new file mode 100644
index 0000000..3345dbe
--- /dev/null
+++ b/modules/devel/kint/kint/scripts/source.vbs
@@ -0,0 +1,80 @@
+'INSTALLATION:
+'set editor link format to 'source:<filename>:<line>'
+'move this file to C:\Program Files\bin\source.vbs and run source.reg
+'customize directory mappings and editor command below
+
+'*****************
+'start of settings
+'*****************
+Dim command, protocol, change_slashes, debug
+Set dirmap = CreateObject("Scripting.Dictionary")
+
+'list of server paths (as regular expressions) 
+'and matching local paths (as regexp replace strings)
+'use this to replace the beginning of the path
+'if none of the regular expressions match, the script will show an error
+
+'local setup, when PHP and editor runs from the same machine
+dirmap.Add "^([C-Z]:\\)", "$1"
+
+'a typical remote Linux setup
+'dirmap.Add "^/var/www/", "C:\Projects\"
+'dirmap.Add "^/usr/share/php5/",  "C:\Projects\debug-source"
+
+'command to execute; %f is the file name, %l is the line number
+'dont forget to quote file names (quotes can be escaped by writing twice)
+command = """C:\Program Files\Notepad++\notepad++.exe"" -n%l ""%f"""
+
+'if true, forward slashes will be changed to backslashes in the filename
+'(after the regex replacements)
+change_slashes = True
+
+'protocol name used in the source edit links
+protocol = "source"
+
+'if true, alerts the command before executing it
+debug = False
+
+'***************
+'end of settings
+'***************
+
+Select Case WScript.Arguments.Count
+	Case 0
+		WScript.Echo "Wrong source link"
+		WScript.Quit
+End Select
+
+Dim link, split, file, line, found, strArgs
+
+link = Mid(WScript.Arguments.Item(0), Len(protocol) + 2)
+split = InStrRev(link, ":")
+file = Left(link, split - 1)
+line = Mid(link, split + 1)
+
+found = False
+For Each serverPath In dirmap
+	Set regexp = New RegExp
+	regexp.Pattern = serverPath
+	If regexp.Test(file) Then
+		found = True
+		Exit For
+	End If
+Next
+If Not found Then
+	WScript.Echo "don't know where to find " & file & " locally"
+	WScript.Quit
+End If
+file = regexp.Replace(file, dirmap.Item(serverPath))
+if change_slashes Then
+	file = Replace(file, "/", "\")
+End If
+
+strArgs = command
+strArgs = Replace(strArgs, "%l", line)
+strArgs = Replace(strArgs, "%f", file)
+If debug Then
+	WScript.Echo strArgs
+End If
+Set oShell = CreateObject ("Wscript.Shell") 
+oShell.Run strArgs, 0, false
\ No newline at end of file
diff --git a/modules/devel/kint/kint/view/compiled/main/aante-light.css b/modules/devel/kint/kint/view/compiled/main/aante-light.css
new file mode 100644
index 0000000..c3d4a2e
--- /dev/null
+++ b/modules/devel/kint/kint/view/compiled/main/aante-light.css
@@ -0,0 +1 @@
+.kint::selection{background:#aaa;color:#1d1e1e}.kint::-moz-selection{background:#aaa;color:#1d1e1e}.kint::-webkit-selection{background:#aaa;color:#1d1e1e}.kint{font-family:Consolas,"Courier New",monospace;color:#1d1e1e;padding:0;margin:8px 0;font-size:10pt;line-height:150px;white-space:nowrap;overflow-x:auto;text-align:left}.kint *{float:none!important;line-height:15px;padding:0;margin:0}.kint dt{background:#f8f8f8;border:1px solid #d7d7d7;color:#1d1e1e;display:block;font-weight:bold;list-style:none outside none;padding:4px}.kint dt:hover{border-color:#aaa}.kint dt>var{margin-right:5px}.kint>dl dl{padding:0 0 0 12px}.kint nav{display:inline-block;height:15px;width:15px;margin-right:3px;vertical-align:middle;content:' ';cursor:pointer;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAA8CAYAAAC5OOBJAAAAvklEQVR42mNgGMFAS0uLLSQk5HxoaOh/XDg4OLgdpwEBAQEGQAN+YtMIFH/i4ODAg9cFQNMbsWkOCgrKJMv5ID5Qipko/6M7PzAw0ImkAIQ5H0hvISv0gZpP+fn5qZAVfcBAkmEYBaNZcjRLjmbJUUCvqAIlDlAiASUWkjWDkiU0eTaSpBGUEZBy1E9QRiFWLzO2LEmU80GZHkcRhN/5oGIGVNzgKIbwOx9UwOErAIl2/igYzZKjWXI0S9IHAAASJijo0Ypj8AAAAABJRU5ErkJggg==") no-repeat scroll 0 0 transparent}.kint dt.kint-parent:hover nav{background-position:0 -15px}.kint dt.kint-parent.kint-show:hover>nav{background-position:0 -45px}.kint dt.kint-show>nav{background-position:0 -30px}.kint dt.kint-parent+dd{display:none;border-left:1px dashed #d7d7d7}.kint dt.kint-parent.kint-show+dd{display:block}.kint var,.kint var a{color:#06f;font-style:normal}.kint dt:hover var,.kint dt:hover var a{color:#f00}.kint dfn{font-style:normal;font-family:monospace;color:#1d1e1e}.kint pre{color:#1d1e1e;margin:0 0 0 12px;padding:5px;overflow-y:hidden;border-top:0;border:1px solid #d7d7d7;background:#f8f8f8;display:block;word-break:normal}.kint .kint-popup-trigger{float:right!important;cursor:pointer;color:#aaa}.kint .kint-popup-trigger:hover{color:#d7d7d7}.kint dt.kint-parent>.kint-popup-trigger{font-size:15pt}.kint footer{padding:0 3px 3px;font-size:.7em}.kint footer>.kint-popup-trigger{font-size:12px}.kint footer nav{background-size:10px;height:10px;width:10px}.kint footer nav:hover{background-position:0 -10px}.kint footer>ol{display:none;margin-left:32px}.kint footer.kint-show>ol{display:block}.kint footer.kint-show nav{background-position:0 -20px}.kint footer.kint-show nav:hover{background-position:0 -30px}.kint a{color:#1d1e1e;text-shadow:none}.kint a:hover{color:#1d1e1e;border-bottom:1px dotted #1d1e1e}.kint ul{list-style:none;padding-left:12px}.kint ul:not(.kint-tabs) li{border-left:1px dashed #d7d7d7}.kint ul:not(.kint-tabs) li>dl{border-left:none}.kint ul.kint-tabs{margin:0 0 0 12px;padding-left:0;background:#f8f8f8;border:1px solid #d7d7d7;border-top:0}.kint ul.kint-tabs li{background:#f8f8f8;border:1px solid #d7d7d7;cursor:pointer;display:inline-block;height:23px;line-height:23px;margin:0 4px 4px;padding:0 10px 2px}.kint ul.kint-tabs li:hover,.kint ul.kint-tabs li.kint-active-tab:hover{border-color:#aaa;color:#f00}.kint ul.kint-tabs li.kint-active-tab{background:#f8f8f8;border-top:0;margin-top:-1px;padding-bottom:2px;padding-top:4px}.kint ul.kint-tabs li+li{margin-left:0}.kint ul:not(.kint-tabs)>li:not(:first-child){display:none}.kint dt:hover+dd>ul>li.kint-active-tab{border-color:#aaa;color:#f00}.kint-report{border-collapse:collapse;empty-cells:show;border-spacing:0}.kint-report *{text-align:left;margin:0!important;padding:0!important;font-size:9pt;overflow:hidden;font-family:Consolas,"Courier New",monospace;color:#1d1e1e}.kint-report dt{border:0;background:0}.kint-report dt .kint-parent{max-width:180px;min-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.kint-report dt .kint-parent.kint-show{border-bottom:1px solid #d7d7d7}.kint-report td,.kint-report th{border:1px solid #d7d7d7;vertical-align:top}.kint-report td{background:#f8f8f8;white-space:pre}.kint-report td>dl{border:0}.kint-report pre{border-top:0;border-bottom:0;border-right:0}.kint-report th:first-child{background:0;border:0}.kint-report td:first-child,.kint-report th{font-weight:bold;background:#f8f8f8;color:#1d1e1e}.kint-report td.kint-empty{background:#d33682!important}.kint-report tr:hover>td{box-shadow:0 0 1px 0 #aaa inset}.kint-report tr:hover var{color:#f00}.kint-trace .kint-source{line-height:1.08em}.kint-trace .kint-source span{padding-right:1px;border-right:3px inset #06f}.kint-trace .kint-source .kint-highlight{background:#f8f8f8}.kint-trace .kint-parent>b{min-width:18px;display:inline-block;text-align:right;color:#1d1e1e}.kint-trace .kint-parent>var>a{color:#06f}.kint-focused{box-shadow:0 0 3px 2px #f00}.kint-microtime,.kint-color-preview{box-shadow:0 0 2px 0 #b6cedb;height:16px;text-align:center;text-shadow:-1px 0 #839496,0 1px #839496,1px 0 #839496,0 -1px #839496;width:230px;color:#fdf6e3}.kint dt{font-weight:normal}.kint dt.kint-parent{margin-top:4px}.kint dl dl{margin-top:4px;padding-left:25px;border-left:none}.kint>dl>dt{background:#f8f8f8}.kint ul{margin:0;padding-left:0}.kint ul:not(.kint-tabs)>li{border-left:0}.kint ul.kint-tabs{background:#f8f8f8;border:1px solid #d7d7d7;border-width:0 1px 1px 1px;padding:4px 0 0 12px;margin-left:-1px;margin-top:-1px}.kint ul.kint-tabs li,.kint ul.kint-tabs li+li{margin:0 0 0 4px}.kint ul.kint-tabs li{border-bottom-width:0}.kint ul.kint-tabs li:first-child{margin-left:0}.kint ul.kint-tabs li.kint-active-tab{border-top:1px solid #d7d7d7;background:#fff;font-weight:bold;padding-top:0;border-bottom:1px solid #fff!important;margin-bottom:-1px}.kint ul.kint-tabs li.kint-active-tab:hover{border-bottom:1px solid #fff}.kint ul>li>pre{border:1px solid #d7d7d7}.kint dt:hover+dd>ul{border-color:#aaa}.kint pre{background:#fff;margin-top:4px;margin-left:25px}.kint .kint-popup-trigger:hover{color:#f00}.kint .kint-source .kint-highlight{background:#cfc}.kint-report td{background:#fff;padding:1px 2px!important}.kint-report td:first-child,.kint-report th{padding:0 2px!important}.kint-report td.kint-empty{background:#d7d7d7!important}.kint-report tr:hover>td{box-shadow:none;background:#cfc}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/view/compiled/main/kint.js b/modules/devel/kint/kint/view/compiled/main/kint.js
new file mode 100644
index 0000000..cfd5dbf
--- /dev/null
+++ b/modules/devel/kint/kint/view/compiled/main/kint.js
@@ -0,0 +1,9 @@
+(function(){if("undefined"===typeof kintInitialized){kintInitialized=1;var e=[],f=-1,g=function(b){var a=window.getSelection(),c=document.createRange();c.selectNodeContents(b);a.removeAllRanges();a.addRange(c)},h=function(b){Array.prototype.slice.call(document.querySelectorAll(".kint nav, .kint-tabs>li:not(.kint-active-tab)"),0).forEach(b)},k=function(b,a){"undefined"===typeof a&&(a="kint-show");return RegExp("(\\s|^)"+a+"(\\s|$)").test(b.className)},m=function(b,a){"undefined"===typeof a&&(a="kint-show");l(b,
+a).className+=" "+a},l=function(b,a){"undefined"===typeof a&&(a="kint-show");b.className=b.className.replace(RegExp("(\\s|^)"+a+"(\\s|$)")," ");return b},n=function(b){do b=b.nextElementSibling;while("dd"!==b.nodeName.toLowerCase());return b},p=function(b,a){var c=n(b);"undefined"===typeof a&&(a=k(b));a?l(b):m(b);1===c.childNodes.length&&(c=c.childNodes[0].childNodes[0],k(c,"kint-parent")&&p(c,a))},r=function(b,a){var c=n(b).getElementsByClassName("kint-parent"),d=c.length;for("undefined"===typeof a&&
+(a=k(b));d--;)p(c[d],a);p(b,a)},s=function(b){var a=b,c=0;b.parentNode.getElementsByClassName("kint-active-tab")[0].className="";for(b.className="kint-active-tab";a=a.previousSibling;)1===a.nodeType&&c++;b=b.parentNode.nextSibling.childNodes;for(var d=0;d<b.length;d++)d===c?(b[d].style.display="block",1===b[d].childNodes.length&&(a=b[d].childNodes[0].childNodes[0],k(a,"kint-parent")&&p(a,!1))):b[d].style.display="none"},t=function(b){for(;b=b.parentNode,b&&!k(b,"kint"););return!!b},u=function(){e=
+[];h(function(b){0===b.offsetWidth&&0===b.offsetHeight||e.push(b)})},v=function(b){var a;if(a=window.open())a.document.open(),a.document.write("<html><head><title>Kint ("+(new Date).toISOString()+')</title><meta charset="utf-8">'+document.getElementsByClassName("-kint-js")[0].outerHTML+document.getElementsByClassName("-kint-css")[0].outerHTML+'</head><body><input style="width: 100%" placeholder="Take some notes!"><div class="kint">'+b.parentNode.outerHTML+"</div></body>"),a.document.close()},w=function(b){var a=
+document.querySelector(".kint-focused");a&&l(a,"kint-focused");if(-1!==b){a=e[b];m(a,"kint-focused");var c=function(a){return a.offsetTop+(a.offsetParent?c(a.offsetParent):0)};window.scrollTo(0,c(a)-window.innerHeight/2)}f=b},x=function(b,a){b?0>--a&&(a=e.length-1):++a>=e.length&&(a=0);w(a);return!1};window.addEventListener("click",function(b){var a=b.target,c=a.nodeName.toLowerCase();if(t(a)){"dfn"===c?(g(a),a=a.parentNode):"var"===c&&(a=a.parentNode,c=a.nodeName.toLowerCase());if("li"===c&&"kint-tabs"===
+a.parentNode.className)return"kint-active-tab"!==a.className&&(s(a),-1!==f&&u()),!1;if("nav"===c)return"footer"===a.parentNode.nodeName.toLowerCase()?(a=a.parentNode,k(a)?l(a):m(a)):setTimeout(function(){0<parseInt(a.a,10)?a.a--:(r(a.parentNode),-1!==f&&u())},300),b.stopPropagation(),!1;if(k(a,"kint-parent"))return p(a),-1!==f&&u(),!1;if(k(a,"kint-ide-link"))return b.preventDefault(),b=new XMLHttpRequest,b.open("GET",a.href),b.send(null),!1;if(k(a,"kint-popup-trigger")){b=a.parentNode;if("footer"===
+b.nodeName.toLowerCase())b=b.previousSibling;else for(;b&&!k(b,"kint-parent");)b=b.parentNode;v(b)}}},!1);window.addEventListener("dblclick",function(b){var a=b.target;if(t(a)&&"nav"===a.nodeName.toLowerCase()){a.a=2;for(var c=document.getElementsByClassName("kint-parent"),d=c.length,a=k(a.parentNode);d--;)p(c[d],a);-1!==f&&u();b.stopPropagation()}},!1);window.onkeydown=function(b){if(b.target===document.body&&!b.altKey){var a=b.keyCode,c=b.shiftKey;b=f;if(68===a){if(-1===b)return u(),x(!1,b);w(-1);
+return!1}if(-1!==b){if(9===a)return x(c,b);if(38===a)return x(!0,b);if(40===a)return x(!1,b);if(-1!==b){c=e[b];if("li"===c.nodeName.toLowerCase()){if(32===a||13===a)return s(c),u(),x(!0,b);if(39===a)return x(!1,b);if(37===a)return x(!0,b)}c=c.parentNode;if(32===a||13===a)return p(c),u(),!1;if(39===a||37===a){var d=k(c),a=37===a;if(d)r(c,a);else{if(a){do c=c.parentNode;while(c&&"dd"!==c.nodeName.toLowerCase());if(c){c=c.previousElementSibling;b=-1;for(d=c.querySelector("nav");d!==e[++b];);w(b)}else c=
+e[b].parentNode}p(c,a)}u();return!1}}}}};var y=function(){var b=Array.prototype.slice.call(document.querySelectorAll(".kint-microtime"),0);b.forEach(function(a){var c=parseFloat(a.innerHTML),d=Infinity,q=-Infinity;b.forEach(function(a){a=parseFloat(a.innerHTML);d>a&&(d=a);q<a&&(q=a)});a.style.background="hsl("+Math.round(120*(1-(c-d)/(q-d)))+",60%,70%)"})};window.addEventListener("load",y);window.addEventListener("kint-load",y)};})()
diff --git a/modules/devel/kint/kint/view/compiled/main/original.css b/modules/devel/kint/kint/view/compiled/main/original.css
new file mode 100644
index 0000000..5937fc1
--- /dev/null
+++ b/modules/devel/kint/kint/view/compiled/main/original.css
@@ -0,0 +1 @@
+.kint::selection{background:#0092db;color:#1d1e1e}.kint::-moz-selection{background:#0092db;color:#1d1e1e}.kint::-webkit-selection{background:#0092db;color:#1d1e1e}.kint{font-family:Consolas,"Courier New",monospace;color:#1d1e1e;padding:0;margin:8px 0;font-size:10pt;line-height:150px;white-space:nowrap;overflow-x:auto;text-align:left}.kint *{float:none!important;line-height:15px;padding:0;margin:0}.kint dt{background:#e0eaef;border:1px solid #b6cedb;color:#1d1e1e;display:block;font-weight:bold;list-style:none outside none;padding:4px}.kint dt:hover{border-color:#0092db}.kint dt>var{margin-right:5px}.kint>dl dl{padding:0 0 0 12px}.kint nav{display:inline-block;height:15px;width:15px;margin-right:3px;vertical-align:middle;content:' ';cursor:pointer;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAA8CAMAAACO5hB7AAAACVBMVEX///82b4tctzBls0NMAAAAQklEQVR42rWRIQ4AAAgCwf8/2qgER2BeuwJsgAqIzekMfMryPL9XQSkobE6vwKcsz/N7FfPvh09lnPf/b+7673+f0uHuAZ/EdkNQAAAAAElFTkSuQmCC") no-repeat scroll 0 0 transparent}.kint dt.kint-parent:hover nav{background-position:0 -15px}.kint dt.kint-parent.kint-show:hover>nav{background-position:0 -45px}.kint dt.kint-show>nav{background-position:0 -30px}.kint dt.kint-parent+dd{display:none;border-left:1px dashed #b6cedb}.kint dt.kint-parent.kint-show+dd{display:block}.kint var,.kint var a{color:#0092db;font-style:normal}.kint dt:hover var,.kint dt:hover var a{color:#5cb730}.kint dfn{font-style:normal;font-family:monospace;color:#1d1e1e}.kint pre{color:#1d1e1e;margin:0 0 0 12px;padding:5px;overflow-y:hidden;border-top:0;border:1px solid #b6cedb;background:#e0eaef;display:block;word-break:normal}.kint .kint-popup-trigger{float:right!important;cursor:pointer;color:#0092db}.kint .kint-popup-trigger:hover{color:#b6cedb}.kint dt.kint-parent>.kint-popup-trigger{font-size:15pt}.kint footer{padding:0 3px 3px;font-size:.7em}.kint footer>.kint-popup-trigger{font-size:12px}.kint footer nav{background-size:10px;height:10px;width:10px}.kint footer nav:hover{background-position:0 -10px}.kint footer>ol{display:none;margin-left:32px}.kint footer.kint-show>ol{display:block}.kint footer.kint-show nav{background-position:0 -20px}.kint footer.kint-show nav:hover{background-position:0 -30px}.kint a{color:#1d1e1e;text-shadow:none}.kint a:hover{color:#1d1e1e;border-bottom:1px dotted #1d1e1e}.kint ul{list-style:none;padding-left:12px}.kint ul:not(.kint-tabs) li{border-left:1px dashed #b6cedb}.kint ul:not(.kint-tabs) li>dl{border-left:none}.kint ul.kint-tabs{margin:0 0 0 12px;padding-left:0;background:#e0eaef;border:1px solid #b6cedb;border-top:0}.kint ul.kint-tabs li{background:#c1d4df;border:1px solid #b6cedb;cursor:pointer;display:inline-block;height:23px;line-height:23px;margin:0 4px 4px;padding:0 10px 2px}.kint ul.kint-tabs li:hover,.kint ul.kint-tabs li.kint-active-tab:hover{border-color:#0092db;color:#5cb730}.kint ul.kint-tabs li.kint-active-tab{background:#e0eaef;border-top:0;margin-top:-1px;padding-bottom:2px;padding-top:4px}.kint ul.kint-tabs li+li{margin-left:0}.kint ul:not(.kint-tabs)>li:not(:first-child){display:none}.kint dt:hover+dd>ul>li.kint-active-tab{border-color:#0092db;color:#5cb730}.kint-report{border-collapse:collapse;empty-cells:show;border-spacing:0}.kint-report *{text-align:left;margin:0!important;padding:0!important;font-size:9pt;overflow:hidden;font-family:Consolas,"Courier New",monospace;color:#1d1e1e}.kint-report dt{border:0;background:0}.kint-report dt .kint-parent{max-width:180px;min-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.kint-report dt .kint-parent.kint-show{border-bottom:1px solid #b6cedb}.kint-report td,.kint-report th{border:1px solid #b6cedb;vertical-align:top}.kint-report td{background:#e0eaef;white-space:pre}.kint-report td>dl{border:0}.kint-report pre{border-top:0;border-bottom:0;border-right:0}.kint-report th:first-child{background:0;border:0}.kint-report td:first-child,.kint-report th{font-weight:bold;background:#c1d4df;color:#1d1e1e}.kint-report td.kint-empty{background:#d33682!important}.kint-report tr:hover>td{box-shadow:0 0 1px 0 #0092db inset}.kint-report tr:hover var{color:#5cb730}.kint-trace .kint-source{line-height:1.08em}.kint-trace .kint-source span{padding-right:1px;border-right:3px inset #0092db}.kint-trace .kint-source .kint-highlight{background:#c1d4df}.kint-trace .kint-parent>b{min-width:18px;display:inline-block;text-align:right;color:#1d1e1e}.kint-trace .kint-parent>var>a{color:#0092db}.kint-focused{box-shadow:0 0 3px 2px #5cb730}.kint-microtime,.kint-color-preview{box-shadow:0 0 2px 0 #b6cedb;height:16px;text-align:center;text-shadow:-1px 0 #839496,0 1px #839496,1px 0 #839496,0 -1px #839496;width:230px;color:#fdf6e3}.kint>dl>dt{background:linear-gradient(to bottom,#e3ecf0 0,#c0d4df 100%)}.kint ul.kint-tabs{background:linear-gradient(to bottom,#9dbed0 0,#b2ccda 100%)}.kint>dl:not(.kint-trace)>dd>ul.kint-tabs li{background:#e0eaef}.kint>dl:not(.kint-trace)>dd>ul.kint-tabs li.kint-active-tab{background:#c1d4df}.kint>dl.kint-trace>dt{background:linear-gradient(to bottom,#c0d4df 0,#e3ecf0 100%)}.kint .kint-source .kint-highlight{background:#f0eb96}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/view/compiled/main/solarized-dark.css b/modules/devel/kint/kint/view/compiled/main/solarized-dark.css
new file mode 100644
index 0000000..7cf6cd5
--- /dev/null
+++ b/modules/devel/kint/kint/view/compiled/main/solarized-dark.css
@@ -0,0 +1 @@
+.kint::selection{background:#268bd2;color:#839496}.kint::-moz-selection{background:#268bd2;color:#839496}.kint::-webkit-selection{background:#268bd2;color:#839496}.kint{font-family:Consolas,"Courier New",monospace;color:#839496;padding:0;margin:10px 0;font-size:10pt;line-height:150px;white-space:nowrap;overflow-x:auto;text-align:left}.kint *{float:none!important;line-height:15px;padding:0;margin:0}.kint dt{background:#002b36;border:1px solid #586e75;color:#839496;display:block;font-weight:bold;list-style:none outside none;padding:5px}.kint dt:hover{border-color:#268bd2}.kint dt>var{margin-right:5px}.kint>dl dl{padding:0 0 0 15px}.kint nav{display:inline-block;height:15px;width:15px;margin-right:3px;vertical-align:middle;content:' ';cursor:pointer;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAA8CAMAAACO5hB7AAAA7VBMVEVYbnWToaH///9YbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnWToaFYbnVYbnWToaGToaFYbnWToaFYbnWToaFYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnWToaEeRtj1AAAATXRSTlMAAACLab0B7iP2R7CL9iPuaUewAb36F0/QnPoX0JxPYQaurepi6QV8FhV7MzFhM6586RYFMa3qYnsVBpNQ+ZGOGJ3PkM9QkZAY+Y6TnV7gnYsAAAEcSURBVHhebdHVbgMxEEBRu8sUZmqapBBoSuGUmWb+/3NayxtrLOe+Hck745XZgd6/eb3CVcKt7HmR+gKxlCGOETG5vFbOoahR6NxI5zHt6nuq+2dqnqfzzH3mfcz70vb8H6MJt5u6a96hS30E4PjEFgAEp2fKNojKUfVEOoS044ex7u3YPE/nmfvM+5j3pe17T9oe/77O41w+n4vnrbrwZxbTshVhvtx5Kb8vliRLRWmeSQSTjJq/El5x5fUXYmNN9hcQC5y4g/hGvVksNtT8451rns2IScb7mn567ll2GNpWr9YWfvQgzWsKs8HOA/m960g6rjTzA8HAV/NHwiOmPLwDKA/J/gggYsRVgFvqbr/fpWYv90zzZKKs9Qfx00Jx65oxLAAAAABJRU5ErkJggg==") no-repeat scroll 0 0 transparent}.kint dt.kint-parent:hover nav{background-position:0 -15px}.kint dt.kint-parent.kint-show:hover>nav{background-position:0 -45px}.kint dt.kint-show>nav{background-position:0 -30px}.kint dt.kint-parent+dd{display:none;border-left:1px dashed #586e75}.kint dt.kint-parent.kint-show+dd{display:block}.kint var,.kint var a{color:#268bd2;font-style:normal}.kint dt:hover var,.kint dt:hover var a{color:#2aa198}.kint dfn{font-style:normal;font-family:monospace;color:#93a1a1}.kint pre{color:#839496;margin:0 0 0 15px;padding:5px;overflow-y:hidden;border-top:0;border:1px solid #586e75;background:#002b36;display:block;word-break:normal}.kint .kint-popup-trigger{float:right!important;cursor:pointer;color:#268bd2}.kint .kint-popup-trigger:hover{color:#586e75}.kint dt.kint-parent>.kint-popup-trigger{font-size:15pt}.kint footer{padding:0 3px 3px;font-size:.7em}.kint footer>.kint-popup-trigger{font-size:12px}.kint footer nav{background-size:10px;height:10px;width:10px}.kint footer nav:hover{background-position:0 -10px}.kint footer>ol{display:none;margin-left:32px}.kint footer.kint-show>ol{display:block}.kint footer.kint-show nav{background-position:0 -20px}.kint footer.kint-show nav:hover{background-position:0 -30px}.kint a{color:#839496;text-shadow:none}.kint a:hover{color:#93a1a1;border-bottom:1px dotted #93a1a1}.kint ul{list-style:none;padding-left:15px}.kint ul:not(.kint-tabs) li{border-left:1px dashed #586e75}.kint ul:not(.kint-tabs) li>dl{border-left:none}.kint ul.kint-tabs{margin:0 0 0 15px;padding-left:0;background:#002b36;border:1px solid #586e75;border-top:0}.kint ul.kint-tabs li{background:#073642;border:1px solid #586e75;cursor:pointer;display:inline-block;height:24px;line-height:24px;margin:0 5px 5px;padding:0 12px 3px}.kint ul.kint-tabs li:hover,.kint ul.kint-tabs li.kint-active-tab:hover{border-color:#268bd2;color:#2aa198}.kint ul.kint-tabs li.kint-active-tab{background:#002b36;border-top:0;margin-top:-1px;padding-bottom:3px;padding-top:4px}.kint ul.kint-tabs li+li{margin-left:0}.kint ul:not(.kint-tabs)>li:not(:first-child){display:none}.kint dt:hover+dd>ul>li.kint-active-tab{border-color:#268bd2;color:#2aa198}.kint-report{border-collapse:collapse;empty-cells:show;border-spacing:0}.kint-report *{text-align:left;margin:0!important;padding:0!important;font-size:9pt;overflow:hidden;font-family:Consolas,"Courier New",monospace;color:#839496}.kint-report dt{border:0;background:0}.kint-report dt .kint-parent{max-width:180px;min-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.kint-report dt .kint-parent.kint-show{border-bottom:1px solid #586e75}.kint-report td,.kint-report th{border:1px solid #586e75;vertical-align:top}.kint-report td{background:#002b36;white-space:pre}.kint-report td>dl{border:0}.kint-report pre{border-top:0;border-bottom:0;border-right:0}.kint-report th:first-child{background:0;border:0}.kint-report td:first-child,.kint-report th{font-weight:bold;background:#073642;color:#93a1a1}.kint-report td.kint-empty{background:#d33682!important}.kint-report tr:hover>td{box-shadow:0 0 1px 0 #268bd2 inset}.kint-report tr:hover var{color:#2aa198}.kint-trace .kint-source{line-height:1.1em}.kint-trace .kint-source span{padding-right:1px;border-right:3px inset #268bd2}.kint-trace .kint-source .kint-highlight{background:#073642}.kint-trace .kint-parent>b{min-width:18px;display:inline-block;text-align:right;color:#93a1a1}.kint-trace .kint-parent>var>a{color:#268bd2}.kint-focused{box-shadow:0 0 3px 2px #859900 inset;border-radius:7px}.kint-microtime,.kint-color-preview{box-shadow:0 0 2px 0 #b6cedb;height:16px;text-align:center;text-shadow:-1px 0 #839496,0 1px #839496,1px 0 #839496,0 -1px #839496;width:230px;color:#fdf6e3}body{background:#073642;color:#fff}.kint{background:#073642;box-shadow:0 0 5px 3px #073642}.kint>dl>dt,.kint ul.kint-tabs{box-shadow:4px 0 2px -3px #268bd2 inset}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/view/compiled/main/solarized.css b/modules/devel/kint/kint/view/compiled/main/solarized.css
new file mode 100644
index 0000000..882442b
--- /dev/null
+++ b/modules/devel/kint/kint/view/compiled/main/solarized.css
@@ -0,0 +1 @@
+.kint::selection{background:#268bd2;color:#657b83}.kint::-moz-selection{background:#268bd2;color:#657b83}.kint::-webkit-selection{background:#268bd2;color:#657b83}.kint{font-family:Consolas,"Courier New",monospace;color:#657b83;padding:0;margin:10px 0;font-size:10pt;line-height:150px;white-space:nowrap;overflow-x:auto;text-align:left}.kint *{float:none!important;line-height:15px;padding:0;margin:0}.kint dt{background:#fdf6e3;border:1px solid #93a1a1;color:#657b83;display:block;font-weight:bold;list-style:none outside none;padding:5px}.kint dt:hover{border-color:#268bd2}.kint dt>var{margin-right:5px}.kint>dl dl{padding:0 0 0 15px}.kint nav{display:inline-block;height:15px;width:15px;margin-right:3px;vertical-align:middle;content:' ';cursor:pointer;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAA8CAMAAACO5hB7AAAA7VBMVEVYbnWToaH///9YbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnWToaFYbnVYbnWToaGToaFYbnWToaFYbnWToaFYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnWToaEeRtj1AAAATXRSTlMAAACLab0B7iP2R7CL9iPuaUewAb36F0/QnPoX0JxPYQaurepi6QV8FhV7MzFhM6586RYFMa3qYnsVBpNQ+ZGOGJ3PkM9QkZAY+Y6TnV7gnYsAAAEcSURBVHhebdHVbgMxEEBRu8sUZmqapBBoSuGUmWb+/3NayxtrLOe+Hck745XZgd6/eb3CVcKt7HmR+gKxlCGOETG5vFbOoahR6NxI5zHt6nuq+2dqnqfzzH3mfcz70vb8H6MJt5u6a96hS30E4PjEFgAEp2fKNojKUfVEOoS044ex7u3YPE/nmfvM+5j3pe17T9oe/77O41w+n4vnrbrwZxbTshVhvtx5Kb8vliRLRWmeSQSTjJq/El5x5fUXYmNN9hcQC5y4g/hGvVksNtT8451rns2IScb7mn567ll2GNpWr9YWfvQgzWsKs8HOA/m960g6rjTzA8HAV/NHwiOmPLwDKA/J/gggYsRVgFvqbr/fpWYv90zzZKKs9Qfx00Jx65oxLAAAAABJRU5ErkJggg==") no-repeat scroll 0 0 transparent}.kint dt.kint-parent:hover nav{background-position:0 -15px}.kint dt.kint-parent.kint-show:hover>nav{background-position:0 -45px}.kint dt.kint-show>nav{background-position:0 -30px}.kint dt.kint-parent+dd{display:none;border-left:1px dashed #93a1a1}.kint dt.kint-parent.kint-show+dd{display:block}.kint var,.kint var a{color:#268bd2;font-style:normal}.kint dt:hover var,.kint dt:hover var a{color:#2aa198}.kint dfn{font-style:normal;font-family:monospace;color:#586e75}.kint pre{color:#657b83;margin:0 0 0 15px;padding:5px;overflow-y:hidden;border-top:0;border:1px solid #93a1a1;background:#fdf6e3;display:block;word-break:normal}.kint .kint-popup-trigger{float:right!important;cursor:pointer;color:#268bd2}.kint .kint-popup-trigger:hover{color:#93a1a1}.kint dt.kint-parent>.kint-popup-trigger{font-size:15pt}.kint footer{padding:0 3px 3px;font-size:.7em}.kint footer>.kint-popup-trigger{font-size:12px}.kint footer nav{background-size:10px;height:10px;width:10px}.kint footer nav:hover{background-position:0 -10px}.kint footer>ol{display:none;margin-left:32px}.kint footer.kint-show>ol{display:block}.kint footer.kint-show nav{background-position:0 -20px}.kint footer.kint-show nav:hover{background-position:0 -30px}.kint a{color:#657b83;text-shadow:none}.kint a:hover{color:#586e75;border-bottom:1px dotted #586e75}.kint ul{list-style:none;padding-left:15px}.kint ul:not(.kint-tabs) li{border-left:1px dashed #93a1a1}.kint ul:not(.kint-tabs) li>dl{border-left:none}.kint ul.kint-tabs{margin:0 0 0 15px;padding-left:0;background:#fdf6e3;border:1px solid #93a1a1;border-top:0}.kint ul.kint-tabs li{background:#eee8d5;border:1px solid #93a1a1;cursor:pointer;display:inline-block;height:24px;line-height:24px;margin:0 5px 5px;padding:0 12px 3px}.kint ul.kint-tabs li:hover,.kint ul.kint-tabs li.kint-active-tab:hover{border-color:#268bd2;color:#2aa198}.kint ul.kint-tabs li.kint-active-tab{background:#fdf6e3;border-top:0;margin-top:-1px;padding-bottom:3px;padding-top:4px}.kint ul.kint-tabs li+li{margin-left:0}.kint ul:not(.kint-tabs)>li:not(:first-child){display:none}.kint dt:hover+dd>ul>li.kint-active-tab{border-color:#268bd2;color:#2aa198}.kint-report{border-collapse:collapse;empty-cells:show;border-spacing:0}.kint-report *{text-align:left;margin:0!important;padding:0!important;font-size:9pt;overflow:hidden;font-family:Consolas,"Courier New",monospace;color:#657b83}.kint-report dt{border:0;background:0}.kint-report dt .kint-parent{max-width:180px;min-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.kint-report dt .kint-parent.kint-show{border-bottom:1px solid #93a1a1}.kint-report td,.kint-report th{border:1px solid #93a1a1;vertical-align:top}.kint-report td{background:#fdf6e3;white-space:pre}.kint-report td>dl{border:0}.kint-report pre{border-top:0;border-bottom:0;border-right:0}.kint-report th:first-child{background:0;border:0}.kint-report td:first-child,.kint-report th{font-weight:bold;background:#eee8d5;color:#586e75}.kint-report td.kint-empty{background:#d33682!important}.kint-report tr:hover>td{box-shadow:0 0 1px 0 #268bd2 inset}.kint-report tr:hover var{color:#2aa198}.kint-trace .kint-source{line-height:1.1em}.kint-trace .kint-source span{padding-right:1px;border-right:3px inset #268bd2}.kint-trace .kint-source .kint-highlight{background:#eee8d5}.kint-trace .kint-parent>b{min-width:18px;display:inline-block;text-align:right;color:#586e75}.kint-trace .kint-parent>var>a{color:#268bd2}.kint-focused{box-shadow:0 0 3px 2px #859900 inset;border-radius:7px}.kint-microtime,.kint-color-preview{box-shadow:0 0 2px 0 #b6cedb;height:16px;text-align:center;text-shadow:-1px 0 #839496,0 1px #839496,1px 0 #839496,0 -1px #839496;width:230px;color:#fdf6e3}.kint>dl>dt,.kint ul.kint-tabs{box-shadow:4px 0 2px -3px #268bd2 inset}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/view/compiled/modular-window/kint.js b/modules/devel/kint/kint/view/compiled/modular-window/kint.js
new file mode 100644
index 0000000..9c0bfb9
--- /dev/null
+++ b/modules/devel/kint/kint/view/compiled/modular-window/kint.js
@@ -0,0 +1,4 @@
+(function(){if("undefined"!==typeof jQuery){document.body.insertAdjacentHTML("beforeend",'<div id="kint-backdrop">Ajax output</div><div id="kint-modular"></div><div id="kint-modular-placeholder">[Debug output]</div>');var c=document.getElementById("kint-modular"),d=document.getElementById("kint-modular-placeholder"),f=document.getElementById("kint-backdrop"),h=window.getComputedStyle(document.body),h={a:h.backgroundColor,b:h.color},l=function(a){var b=a?"none":"block";a?(document.body.style.backgroundColor=h.a,
+document.body.style.color=h.b,a="block",window.addEventListener("mousedown",k)):(a="none",window.removeEventListener("mousedown",k));c.style.display=a;f.style.display=a;d.style.display=b},k=function(a){for(a=a.target;a&&a!==c;)a=a.parentNode;a||l();return!1},n=!1;jQuery(document).ajaxComplete(function(a,b,e){a=b.getResponseHeader("kint");var g;if(a){for(var m=1;;m++){g=b.getResponseHeader("kint-"+m);if(!g)break;a+=g}b=document.createElement("a");b.setAttribute("href",e.url);b.innerHTML=e.url+" ["+
+(new Date).toLocaleTimeString()+"]";b.title="Click to resend";e.complete=function(){c.style.opacity=1};b.onclick=function(){c.style.opacity=0.7;jQuery.ajax(e);return!1};c.appendChild(b);c.insertAdjacentHTML("beforeend",decodeURIComponent(a));n||(b=c.querySelectorAll(".-kint-js"),b.length&&(n=!0,a=document.createElement("script"),a.appendChild(document.createTextNode(b[0].innerHTML)),document.body.appendChild(a),b=document.createEvent("Event"),b.initEvent("kint-load",!0,!0),window.dispatchEvent(b)));
+l(!0)}});d.addEventListener("click",l)};})()
diff --git a/modules/devel/kint/kint/view/compiled/modular-window/original.css b/modules/devel/kint/kint/view/compiled/modular-window/original.css
new file mode 100644
index 0000000..d88c760
--- /dev/null
+++ b/modules/devel/kint/kint/view/compiled/modular-window/original.css
@@ -0,0 +1 @@
+#kint-modular{background:#fff;border:1px solid #b6cedb;display:none;font-family:Consolas,"Courier New",monospace;left:calc(50% - 450px);line-height:15px;overflow-y:scroll;padding:8px;position:fixed;top:30px;bottom:30px;width:900px;z-index: 2147483647}#kint-modular pre{background:#e0eaef;border-radius:0;color:#1d1e1e;margin:8px 0;padding:5px;overflow-y:hidden;border:1px solid #b6cedb;display:block;word-break:normal}#kint-modular pre:last-child{margin-bottom:0}#kint-backdrop{cursor:pointer;opacity:.8;height:100%;position:fixed;width:100%;left:0;overflow:hidden;top:0;background:radial-gradient(ellipse at center,#e0eaef 0,#c1d4df 100%);z-index: 2147483647;display:none;text-align:center;font-size:15pt;text-shadow:0 0 5px #5cb730;color:#0092db}#kint-modular-placeholder{border:1px solid #b6cedb;display:none;position:fixed;bottom:0;left:0;background:#e0eaef;color:#1d1e1e;z-index:2147483647;cursor:move}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/view/js/main.js b/modules/devel/kint/kint/view/js/main.js
new file mode 100644
index 0000000..512c8ff
--- /dev/null
+++ b/modules/devel/kint/kint/view/js/main.js
@@ -0,0 +1,411 @@
+/**
+ java -jar compiler.jar --js $FileName$ --js_output_file ../inc/kint.js --compilation_level ADVANCED_OPTIMIZATIONS --output_wrapper "(function(){%output%})()"
+ */
+
+if ( typeof kintInitialized === 'undefined' ) {
+	kintInitialized = 1;
+	var kint = {
+		visiblePluses : [], // all visible toggle carets
+		currentPlus   : -1, // currently selected caret
+
+		selectText : function( element ) {
+			var selection = window.getSelection(),
+				range = document.createRange();
+
+			range.selectNodeContents(element);
+			selection.removeAllRanges();
+			selection.addRange(range);
+		},
+
+		each : function( selector, callback ) {
+			Array.prototype.slice.call(document.querySelectorAll(selector), 0).forEach(callback)
+		},
+
+		hasClass : function( target, className ) {
+			if ( typeof className === 'undefined' ) {
+				className = 'kint-show';
+			}
+
+			return new RegExp('(\\s|^)' + className + '(\\s|$)').test(target.className);
+		},
+
+		addClass : function( ele, className ) {
+			if ( typeof className === 'undefined' ) {
+				className = 'kint-show';
+			}
+
+			kint.removeClass(ele, className).className += (" " + className);
+		},
+
+		removeClass : function( ele, className ) {
+			if ( typeof className === 'undefined' ) {
+				className = 'kint-show';
+			}
+
+			ele.className = ele.className.replace(
+				new RegExp('(\\s|^)' + className + '(\\s|$)'), ' '
+			);
+			return ele;
+		},
+
+		next : function( element ) {
+			do {
+				element = element.nextElementSibling;
+			} while ( element.nodeName.toLowerCase() !== 'dd' );
+
+			return element;
+		},
+
+		toggle : function( element, hide ) {
+			var parent = kint.next(element);
+
+			if ( typeof hide === 'undefined' ) {
+				hide = kint.hasClass(element);
+			}
+
+			if ( hide ) {
+				kint.removeClass(element);
+			} else {
+				kint.addClass(element);
+			}
+
+			if ( parent.childNodes.length === 1 ) {
+				parent = parent.childNodes[0].childNodes[0]; // reuse variable cause I can
+
+				if ( kint.hasClass(parent, 'kint-parent') ) {
+					kint.toggle(parent, hide)
+				}
+			}
+		},
+
+		toggleChildren : function( element, hide ) {
+			var parent = kint.next(element)
+				, nodes = parent.getElementsByClassName('kint-parent')
+				, i = nodes.length;
+
+			if ( typeof hide === 'undefined' ) {
+				hide = kint.hasClass(element);
+			}
+
+			while ( i-- ) {
+				kint.toggle(nodes[i], hide);
+			}
+			kint.toggle(element, hide);
+		},
+
+		toggleAll : function( caret ) {
+			var elements = document.getElementsByClassName('kint-parent'),
+				i = elements.length,
+				visible = kint.hasClass(caret.parentNode);
+
+			while ( i-- ) {
+				kint.toggle(elements[i], visible);
+			}
+		},
+
+		switchTab : function( target ) {
+			var lis, el = target, index = 0;
+
+			target.parentNode.getElementsByClassName('kint-active-tab')[0].className = '';
+			target.className = 'kint-active-tab';
+
+			// take the index of clicked title tab and make the same n-th content tab visible
+			while ( el = el.previousSibling ) el.nodeType === 1 && index++;
+			lis = target.parentNode.nextSibling.childNodes;
+			for ( var i = 0; i < lis.length; i++ ) {
+				if ( i === index ) {
+					lis[i].style.display = 'block';
+
+					if ( lis[i].childNodes.length === 1 ) {
+						el = lis[i].childNodes[0].childNodes[0];
+
+						if ( kint.hasClass(el, 'kint-parent') ) {
+							kint.toggle(el, false)
+						}
+					}
+				} else {
+					lis[i].style.display = 'none';
+				}
+			}
+		},
+
+		isSibling : function( el ) {
+			for ( ; ; ) {
+				el = el.parentNode;
+				if ( !el || kint.hasClass(el, 'kint') ) break;
+			}
+
+			return !!el;
+		},
+
+		fetchVisiblePluses : function() {
+			kint.visiblePluses = [];
+			kint.each('.kint nav, .kint-tabs>li:not(.kint-active-tab)', function( el ) {
+				if ( el.offsetWidth !== 0 || el.offsetHeight !== 0 ) {
+					kint.visiblePluses.push(el)
+				}
+			});
+		},
+
+		openInNewWindow : function( kintContainer ) {
+			var newWindow;
+
+			if ( newWindow = window.open() ) {
+				newWindow.document.open();
+				newWindow.document.write(
+					'<html>'
+						+ '<head>'
+						+ '<title>Kint (' + new Date().toISOString() + ')</title>'
+						+ '<meta charset="utf-8">'
+						+ document.getElementsByClassName('-kint-js')[0].outerHTML
+						+ document.getElementsByClassName('-kint-css')[0].outerHTML
+						+ '</head>'
+						+ '<body>'
+						+ '<input style="width: 100%" placeholder="Take some notes!">'
+						+ '<div class="kint">'
+						+ kintContainer.parentNode.outerHTML
+						+ '</div></body>'
+				);
+				newWindow.document.close();
+			}
+		},
+
+		keyCallBacks : {
+			cleanup : function( i ) {
+				var focusedClass = 'kint-focused';
+				var prevElement = document.querySelector('.' + focusedClass);
+				prevElement && kint.removeClass(prevElement, focusedClass);
+
+				if ( i !== -1 ) {
+					var el = kint.visiblePluses[i];
+					kint.addClass(el, focusedClass);
+
+
+					var offsetTop = function( el ) {
+						return el.offsetTop + ( el.offsetParent ? offsetTop(el.offsetParent) : 0 );
+					};
+
+					var top = offsetTop(el) - (window.innerHeight / 2 );
+					window.scrollTo(0, top);
+				}
+
+				kint.currentPlus = i;
+			},
+
+			moveCursor : function( up, i ) {
+				// todo make the first VISIBLE plus active
+				if ( up ) {
+					if ( --i < 0 ) {
+						i = kint.visiblePluses.length - 1;
+					}
+				} else {
+					if ( ++i >= kint.visiblePluses.length ) {
+						i = 0;
+					}
+				}
+
+				kint.keyCallBacks.cleanup(i);
+				return false;
+			}
+		}
+	};
+
+	window.addEventListener("click", function( e ) {
+		var target = e.target
+			, nodeName = target.nodeName.toLowerCase();
+
+		if ( !kint.isSibling(target) ) return;
+
+		// auto-select name of variable
+		if ( nodeName === 'dfn' ) {
+			kint.selectText(target);
+			target = target.parentNode;
+		} else if ( nodeName === 'var' ) { // stupid workaround for misc elements
+			target = target.parentNode;    // to not stop event from further propagating
+			nodeName = target.nodeName.toLowerCase()
+		}
+
+		// switch tabs
+		if ( nodeName === 'li' && target.parentNode.className === 'kint-tabs' ) {
+			if ( target.className !== 'kint-active-tab' ) {
+				kint.switchTab(target);
+				if ( kint.currentPlus !== -1 ) kint.fetchVisiblePluses();
+			}
+			return false;
+		}
+
+		// handle clicks on the navigation caret
+		if ( nodeName === 'nav' ) {
+			if ( target.parentNode.nodeName.toLowerCase() === 'footer' ) {
+				target = target.parentNode;
+				if ( kint.hasClass(target) ) {
+					kint.removeClass(target)
+				} else {
+					kint.addClass(target)
+				}
+			} else {
+				// ensure doubleclick has different behaviour, see below
+				setTimeout(function() {
+					var timer = parseInt(target.kintTimer, 10);
+					if ( timer > 0 ) {
+						target.kintTimer--;
+					} else {
+						kint.toggleChildren(target.parentNode); // <dt>
+						if ( kint.currentPlus !== -1 ) kint.fetchVisiblePluses();
+					}
+				}, 300);
+			}
+
+			e.stopPropagation();
+			return false;
+		} else if ( kint.hasClass(target, 'kint-parent') ) {
+			kint.toggle(target);
+			if ( kint.currentPlus !== -1 ) kint.fetchVisiblePluses();
+			return false;
+		} else if ( kint.hasClass(target, 'kint-ide-link') ) {
+			e.preventDefault();
+			var ajax = new XMLHttpRequest(); // add ajax call to contact editor but prevent link default action
+			ajax.open('GET', target.href);
+			ajax.send(null);
+			return false;
+		} else if ( kint.hasClass(target, 'kint-popup-trigger') ) {
+			var kintContainer = target.parentNode;
+			if ( kintContainer.nodeName.toLowerCase() === 'footer' ) {
+				kintContainer = kintContainer.previousSibling;
+			} else {
+				while ( kintContainer && !kint.hasClass(kintContainer, 'kint-parent') ) {
+					kintContainer = kintContainer.parentNode;
+				}
+			}
+
+			kint.openInNewWindow(kintContainer);
+		}
+	}, false);
+
+	window.addEventListener("dblclick", function( e ) {
+		var target = e.target;
+		if ( !kint.isSibling(target) ) return;
+
+
+		if ( target.nodeName.toLowerCase() === 'nav' ) {
+			target.kintTimer = 2;
+			kint.toggleAll(target);
+			if ( kint.currentPlus !== -1 ) kint.fetchVisiblePluses();
+			e.stopPropagation();
+		}
+	}, false);
+
+	// keyboard navigation
+	window.onkeydown = function( e ) { // direct assignment is used to have priority over ex FAYT
+
+		// do nothing if alt key is pressed or if we're actually typing somewhere
+		if ( e.target !== document.body || e.altKey ) return;
+
+		var keyCode = e.keyCode
+			, shiftKey = e.shiftKey
+			, i = kint.currentPlus;
+
+
+		if ( keyCode === 68 ) { // 'd' : toggles navigation on/off
+			if ( i === -1 ) {
+				kint.fetchVisiblePluses();
+				return kint.keyCallBacks.moveCursor(false, i);
+			} else {
+				kint.keyCallBacks.cleanup(-1);
+				return false;
+			}
+		} else {
+			if ( i === -1 ) return;
+
+			if ( keyCode === 9 ) { // TAB : moves up/down depending on shift key
+				return kint.keyCallBacks.moveCursor(shiftKey, i);
+			} else if ( keyCode === 38 ) { // ARROW UP : moves up
+				return kint.keyCallBacks.moveCursor(true, i);
+			} else if ( keyCode === 40 ) { // ARROW DOWN : down
+				return kint.keyCallBacks.moveCursor(false, i);
+			} else {
+				if ( i === -1 ) {
+					return;
+				}
+			}
+		}
+
+
+		var kintNode = kint.visiblePluses[i];
+		if ( kintNode.nodeName.toLowerCase() === 'li' ) { // we're on a trace tab
+			if ( keyCode === 32 || keyCode === 13 ) { // SPACE/ENTER
+				kint.switchTab(kintNode);
+				kint.fetchVisiblePluses();
+				return kint.keyCallBacks.moveCursor(true, i);
+			} else if ( keyCode === 39 ) { // arrows
+				return kint.keyCallBacks.moveCursor(false, i);
+			} else if ( keyCode === 37 ) {
+				return kint.keyCallBacks.moveCursor(true, i);
+			}
+		}
+
+		kintNode = kintNode.parentNode; // simple dump
+		if ( keyCode === 32 || keyCode === 13 ) { // SPACE/ENTER : toggles
+			kint.toggle(kintNode);
+			kint.fetchVisiblePluses();
+			return false;
+		} else if ( keyCode === 39 || keyCode === 37 ) { // ARROW LEFT/RIGHT : respectively hides/shows and traverses
+			var visible = kint.hasClass(kintNode);
+			var hide = keyCode === 37;
+
+			if ( visible ) {
+				kint.toggleChildren(kintNode, hide); // expand/collapse all children if immediate ones are showing
+			} else {
+				if ( hide ) { // LEFT
+					// traverse to parent and THEN hide
+					do {kintNode = kintNode.parentNode} while ( kintNode && kintNode.nodeName.toLowerCase() !== 'dd' );
+
+					if ( kintNode ) {
+						kintNode = kintNode.previousElementSibling;
+
+						i = -1;
+						var parentPlus = kintNode.querySelector('nav');
+						while ( parentPlus !== kint.visiblePluses[++i] ) {}
+						kint.keyCallBacks.cleanup(i)
+					} else { // we are at root
+						kintNode = kint.visiblePluses[i].parentNode;
+					}
+				}
+				kint.toggle(kintNode, hide);
+			}
+			kint.fetchVisiblePluses();
+			return false;
+		}
+	};
+
+	var microtimePrettifier = function( e ) {
+		var elements = Array.prototype.slice.call(document.querySelectorAll('.kint-microtime'), 0);
+		elements.forEach(function( el ) {
+			var value = parseFloat(el.innerHTML)
+				, min = Infinity
+				, max = -Infinity
+				, ratio;
+
+			elements.forEach(function( el ) {
+				var val = parseFloat(el.innerHTML);
+
+				if ( min > val ) min = val;
+				if ( max < val ) max = val;
+			});
+
+			ratio = 1 - (value - min) / (max - min);
+
+			el.style.background = 'hsl(' + Math.round(ratio * 120) + ',60%,70%)';
+		});
+	};
+
+	window.addEventListener("load", microtimePrettifier)
+	window.addEventListener("kint-load", microtimePrettifier)
+}
+
+// debug purposes only, removed in minified source
+function clg( i ) {
+	if ( !window.console )return;
+	var l = arguments.length, o = 0;
+	while ( o < l )console.log(arguments[o++])
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/view/js/modular-window.js b/modules/devel/kint/kint/view/js/modular-window.js
new file mode 100644
index 0000000..eb79a2c
--- /dev/null
+++ b/modules/devel/kint/kint/view/js/modular-window.js
@@ -0,0 +1,107 @@
+if ( typeof jQuery !== 'undefined' ) {
+	// this code is written in vanilla JS to future-proof it if we want to add other adapters like YUI
+	document.body.insertAdjacentHTML(
+		'beforeend',
+		'<div id="kint-backdrop">Ajax output</div><div id="kint-modular"></div>'
+			+ '<div id="kint-modular-placeholder">[Debug output]</div>'
+	);
+
+	var kintModular = document.getElementById("kint-modular");
+	var kintPlaceholder = document.getElementById("kint-modular-placeholder");
+	var kintBackdrop = document.getElementById("kint-backdrop");
+	var bodyStyle = window.getComputedStyle(document.body);
+	bodyStyle = {bg : bodyStyle.backgroundColor, clr : bodyStyle.color};
+
+	var toggleModular = function( show ) {
+		var hide = show ? 'none' : 'block';
+
+		if ( show ) {
+			// disregard body styles set by some skins
+			document.body.style.backgroundColor = bodyStyle.bg;
+			document.body.style.color = bodyStyle.clr;
+
+			show = 'block';
+			window.addEventListener('mousedown', kintCloseListener)
+		} else {
+			show = 'none';
+			window.removeEventListener('mousedown', kintCloseListener)
+		}
+
+		kintModular.style.display = show;
+		kintBackdrop.style.display = show;
+
+		kintPlaceholder.style.display = hide;
+	};
+
+	var kintCloseListener = function( e ) {
+		var el = e.target;
+
+		// are we clicking on the kint modular?
+		for ( ; ; ) {
+			if ( !el || el === kintModular ) break;
+			el = el.parentNode;
+		}
+
+		if ( !el ) toggleModular();
+
+		return false;
+	};
+
+
+	var scriptsInitialized = false;
+	jQuery(document)['ajaxComplete'](function( e, xhr, settings ) {
+		// todo display called url, post, timestamp
+		var data = xhr.getResponseHeader('kint')
+			, header
+			, returnedScript;
+
+		if ( !data ) return;
+
+		for ( var i = 1; ; i++ ) {
+			header = xhr.getResponseHeader('kint' + '-' + i);
+			if ( !header ) break;
+			data += header;
+		}
+
+		var a = document.createElement('a');
+		a.setAttribute('href', settings.url);
+		a.innerHTML = settings.url + " [" + (new Date()).toLocaleTimeString() + "]";
+		a.title = "Click to resend";
+
+		// jQuery specific part follows
+		settings.complete = function() {
+			kintModular.style.opacity = 1;
+		};
+		a.onclick = function() {
+			kintModular.style.opacity = .7;
+			jQuery['ajax'](settings);
+			return false;
+		};
+		// end jQuery specific
+
+		kintModular.appendChild(a);
+		kintModular.insertAdjacentHTML('beforeend', decodeURIComponent(data));
+
+		// exec script block from returned html once
+		if ( !scriptsInitialized ) {
+			returnedScript = kintModular.querySelectorAll(".-kint-js");
+			if ( returnedScript.length ) {
+
+				scriptsInitialized = true;
+
+				var script = document.createElement("script");
+				script.appendChild(document.createTextNode(returnedScript[0].innerHTML));
+
+				document.body.appendChild(script);
+
+				var evt = document.createEvent("Event");
+				evt.initEvent('kint-load', true, true);
+				window.dispatchEvent(evt);
+			}
+		}
+
+		toggleModular(true);
+	});
+
+	kintPlaceholder.addEventListener("click", toggleModular)
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/view/less/main.less b/modules/devel/kint/kint/view/less/main.less
new file mode 100644
index 0000000..46c2643
--- /dev/null
+++ b/modules/devel/kint/kint/view/less/main.less
@@ -0,0 +1,408 @@
+//
+// VARIABLES FOR THEMES TO OVERRIDE
+// --------------------------------------------------
+
+@default-font: Consolas, "Courier New", monospace;
+
+@spacing : 4;
+
+// caret taken from solarized
+@caret-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAA8CAMAAACO5hB7AAAA7VBMVEVYbnWToaH///9YbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnWToaFYbnVYbnWToaGToaFYbnWToaFYbnWToaFYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnVYbnWToaGToaGToaGToaGToaGToaGToaGToaGToaFYbnWToaEeRtj1AAAATXRSTlMAAACLab0B7iP2R7CL9iPuaUewAb36F0/QnPoX0JxPYQaurepi6QV8FhV7MzFhM6586RYFMa3qYnsVBpNQ+ZGOGJ3PkM9QkZAY+Y6TnV7gnYsAAAEcSURBVHhebdHVbgMxEEBRu8sUZmqapBBoSuGUmWb+/3NayxtrLOe+Hck745XZgd6/eb3CVcKt7HmR+gKxlCGOETG5vFbOoahR6NxI5zHt6nuq+2dqnqfzzH3mfcz70vb8H6MJt5u6a96hS30E4PjEFgAEp2fKNojKUfVEOoS044ex7u3YPE/nmfvM+5j3pe17T9oe/77O41w+n4vnrbrwZxbTshVhvtx5Kb8vliRLRWmeSQSTjJq/El5x5fUXYmNN9hcQC5y4g/hGvVksNtT8451rns2IScb7mn567ll2GNpWr9YWfvQgzWsKs8HOA/m960g6rjTzA8HAV/NHwiOmPLwDKA/J/gggYsRVgFvqbr/fpWYv90zzZKKs9Qfx00Jx65oxLAAAAABJRU5ErkJggg==");
+
+//
+// SET UP HELPER VARIABLES
+// --------------------------------------------------
+
+@border: 1px solid @border-color;
+
+.selection() {
+  background : @border-color-hover;
+  color      : @text-color;
+}
+
+//
+// BASE STYLES
+// --------------------------------------------------
+
+.kint::selection { .selection() }
+
+.kint::-moz-selection { .selection() }
+
+.kint::-webkit-selection { .selection() }
+
+.kint {
+  font-family : @default-font;
+  color       : @text-color;
+  padding     : 0;
+  margin      : @spacing * 2px 0;
+  font-size   : 10pt;
+  line-height : 15px;
+  white-space : nowrap;
+  overflow-x  : auto;
+  text-align  : left;
+
+  * {
+    float       : none !important;
+    line-height : 15px;
+    padding     : 0;
+    margin      : 0;
+  }
+
+  dt {
+    background  : @main-background;
+    border      : @border;
+    color       : @text-color;
+    display     : block;
+    font-weight : bold;
+    list-style  : none outside none;
+    padding     : @spacing * 1px;
+
+    &:hover {
+      border-color : @border-color-hover;
+    }
+
+    > var {
+      margin-right : 5px;
+    }
+  }
+
+  > dl dl {
+    padding : 0 0 0 @spacing * 3px;
+  }
+
+  //
+  // DROPDOWN CARET
+  // --------------------------------------------------
+
+  nav {
+    display        : inline-block;
+    height         : 15px;
+    width          : 15px;
+    margin-right   : 3px;
+    vertical-align : middle;
+    content        : ' ';
+    cursor         : pointer;
+    background     : @caret-image no-repeat scroll 0 0 transparent;
+  }
+
+  dt.kint-parent:hover nav {
+    background-position : 0 -15px;
+  }
+
+  dt.kint-parent.kint-show:hover > nav {
+    background-position : 0 -45px;
+  }
+
+  dt.kint-show > nav {
+    background-position : 0 -30px;
+  }
+
+  dt.kint-parent + dd {
+    display     : none;
+    border-left : 1px dashed @border-color;
+  }
+
+  dt.kint-parent.kint-show + dd {
+    display : block;
+  }
+
+  //
+  // INDIVIDUAL ITEMS
+  // --------------------------------------------------
+
+  var,
+  var a {
+    color      : @variable-type-color;
+    font-style : normal;
+  }
+
+  dt:hover var,
+  dt:hover var a {
+    color : @variable-type-color-hover;
+  }
+
+  dfn {
+    font-style  : normal;
+    font-family : monospace;
+    color       : @variable-name-color;
+  }
+
+  pre {
+    color      : @text-color;
+    margin     : 0 0 0 @spacing * 3px;
+    padding    : 5px;
+    overflow-y : hidden;
+    border-top : 0;
+    border     : @border;
+    background : @main-background;
+    display    : block;
+    word-break : normal;
+  }
+
+  .kint-popup-trigger {
+    float  : right !important;
+    cursor : pointer;
+    color  : @border-color-hover;
+
+    &:hover {
+      color : @border-color;
+    }
+  }
+
+  dt.kint-parent > .kint-popup-trigger {
+    font-size : 15pt;
+  }
+
+  footer {
+    padding   : 0 3px 3px;
+    font-size : .7em;
+
+    > .kint-popup-trigger {
+      font-size : 12px;
+    }
+
+    nav {
+      background-size : 10px;
+      height          : 10px;
+      width           : 10px;
+
+      &:hover {
+        background-position : 0 -10px;
+      }
+    }
+
+    > ol {
+      display     : none;
+      margin-left : 32px;
+    }
+
+    &.kint-show {
+      > ol {
+        display : block;
+      }
+
+      nav {
+        background-position : 0 -20px;
+
+        &:hover {
+          background-position : 0 -30px;
+        }
+      }
+    }
+  }
+
+  a {
+    color       : @text-color;
+    text-shadow : none;
+
+    &:hover {
+      color         : @variable-name-color;
+      border-bottom : 1px dotted @variable-name-color;
+    }
+  }
+
+  //
+  // TABS
+  // --------------------------------------------------
+
+  ul {
+    list-style   : none;
+    padding-left : @spacing * 3px;
+
+    &:not(.kint-tabs) {
+      li {
+        border-left : 1px dashed @border-color;
+
+        > dl {
+          border-left : none;
+        }
+      }
+    }
+
+    &.kint-tabs {
+      margin       : 0 0 0 @spacing * 3px;
+      padding-left : 0;
+      background   : @main-background;
+      border       : @border;
+      border-top   : 0;
+
+      li {
+        background  : @secondary-background;
+        border      : @border;
+        cursor      : pointer;
+        display     : inline-block;
+        height      : 16px + ceil(8px * (@spacing / 5));
+        line-height : 16px + ceil(8px * (@spacing / 5));
+        margin      : 0 @spacing * 1px @spacing * 1px;
+        padding     : 0 2px + @spacing * 2px floor(3px * (@spacing / 5));
+
+        &:hover,
+        &.kint-active-tab:hover {
+          border-color : @border-color-hover;
+          color        : @variable-type-color-hover;
+        }
+
+        &.kint-active-tab {
+          background     : @main-background;
+          border-top     : 0;
+          margin-top     : -1px;
+          padding-bottom : floor(3px * (@spacing / 5));
+          padding-top    : 1px + ceil(3px * (@spacing / 5));
+        }
+      }
+
+      li + li {
+        margin-left : 0
+      }
+    }
+
+    &:not(.kint-tabs) > li:not(:first-child) {
+      display : none;
+    }
+  }
+
+  dt:hover + dd > ul > li.kint-active-tab {
+    border-color : @border-color-hover;
+    color        : @variable-type-color-hover;
+  }
+}
+
+//
+// REPORT
+// --------------------------------------------------
+
+.kint-report {
+  border-collapse : collapse;
+  empty-cells     : show;
+  border-spacing  : 0;
+
+  * {
+    text-align  : left;
+    padding     : 0 !important;
+    margin      : 0 !important;
+    font-size   : 9pt;
+    overflow    : hidden;
+    font-family : @default-font;
+    color       : @text-color;
+  }
+
+  dt {
+    border     : 0;
+    background : none;
+
+    .kint-parent {
+      max-width     : 180px;
+      min-width     : 100%;
+      overflow      : hidden;
+      text-overflow : ellipsis;
+      white-space   : nowrap;
+      &.kint-show {
+        border-bottom : @border;
+      }
+    }
+  }
+
+  td,
+  th {
+    border         : @border;
+    vertical-align : top;
+  }
+
+  td {
+    background  : @main-background;
+    white-space : pre;
+
+    > dl {
+      border : 0;
+    }
+  }
+
+  pre {
+    border-top    : 0;
+    border-bottom : 0;
+    border-right  : 0;
+  }
+
+  th:first-child {
+    background : none;
+    border     : 0;
+  }
+
+  td:first-child,
+  th {
+    font-weight : bold;
+    background  : @secondary-background;
+    color       : @variable-name-color;
+  }
+
+  td.kint-empty {
+    background : #d33682 !important;
+  }
+
+  tr:hover {
+    > td {
+      box-shadow : 0px 0px 1px 0px @border-color-hover inset;
+    }
+
+    var {
+      color : @variable-type-color-hover;
+    }
+  }
+}
+
+//
+// TRACE
+// --------------------------------------------------
+.kint-trace {
+  .kint-source {
+    line-height : 1em + 0.02 * @spacing
+  }
+
+  .kint-source span {
+    padding-right : 1px;
+    border-right  : 3px inset @variable-type-color;
+  }
+
+  .kint-source .kint-highlight {
+    background : @secondary-background;
+  }
+
+  .kint-parent {
+    > b {
+      min-width  : 18px;
+      display    : inline-block;
+      text-align : right;
+      color      : @variable-name-color;
+    }
+
+    > var {
+      > a {
+        color : @variable-type-color;
+      }
+    }
+  }
+}
+
+//
+// MISC
+// --------------------------------------------------
+
+// keyboard navigation caret
+.kint-focused {
+  .keyboard-caret
+}
+
+.kint-microtime,
+.kint-color-preview {
+  box-shadow  : 0 0 2px 0 #b6cedb;
+  height      : 16px;
+  text-align  : center;
+  text-shadow : -1px 0 #839496, 0 1px #839496, 1px 0 #839496, 0 -1px #839496;
+  width       : 230px;
+  color       : #fdf6e3;
+}
+
+// mini trace
+.kint footer li {
+  color: #ddd;
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/view/less/modular-window.less b/modules/devel/kint/kint/view/less/modular-window.less
new file mode 100644
index 0000000..336b910
--- /dev/null
+++ b/modules/devel/kint/kint/view/less/modular-window.less
@@ -0,0 +1,63 @@
+@border: 1px solid @border-color;
+
+#kint-modular {
+  background  : #fff;
+  border      : @border;
+  display     : none;
+  font-family : @default-font;
+  left        : calc(~"50% - 450px");
+  line-height : 15px;
+  overflow-y  : scroll;
+  padding     : @spacing * 2px;
+  position    : fixed;
+  top         : 30px;
+  bottom      : 30px;
+  width       : 900px;
+  z-index     : 2147483647; /*I'm a debugger, GTFO!*/
+}
+
+#kint-modular pre {
+  background    : @main-background;
+  border-radius : 0;
+  color         : @text-color;
+  margin        : @spacing * 2px 0;
+  padding       : 5px;
+  overflow-y    : hidden;
+  border        : @border;
+  display       : block;
+  word-break    : normal;
+}
+
+#kint-modular pre:last-child {
+  margin-bottom : 0;
+}
+
+#kint-backdrop {
+  cursor      : pointer;
+  opacity     : 0.8;
+  height      : 100%;
+  position    : fixed;
+  width       : 100%;
+  left        : 0;
+  overflow    : hidden;
+  top         : 0;
+  background  : radial-gradient(ellipse at center, @main-background 0, @secondary-background 100%);
+  z-index     : 2147483647;
+  display     : none;
+  text-align  : center;
+  font-size   : 15pt;
+  text-shadow : 0 0 5px @variable-type-color-hover;
+  color       : @variable-type-color;
+}
+
+#kint-modular-placeholder {
+  border     : @border;
+  display    : none;
+  position   : fixed;
+  bottom     : 0;
+  left       : 0;
+  background : @main-background;
+  color      : @text-color;
+  z-index    : 2147483647;
+  cursor     : move;
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/view/themes/main/aante-light.less b/modules/devel/kint/kint/view/themes/main/aante-light.less
new file mode 100644
index 0000000..25702d5
--- /dev/null
+++ b/modules/devel/kint/kint/view/themes/main/aante-light.less
@@ -0,0 +1,136 @@
+/**
+ * @author Ante Aljinovic https://github.com/aljinovic
+ */
+@import "../../less/main";
+
+@main-background: #f8f8f8;
+@secondary-background : #f8f8f8;
+
+@text-color: #1d1e1e;
+@variable-name-color: #1d1e1e;
+@variable-type-color: #06f;
+@variable-type-color-hover: #f00;
+
+@border-color: #d7d7d7;
+@border-color-hover: #aaa;
+
+@caret-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAA8CAYAAAC5OOBJAAAAvklEQVR42mNgGMFAS0uLLSQk5HxoaOh/XDg4OLgdpwEBAQEGQAN+YtMIFH/i4ODAg9cFQNMbsWkOCgrKJMv5ID5Qipko/6M7PzAw0ImkAIQ5H0hvISv0gZpP+fn5qZAVfcBAkmEYBaNZcjRLjmbJUUCvqAIlDlAiASUWkjWDkiU0eTaSpBGUEZBy1E9QRiFWLzO2LEmU80GZHkcRhN/5oGIGVNzgKIbwOx9UwOErAIl2/igYzZKjWXI0S9IHAAASJijo0Ypj8AAAAABJRU5ErkJggg==");
+
+.keyboard-caret() {
+  box-shadow : 0 0 3px 2px @variable-type-color-hover;
+}
+
+.kint {
+  dt {
+    font-weight : normal;
+
+    &.kint-parent {
+      margin-top : 4px;
+    }
+  }
+
+  dl dl {
+    margin-top   : 4px;
+    padding-left : 25px;
+    border-left  : none;
+  }
+
+  > dl > dt {
+    background : @secondary-background;
+  }
+
+  //
+  // TABS
+  // --------------------------------------------------
+
+  ul {
+    margin       : 0;
+    padding-left : 0;
+
+    &:not(.kint-tabs) > li {
+      border-left : 0;
+    }
+
+    &.kint-tabs {
+      background   : @secondary-background;
+      border       : @border;
+      border-width : 0px 1px 1px 1px;
+      padding      : 4px 0 0 12px;
+      margin-left  : -1px;
+      margin-top   : -1px;
+
+      li,
+      li + li {
+        margin : 0 0 0 4px;
+      }
+
+      li {
+        border-bottom-width : 0;
+
+        &:first-child {
+          margin-left : 0;
+        }
+
+        &.kint-active-tab {
+          border-top    : @border;
+          background    : #fff;
+          font-weight   : bold;
+          padding-top   : 0;
+          border-bottom : 1px solid #fff !important;
+          margin-bottom : -1px;
+        }
+
+        &.kint-active-tab:hover {
+          border-bottom : 1px solid #fff;
+        }
+      }
+    }
+
+    > li > pre {
+      border : @border;
+    }
+  }
+
+  dt:hover + dd > ul {
+    border-color : @border-color-hover;
+  }
+
+  pre {
+    background  : #fff;
+    margin-top  : 4px;
+    margin-left : 25px;
+  }
+
+  .kint-popup-trigger:hover {
+    color : @variable-type-color-hover;
+  }
+
+  .kint-source .kint-highlight {
+    background : #cfc;
+  }
+}
+
+//
+// REPORT
+// --------------------------------------------------
+
+.kint-report {
+  td {
+    background : #fff;
+    padding    : 1px 2px !important;
+  }
+
+  td:first-child,
+  th {
+    padding : 0 2px !important;
+  }
+
+  td.kint-empty {
+    background : @border-color !important;
+  }
+
+  tr:hover > td {
+    box-shadow : none;
+    background : #cfc;
+  }
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/view/themes/main/original.less b/modules/devel/kint/kint/view/themes/main/original.less
new file mode 100644
index 0000000..e730919
--- /dev/null
+++ b/modules/devel/kint/kint/view/themes/main/original.less
@@ -0,0 +1,43 @@
+@import "../../less/main";
+
+@main-background: #e0eaef;
+@secondary-background: #c1d4df;
+
+@text-color: #1d1e1e;
+@variable-name-color: #1d1e1e;
+@variable-type-color: #0092db;
+@variable-type-color-hover: #5cb730;
+
+@border-color: #b6cedb;
+@border-color-hover: #0092db;
+
+@caret-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAA8CAMAAACO5hB7AAAACVBMVEX///82b4tctzBls0NMAAAAQklEQVR42rWRIQ4AAAgCwf8/2qgER2BeuwJsgAqIzekMfMryPL9XQSkobE6vwKcsz/N7FfPvh09lnPf/b+7673+f0uHuAZ/EdkNQAAAAAElFTkSuQmCC");
+
+.keyboard-caret() {
+  box-shadow : 0 0 3px 2px #5cb730;
+}
+
+.kint {
+  > dl > dt {
+    background : linear-gradient(to bottom, #e3ecf0 0, #c0d4df 100%);
+  }
+
+  ul.kint-tabs {
+    background : linear-gradient(to bottom, #9dbed0 0px, #b2ccda 100%);
+  }
+
+  & > dl:not(.kint-trace) > dd > ul.kint-tabs li {
+    background : @main-background;
+    &.kint-active-tab {
+      background : @secondary-background;
+    }
+  }
+
+  & > dl.kint-trace > dt {
+    background : linear-gradient(to bottom, #c0d4df 0px, #e3ecf0 100%);
+  }
+
+  .kint-source .kint-highlight {
+    background : #f0eb96;
+  }
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/view/themes/main/solarized-dark.less b/modules/devel/kint/kint/view/themes/main/solarized-dark.less
new file mode 100644
index 0000000..c6c5b70
--- /dev/null
+++ b/modules/devel/kint/kint/view/themes/main/solarized-dark.less
@@ -0,0 +1,34 @@
+@import "../../less/main";
+
+@spacing : 5;
+
+@main-background: #002b36; // base 03
+@secondary-background : #073642; // base 02
+
+@text-color: #839496; // base 0
+@variable-name-color: #93a1a1; // base 1
+@variable-type-color: #268bd2; // blue
+@variable-type-color-hover: #2aa198; // cyan
+
+@border-color: #586e75; // base 01
+@border-color-hover: #268bd2; // blue
+
+.keyboard-caret() {
+  box-shadow    : 0 0 3px 2px #859900 inset; // green
+  border-radius : 7px;
+}
+
+body {
+  background : @secondary-background;
+  color      : #fff; // for non-kint elements to remain at least semi-readable
+}
+
+.kint {
+  background : @secondary-background;
+  box-shadow : 0 0 5px 3px @secondary-background;
+
+  > dl > dt,
+  ul.kint-tabs {
+    box-shadow : 4px 0 2px -3px @variable-type-color inset;
+  }
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/view/themes/main/solarized.less b/modules/devel/kint/kint/view/themes/main/solarized.less
new file mode 100644
index 0000000..9ec8aba
--- /dev/null
+++ b/modules/devel/kint/kint/view/themes/main/solarized.less
@@ -0,0 +1,24 @@
+@import "../../less/main";
+
+@spacing : 5;
+
+@main-background: #fdf6e3; // base 3
+@secondary-background : #eee8d5; // base 2
+
+@text-color: #657b83; // base 00
+@variable-name-color: #586e75; // base 01
+@variable-type-color: #268bd2; // blue
+@variable-type-color-hover: #2aa198; // cyan
+
+@border-color: #93a1a1; // base 1
+@border-color-hover: #268bd2; // blue
+
+.keyboard-caret() {
+  box-shadow    : 0 0 3px 2px #859900 inset; // green
+  border-radius : 7px;
+}
+
+.kint > dl > dt,
+.kint ul.kint-tabs {
+  box-shadow : 4px 0 2px -3px @variable-type-color inset;
+}
\ No newline at end of file
diff --git a/modules/devel/kint/kint/view/themes/modular-window/original.less b/modules/devel/kint/kint/view/themes/modular-window/original.less
new file mode 100644
index 0000000..fac5f6a
--- /dev/null
+++ b/modules/devel/kint/kint/view/themes/modular-window/original.less
@@ -0,0 +1,15 @@
+@import "../../less/modular-window";
+
+@default-font: Consolas, "Courier New", monospace;
+@spacing : 4;
+
+@main-background: #e0eaef;
+@secondary-background: #c1d4df;
+
+@text-color: #1d1e1e;
+@variable-name-color: #1d1e1e;
+@variable-type-color: #0092db;
+@variable-type-color-hover: #5cb730;
+
+@border-color: #b6cedb;
+@border-color-hover: #0092db;
\ No newline at end of file
diff --git a/modules/devel/kint/src/Twig/KintExtension.php b/modules/devel/kint/src/Twig/KintExtension.php
new file mode 100644
index 0000000..139c517
--- /dev/null
+++ b/modules/devel/kint/src/Twig/KintExtension.php
@@ -0,0 +1,136 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\kint\Twig\KintExtension.
+ */
+
+namespace Drupal\kint\Twig;
+
+/**
+ * Provides the Kint debugging function within Twig templates.
+ */
+class KintExtension extends \Twig_Extension {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'kint';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFunctions() {
+    return array(
+      new \Twig_SimpleFunction('kint', array($this, 'kint'), array(
+        'is_safe' => array('html'),
+        'needs_environment' => TRUE,
+        'needs_context' => TRUE,
+      )),
+    );
+  }
+
+  /**
+   * Provides Kint function to Twig templates.
+   *
+   * Handles 0, 1, or multiple arguments.
+   *
+   * Code derived from https://github.com/barelon/CgKintBundle.
+   *
+   * @param Twig_Environment $env
+   *   The twig environment instance.
+   * @param array $context
+   *   An array of parameters passed to the template.
+   */
+  public function kint(\Twig_Environment $env, array $context) {
+    // Don't do anything unless twig_debug is enabled. This reads from the Twig
+    // environment, not Drupal Settings, so a container rebuild is necessary
+    // when toggling twig_debug on and off. We can consider injecting Settings.
+    if (!$env->isDebug()) {
+      return;
+    }
+    kint_require();
+    // Don't display where Kint was called from.
+    // @todo Can we add information about which template Kint was called from?
+    \Kint::$displayCalledFrom = FALSE;
+
+    $output = '';
+
+    if (func_num_args() === 2) {
+      // No arguments passed to kint(), display full Twig context.
+      $kint_variable = array();
+      foreach ($context as $key => $value) {
+        if (!$value instanceof \Twig_Template) {
+          $kint_variable[$key] = $value;
+        }
+      }
+
+      $result = @\Kint::dump($kint_variable);
+      $output = str_replace('$kint_variable', 'Twig context', $result);
+    }
+    else {
+      // Try to get the names of variables from the Twig template.
+      $trace = debug_backtrace();
+      $callee = $trace[0];
+
+      $lines = file($callee['file']);
+      $source = $lines[$callee['line'] - 1];
+
+      preg_match('/kint\((.+)\);/', $source, $matches);
+      $parameters = $matches[1];
+      $parameters = preg_replace('/\$this->getContext\(\$context, "(.+)"\)/U', "$1", $parameters);
+      $parameters = preg_replace('/\(isset\(\$context\["(.+)"\]\) \? \$context\["(.+)"\] : null\)/U', "$1", $parameters);
+      do {
+        $parameters = preg_replace('/\$this->getAttribute\((.+), "(.+)"\)/U', "$1.$2", $parameters, 1, $found);
+      } while ($found);
+
+      $parameters = explode(', ', $parameters);
+      foreach ($parameters as $index => $parameter) {
+        // Remove bad entries from the parameters array. Maybe we can avoid this
+        // by doing more with the regular expressions.
+        // This only seems to be needed for cases like:
+        // {{ my_array['#hash_index'] }}
+        if (in_array($parameter, array('array()', '"array'))) {
+          unset($parameters[$index]);
+          continue;
+        }
+        // Trim parens and quotes from the parameter strings.
+        $parameters[$index] = trim($parameter, '()"');
+      }
+
+      // Don't include $env and $context arguments in $args and $parameters.
+      $args = array_slice(func_get_args(), 2);
+      $parameters = array_slice($parameters, 2);
+
+      // If there is only one argument, pass to Kint without too much hassle.
+      if (count($args) == 1) {
+        $kint_variable = reset($args);
+        $result = @\Kint::dump($kint_variable);
+        // Replace $kint_variable with the name of the variable in the Twig
+        // template.
+        $output = str_replace('$kint_variable', reset($parameters), $result);
+      }
+      else {
+        // Build an array of variable to pass to Kint.
+        // @todo Can we just call_user_func_array while still retaining the
+        //   variable names?
+        foreach ($args as $index => $arg) {
+          // Prepend a unique index to allow debugging the same variable more
+          // than once in the same Kint dump.
+          $kint_args['_index_' . $index . '_' . $parameters[$index]] = $arg;
+        }
+
+        $result = @\Kint::dump($kint_args);
+        // Display a comma separated list of the variables contained in this group.
+        $output = str_replace('$kint_args', implode(', ', $parameters), $result);
+        // Remove unique indexes from output.
+        $output = preg_replace('/_index_([0-9]+)_/', '', $output);
+      }
+    }
+
+    return $output;
+  }
+
+}
diff --git a/modules/devel/krumo/INSTALL b/modules/devel/krumo/INSTALL
new file mode 100644
index 0000000..a9e0304
--- /dev/null
+++ b/modules/devel/krumo/INSTALL
@@ -0,0 +1,32 @@
+------------------------------------------------------------------------------
+
+                     SETUP: How to install Krumo ?
+
+------------------------------------------------------------------------------
+
+In order to use Krumo you have to put it on your (development) server, and 
+include it in your script. You can put it somewhere in the INCLUDE_PATH, or 
+specify the full path to the "class.krumo.php" file.
+
+You have to modify the "krumo.ini" file too. It is the configuration file for 
+Krumo. The first option is choosing a skin:
+
+ [skin]
+ selected = "orange"
+
+The value for this setting has to be the name of one of the sub-folders from the 
+"Krumo/skins/" folder. If the value provided for the skin results in not finding 
+the skin, the `default` skin will be used instead.
+
+The second option is used to set the correct web path to the folder where Krumo 
+is installed. This is used in order to make the images from Krumo's CSS skins 
+web-accessible.
+
+ [css]
+ url = "http://www.example.com/Krumo/"
+
+So far those two are the only configuration options.
+
+All the CSS files ("skin.css") from the "Krumo/skins/" sub-folders must have the 
+proper permissions in order to be readable from Krumo. Same applies for 
+"krumo.ini" and "krumo.js" files.
\ No newline at end of file
diff --git a/modules/devel/krumo/LICENSE b/modules/devel/krumo/LICENSE
new file mode 100644
index 0000000..f3f1b3b
--- /dev/null
+++ b/modules/devel/krumo/LICENSE
@@ -0,0 +1,504 @@
+		  GNU LESSER GENERAL PUBLIC LICENSE
+		       Version 2.1, February 1999
+
+ Copyright (C) 1991, 1999 Free Software Foundation, Inc.
+     59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ Everyone is permitted to copy and distribute verbatim copies
+ of this license document, but changing it is not allowed.
+
+[This is the first released version of the Lesser GPL.  It also counts
+ as the successor of the GNU Library Public License, version 2, hence
+ the version number 2.1.]
+
+			    Preamble
+
+  The licenses for most software are designed to take away your
+freedom to share and change it.  By contrast, the GNU General Public
+Licenses are intended to guarantee your freedom to share and change
+free software--to make sure the software is free for all its users.
+
+  This license, the Lesser General Public License, applies to some
+specially designated software packages--typically libraries--of the
+Free Software Foundation and other authors who decide to use it.  You
+can use it too, but we suggest you first think carefully about whether
+this license or the ordinary General Public License is the better
+strategy to use in any particular case, based on the explanations below.
+
+  When we speak of free software, we are referring to freedom of use,
+not price.  Our General Public Licenses are designed to make sure that
+you have the freedom to distribute copies of free software (and charge
+for this service if you wish); that you receive source code or can get
+it if you want it; that you can change the software and use pieces of
+it in new free programs; and that you are informed that you can do
+these things.
+
+  To protect your rights, we need to make restrictions that forbid
+distributors to deny you these rights or to ask you to surrender these
+rights.  These restrictions translate to certain responsibilities for
+you if you distribute copies of the library or if you modify it.
+
+  For example, if you distribute copies of the library, whether gratis
+or for a fee, you must give the recipients all the rights that we gave
+you.  You must make sure that they, too, receive or can get the source
+code.  If you link other code with the library, you must provide
+complete object files to the recipients, so that they can relink them
+with the library after making changes to the library and recompiling
+it.  And you must show them these terms so they know their rights.
+
+  We protect your rights with a two-step method: (1) we copyright the
+library, and (2) we offer you this license, which gives you legal
+permission to copy, distribute and/or modify the library.
+
+  To protect each distributor, we want to make it very clear that
+there is no warranty for the free library.  Also, if the library is
+modified by someone else and passed on, the recipients should know
+that what they have is not the original version, so that the original
+author's reputation will not be affected by problems that might be
+introduced by others.
+
+  Finally, software patents pose a constant threat to the existence of
+any free program.  We wish to make sure that a company cannot
+effectively restrict the users of a free program by obtaining a
+restrictive license from a patent holder.  Therefore, we insist that
+any patent license obtained for a version of the library must be
+consistent with the full freedom of use specified in this license.
+
+  Most GNU software, including some libraries, is covered by the
+ordinary GNU General Public License.  This license, the GNU Lesser
+General Public License, applies to certain designated libraries, and
+is quite different from the ordinary General Public License.  We use
+this license for certain libraries in order to permit linking those
+libraries into non-free programs.
+
+  When a program is linked with a library, whether statically or using
+a shared library, the combination of the two is legally speaking a
+combined work, a derivative of the original library.  The ordinary
+General Public License therefore permits such linking only if the
+entire combination fits its criteria of freedom.  The Lesser General
+Public License permits more lax criteria for linking other code with
+the library.
+
+  We call this license the "Lesser" General Public License because it
+does Less to protect the user's freedom than the ordinary General
+Public License.  It also provides other free software developers Less
+of an advantage over competing non-free programs.  These disadvantages
+are the reason we use the ordinary General Public License for many
+libraries.  However, the Lesser license provides advantages in certain
+special circumstances.
+
+  For example, on rare occasions, there may be a special need to
+encourage the widest possible use of a certain library, so that it becomes
+a de-facto standard.  To achieve this, non-free programs must be
+allowed to use the library.  A more frequent case is that a free
+library does the same job as widely used non-free libraries.  In this
+case, there is little to gain by limiting the free library to free
+software only, so we use the Lesser General Public License.
+
+  In other cases, permission to use a particular library in non-free
+programs enables a greater number of people to use a large body of
+free software.  For example, permission to use the GNU C Library in
+non-free programs enables many more people to use the whole GNU
+operating system, as well as its variant, the GNU/Linux operating
+system.
+
+  Although the Lesser General Public License is Less protective of the
+users' freedom, it does ensure that the user of a program that is
+linked with the Library has the freedom and the wherewithal to run
+that program using a modified version of the Library.
+
+  The precise terms and conditions for copying, distribution and
+modification follow.  Pay close attention to the difference between a
+"work based on the library" and a "work that uses the library".  The
+former contains code derived from the library, whereas the latter must
+be combined with the library in order to run.
+
+		  GNU LESSER GENERAL PUBLIC LICENSE
+   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
+
+  0. This License Agreement applies to any software library or other
+program which contains a notice placed by the copyright holder or
+other authorized party saying it may be distributed under the terms of
+this Lesser General Public License (also called "this License").
+Each licensee is addressed as "you".
+
+  A "library" means a collection of software functions and/or data
+prepared so as to be conveniently linked with application programs
+(which use some of those functions and data) to form executables.
+
+  The "Library", below, refers to any such software library or work
+which has been distributed under these terms.  A "work based on the
+Library" means either the Library or any derivative work under
+copyright law: that is to say, a work containing the Library or a
+portion of it, either verbatim or with modifications and/or translated
+straightforwardly into another language.  (Hereinafter, translation is
+included without limitation in the term "modification".)
+
+  "Source code" for a work means the preferred form of the work for
+making modifications to it.  For a library, complete source code means
+all the source code for all modules it contains, plus any associated
+interface definition files, plus the scripts used to control compilation
+and installation of the library.
+
+  Activities other than copying, distribution and modification are not
+covered by this License; they are outside its scope.  The act of
+running a program using the Library is not restricted, and output from
+such a program is covered only if its contents constitute a work based
+on the Library (independent of the use of the Library in a tool for
+writing it).  Whether that is true depends on what the Library does
+and what the program that uses the Library does.
+  
+  1. You may copy and distribute verbatim copies of the Library's
+complete source code as you receive it, in any medium, provided that
+you conspicuously and appropriately publish on each copy an
+appropriate copyright notice and disclaimer of warranty; keep intact
+all the notices that refer to this License and to the absence of any
+warranty; and distribute a copy of this License along with the
+Library.
+
+  You may charge a fee for the physical act of transferring a copy,
+and you may at your option offer warranty protection in exchange for a
+fee.
+
+  2. You may modify your copy or copies of the Library or any portion
+of it, thus forming a work based on the Library, and copy and
+distribute such modifications or work under the terms of Section 1
+above, provided that you also meet all of these conditions:
+
+    a) The modified work must itself be a software library.
+
+    b) You must cause the files modified to carry prominent notices
+    stating that you changed the files and the date of any change.
+
+    c) You must cause the whole of the work to be licensed at no
+    charge to all third parties under the terms of this License.
+
+    d) If a facility in the modified Library refers to a function or a
+    table of data to be supplied by an application program that uses
+    the facility, other than as an argument passed when the facility
+    is invoked, then you must make a good faith effort to ensure that,
+    in the event an application does not supply such function or
+    table, the facility still operates, and performs whatever part of
+    its purpose remains meaningful.
+
+    (For example, a function in a library to compute square roots has
+    a purpose that is entirely well-defined independent of the
+    application.  Therefore, Subsection 2d requires that any
+    application-supplied function or table used by this function must
+    be optional: if the application does not supply it, the square
+    root function must still compute square roots.)
+
+These requirements apply to the modified work as a whole.  If
+identifiable sections of that work are not derived from the Library,
+and can be reasonably considered independent and separate works in
+themselves, then this License, and its terms, do not apply to those
+sections when you distribute them as separate works.  But when you
+distribute the same sections as part of a whole which is a work based
+on the Library, the distribution of the whole must be on the terms of
+this License, whose permissions for other licensees extend to the
+entire whole, and thus to each and every part regardless of who wrote
+it.
+
+Thus, it is not the intent of this section to claim rights or contest
+your rights to work written entirely by you; rather, the intent is to
+exercise the right to control the distribution of derivative or
+collective works based on the Library.
+
+In addition, mere aggregation of another work not based on the Library
+with the Library (or with a work based on the Library) on a volume of
+a storage or distribution medium does not bring the other work under
+the scope of this License.
+
+  3. You may opt to apply the terms of the ordinary GNU General Public
+License instead of this License to a given copy of the Library.  To do
+this, you must alter all the notices that refer to this License, so
+that they refer to the ordinary GNU General Public License, version 2,
+instead of to this License.  (If a newer version than version 2 of the
+ordinary GNU General Public License has appeared, then you can specify
+that version instead if you wish.)  Do not make any other change in
+these notices.
+
+  Once this change is made in a given copy, it is irreversible for
+that copy, so the ordinary GNU General Public License applies to all
+subsequent copies and derivative works made from that copy.
+
+  This option is useful when you wish to copy part of the code of
+the Library into a program that is not a library.
+
+  4. You may copy and distribute the Library (or a portion or
+derivative of it, under Section 2) in object code or executable form
+under the terms of Sections 1 and 2 above provided that you accompany
+it with the complete corresponding machine-readable source code, which
+must be distributed under the terms of Sections 1 and 2 above on a
+medium customarily used for software interchange.
+
+  If distribution of object code is made by offering access to copy
+from a designated place, then offering equivalent access to copy the
+source code from the same place satisfies the requirement to
+distribute the source code, even though third parties are not
+compelled to copy the source along with the object code.
+
+  5. A program that contains no derivative of any portion of the
+Library, but is designed to work with the Library by being compiled or
+linked with it, is called a "work that uses the Library".  Such a
+work, in isolation, is not a derivative work of the Library, and
+therefore falls outside the scope of this License.
+
+  However, linking a "work that uses the Library" with the Library
+creates an executable that is a derivative of the Library (because it
+contains portions of the Library), rather than a "work that uses the
+library".  The executable is therefore covered by this License.
+Section 6 states terms for distribution of such executables.
+
+  When a "work that uses the Library" uses material from a header file
+that is part of the Library, the object code for the work may be a
+derivative work of the Library even though the source code is not.
+Whether this is true is especially significant if the work can be
+linked without the Library, or if the work is itself a library.  The
+threshold for this to be true is not precisely defined by law.
+
+  If such an object file uses only numerical parameters, data
+structure layouts and accessors, and small macros and small inline
+functions (ten lines or less in length), then the use of the object
+file is unrestricted, regardless of whether it is legally a derivative
+work.  (Executables containing this object code plus portions of the
+Library will still fall under Section 6.)
+
+  Otherwise, if the work is a derivative of the Library, you may
+distribute the object code for the work under the terms of Section 6.
+Any executables containing that work also fall under Section 6,
+whether or not they are linked directly with the Library itself.
+
+  6. As an exception to the Sections above, you may also combine or
+link a "work that uses the Library" with the Library to produce a
+work containing portions of the Library, and distribute that work
+under terms of your choice, provided that the terms permit
+modification of the work for the customer's own use and reverse
+engineering for debugging such modifications.
+
+  You must give prominent notice with each copy of the work that the
+Library is used in it and that the Library and its use are covered by
+this License.  You must supply a copy of this License.  If the work
+during execution displays copyright notices, you must include the
+copyright notice for the Library among them, as well as a reference
+directing the user to the copy of this License.  Also, you must do one
+of these things:
+
+    a) Accompany the work with the complete corresponding
+    machine-readable source code for the Library including whatever
+    changes were used in the work (which must be distributed under
+    Sections 1 and 2 above); and, if the work is an executable linked
+    with the Library, with the complete machine-readable "work that
+    uses the Library", as object code and/or source code, so that the
+    user can modify the Library and then relink to produce a modified
+    executable containing the modified Library.  (It is understood
+    that the user who changes the contents of definitions files in the
+    Library will not necessarily be able to recompile the application
+    to use the modified definitions.)
+
+    b) Use a suitable shared library mechanism for linking with the
+    Library.  A suitable mechanism is one that (1) uses at run time a
+    copy of the library already present on the user's computer system,
+    rather than copying library functions into the executable, and (2)
+    will operate properly with a modified version of the library, if
+    the user installs one, as long as the modified version is
+    interface-compatible with the version that the work was made with.
+
+    c) Accompany the work with a written offer, valid for at
+    least three years, to give the same user the materials
+    specified in Subsection 6a, above, for a charge no more
+    than the cost of performing this distribution.
+
+    d) If distribution of the work is made by offering access to copy
+    from a designated place, offer equivalent access to copy the above
+    specified materials from the same place.
+
+    e) Verify that the user has already received a copy of these
+    materials or that you have already sent this user a copy.
+
+  For an executable, the required form of the "work that uses the
+Library" must include any data and utility programs needed for
+reproducing the executable from it.  However, as a special exception,
+the materials to be distributed need not include anything that is
+normally distributed (in either source or binary form) with the major
+components (compiler, kernel, and so on) of the operating system on
+which the executable runs, unless that component itself accompanies
+the executable.
+
+  It may happen that this requirement contradicts the license
+restrictions of other proprietary libraries that do not normally
+accompany the operating system.  Such a contradiction means you cannot
+use both them and the Library together in an executable that you
+distribute.
+
+  7. You may place library facilities that are a work based on the
+Library side-by-side in a single library together with other library
+facilities not covered by this License, and distribute such a combined
+library, provided that the separate distribution of the work based on
+the Library and of the other library facilities is otherwise
+permitted, and provided that you do these two things:
+
+    a) Accompany the combined library with a copy of the same work
+    based on the Library, uncombined with any other library
+    facilities.  This must be distributed under the terms of the
+    Sections above.
+
+    b) Give prominent notice with the combined library of the fact
+    that part of it is a work based on the Library, and explaining
+    where to find the accompanying uncombined form of the same work.
+
+  8. You may not copy, modify, sublicense, link with, or distribute
+the Library except as expressly provided under this License.  Any
+attempt otherwise to copy, modify, sublicense, link with, or
+distribute the Library is void, and will automatically terminate your
+rights under this License.  However, parties who have received copies,
+or rights, from you under this License will not have their licenses
+terminated so long as such parties remain in full compliance.
+
+  9. You are not required to accept this License, since you have not
+signed it.  However, nothing else grants you permission to modify or
+distribute the Library or its derivative works.  These actions are
+prohibited by law if you do not accept this License.  Therefore, by
+modifying or distributing the Library (or any work based on the
+Library), you indicate your acceptance of this License to do so, and
+all its terms and conditions for copying, distributing or modifying
+the Library or works based on it.
+
+  10. Each time you redistribute the Library (or any work based on the
+Library), the recipient automatically receives a license from the
+original licensor to copy, distribute, link with or modify the Library
+subject to these terms and conditions.  You may not impose any further
+restrictions on the recipients' exercise of the rights granted herein.
+You are not responsible for enforcing compliance by third parties with
+this License.
+
+  11. If, as a consequence of a court judgment or allegation of patent
+infringement or for any other reason (not limited to patent issues),
+conditions are imposed on you (whether by court order, agreement or
+otherwise) that contradict the conditions of this License, they do not
+excuse you from the conditions of this License.  If you cannot
+distribute so as to satisfy simultaneously your obligations under this
+License and any other pertinent obligations, then as a consequence you
+may not distribute the Library at all.  For example, if a patent
+license would not permit royalty-free redistribution of the Library by
+all those who receive copies directly or indirectly through you, then
+the only way you could satisfy both it and this License would be to
+refrain entirely from distribution of the Library.
+
+If any portion of this section is held invalid or unenforceable under any
+particular circumstance, the balance of the section is intended to apply,
+and the section as a whole is intended to apply in other circumstances.
+
+It is not the purpose of this section to induce you to infringe any
+patents or other property right claims or to contest validity of any
+such claims; this section has the sole purpose of protecting the
+integrity of the free software distribution system which is
+implemented by public license practices.  Many people have made
+generous contributions to the wide range of software distributed
+through that system in reliance on consistent application of that
+system; it is up to the author/donor to decide if he or she is willing
+to distribute software through any other system and a licensee cannot
+impose that choice.
+
+This section is intended to make thoroughly clear what is believed to
+be a consequence of the rest of this License.
+
+  12. If the distribution and/or use of the Library is restricted in
+certain countries either by patents or by copyrighted interfaces, the
+original copyright holder who places the Library under this License may add
+an explicit geographical distribution limitation excluding those countries,
+so that distribution is permitted only in or among countries not thus
+excluded.  In such case, this License incorporates the limitation as if
+written in the body of this License.
+
+  13. The Free Software Foundation may publish revised and/or new
+versions of the Lesser General Public License from time to time.
+Such new versions will be similar in spirit to the present version,
+but may differ in detail to address new problems or concerns.
+
+Each version is given a distinguishing version number.  If the Library
+specifies a version number of this License which applies to it and
+"any later version", you have the option of following the terms and
+conditions either of that version or of any later version published by
+the Free Software Foundation.  If the Library does not specify a
+license version number, you may choose any version ever published by
+the Free Software Foundation.
+
+  14. If you wish to incorporate parts of the Library into other free
+programs whose distribution conditions are incompatible with these,
+write to the author to ask for permission.  For software which is
+copyrighted by the Free Software Foundation, write to the Free
+Software Foundation; we sometimes make exceptions for this.  Our
+decision will be guided by the two goals of preserving the free status
+of all derivatives of our free software and of promoting the sharing
+and reuse of software generally.
+
+			    NO WARRANTY
+
+  15. BECAUSE THE LIBRARY IS LICENSED FREE OF CHARGE, THERE IS NO
+WARRANTY FOR THE LIBRARY, TO THE EXTENT PERMITTED BY APPLICABLE LAW.
+EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR
+OTHER PARTIES PROVIDE THE LIBRARY "AS IS" WITHOUT WARRANTY OF ANY
+KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE
+IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
+PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE
+LIBRARY IS WITH YOU.  SHOULD THE LIBRARY PROVE DEFECTIVE, YOU ASSUME
+THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.
+
+  16. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN
+WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY
+AND/OR REDISTRIBUTE THE LIBRARY AS PERMITTED ABOVE, BE LIABLE TO YOU
+FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR
+CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE
+LIBRARY (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING
+RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A
+FAILURE OF THE LIBRARY TO OPERATE WITH ANY OTHER SOFTWARE), EVEN IF
+SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
+DAMAGES.
+
+		     END OF TERMS AND CONDITIONS
+
+           How to Apply These Terms to Your New Libraries
+
+  If you develop a new library, and you want it to be of the greatest
+possible use to the public, we recommend making it free software that
+everyone can redistribute and change.  You can do so by permitting
+redistribution under these terms (or, alternatively, under the terms of the
+ordinary General Public License).
+
+  To apply these terms, attach the following notices to the library.  It is
+safest to attach them to the start of each source file to most effectively
+convey the exclusion of warranty; and each file should have at least the
+"copyright" line and a pointer to where the full notice is found.
+
+    <one line to give the library's name and a brief idea of what it does.>
+    Copyright (C) <year>  <name of author>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Lesser General Public
+    License as published by the Free Software Foundation; either
+    version 2.1 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Lesser General Public License for more details.
+
+    You should have received a copy of the GNU Lesser General Public
+    License along with this library; if not, write to the Free Software
+    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+
+Also add information on how to contact you by electronic and paper mail.
+
+You should also get your employer (if you work as a programmer) or your
+school, if any, to sign a "copyright disclaimer" for the library, if
+necessary.  Here is a sample; alter the names:
+
+  Yoyodyne, Inc., hereby disclaims all copyright interest in the
+  library `Frob' (a library for tweaking knobs) written by James Random Hacker.
+
+  <signature of Ty Coon>, 1 April 1990
+  Ty Coon, President of Vice
+
+That's all there is to it!
+
+
diff --git a/modules/devel/krumo/README b/modules/devel/krumo/README
new file mode 100644
index 0000000..99513ea
--- /dev/null
+++ b/modules/devel/krumo/README
@@ -0,0 +1,103 @@
+=============================================================================
+
+                               Krumo
+                            version 0.2.1a
+
+=============================================================================
+
+You probably got this package from...
+http://www.sourceforge.net/projects/krumo/
+
+If there is no licence agreement with this package please download
+a version from the location above. You must read and accept that
+licence to use this software. The file is titled simply LICENSE.
+
+OVERVIEW
+------------------------------------------------------------------------------
+To put it simply, Krumo is a replacement for print_r() and var_dump(). By 
+definition Krumo is a debugging tool (for PHP5), which displays structured 
+information about any PHP variable.
+
+A lot of developers use print_r() and var_dump() in the means of debugging 
+tools. Although they were intended to present human readble information about a 
+variable, we can all agree that in general they are not. Krumo is an 
+alternative: it does the same job, but it presents the information beautified 
+using CSS and DHTML. 
+
+EXAMPLES
+------------------------------------------------------------------------------
+Here's a basic example, which will return a report on the array variable passed 
+as argument to it:
+
+ krumo(array('a1'=> 'A1', 3, 'red'));
+
+You can dump simultaneously more then one variable - here's another example:
+
+ krumo($_SERVER, $_REQUEST);
+
+You probably saw from the examples above that some of the nodes are expandable, 
+so if you want to inspect the nested information, click on them and they will 
+expand; if you do not need that information shown simply click again on it to 
+collapse it. Here's an example to test this:
+
+ $x1->x2->x3->x4->x5->x6->x7->x8->x9 = 'X10';
+ krumo($x1);
+
+The krumo() is the only standalone function from the package, and this is 
+because basic dumps about variables (like print_r() or var_dump()) are the most 
+common tasks such functionality is used for. The rest of the functionality can 
+be called using static calls to the Krumo class. Here are several more examples:
+
+ // print a debug backgrace
+ krumo::backtrace();
+
+ // print all the included(or required) files
+ krumo::includes();
+ 
+ // print all the included functions
+ krumo::functions();
+ 
+ // print all the declared classes
+ krumo::classes();
+ 
+ // print all the defined constants
+ krumo::defines();
+
+ ... and so on, etc.
+
+A full PHPDocumenter API documentation exists both in this package and at the 
+project's website.
+
+INSTALL
+------------------------------------------------------------------------------
+Read the INSTALL file.
+
+DOCUMENTATION
+------------------------------------------------------------------------------
+As I said, a full PHPDocumenter API documentation can be found both in this
+package and at the project's website.
+
+SKINS
+------------------------------------------------------------------------------
+There are several skins pre-installed with this package, but if you wish you can 
+create skins of your own. The skins are simply CSS files that are prepended to 
+the result that Krumo prints. If you want to use images in your CSS (for 
+background, list-style, etc), you have to put "%URL%" in front of the image URL 
+in order hook it up to the skin folder and make the image web-accessible.
+
+Here's an example:
+
+ ul.krumo-first {background: url(%url%bg.gif);}
+
+TODO
+------------------------------------------------------------------------------
+You can find the list of stuff that is going to be added to this project in the 
+TODO file from this very package.
+
+CONTRIBUTION
+-----------------------------------------------------------------------------
+If you download and use and possibly even extend this tool, please let us know. 
+Any feedback, even bad, is always welcome and your suggestions are going to be 
+considered for our next release. Please use our SourceForge page for that:
+ 
+ http://www.sourceforge.net/projects/krumo/
diff --git a/modules/devel/krumo/TODO b/modules/devel/krumo/TODO
new file mode 100644
index 0000000..cb166bd
--- /dev/null
+++ b/modules/devel/krumo/TODO
@@ -0,0 +1,24 @@
+******************************************************************************
+
+                                 Krumo: TODO
+
+******************************************************************************
+
+BUGS
+----------------
+ - watch the SourceForge.net Bug Tracker
+
+Features: PHP
+----------------
+ - Try to detect anonymous (lambda) functions
+ - Try to detect whether an array is indexed or associated
+ - Add var_export support for arrays and objects
+ - Add JSON support for arrays and objects
+ 
+Features: GUI
+----------------
+ - Nicer and friendlier skin(s)
+ - Add top-level links for collapsing and expanding the whole tree
+ - Add object & array -level links for collapsing and expanding all the
+ 	nested nodes
+ - Print all parent classes for the rendered objects
\ No newline at end of file
diff --git a/modules/devel/krumo/VERSION b/modules/devel/krumo/VERSION
new file mode 100644
index 0000000..8d94012
--- /dev/null
+++ b/modules/devel/krumo/VERSION
@@ -0,0 +1 @@
+0.2.1a
\ No newline at end of file
diff --git a/modules/devel/krumo/class.krumo.php b/modules/devel/krumo/class.krumo.php
new file mode 100644
index 0000000..ce2d39b
--- /dev/null
+++ b/modules/devel/krumo/class.krumo.php
@@ -0,0 +1,1316 @@
+<?php
+/**
+* Krumo: Structured information display solution
+*
+* Krumo is a debugging tool (PHP5 only), which displays structured information
+* about any PHP variable. It is a nice replacement for print_r() or var_dump()
+* which are used by a lot of PHP developers.
+*
+* @author Kaloyan K. Tsvetkov <kaloyan@kaloyan.info>
+* @license http://opensource.org/licenses/lgpl-license.php GNU Lesser General Public License Version 2.1
+*
+* @package Krumo
+*/
+
+//////////////////////////////////////////////////////////////////////////////
+
+/**
+* backward compatibility: the DIR_SEP constant isn't used anymore
+*/
+if(!defined('DIR_SEP')) {
+  define('DIR_SEP', DIRECTORY_SEPARATOR);
+  }
+/**
+* backward compatibility: the PATH_SEPARATOR constant is availble since 4.3.0RC2
+*/
+if (!defined('PATH_SEPARATOR')) {
+  define('PATH_SEPARATOR', OS_WINDOWS ? ';' : ':');
+  }
+
+// -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+/**
+* Set the KRUMO_DIR constant up with the absolute path to Krumo files. If it is
+* not defined, include_path will be used. Set KRUMO_DIR only if any other module
+* or application has not already set it up.
+*/
+if (!defined('KRUMO_DIR')) {
+  define('KRUMO_DIR', dirname(__FILE__) . DIRECTORY_SEPARATOR);
+  }
+
+/**
+* This constant sets the maximum strings of strings that will be shown
+* as they are. Longer strings will be truncated with this length, and
+* their `full form` will be shown in a child node.
+*/
+if (!defined('KRUMO_TRUNCATE_LENGTH')) {
+  define('KRUMO_TRUNCATE_LENGTH', 50);
+  }
+
+//////////////////////////////////////////////////////////////////////////////
+
+/**
+* Krumo API
+*
+* This class stores the Krumo API for rendering and
+* displaying the structured information it is reporting
+*
+* @package Krumo
+*/
+Class krumo {
+
+  /**
+  * Return Krumo version
+  *
+  * @return string
+  * @access public
+  * @static
+  */
+  Public Static Function version() {
+    return '0.2.1a';
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Prints a debug backtrace
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function backtrace() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // render it
+    //
+    return krumo::dump(debug_backtrace());
+    }
+
+  /**
+  * Prints a list of all currently declared classes.
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function classes() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of all currently declared classes.
+</div>
+    <?php
+    return krumo::dump(get_declared_classes());
+    }
+
+  /**
+  * Prints a list of all currently declared interfaces (PHP5 only).
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function interfaces() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of all currently declared interfaces.
+</div>
+    <?php
+    return krumo::dump(get_declared_interfaces());
+    }
+
+  /**
+  * Prints a list of all currently included (or required) files.
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function includes() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of all currently included (or required) files.
+</div>
+    <?php
+    return krumo::dump(get_included_files());
+    }
+
+  /**
+  * Prints a list of all currently declared functions.
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function functions() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of all currently declared functions.
+</div>
+    <?php
+    return krumo::dump(get_defined_functions());
+    }
+
+  /**
+  * Prints a list of all currently declared constants.
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function defines() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of all currently declared constants (defines).
+</div>
+    <?php
+    return krumo::dump(get_defined_constants());
+    }
+
+  /**
+  * Prints a list of all currently loaded PHP extensions.
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function extensions() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of all currently loaded PHP extensions.
+</div>
+    <?php
+    return krumo::dump(get_loaded_extensions());
+    }
+
+  /**
+  * Prints a list of all HTTP request headers.
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function headers() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of all HTTP request headers.
+</div>
+    <?php
+    return krumo::dump(getAllHeaders());
+    }
+
+  /**
+  * Prints a list of the configuration settings read from <i>php.ini</i>
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function phpini() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    if (!readable(get_cfg_var('cfg_file_path'))) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of the configuration settings read from <code><b><?php echo get_cfg_var('cfg_file_path');?></b></code>.
+</div>
+    <?php
+    return krumo::dump(parse_ini_file(get_cfg_var('cfg_file_path'), true));
+    }
+
+  /**
+  * Prints a list of all your configuration settings.
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function conf() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of all your configuration settings.
+</div>
+    <?php
+    return krumo::dump(ini_get_all());
+    }
+
+  /**
+  * Prints a list of the specified directories under your <i>include_path</i> option.
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function path() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of the specified directories under your <code><b>include_path</b></code> option.
+</div>
+    <?php
+    return krumo::dump(explode(PATH_SEPARATOR, ini_get('include_path')));
+    }
+
+  /**
+  * Prints a list of all the values from the <i>$_REQUEST</i> array.
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function request() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of all the values from the <code><b>$_REQUEST</b></code> array.
+</div>
+    <?php
+    return krumo::dump($_REQUEST);
+    }
+
+  /**
+  * Prints a list of all the values from the <i>$_GET</i> array.
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function get() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of all the values from the <code><b>$_GET</b></code> array.
+</div>
+    <?php
+    return krumo::dump($_GET);
+    }
+
+  /**
+  * Prints a list of all the values from the <i>$_POST</i> array.
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function post() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of all the values from the <code><b>$_POST</b></code> array.
+</div>
+    <?php
+    return krumo::dump($_POST);
+    }
+
+  /**
+  * Prints a list of all the values from the <i>$_SERVER</i> array.
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function server() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of all the values from the <code><b>$_SERVER</b></code> array.
+</div>
+    <?php
+    return krumo::dump($_SERVER);
+    }
+
+  /**
+  * Prints a list of all the values from the <i>$_COOKIE</i> array.
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function cookie() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of all the values from the <code><b>$_COOKIE</b></code> array.
+</div>
+    <?php
+    return krumo::dump($_COOKIE);
+    }
+
+  /**
+  * Prints a list of all the values from the <i>$_ENV</i> array.
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function env() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of all the values from the <code><b>$_ENV</b></code> array.
+</div>
+    <?php
+    return krumo::dump($_ENV);
+    }
+
+  /**
+  * Prints a list of all the values from the <i>$_SESSION</i> array.
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function session() {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of all the values from the <code><b>$_SESSION</b></code> array.
+</div>
+    <?php
+    return krumo::dump($_SESSION);
+    }
+
+  /**
+  * Prints a list of all the values from an INI file.
+  *
+  * @param string $ini_file
+  *
+  * @access public
+  * @static
+  */
+  Public Static Function ini($ini_file) {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // read it
+    //
+    if (!$_ = @parse_ini_file($ini_file, 1)) {
+      return false;
+      }
+
+    // render it
+    //
+    ?>
+<div class="krumo-title">
+This is a list of all the values from the <code><b><?php echo realpath($ini_file) ? realpath($ini_file) : $ini_file;?></b></code> INI file.
+</div>
+    <?php
+    return krumo::dump($_);
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Dump information about a variable
+  *
+  * @param mixed $data,...
+  * @access public
+  * @static
+  */
+  Public Static Function dump($data) {
+
+    // disabled ?
+    //
+    if (!krumo::_debug()) {
+      return false;
+      }
+
+    // more arguments ?
+    //
+    if (func_num_args() > 1) {
+      $_ = func_get_args();
+      foreach($_ as $d) {
+        krumo::dump($d);
+        }
+      return;
+      }
+
+    // the css ?
+    //
+    krumo::_css();
+
+    // find caller
+    // DEVEL: we added array_reverse() so the proper file+line number is found.
+    $_ = array_reverse(debug_backtrace());
+    while($d = array_pop($_)) {
+      // DEVEL: changed if() condition below
+      if ((strpos(@$d['file'], 'devel') === FALSE) && (strpos(@$d['file'], 'krumo') === FALSE) && @$d['class'] != 'krumo') {
+        break;
+        }
+      }
+
+    // the content
+    // DEVEL: we add an ltr here.
+    ?>
+<div class="krumo-root" dir="ltr">
+  <ul class="krumo-node krumo-first">
+    <?php echo krumo::_dump($data);?>
+    <li class="krumo-footnote">
+      <div class="krumo-version" style="white-space:nowrap;">
+        <h6>Krumo version <?php echo krumo::version();?></h6> | <a
+          href="http://krumo.sourceforge.net"
+          target="_blank">http://krumo.sourceforge.net</a>
+      </div>
+
+    <?php if (@$d['file']) { ?>
+    <span class="krumo-call" style="white-space:nowrap;">
+      Called from <code><?php echo $d['file']?></code>,
+        line <code><?php echo $d['line']?></code></span>
+    <?php } ?>
+    &nbsp;
+    </li>
+  </ul>
+</div>
+<?php
+    // flee the hive
+    //
+    $_recursion_marker = krumo::_marker();
+    if ($hive =& krumo::_hive($dummy)) {
+      foreach($hive as $i=>$bee){
+        if (is_object($bee)) {
+          unset($hive[$i]->$_recursion_marker);
+          // DEVEL: changed 'else' to 'elseif' below
+          } elseif (is_array($bee)) {
+          unset($hive[$i][$_recursion_marker]);
+          }
+        }
+      }
+
+    // PHP 4.x.x array reference bug...
+    //
+    if (is_array($data) && version_compare(PHP_VERSION, "5", "<")) {
+      unset($GLOBALS[krumo::_marker()]);
+      }
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Returns values from Krumo's configuration
+  *
+  * @param string $group
+  * @param string $name
+  * @param mixed $fallback
+  * @return mixed
+  *
+  * @access private
+  * @static
+  */
+  Private Static Function _config($group, $name, $fallback=null) {
+
+    static $_config = array();
+
+    // not loaded ?
+    //
+    if (empty($_config)) {
+      $_config = (array) @parse_ini_file(
+        KRUMO_DIR . 'krumo.ini',
+        true);
+      }
+
+    // exists ?
+    //
+    return (isset($_config[$group][$name]))
+      ? $_config[$group][$name]
+      : $fallback;
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Print the skin (CSS)
+  *
+  * @return boolean
+  * @access private
+  * @static
+  */
+  Private Static Function _css() {
+
+    static $_css = false;
+
+    // already set ?
+    //
+    if ($_css) {
+      return true;
+      }
+
+    $css = '';
+    // DEVEL: changed for Drupal variables system
+    $skin = \Drupal::config('devel.settings')->get('krumo_skin');
+
+    // custom selected skin ?
+    //
+    $_ = KRUMO_DIR . "skins/{$skin}/skin.css";
+    if ($fp = @fopen($_, 'r', 1)) {
+      $css = fread($fp, filesize($_));
+      fclose($fp);
+      }
+
+    // defautl skin ?
+    //
+    if (!$css && ($skin != 'default')) {
+      $skin = 'default';
+      $_ = KRUMO_DIR . "skins/default/skin.css";
+      $css = join('', @file($_));
+      }
+
+    // print ?
+    //
+    if ($_css = $css != '') {
+
+      // fix the urls
+      //
+      // DEVEL: changed for Drupal path system.
+      $css_url = file_create_url(drupal_get_path('module', 'devel') . "/krumo/skins/{$skin}/");
+
+      $css = preg_replace('~%url%~Uis', $css_url, $css);
+
+      // the CSS
+      //
+      ?>
+<!-- Using Krumo Skin: <?php echo preg_replace('~^' . preg_quote(realpath(KRUMO_DIR) . DIRECTORY_SEPARATOR) . '~Uis', '', realpath($_));?> -->
+<style type="text/css">
+<!--/**/
+<?php echo $css?>
+
+/**/-->
+</style>
+<?php
+      // the JS
+      //
+      ?>
+<script type="text/javascript">
+<!--//
+<?php echo join(file(KRUMO_DIR . "krumo.js"));?>
+
+//-->
+</script>
+<?php
+      }
+
+    return $_css;
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Enable Krumo
+  *
+  * @return boolean
+  * @access public
+  * @static
+  */
+  Public Static Function enable() {
+    return true === krumo::_debug(true);
+    }
+
+  /**
+  * Disable Krumo
+  *
+  * @return boolean
+  * @access public
+  * @static
+  */
+  Public Static Function disable() {
+    return false === krumo::_debug(false);
+    }
+
+  /**
+  * Get\Set Krumo state: whether it is enabled or disabled
+  *
+  * @param boolean $state
+  * @return boolean
+  * @access private
+  * @static
+  */
+  Private Static Function _debug($state=null) {
+
+    static $_ = true;
+
+    // set
+    //
+    if (isset($state)) {
+      $_ = (boolean) $state;
+      }
+
+    // get
+    //
+    return $_;
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Dump information about a variable
+  *
+  * @param mixed $data
+  * @param string $name
+  * @access private
+  * @static
+  */
+  Private Static Function _dump(&$data, $name='...') {
+
+    // object ?
+    //
+    if (is_object($data)) {
+      return krumo::_object($data, $name);
+      }
+
+    // array ?
+    //
+    if (is_array($data)) {
+
+      // PHP 4.x.x array reference bug...
+      //
+      if (version_compare(PHP_VERSION, "5", "<")) {
+
+        // prepare the GLOBAL reference list...
+        //
+        if (!isset($GLOBALS[krumo::_marker()])) {
+          $GLOBALS[krumo::_marker()] = array();
+          }
+        if (!is_array($GLOBALS[krumo::_marker()])) {
+          $GLOBALS[krumo::_marker()] = (array) $GLOBALS[krumo::_marker()];
+          }
+
+        // extract ?
+        //
+        if (!empty($GLOBALS[krumo::_marker()])) {
+          $d = array_shift($GLOBALS[krumo::_marker()]);
+          if (is_array($d)) {
+            $data = $d;
+            }
+          }
+        }
+
+      return krumo::_array($data, $name);
+      }
+
+    // resource ?
+    //
+    if (is_resource($data)) {
+      return krumo::_resource($data, $name);
+      }
+
+    // scalar ?
+    //
+    if (is_string($data)) {
+      return krumo::_string($data, $name);
+      }
+
+    if (is_float($data)) {
+      return krumo::_float($data, $name);
+      }
+
+    if (is_integer($data)) {
+      return krumo::_integer($data, $name);
+      }
+
+    if (is_bool($data)) {
+      return krumo::_boolean($data, $name);
+      }
+
+    // null ?
+    //
+    if (is_null($data)) {
+      return krumo::_null($name);
+      }
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Render a dump for a NULL value
+  *
+  * @param string $name
+  * @return string
+  * @access private
+  * @static
+  */
+  Private Static Function _null($name) {
+?>
+<li class="krumo-child">
+  <div class="krumo-element"
+    onMouseOver="krumo.over(this);"
+    onMouseOut="krumo.out(this);">
+
+      <?php /* DEVEL: added htmlSpecialChars */ ?>
+      <a class="krumo-name"><?php echo htmlSpecialChars($name);?></a>
+      (<em class="krumo-type krumo-null">NULL</em>)
+  </div>
+</li>
+<?php
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Return the marked used to stain arrays
+  * and objects in order to detect recursions
+  *
+  * @return string
+  * @access private
+  * @static
+  */
+  Private Static Function _marker() {
+
+    static $_recursion_marker;
+    if (!isset($_recursion_marker)) {
+      $_recursion_marker = uniqid('krumo');
+      }
+
+    return $_recursion_marker;
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Adds a variable to the hive of arrays and objects which
+  * are tracked for whether they have recursive entries
+  *
+  * @param mixed &$bee either array or object, not a scallar vale
+  * @return array all the bees
+  *
+  * @access private
+  * @static
+  */
+  Private Static Function &_hive(&$bee) {
+
+    static $_ = array();
+
+    // new bee ?
+    //
+    if (!is_null($bee)) {
+
+      // stain it
+      //
+      $_recursion_marker = krumo::_marker();
+      (is_object($bee))
+        ? @($bee->$_recursion_marker++)
+        : @($bee[$_recursion_marker]++);
+
+      $_[0][] =& $bee;
+      }
+
+    // return all bees
+    //
+    return $_[0];
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Render a dump for the properties of an array or objeect
+  *
+  * @param mixed &$data
+  * @access private
+  * @static
+  */
+  Private Static Function _vars(&$data) {
+
+    $_is_object = is_object($data);
+
+    // test for references in order to
+    // prevent endless recursion loops
+    //
+    $_recursion_marker = krumo::_marker();
+    $_r = ($_is_object)
+      ? @$data->$_recursion_marker
+      : @$data[$_recursion_marker] ;
+    $_r = (integer) $_r;
+
+    // recursion detected
+    //
+    if ($_r > 0) {
+      return krumo::_recursion();
+      }
+
+    // stain it
+    //
+    krumo::_hive($data);
+
+    // render it
+    //
+    ?>
+<div class="krumo-nest" style="display:none;">
+  <ul class="krumo-node">
+  <?php
+
+  // keys ?
+  //
+  $keys = ($_is_object)
+    ? array_keys(get_object_vars($data))
+    : array_keys($data);
+
+  // itterate
+  //
+  foreach($keys as $k) {
+
+    // skip marker
+    //
+    if ($k === $_recursion_marker) {
+      continue;
+      }
+
+    // get real value
+    //
+    if ($_is_object) {
+      $v =& $data->$k;
+      } else {
+      $v =& $data[$k];
+      }
+
+    krumo::_dump($v,$k);
+    } ?>
+  </ul>
+</div>
+<?php
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Render a block that detected recursion
+  *
+  * @access private
+  * @static
+  */
+  Private Static Function _recursion() {
+?>
+<div class="krumo-nest" style="display:none;">
+  <ul class="krumo-node">
+    <li class="krumo-child">
+      <div class="krumo-element"
+        onMouseOver="krumo.over(this);"
+        onMouseOut="krumo.out(this);">
+          <a class="krumo-name"><big>&#8734;</big></a>
+          (<em class="krumo-type">Recursion</em>)
+      </div>
+
+    </li>
+  </ul>
+</div>
+<?php
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Render a dump for an array
+  *
+  * @param mixed $data
+  * @param string $name
+  * @access private
+  * @static
+  */
+  Private Static Function _array(&$data, $name) {
+?>
+<li class="krumo-child">
+
+  <div class="krumo-element<?php echo count($data) > 0 ? ' krumo-expand' : '';?>"
+    <?php if (count($data) > 0) {?> onClick="krumo.toggle(this);"<?php } ?>
+    onMouseOver="krumo.over(this);"
+    onMouseOut="krumo.out(this);">
+
+      <?php /* DEVEL: added htmlSpecialChars */ ?>
+      <a class="krumo-name"><?php echo htmlSpecialChars($name);?></a>
+      (<em class="krumo-type">Array, <strong class="krumo-array-length"><?php echo
+        (count($data)==1)
+          ?("1 element")
+          :(count($data)." elements");
+        ?></strong></em>)
+
+
+      <?php
+      // callback ?
+      //
+      if (is_callable($data)) {
+        $_ = array_values($data);
+        ?>
+        <span class="krumo-callback"> |
+          (<em class="krumo-type">Callback</em>)
+          <strong class="krumo-string"><?php
+            echo htmlSpecialChars((is_object($_[0]) ? get_class($_[0]) . '->' : $_[0] . '::'));?><?php
+            echo htmlSpecialChars($_[1]);?>();</strong></span>
+        <?php
+        }
+      ?>
+
+  </div>
+
+  <?php if (count($data)) {
+    krumo::_vars($data);
+    } ?>
+</li>
+<?php
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Render a dump for an object
+  *
+  * @param mixed $data
+  * @param string $name
+  * @access private
+  * @static
+  */
+  Private Static Function _object(&$data, $name) {
+?>
+<li class="krumo-child">
+
+  <div class="krumo-element<?php echo count($data) > 0 ? ' krumo-expand' : '';?>"
+    <?php if (count($data) > 0) {?> onClick="krumo.toggle(this);"<?php } ?>
+    onMouseOver="krumo.over(this);"
+    onMouseOut="krumo.out(this);">
+
+      <?php /* DEVEL: added htmlSpecialChars */ ?>
+      <a class="krumo-name"><?php echo htmlSpecialChars($name);?></a>
+      (<em class="krumo-type">Object</em>)
+      <strong class="krumo-class"><?php echo get_class($data);?></strong>
+  </div>
+
+  <?php if (count($data)) {
+    krumo::_vars($data);
+    } ?>
+</li>
+<?php
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Render a dump for a resource
+  *
+  * @param mixed $data
+  * @param string $name
+  * @access private
+  * @static
+  */
+  Private Static Function _resource($data, $name) {
+?>
+<li class="krumo-child">
+
+  <div class="krumo-element"
+    onMouseOver="krumo.over(this);"
+    onMouseOut="krumo.out(this);">
+
+      <?php /* DEVEL: added htmlSpecialChars */ ?>
+      <a class="krumo-name"><?php echo htmlSpecialChars($name);?></a>
+      (<em class="krumo-type">Resource</em>)
+      <strong class="krumo-resource"><?php echo get_resource_type($data);?></strong>
+  </div>
+
+</li>
+<?php
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Render a dump for a boolean value
+  *
+  * @param mixed $data
+  * @param string $name
+  * @access private
+  * @static
+  */
+  Private Static Function _boolean($data, $name) {
+?>
+<li class="krumo-child">
+
+  <div class="krumo-element"
+    onMouseOver="krumo.over(this);"
+    onMouseOut="krumo.out(this);">
+
+      <?php /* DEVEL: added htmlSpecialChars */ ?>
+      <a class="krumo-name"><?php echo htmlSpecialChars($name);?></a>
+      (<em class="krumo-type">Boolean</em>)
+      <strong class="krumo-boolean"><?php echo $data?'TRUE':'FALSE'?></strong>
+  </div>
+
+</li>
+<?php
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Render a dump for a integer value
+  *
+  * @param mixed $data
+  * @param string $name
+  * @access private
+  * @static
+  */
+  Private Static Function _integer($data, $name) {
+?>
+<li class="krumo-child">
+
+  <div class="krumo-element"
+    onMouseOver="krumo.over(this);"
+    onMouseOut="krumo.out(this);">
+
+      <?php /* DEVEL: added htmlSpecialChars */ ?>
+      <a class="krumo-name"><?php echo htmlSpecialChars($name);?></a>
+      (<em class="krumo-type">Integer</em>)
+      <strong class="krumo-integer"><?php echo $data;?></strong>
+  </div>
+
+</li>
+<?php
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Render a dump for a float value
+  *
+  * @param mixed $data
+  * @param string $name
+  * @access private
+  * @static
+  */
+  Private Static Function _float($data, $name) {
+?>
+<li class="krumo-child">
+
+  <div class="krumo-element"
+    onMouseOver="krumo.over(this);"
+    onMouseOut="krumo.out(this);">
+
+      <?php /* DEVEL: added htmlSpecialChars */ ?>
+      <a class="krumo-name"><?php echo htmlSpecialChars($name);?></a>
+      (<em class="krumo-type">Float</em>)
+      <strong class="krumo-float"><?php echo $data;?></strong>
+  </div>
+
+</li>
+<?php
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+  /**
+  * Render a dump for a string value
+  *
+  * @param mixed $data
+  * @param string $name
+  * @access private
+  * @static
+  */
+  Private Static Function _string($data, $name) {
+
+    // extra ?
+    //
+    $_extra = false;
+    $_ = $data;
+    if (strLen($data) > KRUMO_TRUNCATE_LENGTH) {
+      $_ = substr($data, 0, KRUMO_TRUNCATE_LENGTH - 3) . '...';
+      $_extra = true;
+      }
+?>
+<li class="krumo-child">
+
+  <div class="krumo-element<?php echo $_extra ? ' krumo-expand' : '';?>"
+    <?php if ($_extra) {?> onClick="krumo.toggle(this);"<?php } ?>
+    onMouseOver="krumo.over(this);"
+    onMouseOut="krumo.out(this);">
+
+      <?php /* DEVEL: added htmlSpecialChars */ ?>
+      <a class="krumo-name"><?php echo htmlSpecialChars($name);?></a>
+      (<em class="krumo-type">String,
+        <strong class="krumo-string-length"><?php
+          echo strlen($data) ?> characters</strong> </em>)
+      <strong class="krumo-string"><?php echo htmlSpecialChars($_);?></strong>
+
+      <?php
+      // callback ?
+      //
+      if (is_callable($data)) {
+        ?>
+        <span class="krumo-callback"> |
+          (<em class="krumo-type">Callback</em>)
+          <strong class="krumo-string"><?php echo htmlSpecialChars($_);?>();</strong></span>
+        <?php
+        }
+      ?>
+
+  </div>
+
+  <?php if ($_extra) { ?>
+  <div class="krumo-nest" style="display:none;">
+    <ul class="krumo-node">
+
+      <li class="krumo-child">
+        <div class="krumo-preview"><?php echo htmlSpecialChars($data);?></div>
+      </li>
+
+    </ul>
+  </div>
+  <?php } ?>
+</li>
+<?php
+    }
+
+  // -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --
+
+//--end-of-class--
+}
+
+//////////////////////////////////////////////////////////////////////////////
+
+/**
+* Alias of {@link krumo::dump()}
+*
+* @param mixed $data,...
+*
+* @see krumo::dump()
+*/
+Function krumo() {
+  $_ = func_get_args();
+  return call_user_func_array(
+    array('krumo', 'dump'), $_
+    );
+  }
+
+//////////////////////////////////////////////////////////////////////////////
+
+?>
diff --git a/modules/devel/krumo/krumo.ini b/modules/devel/krumo/krumo.ini
new file mode 100644
index 0000000..f96c7d7
--- /dev/null
+++ b/modules/devel/krumo/krumo.ini
@@ -0,0 +1,20 @@
+; 
+; KRUMO CONFIGURATION FILE
+;
+
+[skin]
+selected = "white"
+;
+; Change the above value to set the CSS skin used to render 
+; Krumo layout. If the skin is not found, then the "default" one 
+; is going to be used.
+;
+
+[css]
+url = "http://www.example.com/Krumo/"
+;
+; This value is used to set the URL path to 
+; where the Krumo folder is. This is required in 
+; order to have web access to Krumo's CSS and 
+; image files.
+;
diff --git a/modules/devel/krumo/krumo.js b/modules/devel/krumo/krumo.js
new file mode 100644
index 0000000..7332820
--- /dev/null
+++ b/modules/devel/krumo/krumo.js
@@ -0,0 +1,97 @@
+/**
+* JavaScript routines for Krumo
+*
+* @link http://sourceforge.net/projects/krumo
+*/
+
+/////////////////////////////////////////////////////////////////////////////
+
+/**
+* Krumo JS Class
+*/
+function krumo() {
+	}
+
+// -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
+
+/**
+* Add a CSS class to an HTML element
+*
+* @param HtmlElement el 
+* @param string className 
+* @return void
+*/
+krumo.reclass = function(el, className) {
+	if (el.className.indexOf(className) < 0) {
+		el.className += (' ' + className);
+		}
+	}
+
+// -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
+
+/**
+* Remove a CSS class to an HTML element
+*
+* @param HtmlElement el 
+* @param string className 
+* @return void
+*/
+krumo.unclass = function(el, className) {
+	if (el.className.indexOf(className) > -1) {
+		el.className = el.className.replace(className, '');
+		}
+	}
+
+// -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
+
+/**
+* Toggle the nodes connected to an HTML element
+*
+* @param HtmlElement el 
+* @return void
+*/
+krumo.toggle = function(el) {
+	var ul = el.parentNode.getElementsByTagName('ul');
+	for (var i=0; i<ul.length; i++) {
+		if (ul[i].parentNode.parentNode == el.parentNode) {
+			ul[i].parentNode.style.display = (ul[i].parentNode.style.display == 'none')
+				? 'block'
+				: 'none';
+			}
+		}
+
+	// toggle class
+	//
+	if (ul[0].parentNode.style.display == 'block') {
+		krumo.reclass(el, 'krumo-opened');
+		} else {
+		krumo.unclass(el, 'krumo-opened');
+		}
+	}
+
+// -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
+
+/**
+* Hover over an HTML element
+*
+* @param HtmlElement el 
+* @return void
+*/
+krumo.over = function(el) {
+	krumo.reclass(el, 'krumo-hover');
+	}
+
+// -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
+
+/**
+* Hover out an HTML element
+*
+* @param HtmlElement el 
+* @return void
+*/
+
+krumo.out = function(el) {
+	krumo.unclass(el, 'krumo-hover');
+	}
+	
+/////////////////////////////////////////////////////////////////////////////
\ No newline at end of file
diff --git a/modules/devel/krumo/skins/blue/bg.gif b/modules/devel/krumo/skins/blue/bg.gif
new file mode 100644
index 0000000..23afd11
--- /dev/null
+++ b/modules/devel/krumo/skins/blue/bg.gif
@@ -0,0 +1,2 @@
+GIF89aZ 	                                          !    ,    Z 	  :0!js^_j+rM=z0H\6qs
+sZWK ;
\ No newline at end of file
diff --git a/modules/devel/krumo/skins/blue/skin.css b/modules/devel/krumo/skins/blue/skin.css
new file mode 100644
index 0000000..b35c15c
--- /dev/null
+++ b/modules/devel/krumo/skins/blue/skin.css
@@ -0,0 +1,158 @@
+/**
+* Krumo "Blue" Skin
+*
+* @author Kaloyan K. Tsvetkov <mrasnika@users.sourceforge.net>
+*/
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+ul.krumo-node {
+	margin: 0px;
+	padding: 0px;
+	}
+ul.krumo-node ul {
+	margin-left: 20px;
+	}
+* html ul.krumo-node ul {
+	margin-left: 24px;
+	}
+div.krumo-root {
+	border: solid 1px black;
+	margin: 1em 0em;
+	}
+ul.krumo-first {
+	font: normal 12px arial;
+	border: solid 2px white;
+	border-top-width:1px;
+	background: url(%url%bg.gif);
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+li.krumo-child {
+	display:block;
+	list-style: none;
+	padding: 0px;
+	margin: 0px;
+	overflow:hidden;
+	}
+div.krumo-element {
+	cursor:default;
+
+	line-height: 24px;
+	display:block;
+	
+	clear:both;
+	white-space:nowrap;
+	
+	border-top: solid 1px white;
+	background: #BFDFFF;
+	padding-left: 10px;
+	}
+* html div.krumo-element {
+	padding-bottom: 3px;
+	}
+a.krumo-name {
+	color:navy;
+	font: bold 13px Arial;
+	}
+a.krumo-name big {
+	font: bold 20pt Georgia;
+	line-height: 14px;
+	position:relative;
+	top:2px;
+	left:-2px;
+	}
+* html a.krumo-name big {
+	font: bold 19pt Georgia;
+	top: 5px;
+	left: 0px;
+	line-height: 9px;
+	height: 12px;
+	padding: 0px;
+	margin: 0px;
+	}
+div.krumo-expand {
+	background: #AAD5FF;
+	cursor:pointer;
+	}
+div.krumo-hover {
+	background: #FFBE7D;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+div.krumo-preview {
+	font: normal 13px courier new;
+	padding: 5px 5px 14px 5px;
+	background: white;
+	border-top: 0px;
+	overflow:auto;
+	white-space: pre;
+	}
+* html div.krumo-preview {
+	padding-top: 2px;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+li.krumo-footnote {
+	background:white;
+	padding: 2px 5px;
+	list-style:none;
+	border-top: solid 1px #bebebe;
+	margin-top:2px;
+	cursor:default;
+	}
+* html li.krumo-footnote {
+	line-height: 13px;
+	}
+div.krumo-version {
+	float:right;
+	}
+li.krumo-footnote h6 {
+	font: bold 11px verdana;
+	margin: 0px;
+	padding: 0px;
+	color:navy;
+	display:inline;
+	}
+* html li.krumo-footnote h6 {
+	margin-right: 3px;
+	}
+li.krumo-footnote a {
+	font: bold 10px arial;
+	color: #434343;
+	text-decoration:none;
+	}
+li.krumo-footnote a:hover {
+	color:black;
+	}
+
+li.krumo-footnote span.krumo-call {
+	font:normal 11px verdana;
+	position: relative;
+	top: 1px;
+	}
+li.krumo-footnote span.krumo-call code {
+	font-weight:bold;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+div.krumo-title {
+	font: normal 11px verdana ;
+	position:relative;
+	top:9px;
+	cursor:default;
+	line-height:2px;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+strong.krumo-array-length,
+strong.krumo-string-length {
+	font-weight: normal;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
diff --git a/modules/devel/krumo/skins/default/bg.gif b/modules/devel/krumo/skins/default/bg.gif
new file mode 100644
index 0000000..fee4763
--- /dev/null
+++ b/modules/devel/krumo/skins/default/bg.gif
@@ -0,0 +1,2 @@
+GIF89aZ 	                                          !    ,    Z 	  :0!js^_j+rM=z0H\6qs
+sZWK ;
\ No newline at end of file
diff --git a/modules/devel/krumo/skins/default/skin.css b/modules/devel/krumo/skins/default/skin.css
new file mode 100644
index 0000000..fab0d66
--- /dev/null
+++ b/modules/devel/krumo/skins/default/skin.css
@@ -0,0 +1,158 @@
+/**
+* Krumo Default Skin
+*
+* @author Kaloyan K. Tsvetkov <mrasnika@users.sourceforge.net>
+*/
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+ul.krumo-node {
+	margin: 0px;
+	padding: 0px;
+	}
+ul.krumo-node ul {
+	margin-left: 20px;
+	}
+* html ul.krumo-node ul {
+	margin-left: 24px;
+	}
+div.krumo-root {
+	border: solid 1px black;
+	margin: 1em 0em;
+	}
+ul.krumo-first {
+	font: normal 12px arial;
+	border: solid 2px white;
+	border-top-width:1px;
+	background: url(%url%bg.gif);
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+li.krumo-child {
+	display:block;
+	list-style: none;
+	padding: 0px;
+	margin: 0px;
+	overflow:hidden;
+	}
+div.krumo-element {
+	cursor:default;
+
+	line-height: 24px;
+	display:block;
+	
+	clear:both;
+	white-space:nowrap;
+	
+	border-top: solid 1px white;
+	background: #E8E8E8;
+	padding-left: 10px;
+	}
+* html div.krumo-element {
+	padding-bottom: 3px;
+	}
+a.krumo-name {
+	color:#2C5858;
+	font: bold 13px Arial;
+	}
+a.krumo-name big {
+	font: bold 20pt Georgia;
+	line-height: 14px;
+	position:relative;
+	top:2px;
+	left:-2px;
+	}
+* html a.krumo-name big {
+	font: bold 19pt Georgia;
+	top: 5px;
+	left: 0px;
+	line-height: 9px;
+	height: 12px;
+	padding: 0px;
+	margin: 0px;
+	}
+div.krumo-expand {
+	background: #CCCCCC;
+	cursor:pointer;
+	}
+div.krumo-hover {
+	background: #B7DBDB;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+div.krumo-preview {
+	font: normal 13px courier new;
+	padding: 5px 5px 14px 5px;
+	background: white;
+	border-top: 0px;
+	overflow:auto;
+	white-space: pre;
+	}
+* html div.krumo-preview {
+	padding-top: 2px;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+li.krumo-footnote {
+	background:white;
+	padding: 2px 5px;
+	list-style:none;
+	border-top: solid 1px #bebebe;
+	margin-top:2px;
+	cursor:default;
+	}
+* html li.krumo-footnote {
+	line-height: 13px;
+	}
+div.krumo-version {
+	float:right;
+	}
+li.krumo-footnote h6 {
+	font: bold 11px verdana;
+	margin: 0px;
+	padding: 0px;
+	color:#366D6D;
+	display:inline;
+	}
+* html li.krumo-footnote h6 {
+	margin-right: 3px;
+	}
+li.krumo-footnote a {
+	font: bold 10px arial;
+	color: #434343;
+	text-decoration:none;
+	}
+li.krumo-footnote a:hover {
+	color:black;
+	}
+
+li.krumo-footnote span.krumo-call {
+	font:normal 11px verdana;
+	position: relative;
+	top: 1px;
+	}
+li.krumo-footnote span.krumo-call code {
+	font-weight:bold;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+div.krumo-title {
+	font: normal 11px verdana ;
+	position:relative;
+	top:9px;
+	cursor:default;
+	line-height:2px;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+strong.krumo-array-length,
+strong.krumo-string-length {
+	font-weight: normal;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
diff --git a/modules/devel/krumo/skins/green/bg.gif b/modules/devel/krumo/skins/green/bg.gif
new file mode 100644
index 0000000..aa4e75e
--- /dev/null
+++ b/modules/devel/krumo/skins/green/bg.gif
@@ -0,0 +1,2 @@
+GIF89aZ 	    f                                          !    ,    Z 	  :P js^_j+rM=z0H\6qs
+sZWK ;
\ No newline at end of file
diff --git a/modules/devel/krumo/skins/green/skin.css b/modules/devel/krumo/skins/green/skin.css
new file mode 100644
index 0000000..2acff06
--- /dev/null
+++ b/modules/devel/krumo/skins/green/skin.css
@@ -0,0 +1,158 @@
+/**
+* Krumo "Green" Skin
+*
+* @author Kaloyan K. Tsvetkov <mrasnika@users.sourceforge.net>
+*/
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+ul.krumo-node {
+	margin: 0px;
+	padding: 0px;
+	}
+ul.krumo-node ul {
+	margin-left: 20px;
+	}
+* html ul.krumo-node ul {
+	margin-left: 24px;
+	}
+div.krumo-root {
+	border: solid 1px black;
+	margin: 1em 0em;
+	}
+ul.krumo-first {
+	font: normal 12px arial;
+	border: solid 2px white;
+	border-top-width:1px;
+	background: url(%url%bg.gif);
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+li.krumo-child {
+	display:block;
+	list-style: none;
+	padding: 0px;
+	margin: 0px;
+	overflow:hidden;
+	}
+div.krumo-element {
+	cursor:default;
+
+	line-height: 24px;
+	display:block;
+	
+	clear:both;
+	white-space:nowrap;
+	
+	border-top: solid 1px white;
+	background: #D7F4CA;
+	padding-left: 10px;
+	}
+* html div.krumo-element {
+	padding-bottom: 3px;
+	}
+a.krumo-name {
+	color:#004000;
+	font: bold 13px Arial;
+	}
+a.krumo-name big {
+	font: bold 20pt Georgia;
+	line-height: 14px;
+	position:relative;
+	top:2px;
+	left:-2px;
+	}
+* html a.krumo-name big {
+	font: bold 19pt Georgia;
+	top: 5px;
+	left: 0px;
+	line-height: 9px;
+	height: 12px;
+	padding: 0px;
+	margin: 0px;
+	}
+div.krumo-expand {
+	background: #C0EEAC;
+	cursor:pointer;
+	}
+div.krumo-hover {
+	background: gold;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+div.krumo-preview {
+	font: normal 13px courier new;
+	padding: 5px 5px 14px 5px;
+	background: white;
+	border-top: 0px;
+	overflow:auto;
+	white-space: pre;
+	}
+* html div.krumo-preview {
+	padding-top: 2px;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+li.krumo-footnote {
+	background:white;
+	padding: 2px 5px;
+	list-style:none;
+	border-top: solid 1px #bebebe;
+	margin-top:2px;
+	cursor:default;
+	}
+* html li.krumo-footnote {
+	line-height: 13px;
+	}
+div.krumo-version {
+	float:right;
+	}
+li.krumo-footnote h6 {
+	font: bold 11px verdana;
+	margin: 0px;
+	padding: 0px;
+	color:#008040;
+	display:inline;
+	}
+* html li.krumo-footnote h6 {
+	margin-right: 3px;
+	}
+li.krumo-footnote a {
+	font: bold 10px arial;
+	color: #434343;
+	text-decoration:none;
+	}
+li.krumo-footnote a:hover {
+	color:black;
+	}
+
+li.krumo-footnote span.krumo-call {
+	font:normal 11px verdana;
+	position: relative;
+	top: 1px;
+	}
+li.krumo-footnote span.krumo-call code {
+	font-weight:bold;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+div.krumo-title {
+	font: normal 11px verdana ;
+	position:relative;
+	top:9px;
+	cursor:default;
+	line-height:2px;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+strong.krumo-array-length,
+strong.krumo-string-length {
+	font-weight: normal;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
diff --git a/modules/devel/krumo/skins/orange/bg.gif b/modules/devel/krumo/skins/orange/bg.gif
new file mode 100644
index 0000000..3c71bc9
--- /dev/null
+++ b/modules/devel/krumo/skins/orange/bg.gif
@@ -0,0 +1,2 @@
+GIF89aZ 	                                            !    ,    Z 	  :P js^_j+rM=z0H\6qs
+sZWK ;
\ No newline at end of file
diff --git a/modules/devel/krumo/skins/orange/skin.css b/modules/devel/krumo/skins/orange/skin.css
new file mode 100644
index 0000000..7931684
--- /dev/null
+++ b/modules/devel/krumo/skins/orange/skin.css
@@ -0,0 +1,158 @@
+/**
+* Krumo "Orange" Skin
+*
+* @author Kaloyan K. Tsvetkov <mrasnika@users.sourceforge.net>
+*/
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+ul.krumo-node {
+	margin: 0px;
+	padding: 0px;
+	}
+ul.krumo-node ul {
+	margin-left: 20px;
+	}
+* html ul.krumo-node ul {
+	margin-left: 24px;
+	}
+div.krumo-root {
+	border: solid 1px black;
+	margin: 1em 0em;
+	}
+ul.krumo-first {
+	font: normal 12px arial;
+	border: solid 2px white;
+	border-top-width:1px;
+	background: url(%url%bg.gif);
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+li.krumo-child {
+	display:block;
+	list-style: none;
+	padding: 0px;
+	margin: 0px;
+	overflow:hidden;
+	}
+div.krumo-element {
+	cursor:default;
+
+	line-height: 24px;
+	display:block;
+	
+	clear:both;
+	white-space:nowrap;
+	
+	border-top: solid 1px white;
+	background: #FCEBA9;
+	padding-left: 10px;
+	}
+* html div.krumo-element {
+	padding-bottom: 3px;
+	}
+a.krumo-name {
+	color:#404000;
+	font: bold 13px Arial;
+	}
+a.krumo-name big {
+	font: bold 20pt Georgia;
+	line-height: 14px;
+	position:relative;
+	top:2px;
+	left:-2px;
+	}
+* html a.krumo-name big {
+	font: bold 19pt Georgia;
+	top: 5px;
+	left: 0px;
+	line-height: 9px;
+	height: 12px;
+	padding: 0px;
+	margin: 0px;
+	}
+div.krumo-expand {
+	background: #FADB61;
+	cursor:pointer;
+	}
+div.krumo-hover {
+	background: #FF8A4B;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+div.krumo-preview {
+	font: normal 13px courier new;
+	padding: 5px 5px 14px 5px;
+	background: white;
+	border-top: 0px;
+	overflow:auto;
+	white-space: pre;
+	}
+* html div.krumo-preview {
+	padding-top: 2px;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+li.krumo-footnote {
+	background:white;
+	padding: 2px 5px;
+	list-style:none;
+	border-top: solid 1px #bebebe;
+	margin-top:2px;
+	cursor:default;
+	}
+* html li.krumo-footnote {
+	line-height: 13px;
+	}
+div.krumo-version {
+	float:right;
+	}
+li.krumo-footnote h6 {
+	font: bold 11px verdana;
+	margin: 0px;
+	padding: 0px;
+	color:#E87400;
+	display:inline;
+	}
+* html li.krumo-footnote h6 {
+	margin-right: 3px;
+	}
+li.krumo-footnote a {
+	font: bold 10px arial;
+	color: #434343;
+	text-decoration:none;
+	}
+li.krumo-footnote a:hover {
+	color:black;
+	}
+
+li.krumo-footnote span.krumo-call {
+	font:normal 11px verdana;
+	position: relative;
+	top: 1px;
+	}
+li.krumo-footnote span.krumo-call code {
+	font-weight:bold;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+div.krumo-title {
+	font: normal 11px verdana ;
+	position:relative;
+	top:9px;
+	cursor:default;
+	line-height:2px;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+strong.krumo-array-length,
+strong.krumo-string-length {
+	font-weight: normal;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
diff --git a/modules/devel/krumo/skins/white/collapsed.gif b/modules/devel/krumo/skins/white/collapsed.gif
new file mode 100644
index 0000000..c1a4e7d
--- /dev/null
+++ b/modules/devel/krumo/skins/white/collapsed.gif
@@ -0,0 +1 @@
+GIF89a	 	                                             !    ,    	 	  'k}J-qYD ;
\ No newline at end of file
diff --git a/modules/devel/krumo/skins/white/dotted.gif b/modules/devel/krumo/skins/white/dotted.gif
new file mode 100644
index 0000000..e009cf1
--- /dev/null
+++ b/modules/devel/krumo/skins/white/dotted.gif
@@ -0,0 +1,3 @@
+GIF89a
+                                           !    ,    
+   I ;
\ No newline at end of file
diff --git a/modules/devel/krumo/skins/white/empty.gif b/modules/devel/krumo/skins/white/empty.gif
new file mode 100644
index 0000000..51aa91d
--- /dev/null
+++ b/modules/devel/krumo/skins/white/empty.gif
@@ -0,0 +1 @@
+GIF89a	 	                                            !    ,    	 	   !VRwV^6Y ;
\ No newline at end of file
diff --git a/modules/devel/krumo/skins/white/expanded.gif b/modules/devel/krumo/skins/white/expanded.gif
new file mode 100644
index 0000000..a0ecb02
--- /dev/null
+++ b/modules/devel/krumo/skins/white/expanded.gif
@@ -0,0 +1 @@
+GIF89a	 	                                             !    ,    	 	  I|8gZd	D ;
\ No newline at end of file
diff --git a/modules/devel/krumo/skins/white/skin.css b/modules/devel/krumo/skins/white/skin.css
new file mode 100644
index 0000000..c3258a8
--- /dev/null
+++ b/modules/devel/krumo/skins/white/skin.css
@@ -0,0 +1,165 @@
+/**
+* Krumo `Schablon.com` Skin
+*
+* @author Kaloyan K. Tsvetkov <mrasnika@users.sourceforge.net>
+*/
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+ul.krumo-node {
+	margin: 0px;
+	padding: 0px;
+	background-color: white;
+	}
+ul.krumo-node ul {
+	margin-left: 20px;
+	}
+* html ul.krumo-node ul {
+	margin-left: 24px;
+	}
+div.krumo-root {
+	border: solid 1px black;
+	margin: 1em 0em;
+	}
+ul.krumo-first {
+	font: normal 11px tahoma, verdana;
+	border: solid 1px white;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+li.krumo-child {
+	display:block;
+	list-style: none;
+	padding: 0px;
+	margin: 0px;
+	overflow:hidden;
+	}
+div.krumo-element {
+	cursor:default;
+	display:block;
+	clear:both;
+	white-space:nowrap;
+
+	background-color: white;
+	background-image: url(%url%empty.gif);
+	background-repeat: no-repeat;
+	background-position: 6px 5px;
+	padding: 2px 0px 3px 20px;
+	}
+* html div.krumo-element {
+	padding-bottom: 3px;
+	line-height: 13px;
+	}
+div.krumo-expand {
+	background-image: url(%url%collapsed.gif);
+	cursor:pointer;
+	}
+div.krumo-hover {
+	background-color: #BFDFFF;
+	}
+div.krumo-opened {
+	background-image: url(%url%expanded.gif);
+	}
+a.krumo-name {
+	color:navy;
+	font: bold 13px courier new;
+	line-height:12px;
+	}
+a.krumo-name big {
+	font: bold 16pt Georgia;
+	line-height: 10px;
+	position:relative;
+	top:2px;
+	left:-2px;
+	}
+* html a.krumo-name big {
+	font: bold 15pt Georgia;
+	float:left;
+	top: -5px;
+	left: 0px;
+	padding: 0px;
+	margin: 0px;
+	}
+em.krumo-type {
+	font-style:normal;
+	margin: 0px 2px;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+div.krumo-preview {
+	font: normal 13px courier new;
+	padding: 5px ;
+	background: lightyellow;
+	border: solid 1px #808000;
+	overflow:auto;
+	margin: 5px 1em 1em 0px;
+	white-space: pre;
+	}
+* html div.krumo-preview {
+	padding-top: 2px;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+li.krumo-footnote {
+	background: white url(%url%dotted.gif) repeat-x;
+	padding: 4px 5px 3px 5px;
+	list-style:none;
+	cursor:default;
+	}
+* html li.krumo-footnote {
+	line-height: 13px;
+	}
+div.krumo-version {
+	float:right;
+	}
+li.krumo-footnote h6 {
+	font: bold 11px verdana;
+	margin: 0px;
+	padding: 0px;
+	color:navy;
+	display:inline;
+	}
+* html li.krumo-footnote h6 {
+	margin-right: 3px;
+	}
+li.krumo-footnote a {
+	font: bold 10px arial;
+	color: #434343;
+	text-decoration:none;
+	}
+li.krumo-footnote a:hover {
+	color:black;
+	}
+
+
+li.krumo-footnote span.krumo-call {
+	font:normal 11px tahoma, verdana;
+	position: relative;
+	top: 1px;
+	}
+li.krumo-footnote span.krumo-call code {
+	font-weight:bold;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+div.krumo-title {
+	font: normal 11px tahoma, verdana;
+	position:relative;
+	top:9px;
+	cursor:default;
+	line-height:2px;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
+
+strong.krumo-array-length,
+strong.krumo-string-length {
+	font-weight: normal;
+	color: #000099;
+	}
+
+/* -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- */
diff --git a/modules/devel/run-tests-drush.sh b/modules/devel/run-tests-drush.sh
new file mode 100644
index 0000000..4dcd4fb
--- /dev/null
+++ b/modules/devel/run-tests-drush.sh
@@ -0,0 +1,21 @@
+#!/usr/bin/env sh
+
+# This script will run phpunit-based test classes using Drush's
+# test framework.  First, the Drush executable is located, and
+# then phpunit is invoked, pointing to Drush's phpunit.xml as
+# the configuration.
+#
+# Any parameters that may be passed to `phpunit` may also be used
+# with this script.
+
+DRUSH_PATH="`which drush`"
+DRUSH_DIRNAME="`dirname -- "$DRUSH_PATH"`"
+# The following line is needed is you use a `drush` that differs from `which drush`
+# export UNISH_DRUSH=$DRUSH_PATH
+
+if [ $# = 0 ] ; then
+   phpunit --configuration="$DRUSH_DIRNAME/tests" drush
+else
+   # Pass along any arguments.
+   phpunit --configuration="$DRUSH_DIRNAME/tests" $@
+fi
diff --git a/modules/devel/src/Controller/DevelController.php b/modules/devel/src/Controller/DevelController.php
new file mode 100644
index 0000000..dc31cad
--- /dev/null
+++ b/modules/devel/src/Controller/DevelController.php
@@ -0,0 +1,271 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Controller\DevelController.
+ */
+
+namespace Drupal\devel\Controller;
+
+use Drupal\Core\Controller\ControllerBase;
+use Drupal\Core\Entity\EntityInterface;
+use Drupal\Core\Field;
+use Drupal\Core\Routing\RouteMatchInterface;
+use Drupal\Core\Url;
+use Drupal\field\Entity\FieldConfig;
+use Drupal\field\Entity\FieldStorageConfig;
+
+/**
+ * Returns responses for devel module routes.
+ */
+class DevelController extends ControllerBase {
+
+  /**
+   * Clears all caches, then redirects to the previous page.
+   */
+  public function cacheClear() {
+    drupal_flush_all_caches();
+    drupal_set_message('Cache cleared.');
+    return $this->redirect('<front>');
+  }
+
+  public function menuItem() {
+    $item = menu_get_item(current_path());
+    return kdevel_print_object($item);
+  }
+
+  public function themeRegistry() {
+    $hooks = theme_get_registry();
+    ksort($hooks);
+    return array('#markup' => kprint_r($hooks, TRUE));
+  }
+
+  /**
+   * Builds the elements info overview page.
+   *
+   * @return array
+   *   Array of page elements to render.
+   */
+  public function elementsPage() {
+    $element_info_manager = \Drupal::service('element_info');
+
+    $elements_info = array();
+    foreach ($element_info_manager->getDefinitions() as $element_type => $definition) {
+      $elements_info[$element_type] = $definition + $element_info_manager->getInfo($element_type);
+    }
+
+    ksort($elements_info);
+
+    return array('#markup' => kdevel_print_object($elements_info));
+  }
+
+  /**
+   * Builds the fields info overview page.
+   *
+   * @return array
+   *   Array of page elements to render.
+   */
+  public function fieldInfoPage() {
+    $fields = FieldStorageConfig::loadMultiple();
+    ksort($fields);
+    $output['fields'] = array('#markup' => kprint_r($fields, TRUE, $this->t('Fields')));
+
+    $field_instances = FieldConfig::loadMultiple();
+    ksort($field_instances);
+    $output['instances'] = array('#markup' => kprint_r($field_instances, TRUE, $this->t('Instances')));
+
+    $bundles = $this->entityManager()->getAllBundleInfo();
+    ksort($bundles);
+    $output['bundles'] = array('#markup' => kprint_r($bundles, TRUE, $this->t('Bundles')));
+
+    $field_types = \Drupal::service('plugin.manager.field.field_type')->getUiDefinitions();
+    ksort($field_types);
+    $output['field_types'] = array('#markup' => kprint_r($field_types, TRUE, $this->t('Field types')));
+
+    $formatter_types = \Drupal::service('plugin.manager.field.formatter')->getDefinitions();
+    ksort($formatter_types);
+    $output['formatter_types'] = array('#markup' => kprint_r($formatter_types, TRUE, $this->t('Formatter types')));
+
+    $widget_types = \Drupal::service('plugin.manager.field.widget')->getDefinitions();
+    ksort($widget_types);
+    $output['widget_types'] = array('#markup' => kprint_r($widget_types, TRUE, $this->t('Widget types')));
+
+    return $output;
+  }
+
+  /**
+   * Builds the entity types overview page.
+   *
+   * @return array
+   *   Array of page elements to render.
+   */
+  public function entityInfoPage() {
+    $types = $this->entityManager()->getEntityTypeLabels();
+    ksort($types);
+    $result = array();
+    foreach (array_keys($types) as $type) {
+      $definition = $this->entityManager()->getDefinition($type);
+      $reflected_definition = new \ReflectionClass($definition);
+      $props = array();
+      foreach ($reflected_definition->getProperties() as $property) {
+        $property->setAccessible(TRUE);
+        $value = $property->getValue($definition);
+        $props[$property->name] = $value;
+      }
+      $result[$type] = $props;
+    }
+
+    return array('#markup' => kprint_r($result, TRUE));
+  }
+
+  /**
+   * Builds the state variable overview page.
+   *
+   * @return array
+   *   Array of page elements to render.
+   */
+  public function stateSystemPage() {
+    $output['#attached']['library'][] = 'system/drupal.system.modules';
+
+    $output['filters'] = array(
+      '#type' => 'container',
+      '#attributes' => array(
+        'class' => array('table-filter', 'js-show'),
+      ),
+    );
+
+    $output['filters']['text'] = array(
+      '#type' => 'search',
+      '#title' => $this->t('Search'),
+      '#size' => 30,
+      '#placeholder' => $this->t('Enter state name'),
+      '#attributes' => array(
+        'class' => array('table-filter-text'),
+        'data-table' => '.devel-state-list',
+        'autocomplete' => 'off',
+        'title' => $this->t('Enter a part of the state name to filter by.'),
+      ),
+    );
+
+    $header = array(
+      'name' => $this->t('Name'),
+      'value' => $this->t('Value'),
+      'edit' => $this->t('Operations'),
+    );
+
+    $rows = array();
+    // State class doesn't have getAll method so we get all states from the
+    // KeyValueStorage.
+    foreach ($this->keyValue('state')->getAll() as $state_name => $state) {
+      $operations['edit'] = array(
+        'title' => $this->t('Edit'),
+        'url' => Url::fromRoute('devel.system_state_edit', array('state_name' => $state_name)),
+      );
+      $rows[$state_name] = array(
+        'name' => array(
+          'data' => $state_name,
+          'class' => 'table-filter-text-source',
+        ),
+        'value' => array(
+          'data' => kprint_r($state, TRUE),
+        ),
+        'edit' => array(
+          'data' => array('#type' => 'operations', '#links' => $operations),
+        ),
+      );
+    }
+
+    $output['states'] = array(
+      '#type' => 'table',
+      '#header' => $header,
+      '#rows' => $rows,
+      '#empty' => $this->t('No state variables found.'),
+      '#attributes' => array(
+        'class' => array('devel-state-list'),
+      ),
+    );
+
+    return $output;
+  }
+
+  /**
+   * Builds the session overview page.
+   *
+   * @return array
+   *   Array of page elements to render.
+   */
+  public function session() {
+    $output['description'] = array(
+      '#markup' => '<p>' . $this->t('Here are the contents of your $_SESSION variable.') . '</p>',
+    );
+    $output['session'] = array(
+      '#type' => 'table',
+      '#header' => array($this->t('Session name'), $this->t('Session ID')),
+      '#rows' => array(array(session_name(), session_id())),
+      '#empty' => $this->t('No session available.'),
+    );
+    $output['data'] = array(
+      '#markup' => kprint_r($_SESSION, TRUE),
+    );
+
+    return $output;
+  }
+
+  /**
+   * Prints the loaded structure of the current entity.
+   *
+   * @param \Drupal\Core\Routing\RouteMatchInterface $route_match
+   *    A RouteMatch object.
+   *
+   * @return array
+   *    Array of page elements to render.
+   */
+  public function entityLoad(RouteMatchInterface $route_match) {
+    $output = array();
+
+    $parameter_name = $route_match->getRouteObject()->getOption('_devel_entity_type_id');
+    $entity = $route_match->getParameter($parameter_name);
+
+    if ($entity && $entity instanceof EntityInterface) {
+      $output = array('#markup' => kdevel_print_object($entity));
+    }
+
+    return $output;
+  }
+
+  /**
+   * Prints the render structure of the current entity.
+   *
+   * @param \Drupal\Core\Routing\RouteMatchInterface $route_match
+   *    A RouteMatch object.
+   *
+   * @return array
+   *    Array of page elements to render.
+   */
+  public function entityRender(RouteMatchInterface $route_match) {
+    $output = array();
+
+    $parameter_name = $route_match->getRouteObject()->getOption('_devel_entity_type_id');
+    $entity = $route_match->getParameter($parameter_name);
+
+    if ($entity && $entity instanceof EntityInterface) {
+      $entity_type_id = $entity->getEntityTypeId();
+      $view_hook = $entity_type_id . '_view';
+
+      $build = array();
+      // If module implements own {entity_type}_view
+      if (function_exists($view_hook)) {
+        $build = $view_hook($entity);
+      }
+      // If entity has view_builder handler
+      elseif ($this->entityManager()->hasHandler($entity_type_id, 'view_builder')) {
+        $build = $this->entityManager()->getViewBuilder($entity_type_id)->view($entity);
+      }
+
+      $output = array('#markup' => kdevel_print_object($build));
+    }
+
+    return $output;
+  }
+
+}
diff --git a/modules/devel/src/Controller/SwitchUserController.php b/modules/devel/src/Controller/SwitchUserController.php
new file mode 100644
index 0000000..0e981c3
--- /dev/null
+++ b/modules/devel/src/Controller/SwitchUserController.php
@@ -0,0 +1,125 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Controller\SwitchUserController.
+ */
+
+namespace Drupal\devel\Controller;
+
+use Drupal\Core\Controller\ControllerBase;
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\Core\Extension\ModuleHandlerInterface;
+use Drupal\Core\Session\AccountProxyInterface;
+use Drupal\Core\Session\SessionManagerInterface;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+use Symfony\Component\HttpFoundation\Session\Session;
+use Symfony\Component\HttpKernel\Exception\AccessDeniedHttpException;
+
+/**
+ * Controller for switch to another user account.
+ */
+class SwitchUserController extends ControllerBase {
+
+  /**
+   * The current user.
+   *
+   * @var \Drupal\Core\Session\AccountProxyInterface
+   */
+  protected $account;
+
+  /**
+   * The user storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $userStorage;
+
+  /**
+   * The session manager service.
+   *
+   * @var \Drupal\Core\Session\SessionManagerInterface
+   */
+  protected $sessionManager;
+
+  /**
+   * The session.
+   *
+   * @var \Symfony\Component\HttpFoundation\Session\Session
+   */
+  protected $session;
+
+  /**
+   * Constructs a new SwitchUserController object
+   *
+   * @param \Drupal\Core\Session\AccountProxyInterface $account
+   *   The current user.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $user_storage
+   *   The user storage.
+   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   *   The user storage.
+   * @param \Drupal\Core\Session\SessionManagerInterface $session_manager
+   *   The session manager service.
+   * @param \Symfony\Component\HttpFoundation\Session\Session $session
+   *   The session.
+   */
+  public function __construct(AccountProxyInterface $account, EntityStorageInterface $user_storage, ModuleHandlerInterface $module_handler, SessionManagerInterface $session_manager, Session $session) {
+    $this->account = $account;
+    $this->userStorage = $user_storage;
+    $this->moduleHandler = $module_handler;
+    $this->sessionManager = $session_manager;
+    $this->session = $session;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('current_user'),
+      $container->get('entity.manager')->getStorage('user'),
+      $container->get('module_handler'),
+      $container->get('session_manager'),
+      $container->get('session')
+    );
+  }
+
+  /**
+   * Switches to a different user.
+   *
+   * We don't call session_save_session() because we really want to change users.
+   * Usually unsafe!
+   *
+   * @param string $name
+   *   The username to switch to, or NULL to log out.
+   *
+   * @return \Symfony\Component\HttpFoundation\RedirectResponse
+   *   A redirect response object.
+   *
+   * @throws \Symfony\Component\HttpKernel\Exception\AccessDeniedHttpException
+   */
+  public function switchUser($name = NULL) {
+    if (empty($name) || !($account = $this->userStorage->loadByProperties(['name' => $name]))) {
+      throw new AccessDeniedHttpException();
+    }
+    $account = reset($account);
+
+    // Call logout hooks when switching from original user.
+    $this->moduleHandler->invokeAll('user_logout', [$this->account]);
+
+    // Regenerate the session ID to prevent against session fixation attacks.
+    $this->sessionManager->regenerate();
+
+    // Based off masquarade module as:
+    // https://www.drupal.org/node/218104 doesn't stick and instead only
+    // keeps context until redirect.
+    $this->account->setAccount($account);
+    $this->session->set('uid', $account->id());
+
+    // Call all login hooks when switching to masquerading user.
+    $this->moduleHandler->invokeAll('user_login', [$account]);
+
+    return $this->redirect('<front>');
+  }
+
+}
diff --git a/modules/devel/src/EventSubscriber/DevelEventSubscriber.php b/modules/devel/src/EventSubscriber/DevelEventSubscriber.php
new file mode 100644
index 0000000..21560f4
--- /dev/null
+++ b/modules/devel/src/EventSubscriber/DevelEventSubscriber.php
@@ -0,0 +1,137 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\EventSubscriber\DevelEventSubscriber.
+ */
+
+namespace Drupal\devel\EventSubscriber;
+
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Drupal\Core\Extension\ModuleHandlerInterface;
+use Drupal\Core\Routing\UrlGeneratorInterface;
+use Drupal\Core\Session\AccountInterface;
+use Symfony\Component\EventDispatcher\EventSubscriberInterface;
+use Symfony\Component\HttpKernel\KernelEvents;
+use Symfony\Component\HttpKernel\Event\GetResponseEvent;
+
+class DevelEventSubscriber implements EventSubscriberInterface {
+
+  /**
+   * The devel.settings config object.
+   *
+   * @var \Drupal\Core\Config\Config;
+   */
+  protected $config;
+
+  /**
+   * The current user.
+   *
+   * @var \Drupal\Core\Session\AccountInterface
+   */
+  protected $account;
+
+  /**
+   * The module handler.
+   *
+   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   */
+  protected $moduleHandler;
+
+  /**
+   * @var \Drupal\Core\Routing\UrlGeneratorInterface
+   */
+  protected $urlGenerator;
+
+  /**
+   * Constructs a DevelEventSubscriber object.
+   */
+  public function __construct(ConfigFactoryInterface $config, AccountInterface $account, ModuleHandlerInterface $module_handler, UrlGeneratorInterface $url_generator) {
+    $this->config = $config->get('devel.settings');
+    $this->account = $account;
+    $this->moduleHandler = $module_handler;
+    $this->urlGenerator = $url_generator;
+  }
+
+  /**
+   * Initializes devel module requirements.
+   */
+  public function onRequest(GetResponseEvent $event) {
+    if (!devel_silent()) {
+
+
+      if ($this->account->hasPermission('access devel information')) {
+        devel_set_handler(devel_get_handlers());
+        // We want to include the class early so that anyone may call krumo()
+        // as needed. See http://krumo.sourceforge.net/
+        has_krumo();
+
+        // See http://www.firephp.org/HQ/Install.htm
+        $path = NULL;
+        if ((@include_once 'fb.php') || (@include_once 'FirePHPCore/fb.php')) {
+          // FirePHPCore is in include_path. Probably a PEAR installation.
+          $path = '';
+        }
+        elseif ($this->moduleHandler->moduleExists('libraries')) {
+          // Support Libraries API - http://drupal.org/project/libraries
+          $firephp_path = libraries_get_path('FirePHPCore');
+          $firephp_path = ($firephp_path ? $firephp_path . '/lib/FirePHPCore/' : '');
+          $chromephp_path = libraries_get_path('chromephp');
+        }
+        else {
+          $firephp_path = DRUPAL_ROOT . '/libraries/FirePHPCore/lib/FirePHPCore/';
+          $chromephp_path = './' . drupal_get_path('module', 'devel') . '/chromephp';
+        }
+
+        // Include FirePHP if it exists.
+        if (!empty($firephp_path) && file_exists($firephp_path . 'fb.php')) {
+          include_once $firephp_path . 'fb.php';
+          include_once $firephp_path . 'FirePHP.class.php';
+        }
+
+        // Include ChromePHP if it exists.
+        if (!empty($chromephp_path) && file_exists($chromephp_path .= '/ChromePhp.php')) {
+          include_once $chromephp_path;
+        }
+
+      }
+    }
+
+    if ($this->config->get('rebuild_theme')) {
+      drupal_theme_rebuild();
+
+      // Ensure that the active theme object is cleared.
+      $theme_name = \Drupal::theme()->getActiveTheme()->getName();
+      \Drupal::state()->delete('theme.active_theme.' . $theme_name);
+      \Drupal::theme()->resetActiveTheme();
+
+      /** @var \Drupal\Core\Extension\ThemeHandlerInterface $theme_handler*/
+      $theme_handler = \Drupal::service('theme_handler');
+      $theme_handler->refreshInfo();
+      // @todo This is not needed after https://www.drupal.org/node/2330755
+      $list = $theme_handler->listInfo();
+      $theme_handler->addTheme($list[$theme_name]);
+
+      if (\Drupal::service('flood')->isAllowed('devel.rebuild_theme_warning', 1)) {
+        \Drupal::service('flood')->register('devel.rebuild_theme_warning');
+        if (!devel_silent() && $this->account->hasPermission('access devel information')) {
+          drupal_set_message(t('The theme information is being rebuilt on every request. Remember to <a href=":url">turn off</a> this feature on production websites.', array(':url' => $this->urlGenerator->generateFromRoute('devel.admin_settings'))));
+        }
+      }
+    }
+  }
+
+  /**
+   * Implements EventSubscriberInterface::getSubscribedEvents().
+   *
+   * @return array
+   *   An array of event listener definitions.
+   */
+  static function getSubscribedEvents() {
+    // Set a low value to start as early as possible.
+    $events[KernelEvents::REQUEST][] = array('onRequest', -100);
+
+    return $events;
+  }
+
+}
diff --git a/modules/devel/src/Form/ConfigEditor.php b/modules/devel/src/Form/ConfigEditor.php
new file mode 100644
index 0000000..b110337
--- /dev/null
+++ b/modules/devel/src/Form/ConfigEditor.php
@@ -0,0 +1,151 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Form\ConfigEditor.
+ */
+
+namespace Drupal\devel\Form;
+
+use Drupal\Component\Serialization\Exception\InvalidDataTypeException;
+use Drupal\Component\Serialization\Yaml;
+use Drupal\Component\Utility\UrlHelper;
+use Drupal\Core\Form\FormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Url;
+
+/**
+ * Edit config variable form.
+ */
+class ConfigEditor extends FormBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_config_system_edit_form';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state, $config_name = '') {
+    $config = $this->config($config_name);
+
+    if ($config === FALSE || $config->isNew()) {
+      drupal_set_message(t('Config @name does not exist in the system.', array('@name' => $config_name)), 'error');
+      return;
+    }
+
+    $data = $config->get();
+
+    if (empty($data)) {
+      drupal_set_message(t('Config @name exists but has no data.', array('@name' => $config_name)), 'warning');
+      return;
+    }
+
+    try {
+      $output = Yaml::encode($data);
+    }
+    catch (InvalidDataTypeException $e) {
+      drupal_set_message(t('Invalid data detected for @name : %error', array('@name' => $config_name, '%error' => $e->getMessage())), 'error');
+      return;
+    }
+
+    $form['current'] = array(
+      '#type' => 'details',
+      '#title' => $this->t('Current value for %variable', array('%variable' => $config_name)),
+      '#attributes' => array('class' => array('container-inline')),
+    );
+    $form['current']['value'] = array(
+      '#type' => 'item',
+      '#markup' => dpr($output, TRUE),
+    );
+
+    $form['name'] = array(
+      '#type' => 'value',
+      '#value' => $config_name,
+    );
+    $form['new'] = array(
+      '#type' => 'textarea',
+      '#title' => $this->t('New value'),
+      '#default_value' => $output,
+      '#rows' => 24,
+      '#required' => TRUE,
+    );
+
+    $form['actions'] = array('#type' => 'actions');
+    $form['actions']['submit'] = array(
+      '#type' => 'submit',
+      '#value' => $this->t('Save'),
+    );
+    $form['actions']['cancel'] = array(
+      '#type' => 'link',
+      '#title' => $this->t('Cancel'),
+      '#url' => $this->buildCancelLinkUrl(),
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateForm(array &$form, FormStateInterface $form_state) {
+    $value = $form_state->getValue('new');
+    // try to parse the new provided value
+    try {
+      $parsed_value = Yaml::decode($value);
+      // Config::setData needs array for the new configuration and
+      // a simple string is valid YAML for any reason.
+      if (is_array($parsed_value)) {
+        $form_state->setValue('parsed_value', $parsed_value);
+      }
+      else {
+        $form_state->setErrorByName('new', $this->t('Invalid input'));
+      }
+    }
+    catch (InvalidDataTypeException $e) {
+      $form_state->setErrorByName('new', $this->t('Invalid input: %error', array('%error' => $e->getMessage())));
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    $values = $form_state->getValues();
+    try {
+      $this->configFactory()->getEditable($values['name'])->setData($values['parsed_value'])->save();
+      drupal_set_message($this->t('Configuration variable %variable was successfully saved.', array('%variable' => $values['name'])));
+      $this->logger('devel')->info('Configuration variable %variable was successfully saved.', array('%variable' => $values['name']));
+
+      $form_state->setRedirectUrl(Url::fromRoute('devel.configs_list'));
+    }
+    catch (\Exception $e) {
+      drupal_set_message($e->getMessage(), 'error');
+      $this->logger('devel')->error('Error saving configuration variable %variable : %error.', array('%variable' => $values['name'], '%error' => $e->getMessage()));
+    }
+  }
+
+  /**
+   * Builds the cancel link url for the form.
+   *
+   * @return Url
+   *   Cancel url
+   */
+  private function buildCancelLinkUrl() {
+    $query = $this->getRequest()->query;
+
+    if ($query->has('destination')) {
+      $options = UrlHelper::parse($query->get('destination'));
+      $url = Url::fromUri('internal:/' . $options['path'], $options);
+    }
+    else {
+      $url = Url::fromRoute('devel.configs_list');
+    }
+
+    return $url;
+  }
+
+}
diff --git a/modules/devel/src/Form/ConfigsList.php b/modules/devel/src/Form/ConfigsList.php
new file mode 100644
index 0000000..370ddbb
--- /dev/null
+++ b/modules/devel/src/Form/ConfigsList.php
@@ -0,0 +1,90 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Form\ConfigsList.
+ */
+
+namespace Drupal\devel\Form;
+
+use Drupal\Component\Utility\Html;
+use Drupal\Core\Form\FormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Url;
+
+/**
+ * Form that displays all the config variables to edit them.
+ */
+class ConfigsList extends FormBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_config_system_form';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state, $filter = '') {
+    $form['filter'] = array(
+      '#type' => 'details',
+      '#title' => t('Filter variables'),
+      '#attributes' => array('class' => array('container-inline')),
+      '#open' => isset($filter) && trim($filter) != '',
+    );
+    $form['filter']['name'] = array(
+      '#type' => 'textfield',
+      '#title' => $this->t('Variable name'),
+      '#title_display' => 'invisible',
+      '#default_value' => $filter,
+    );
+    $form['filter']['show'] = array(
+      '#type' => 'submit',
+      '#value' => $this->t('Filter'),
+    );
+
+    $header = array(
+      'name' => array('data' => $this->t('Name')),
+      'edit' => array('data' => $this->t('Operations')),
+    );
+
+    $rows = array();
+
+    $destination = $this->getDestinationArray();
+
+    // List all the variables filtered if any filter was provided.
+    $names = $this->configFactory()->listAll($filter);
+
+    foreach ($names as $config_name) {
+      $operations['edit'] = array(
+        'title' => $this->t('Edit'),
+        'url' => Url::fromRoute('devel.config_edit', array('config_name' => $config_name)),
+        'query' => $destination
+      );
+      $rows[] = array(
+        'name' => $config_name,
+        'operation' => array('data' => array('#type' => 'operations', '#links' => $operations)),
+      );
+    }
+
+    $form['variables'] = array(
+      '#type' => 'table',
+      '#header' => $header,
+      '#rows' => $rows,
+      '#empty' => $this->t('No variables found')
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    $filter = $form_state->getValue('name');
+    $form_state->setRedirectUrl(Url::FromRoute('devel.configs_list', array('filter' => Html::escape($filter))));
+  }
+
+}
diff --git a/modules/devel/src/Form/DevelRebuildMenus.php b/modules/devel/src/Form/DevelRebuildMenus.php
new file mode 100644
index 0000000..d00ffe5
--- /dev/null
+++ b/modules/devel/src/Form/DevelRebuildMenus.php
@@ -0,0 +1,91 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Form\DevelRebuildMenus.
+ */
+
+namespace Drupal\devel\Form;
+
+use Drupal\Core\Form\ConfirmFormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Routing\RouteBuilderInterface;
+use Drupal\Core\Url;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides confirmation form for rebuilding the routes.
+ */
+class DevelRebuildMenus extends ConfirmFormBase {
+
+  /**
+   * The route builder service.
+   *
+   * @var \Drupal\Core\Routing\RouteBuilderInterface
+   */
+  protected $routeBuilder;
+
+  /**
+   * Constructs a new DevelRebuildMenus object.
+   *
+   * @param \Drupal\Core\Routing\RouteBuilderInterface $route_builder
+   *   The route builder service.
+   */
+  public function __construct(RouteBuilderInterface $route_builder) {
+    $this->routeBuilder = $route_builder;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('router.builder')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_menu_rebuild';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getQuestion() {
+    return $this->t('Are you sure you want to rebuild menus?');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getCancelUrl() {
+    return new Url('<front>');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getDescription() {
+    return $this->t('Rebuild menu based on hook_menu() and revert any custom changes. All menu items return to their default settings.');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getConfirmText() {
+    return $this->t('Rebuild');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    $this->routeBuilder->rebuild();
+    drupal_set_message($this->t('The menu router has been rebuilt.'));
+    $form_state->setRedirect('<front>');
+  }
+
+}
diff --git a/modules/devel/src/Form/DevelReinstall.php b/modules/devel/src/Form/DevelReinstall.php
new file mode 100644
index 0000000..70a19f4
--- /dev/null
+++ b/modules/devel/src/Form/DevelReinstall.php
@@ -0,0 +1,159 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Form\DevelReinstall.
+ */
+
+namespace Drupal\devel\Form;
+
+use Drupal\Core\Extension\ModuleInstallerInterface;
+use Drupal\Core\Form\FormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Display a dropdown of installed modules with the option to reinstall them.
+ */
+class DevelReinstall extends FormBase {
+
+  /**
+   * The module installer.
+   *
+   * @var \Drupal\Core\Extension\ModuleInstallerInterface
+   */
+  protected $moduleInstaller;
+
+  /**
+   * Constructs a new DevelReinstall form.
+   *
+   * @param \Drupal\Core\Extension\ModuleInstallerInterface $module_installer
+   *   The module installer.
+   */
+  public function __construct(ModuleInstallerInterface $module_installer) {
+    $this->moduleInstaller = $module_installer;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('module_installer')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_reinstall_form';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state) {
+    // Get a list of all available modules.
+    $modules = system_rebuild_module_data();
+
+    $uninstallable = array_filter($modules, function ($module) use ($modules) {
+      return empty($modules[$module->getName()]->info['required']) && drupal_get_installed_schema_version($module->getName()) > SCHEMA_UNINSTALLED && $module->getName() !== 'devel';
+    });
+
+    $form['filters'] = array(
+      '#type' => 'container',
+      '#attributes' => array(
+        'class' => array('table-filter', 'js-show'),
+      ),
+    );
+    $form['filters']['text'] = array(
+      '#type' => 'search',
+      '#title' => $this->t('Search'),
+      '#size' => 30,
+      '#placeholder' => $this->t('Enter module name'),
+      '#attributes' => array(
+        'class' => array('table-filter-text'),
+        'data-table' => '#devel-reinstall-form',
+        'autocomplete' => 'off',
+        'title' => $this->t('Enter a part of the module name or description to filter by.'),
+      ),
+    );
+
+    // Only build the rest of the form if there are any modules available to
+    // uninstall;
+    if (empty($uninstallable)) {
+      return $form;
+    }
+
+    $header = array(
+      'name' => $this->t('Name'),
+      'description' => $this->t('Description'),
+    );
+
+    $rows = array();
+
+    foreach ($uninstallable as $module) {
+      $name = $module->info['name'] ? : $module->getName();
+
+      $rows[$module->getName()] = array(
+        'name' => array(
+          'data' => array(
+            '#type' => 'inline_template',
+            '#template' => '<label class="module-name table-filter-text-source">{{ module_name }}</label>',
+            '#context' => array('module_name' => $name),
+          )
+        ),
+        'description' => array(
+          'data' => $module->info['description'],
+          'class' => array('description'),
+        ),
+      );
+    }
+
+    $form['reinstall'] = array(
+      '#type' => 'tableselect',
+      '#header' => $header,
+      '#options' => $rows,
+      '#js_select' => FALSE,
+      '#empty' => $this->t('No modules are available to uninstall.'),
+    );
+
+    $form['#attached']['library'][] = 'system/drupal.system.modules';
+
+    $form['actions'] = array('#type' => 'actions');
+    $form['actions']['submit'] = array(
+      '#type' => 'submit',
+      '#value' => $this->t('Reinstall'),
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateForm(array &$form, FormStateInterface $form_state) {
+    // Form submitted, but no modules selected.
+    if (!array_filter($form_state->getValue('reinstall'))) {
+      $form_state->setErrorByName('reinstall', $this->t('No modules selected.'));
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    try {
+      $modules = $form_state->getValue('reinstall');
+      $reinstall = array_keys(array_filter($modules));
+      $this->moduleInstaller->uninstall($reinstall, FALSE);
+      $this->moduleInstaller->install($reinstall, FALSE);
+      drupal_set_message($this->t('Uninstalled and installed: %names.', array('%names' => implode(', ', $reinstall))));
+    }
+    catch (\Exception $e) {
+      drupal_set_message($this->t('Unable to reinstall modules. Error: %error.', array('%error' => $e->getMessage())), 'error');
+    }
+  }
+
+}
diff --git a/modules/devel/src/Form/ExecutePHP.php b/modules/devel/src/Form/ExecutePHP.php
new file mode 100644
index 0000000..7630865
--- /dev/null
+++ b/modules/devel/src/Form/ExecutePHP.php
@@ -0,0 +1,60 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Form\ExecutePHP.
+ */
+
+namespace Drupal\devel\Form;
+
+use Drupal\Core\Form\FormBase;
+use Drupal\Core\Form\FormStateInterface;
+
+/**
+ * Defines a form that allows privileged users to execute arbitrary PHP code.
+ */
+class ExecutePHP extends FormBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_execute_form';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state) {
+    $form = array(
+      '#title' => $this->t('Execute PHP Code'),
+      '#description' => $this->t('Execute some PHP code'),
+    );
+    $form['execute']['code'] = array(
+      '#type' => 'textarea',
+      '#title' => t('PHP code to execute'),
+      '#description' => t('Enter some code. Do not use <code>&lt;?php ?&gt;</code> tags.'),
+      '#default_value' => (isset($_SESSION['devel_execute_code']) ? $_SESSION['devel_execute_code'] : ''),
+      '#rows' => 20,
+    );
+    $form['execute']['op'] = array('#type' => 'submit', '#value' => t('Execute'));
+    $form['#redirect'] = FALSE;
+    if (isset($_SESSION['devel_execute_code'])) {
+      unset($_SESSION['devel_execute_code']);
+    }
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    ob_start();
+    $code = $form_state->getValue('code');
+    print eval($code);
+    $_SESSION['devel_execute_code'] = $code;
+    dpm(ob_get_clean());
+  }
+
+}
diff --git a/modules/devel/src/Form/SettingsForm.php b/modules/devel/src/Form/SettingsForm.php
new file mode 100644
index 0000000..43da2e5
--- /dev/null
+++ b/modules/devel/src/Form/SettingsForm.php
@@ -0,0 +1,154 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Form\SettingsForm.
+ */
+
+namespace Drupal\devel\Form;
+
+use Drupal\Core\Form\ConfigFormBase;
+use Symfony\Component\HttpFoundation\Request;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Url;
+
+/**
+ * Defines a form that configures devel settings.
+ */
+class SettingsForm extends ConfigFormBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_admin_settings_form';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function getEditableConfigNames() {
+    return [
+      'devel.settings',
+    ];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state, Request $request = NULL) {
+    $current_url = Url::createFromRequest($request);
+    $devel_config = $this->config('devel.settings');
+
+    $form['api_url'] = array('#type' => 'textfield',
+      '#title' => t('API Site'),
+      '#default_value' => $devel_config->get('api_url'),
+      '#description' => t('The base URL for your developer documentation links. You might change this if you run <a href=":url">api.module</a> locally.', array(':url' => Url::fromUri('http://drupal.org/project/api')->toString())));
+    $form['page_alter'] = array('#type' => 'checkbox',
+      '#title' => t('Display $page array'),
+      '#default_value' => $devel_config->get('page_alter'),
+      '#description' => t('Display $page array from <a href="http://api.drupal.org/api/function/hook_page_alter/7">hook_page_alter()</a> in the messages area of each page.'),
+    );
+    $form['raw_names'] = array('#type' => 'checkbox',
+      '#title' => t('Display machine names of permissions and modules'),
+      '#default_value' => $devel_config->get('raw_names'),
+      '#description' => t('Display the language-independent machine names of the permissions in mouse-over hints on the <a href=":permissions_url">Permissions</a> page and the module base file names on the Permissions and <a href=":modules_url">Modules</a> pages.', array(':permissions_url' => Url::fromRoute('user.admin_permissions')->toString(), ':modules_url' => Url::fromRoute('system.modules_list')->toString())),
+    );
+
+    $error_handlers = devel_get_handlers();
+    $form['error_handlers'] = array(
+      '#type' => 'select',
+      '#title' => t('Error handlers'),
+      '#options' => array(
+        DEVEL_ERROR_HANDLER_NONE => t('None'),
+        DEVEL_ERROR_HANDLER_STANDARD => t('Standard Drupal'),
+        DEVEL_ERROR_HANDLER_BACKTRACE_DPM => t('Krumo backtrace in the message area'),
+        DEVEL_ERROR_HANDLER_BACKTRACE_KRUMO => t('Krumo backtrace above the rendered page'),
+      ),
+      '#multiple' => TRUE,
+      '#default_value' => empty($error_handlers) ? DEVEL_ERROR_HANDLER_NONE : $error_handlers,
+      '#description' => [
+        [
+          '#markup' => $this->t('Select the error handler(s) to use, in case you <a href=":choose">choose to show errors on screen</a>.', [':choose' => $this->url('system.logging_settings')])
+        ],
+        [
+          '#theme' => 'item_list',
+          '#items' => [
+            $this->t('<em>None</em> is a good option when stepping through the site in your debugger.'),
+            $this->t('<em>Standard Drupal</em> does not display all the information that is often needed to resolve an issue.'),
+            $this->t('<em>Krumo backtrace</em> displays nice debug information when any type of error is noticed, but only to users with the %perm permission.', ['%perm' => t('Access developer information')]),
+          ],
+        ],
+        [
+          '#markup' => $this->t('Depending on the situation, the theme, the size of the call stack and the arguments, etc., some handlers may not display their messages, or display them on the subsequent page. Select <em>Standard Drupal</em> <strong>and</strong> <em>Krumo backtrace above the rendered page</em> to maximize your chances of not missing any messages.') . '<br />' .
+            $this->t('Demonstrate the current error handler(s):') . ' ' .
+            $this->l('notice', $current_url->setOption('query', ['demo' => 'notice'])) . ', ' .
+            $this->l('notice+warning', $current_url->setOption('query', ['demo' => 'warning'])). ', ' .
+            $this->l('notice+warning+error', $current_url->setOption('query', ['demo' => 'error'])) . ' (' .
+            $this->t('The presentation of the @error is determined by PHP.', ['@error' => 'error']) . ')'
+        ],
+      ],
+    );
+    $form['error_handlers']['#size'] = count($form['error_handlers']['#options']);
+    if ($request->query->has('demo')) {
+      if ($request->getMethod() == 'GET') {
+        $this->demonstrateErrorHandlers($request->query->get('demo'));
+      }
+      $request->query->remove('demo');
+    }
+
+    $options = array('default', 'blue', 'green', 'orange', 'white', 'disabled');
+    $form['krumo_skin'] = array(
+      '#type' => 'radios',
+      '#title' => t('Krumo display'),
+      '#description' => t('Select a skin for your debug messages or select <em>disabled</em> to display object and array output in standard PHP format.'),
+      '#options' => array_combine($options, $options),
+      '#default_value' => $devel_config->get('krumo_skin'),
+    );
+
+    $form['rebuild_theme'] = array(
+     '#type' => 'checkbox',
+     '#title' => t('Rebuild the theme information like the registry'),
+     '#description' => t('While creating new templates, change the $theme.info.yml and theme_ overrides the theme information needs to be rebuilt.'),
+     '#default_value' => $devel_config->get('rebuild_theme'),
+    );
+
+    return parent::buildForm($form, $form_state);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    $values = $form_state->getValues();
+    $this->config('devel.settings')
+      ->set('api_url', $values['api_url'])
+      ->set('page_alter', $values['page_alter'])
+      ->set('raw_names', $values['raw_names'])
+      ->set('error_handlers', $values['error_handlers'])
+      ->set('krumo_skin', $values['krumo_skin'])
+      ->set('rebuild_theme', $values['rebuild_theme'])
+      ->save();
+  }
+
+  /**
+   * @param string $severity
+   */
+  protected function demonstrateErrorHandlers($severity) {
+    switch ($severity) {
+      case 'notice':
+        $undefined = $undefined;
+        break;
+      case 'warning':
+        $undefined = $undefined;
+        1/0;
+        break;
+      case 'error':
+        $undefined = $undefined;
+        1/0;
+        devel_undefined_function();
+        break;
+    }
+  }
+
+}
diff --git a/modules/devel/src/Form/SwitchUserForm.php b/modules/devel/src/Form/SwitchUserForm.php
new file mode 100644
index 0000000..e216955
--- /dev/null
+++ b/modules/devel/src/Form/SwitchUserForm.php
@@ -0,0 +1,113 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Form\SwitchUserForm.
+ */
+
+namespace Drupal\devel\Form;
+
+use Drupal\Core\Access\CsrfTokenGenerator;
+use Drupal\Core\Form\FormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Url;
+use Drupal\user\Entity\User;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Defines a form that allows privileged users to generate entities.
+ */
+class SwitchUserForm extends FormBase {
+
+  /**
+   * The csrf token generator.
+   *
+   * @var \Drupal\Core\Access\CsrfTokenGenerator
+   */
+  protected $csrfToken;
+
+  /**
+   * Constructs a new SwitchUserForm object.
+   *
+   * @param \Drupal\Core\Access\CsrfTokenGenerator $csrf_token_generator
+   */
+  public function __construct(CsrfTokenGenerator $csrf_token_generator) {
+    $this->csrfToken = $csrf_token_generator;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('csrf_token')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_switchuser_form';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state) {
+    $form['autocomplete'] = [
+      '#type' => 'container',
+      '#attributes' => [
+        'class' => ['container-inline'],
+      ],
+    ];
+    $form['autocomplete']['userid'] = [
+      '#type' => 'entity_autocomplete',
+      '#title' => $this->t('Username'),
+      '#placeholder' => $this->t('Enter username'),
+      '#target_type' => 'user',
+      '#selection_settings' => [
+        'include_anonymous' => FALSE
+      ],
+      '#process_default_value' => FALSE,
+      '#maxlength' => USERNAME_MAX_LENGTH,
+      '#title_display' => 'invisible',
+      '#required' => TRUE,
+      '#size' => '28',
+    ];
+
+    $form['autocomplete']['actions'] = ['#type' => 'actions'];
+    $form['autocomplete']['actions']['submit'] = [
+      '#type' => 'submit',
+      '#value' => $this->t('Switch'),
+    ];
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateForm(array &$form, FormStateInterface $form_state) {
+    if (!$account = User::load($form_state->getValue('userid'))) {
+      $form_state->setErrorByName('userid', $this->t('Username not found'));
+    }
+    else {
+      $form_state->setValue('username', $account->getAccountName());
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    // We cannot rely on automatic token creation, since the csrf seed changes
+    // after the redirect and the generated token is not more valid.
+    // TODO find another way to do this.
+    $url = Url::fromRoute('devel.switch', ['name' => $form_state->getValue('username')]);
+    $url->setOption('query', ['token' => $this->csrfToken->get($url->getInternalPath())]);
+
+    $form_state->setRedirectUrl($url);
+  }
+
+}
diff --git a/modules/devel/src/Form/SystemStateEdit.php b/modules/devel/src/Form/SystemStateEdit.php
new file mode 100644
index 0000000..281cc2e
--- /dev/null
+++ b/modules/devel/src/Form/SystemStateEdit.php
@@ -0,0 +1,194 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Form\SystemStateEdit.
+ */
+
+namespace Drupal\devel\Form;
+
+use Drupal\Component\Serialization\Exception\InvalidDataTypeException;
+use Drupal\Component\Serialization\Yaml;
+use Drupal\Core\Form\FormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\State\StateInterface;
+use Drupal\Core\Url;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Form API form to edit a state.
+ */
+class SystemStateEdit extends FormBase {
+
+  /**
+   * The state store.
+   *
+   * @var \Drupal\Core\State\StateInterface
+   */
+  protected $state;
+
+  /**
+   * Constructs a new SystemStateEdit object.
+   *
+   * @param \Drupal\Core\State\StateInterface $state
+   *   The state service.
+   */
+  public function __construct(StateInterface $state) {
+    $this->state = $state;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('state')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'devel_state_system_edit_form';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state, $state_name = '') {
+    // Get the old value
+    $old_value = $this->state->get($state_name);
+
+    if (!isset($old_value)) {
+      drupal_set_message(t('State @name does not exist in the system.', array('@name' => $state_name)), 'warning');
+      return;
+    }
+
+    // Only simple structures are allowed to be edited.
+    $disabled = !$this->checkObject($old_value);
+
+    if ($disabled) {
+      drupal_set_message(t('Only simple structures are allowed to be edited. State @name contains objects.', array('@name' => $state_name)), 'warning');
+    }
+
+    // First we will show the user the content of the variable about to be edited.
+    $form['value'] = array(
+      '#type' => 'item',
+      '#title' => $this->t('Current value for %name', array('%name' => $state_name)),
+      '#markup' => kprint_r($old_value, TRUE),
+    );
+
+    $transport = 'plain';
+
+    if (!$disabled && is_array($old_value)) {
+      try {
+        $old_value = Yaml::encode($old_value);
+        $transport = 'yaml';
+      }
+      catch (InvalidDataTypeException $e) {
+        drupal_set_message(t('Invalid data detected for @name : %error', array('@name' => $state_name, '%error' => $e->getMessage())), 'error');
+        return;
+      }
+    }
+
+    // Store in the form the name of the state variable
+    $form['state_name'] = array(
+      '#type' => 'value',
+      '#value' => $state_name,
+    );
+    // Set the transport format for the new value. Values:
+    //  - plain
+    //  - yaml
+    $form['transport'] = array(
+      '#type' => 'value',
+      '#value' => $transport,
+    );
+
+    $form['new_value'] = array(
+      '#type' => 'textarea',
+      '#title' => $this->t('New value'),
+      '#default_value' => $disabled ? '' : $old_value,
+      '#disabled' => $disabled,
+      '#rows' => 15,
+    );
+
+    $form['actions'] = array('#type' => 'actions');
+    $form['actions']['submit'] = array(
+      '#type' => 'submit',
+      '#value' => $this->t('Save'),
+      '#disabled' => $disabled,
+    );
+    $form['actions']['cancel'] = array(
+      '#type' => 'link',
+      '#title' => $this->t('Cancel'),
+      '#url' => Url::fromRoute('devel.state_system_page')
+    );
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function validateForm(array &$form, FormStateInterface $form_state) {
+    $values = $form_state->getValues();
+
+    if ($values['transport'] == 'yaml') {
+      // try to parse the new provided value
+      try {
+        $parsed_value = Yaml::decode($values['new_value']);
+        $form_state->setValue('parsed_value', $parsed_value);
+      }
+      catch (InvalidDataTypeException $e) {
+        $form_state->setErrorByName('new_value', $this->t('Invalid input: %error', array('%error' => $e->getMessage())));
+      }
+    }
+    else {
+      $form_state->setValue('parsed_value', $values['new_value']);
+    }
+
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    // Save the state
+    $values = $form_state->getValues();
+    $this->state->set($values['state_name'], $values['parsed_value']);
+
+    $form_state->setRedirectUrl(Url::fromRoute('devel.state_system_page'));
+
+    drupal_set_message($this->t('Variable %variable was successfully edited.', array('%variable' => $values['state_name'])));
+    $this->logger('devel')->info('Variable %variable was successfully edited.', array('%variable' => $values['state_name']));
+  }
+
+  /**
+   * Helper function to determine if a variable is or contains an object.
+   *
+   * @param $data
+   *   Input data to check
+   *
+   * @return bool
+   *   TRUE if the variable is not an object and does not contain one.
+   */
+  protected function checkObject($data) {
+    if (is_object($data)) {
+      return FALSE;
+    }
+    if (is_array($data)) {
+      // If the current object is an array, then check recursively.
+      foreach ($data as $value) {
+        // If there is an object the whole container is "contaminated"
+        if (!$this->checkObject($value)) {
+          return FALSE;
+        }
+      }
+    }
+
+    // All checks pass
+    return TRUE;
+  }
+
+}
diff --git a/modules/devel/src/Plugin/Block/DevelExecutePHP.php b/modules/devel/src/Plugin/Block/DevelExecutePHP.php
new file mode 100644
index 0000000..9c3a9f8
--- /dev/null
+++ b/modules/devel/src/Plugin/Block/DevelExecutePHP.php
@@ -0,0 +1,38 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Plugin\Block\DevelExecutePHP.
+ */
+
+namespace Drupal\devel\Plugin\Block;
+
+use Drupal\Core\Access\AccessResult;
+use Drupal\Core\Block\BlockBase;
+use Drupal\Core\Session\AccountInterface;
+
+/**
+ * Provides a block for executing PHP code.
+ *
+ * @Block(
+ *   id = "devel_execute_php",
+ *   admin_label = @Translation("Execute PHP")
+ * )
+ */
+class DevelExecutePHP extends BlockBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function blockAccess(AccountInterface $account) {
+    return AccessResult::allowedIfHasPermission($account, 'execute php code');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function build() {
+    return \Drupal::formBuilder()->getForm('Drupal\devel\Form\ExecutePHP');
+  }
+
+}
diff --git a/modules/devel/src/Plugin/Block/SwitchUserBlock.php b/modules/devel/src/Plugin/Block/SwitchUserBlock.php
new file mode 100644
index 0000000..9b9fef7
--- /dev/null
+++ b/modules/devel/src/Plugin/Block/SwitchUserBlock.php
@@ -0,0 +1,286 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Plugin\Block\SwitchUserBlock.
+ */
+
+namespace Drupal\devel\Plugin\Block;
+
+use Drupal\Component\Utility\SafeMarkup;
+use Drupal\Core\Access\AccessResult;
+use Drupal\Core\Block\BlockBase;
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\Core\Form\FormBuilderInterface;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
+use Drupal\Core\Routing\RedirectDestinationTrait;
+use Drupal\Core\Session\AccountInterface;
+use Drupal\Core\Session\AnonymousUserSession;
+use Drupal\Core\Url;
+use Drupal\user\Entity\Role;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides a block for switching users.
+ *
+ * @Block(
+ *   id = "devel_switch_user",
+ *   admin_label = @Translation("Switch user"),
+ *   category = @Translation("Forms")
+ * )
+ */
+class SwitchUserBlock extends BlockBase implements ContainerFactoryPluginInterface {
+
+  use RedirectDestinationTrait;
+
+  /**
+   * The FormBuilder object.
+   *
+   * @var \Drupal\Core\Form\FormBuilderInterface
+   */
+  protected $formBuilder;
+
+  /**
+   * The Current User object.
+   *
+   * @var \Drupal\Core\Session\AccountInterface
+   */
+  protected $currentUser;
+
+  /**
+   * The user storage.
+   *
+   * @var \Drupal\Core\Entity\EntityStorageInterface
+   */
+  protected $userStorage;
+
+  /**
+   * Constructs a new SwitchUserBlock object.
+   *
+   * @param array $configuration
+   *   A configuration array containing information about the plugin instance.
+   * @param string $plugin_id
+   *   The plugin_id for the plugin instance.
+   * @param mixed $plugin_definition
+   *   The plugin implementation definition.
+   * @param \Drupal\Core\Session\AccountInterface $current_user
+   *   Current user.
+   * @param \Drupal\Core\Entity\EntityStorageInterface $user_storage
+   *   The user storage.
+   * @param \Drupal\Core\Form\FormBuilderInterface $form_builder
+   *   The form builder service.
+   */
+  public function __construct(array $configuration, $plugin_id, $plugin_definition, AccountInterface $current_user, EntityStorageInterface $user_storage, FormBuilderInterface $form_builder) {
+    parent::__construct($configuration, $plugin_id, $plugin_definition);
+    $this->formBuilder = $form_builder;
+    $this->currentUser = $current_user;
+    $this->userStorage = $user_storage;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
+    return new static(
+      $configuration,
+      $plugin_id,
+      $plugin_definition,
+      $container->get('current_user'),
+      $container->get('entity.manager')->getStorage('user'),
+      $container->get('form_builder')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function defaultConfiguration() {
+    return [
+      'list_size' => 12,
+      'include_anon' => FALSE,
+      'show_form' => TRUE,
+    ];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function blockAccess(AccountInterface $account) {
+    return AccessResult::allowedIfHasPermission($account, 'switch users');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function blockForm($form, FormStateInterface $form_state) {
+    $anononymous = new AnonymousUserSession();
+    $form['list_size'] = [
+      '#type' => 'number',
+      '#title' => $this->t('Number of users to display in the list'),
+      '#default_value' => $this->configuration['list_size'],
+      '#min' => 1,
+      '#max' => 50,
+    ];
+    $form['include_anon'] = [
+      '#type' => 'checkbox',
+      '#title' => $this->t('Include %anonymous', ['%anonymous' => $anononymous->getAccountName()]),
+      '#default_value' => $this->configuration['include_anon'],
+    ];
+    $form['show_form'] = [
+      '#type' => 'checkbox',
+      '#title' => $this->t('Allow entering any user name'),
+      '#default_value' => $this->configuration['show_form'],
+    ];
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function blockSubmit($form, FormStateInterface $form_state) {
+    $this->configuration['list_size'] = $form_state->getValue('list_size');
+    $this->configuration['include_anon'] = $form_state->getValue('include_anon');
+    $this->configuration['show_form'] = $form_state->getValue('show_form');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getCacheMaxAge() {
+    return 0;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function build() {
+    $build = [];
+    if ($accounts = $this->getUsers()) {
+      $build['devel_links'] = $this->buildUserList($accounts);
+
+      if ($this->configuration['show_form']) {
+        $build['devel_form'] = $this->formBuilder->getForm('\Drupal\devel\Form\SwitchUserForm');
+      }
+    }
+
+    return $build;
+  }
+
+  /**
+   * Provides the list of accounts that can be used for the user switch.
+   *
+   * Inactive users are omitted from all of the following db selects. Users
+   * with 'switch users' permission and anonymous user if include_anon property
+   * is set to TRUE, are prioritized.
+   *
+   * @return \Drupal\core\Session\AccountInterface[]
+   *   List of accounts to be used for the switch.
+   */
+  protected function getUsers() {
+    $list_size = $this->configuration['list_size'];
+    $include_anonymous = $this->configuration['include_anon'];
+
+    $list_size = $include_anonymous ? $list_size - 1 : $list_size;
+
+    // Users with 'switch users' permission are prioritized so
+    // we try to load first users with this permission.
+    $query = $this->userStorage->getQuery()
+      ->condition('uid', 0, '>')
+      ->condition('status', 0, '>')
+      ->sort('access', 'DESC')
+      ->range(0, $list_size);
+
+    $roles = user_roles(TRUE, 'switch users');
+
+    if (!isset($roles[Role::AUTHENTICATED_ID])) {
+      $query->condition('roles', array_keys($roles), 'IN');
+    }
+
+    $user_ids = $query->execute();
+
+    // If we don't have enough users with 'switch users' permission, add
+    // uids until we hit $list_size.
+    if (count($user_ids) < $list_size) {
+      $users = $this->userStorage->getQuery()
+        ->condition('uid', 0, '>')
+        ->condition('status', 0, '>')
+        ->condition('uid', array_keys($user_ids), 'NOT IN')
+        ->sort('access', 'DESC')
+        ->range(0, $list_size - count($user_ids))
+        ->execute();
+
+      $user_ids += $users;
+    }
+
+    $accounts = $this->userStorage->loadMultiple($user_ids);
+
+    if ($include_anonymous) {
+      $anonymous = new AnonymousUserSession();
+      $accounts[$anonymous->id()] = $anonymous;
+    }
+
+    uasort($accounts, 'static::sortUserList');
+
+    return $accounts;
+  }
+
+  /**
+   * Builds the user listing as renderable array.
+   *
+   * @param \Drupal\core\Session\AccountInterface[] $accounts
+   *   The accounts to be rendered in the list.
+   *
+   * @return array
+   *   A renderable array.
+   */
+  protected function buildUserList(array $accounts) {
+    $links = [];
+
+    foreach ($accounts as $account) {
+      $links[$account->id()] = [
+        'title' => $account->getDisplayName(),
+        'url' => Url::fromRoute('devel.switch', ['name' => $account->getAccountName()]),
+        'query' => $this->getDestinationArray(),
+        'attributes' => [
+          'title' => $account->hasPermission('switch users') ? $this->t('This user can switch back.') : $this->t('Caution: this user will be unable to switch back.'),
+        ],
+      ];
+
+      if ($account->isAnonymous()) {
+        $links[$account->id()]['url'] = Url::fromRoute('user.logout');
+      }
+
+      if ($this->currentUser->id() === $account->id()) {
+        $links[$account->id()]['title'] = SafeMarkup::format('<strong>%user</strong>', ['%user' => $account->getDisplayName()]);
+      }
+    }
+
+    return [
+      '#theme' => 'links',
+      '#links' => $links,
+      '#attached' => ['library' => ['devel/devel']],
+    ];
+  }
+
+  /**
+   * Helper callback for uasort() to sort accounts by last access.
+   */
+  public static function sortUserList(AccountInterface $a, AccountInterface $b) {
+    $a_access = (int) $a->getLastAccessedTime();
+    $b_access = (int) $b->getLastAccessedTime();
+
+    if ($a_access === $b_access) {
+      return 0;
+    }
+
+    // User never access to site.
+    if ($a_access === 0) {
+      return 1;
+    }
+
+    return ($a_access > $b_access) ? -1 : 1;
+  }
+
+}
diff --git a/modules/devel/src/Plugin/Derivative/DevelLocalTask.php b/modules/devel/src/Plugin/Derivative/DevelLocalTask.php
new file mode 100644
index 0000000..1eb1f63
--- /dev/null
+++ b/modules/devel/src/Plugin/Derivative/DevelLocalTask.php
@@ -0,0 +1,101 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Plugin\Derivative\DevelLocalTask.
+ */
+
+namespace Drupal\devel\Plugin\Derivative;
+
+use Drupal\Component\Plugin\Derivative\DeriverBase;
+use Drupal\Core\Entity\EntityManagerInterface;
+use Drupal\Core\Plugin\Discovery\ContainerDeriverInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\Core\StringTranslation\TranslationInterface;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Provides local task definitions for all entity bundles.
+ */
+class DevelLocalTask extends DeriverBase implements ContainerDeriverInterface {
+
+  use StringTranslationTrait;
+
+  /**
+   * The entity manager
+   *
+   * @var \Drupal\Core\Entity\EntityManagerInterface
+   */
+  protected $entityManager;
+
+  /**
+   * Creates an DevelLocalTask object.
+   *
+   * @param \Drupal\Core\Entity\EntityManagerInterface $entity_manager
+   *   The entity manager.
+   * @param \Drupal\Core\StringTranslation\TranslationInterface $string_translation
+   *   The translation manager.
+   */
+  public function __construct(EntityManagerInterface $entity_manager, TranslationInterface $string_translation) {
+    $this->entityManager = $entity_manager;
+    $this->stringTranslation = $string_translation;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container, $base_plugin_id) {
+    return new static(
+      $container->get('entity.manager'),
+      $container->get('string_translation')
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getDerivativeDefinitions($base_plugin_definition) {
+    $this->derivatives = array();
+
+    foreach ($this->entityManager->getDefinitions() as $entity_type_id => $entity_type) {
+
+      $has_edit_path = $entity_type->hasLinkTemplate('devel-load');
+      $has_canonical_path = $entity_type->hasLinkTemplate('devel-render');
+
+      if ($has_edit_path || $has_canonical_path) {
+
+        $this->derivatives["$entity_type_id.devel_tab"] = array(
+          'route_name' => "entity.$entity_type_id." . ($has_edit_path ? 'devel_load' : 'devel_render'),
+          'title' => $this->t('Devel'),
+          'base_route' => "entity.$entity_type_id." . ($has_canonical_path ? "canonical" : "edit_form"),
+          'weight' => 100,
+        );
+
+        if ($has_canonical_path) {
+          $this->derivatives["$entity_type_id.devel_render_tab"] = array(
+            'route_name' => "entity.$entity_type_id.devel_render",
+            'weight' => 100,
+            'title' => $this->t('Render'),
+            'parent_id' => "devel.entities:$entity_type_id.devel_tab",
+          );
+        }
+
+        if ($has_edit_path) {
+          $this->derivatives["$entity_type_id.devel_load_tab"] = array(
+            'route_name' => "entity.$entity_type_id.devel_load",
+            'weight' => 100,
+            'title' => $this->t('Load'),
+            'parent_id' => "devel.entities:$entity_type_id.devel_tab",
+          );
+        }
+      }
+    }
+
+    foreach ($this->derivatives as &$entry) {
+      $entry += $base_plugin_definition;
+    }
+
+    return $this->derivatives;
+  }
+
+}
diff --git a/modules/devel/src/Plugin/Mail/DevelMailLog.php b/modules/devel/src/Plugin/Mail/DevelMailLog.php
new file mode 100644
index 0000000..d29ec7f
--- /dev/null
+++ b/modules/devel/src/Plugin/Mail/DevelMailLog.php
@@ -0,0 +1,98 @@
+<?php
+/**
+ * @file
+ * MailSystemInterface for logging mails to the filesystem.
+ *
+ * To enable, save a variable in settings.php (or otherwise) whose value
+ * can be as simple as:
+ *
+ * $config['system.mail']['interface']['default'] = 'devel_mail_log';
+ *
+ * Saves to temporary://devel-mails dir by default. Can be changed using
+ * 'debug_mail_directory' config setting. Filename pattern controlled by
+ * 'debug_mail_file_format' config setting.
+ * NOTE: Config settings are currently broken: see
+ * https://www.drupal.org/node/2385971.
+ */
+
+namespace Drupal\devel\Plugin\Mail;
+
+use Drupal\Component\Utility\Unicode;
+use Drupal\Core\Mail\Plugin\Mail\PhpMail;
+use Drupal\Core\Site\Settings;
+use Exception;
+
+/**
+ * Defines a mail backend that saves emails as temporary files.
+ *
+ * @Mail(
+ *   id = "devel_mail_log",
+ *   label = @Translation("Devel Logging Mailer"),
+ *   description = @Translation("Outputs the message as a file in the temporary directory.")
+ * )
+ */
+class DevelMailLog extends PhpMail {
+
+  public function composeMessage($message) {
+    $mimeheaders = array();
+    $message['headers']['To'] = $message['to'];
+    foreach ($message['headers'] as $name => $value) {
+      $mimeheaders[] = $name . ': ' . Unicode::mimeHeaderEncode($value);
+    }
+
+    $line_endings = Settings::get('mail_line_endings', PHP_EOL);
+    $output = join($line_endings, $mimeheaders) . $line_endings;
+    // 'Subject:' is a mail header and should not be translated.
+    $output .= 'Subject: ' . $message['subject'] . $line_endings;
+    // Blank line to separate headers from body.
+    $output .= $line_endings;
+    $output .= preg_replace('@\r?\n@', $line_endings, $message['body']);
+    return $output;
+  }
+
+  public function getFileName($message) {
+    $output_directory = $this->getOutputDirectory();
+    $this->makeOutputDirectory($output_directory);
+    $output_file_format = \Drupal::config('devel.settings')->get('debug_mail_file_format');
+
+    $tokens = array(
+      '%to' => $message['to'],
+      '%subject' => $message['subject'],
+      '%datetime' => date('y-m-d_his'),
+    );
+    return $output_directory . '/' . $this->dirify(str_replace(array_keys($tokens), array_values($tokens), $output_file_format));
+  }
+
+  private function dirify($string) {
+    return preg_replace('/[^a-zA-Z0-9_\-\.@]/', '_', $string);
+  }
+
+  /**
+   * Save an e-mail message to a file, using Drupal variables and default settings.
+   *
+   * @see http://php.net/manual/en/function.mail.php
+   * @see drupal_mail()
+   *
+   * @param array $message
+   *   A message array, as described in hook_mail_alter().
+   * @return bool|int TRUE if the mail was successfully accepted, otherwise FALSE.
+   * TRUE if the mail was successfully accepted, otherwise FALSE.
+   */
+  public function mail(array $message) {
+    $output = $this->composeMessage($message);
+    $output_file = $this->getFileName($message);
+
+    return file_put_contents($output_file, $output);
+  }
+
+  protected function makeOutputDirectory($output_directory) {
+    if (!file_prepare_directory($output_directory, FILE_CREATE_DIRECTORY)) {
+      throw new Exception("Unable to continue sending mail, $output_directory is not writable");
+    }
+  }
+
+  public function getOutputDirectory() {
+    return \Drupal::config('devel.settings')->get('debug_mail_directory');
+  }
+
+}
diff --git a/modules/devel/src/Routing/RouteSubscriber.php b/modules/devel/src/Routing/RouteSubscriber.php
new file mode 100644
index 0000000..e3778e5
--- /dev/null
+++ b/modules/devel/src/Routing/RouteSubscriber.php
@@ -0,0 +1,96 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Routing\RouteSubscriber.
+ */
+
+namespace Drupal\devel\Routing;
+
+use Drupal\Core\Entity\EntityManagerInterface;
+use Drupal\Core\Routing\RouteSubscriberBase;
+use Drupal\Core\Routing\RoutingEvents;
+use Symfony\Component\Routing\Route;
+use Symfony\Component\Routing\RouteCollection;
+
+/**
+ * Subscriber for Devel routes.
+ */
+class RouteSubscriber extends RouteSubscriberBase {
+
+  /**
+   * The entity manager service.
+   *
+   * @var \Drupal\Core\Entity\EntityManagerInterface
+   */
+  protected $entityManager;
+
+  /**
+   * Constructs a new RouteSubscriber object.
+   *
+   * @param \Drupal\Core\Entity\EntityManagerInterface $entity_manager
+   *   The entity type manager.
+   */
+  public function __construct(EntityManagerInterface $entity_manager) {
+    $this->entityManager = $entity_manager;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function alterRoutes(RouteCollection $collection) {
+    foreach ($this->entityManager->getDefinitions() as $entity_type_id => $entity_type) {
+
+      if ($entity_type->hasLinkTemplate('devel-load') || $entity_type->hasLinkTemplate('devel-render')) {
+
+        $options = array(
+          '_admin_route' => TRUE,
+          '_devel_entity_type_id' => $entity_type_id,
+          'parameters' => array(
+            $entity_type_id => array(
+              'type' => 'entity:' . $entity_type_id,
+            ),
+          ),
+        );
+
+        if ($devel_load = $entity_type->getLinkTemplate('devel-load')) {
+          $route = new Route(
+            $devel_load,
+            array(
+              '_controller' => '\Drupal\devel\Controller\DevelController::entityLoad',
+              '_title' => 'Devel Load',
+            ),
+            array('_permission' => 'access devel information'),
+            $options
+          );
+
+          $collection->add("entity.$entity_type_id.devel_load", $route);
+        }
+
+        if ($devel_render = $entity_type->getLinkTemplate('devel-render')) {
+          $route = new Route(
+            $devel_render,
+            array(
+              '_controller' => '\Drupal\devel\Controller\DevelController::entityRender',
+              '_title' => 'Devel Render',
+            ),
+            array('_permission' => 'access devel information'),
+            $options
+          );
+
+          $collection->add("entity.$entity_type_id.devel_render", $route);
+        }
+      }
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function getSubscribedEvents() {
+    $events = parent::getSubscribedEvents();
+    $events[RoutingEvents::ALTER] = array('onAlterRoutes', 100);
+    return $events;
+  }
+
+}
diff --git a/modules/devel/src/Tests/DevelControllerTest.php b/modules/devel/src/Tests/DevelControllerTest.php
new file mode 100644
index 0000000..38202cc
--- /dev/null
+++ b/modules/devel/src/Tests/DevelControllerTest.php
@@ -0,0 +1,116 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Tests\DevelControllerTest.
+ */
+
+namespace Drupal\devel\Tests;
+
+use Drupal\simpletest\WebTestBase;
+
+/**
+ * Tests Devel controller.
+ *
+ * @group devel
+ */
+class DevelControllerTest extends WebTestBase {
+
+  /**
+   * Modules to enable.
+   *
+   * @var array
+   */
+  public static $modules = array('devel', 'node', 'entity_test', 'devel_entity_test', 'block');
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function setUp() {
+    parent::setUp();
+
+    // Create a test entity.
+    $random_label = $this->randomMachineName();
+    $data = array('type' => 'entity_test', 'name' => $random_label);
+    $this->entity = entity_create('entity_test', $data);
+    $this->entity->save();
+
+    // Create a test entity with only canonical route.
+    $random_label = $this->randomMachineName();
+    $data = array('type' => 'devel_entity_test_canonical', 'name' => $random_label);
+    $this->entity_canonical = entity_create('devel_entity_test_canonical', $data);
+    $this->entity_canonical->save();
+
+    // Create a test entity with only edit route.
+    $random_label = $this->randomMachineName();
+    $data = array('type' => 'devel_entity_test_edit', 'name' => $random_label);
+    $this->entity_edit = entity_create('devel_entity_test_edit', $data);
+    $this->entity_edit->save();
+
+    // Create a test entity with no routes.
+    $random_label = $this->randomMachineName();
+    $data = array('type' => 'devel_entity_test_no_links', 'name' => $random_label);
+    $this->entity_no_links = entity_create('devel_entity_test_no_links', $data);
+    $this->entity_no_links->save();
+
+    $this->drupalPlaceBlock('local_tasks_block');
+
+    $web_user = $this->drupalCreateUser(array(
+      'view test entity',
+      'administer entity_test content',
+      'access devel information',
+    ));
+    $this->drupalLogin($web_user);
+  }
+
+  function testRouteGeneration() {
+    // @TODO remove after https://www.drupal.org/node/2431263 is solved.
+    $this->container->get('module_installer')->install(array('kint'));
+
+    // Test Devel load and render routes for entities with both route
+    // definitions.
+    $this->drupalGet('entity_test/' . $this->entity->id());
+    $this->assertText('Devel', 'Devel tab is present');
+    $this->drupalGet('entity_test/manage/' . $this->entity->id() . '/edit/devel');
+    $this->assertResponse(200);
+    $this->assertText('Load', 'Devel load tab is present');
+    $this->assertText('Render', 'Devel load tab is present');
+    $this->assertLinkByHref('entity_test/' . $this->entity->id() . '/devel/render');
+    $this->drupalGet('entity_test/' . $this->entity->id() . '/devel/render');
+    $this->assertResponse(200);
+
+    // Test Devel load and render routes for entities with only canonical route
+    // definitions.
+    $this->drupalGet('devel_entity_test_canonical/' . $this->entity_canonical->id());
+    $this->assertText('Devel', 'Devel tab is present');
+    $this->assertNoLinkByHref('devel_entity_test_canonical/manage/' . $this->entity_canonical->id() . '/devel');
+    $this->assertLinkByHref('devel_entity_test_canonical/' . $this->entity_canonical->id() . '/devel/render');
+    $this->drupalGet('devel_entity_test_canonical/manage/' . $this->entity_canonical->id() . '/devel');
+    $this->assertResponse(404);
+    $this->drupalGet('devel_entity_test_canonical/' . $this->entity_canonical->id() . '/devel/render');
+    $this->assertResponse(200);
+
+    // Test Devel load and render routes for entities with only edit route
+    // definitions.
+    $this->drupalGet('devel_entity_test_edit/manage/' . $this->entity_edit->id());
+    $this->assertText('Devel', 'Devel tab is present');
+    $this->assertLinkByHref('devel_entity_test_edit/manage/' . $this->entity_edit->id() . '/devel');
+    $this->assertNoLinkByHref('devel_entity_test_edit/' . $this->entity_edit->id() . '/devel/render');
+    $this->drupalGet('devel_entity_test_edit/manage/' . $this->entity_edit->id() . '/devel');
+    $this->assertResponse(200);
+    $this->drupalGet('devel_entity_test_edit/' . $this->entity_edit->id() . '/devel/render');
+    $this->assertResponse(404);
+
+    // Test Devel load and render routes for entities with no route
+    // definitions.
+    $this->drupalGet('devel_entity_test_no_links/' . $this->entity_edit->id());
+    $this->assertNoText('Devel', 'Devel tab is not present');
+    $this->assertNoLinkByHref('devel_entity_test_no_links/manage/' . $this->entity_no_links->id() . '/devel');
+    $this->assertNoLinkByHref('devel_entity_test_no_links/' . $this->entity_no_links->id() . '/devel/render');
+    $this->drupalGet('devel_entity_test_no_links/manage/' . $this->entity_no_links->id() . '/devel');
+    $this->assertResponse(404);
+    $this->drupalGet('devel_entity_test_no_links/' . $this->entity_no_links->id() . '/devel/render');
+    $this->assertResponse(404);
+  }
+
+}
diff --git a/modules/devel/src/Tests/DevelCsrfLinksTest.php b/modules/devel/src/Tests/DevelCsrfLinksTest.php
new file mode 100644
index 0000000..980058a
--- /dev/null
+++ b/modules/devel/src/Tests/DevelCsrfLinksTest.php
@@ -0,0 +1,81 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Tests\DevelCsrfLinksTest.
+ */
+
+namespace Drupal\devel\Tests;
+
+use Drupal\simpletest\WebTestBase;
+
+/**
+ * Tests CSFR protected links.
+ *
+ * @group devel
+ */
+class DevelCsrfLinksTest extends WebTestBase {
+
+  /**
+   * Modules to enable.
+   *
+   * @var array
+   */
+  public static $modules = array('devel', 'block');
+
+  /**
+   * The user for tests.
+   *
+   * @var \Drupal\user\UserInterface
+   */
+  protected $develUser;
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function setUp() {
+    parent::setUp();
+    // CSFR protected links currently appears only in the devel menu.
+    // Place the devel menu block so we can ensure that these link works
+    // properly.
+    $this->drupalPlaceBlock('system_menu_block:devel');
+
+    $this->develUser = $this->drupalCreateUser(['access devel information', 'administer site configuration']);
+  }
+
+  /**
+   * Tests CSFR protected links.
+   */
+  public function testCsrfProtection() {
+    $this->drupalLogin($this->develUser);
+
+    // Ensure CSRF link are not accessible directly.
+    $this->drupalGet('devel/run-cron');
+    $this->assertResponse(403);
+    $this->drupalGet('devel/cache/clear');
+    $this->assertResponse(403);
+
+    // Ensure clear cache link works propery.
+    $this->assertLink('Cache clear');
+    $this->clickLink('Cache clear');
+    $this->assertText('Cache cleared.');
+
+    // Ensure run cron link works propery.
+    $this->assertLink('Run cron');
+    $this->clickLink('Run cron');
+    $this->assertText('Cron ran successfully.');
+
+    // Ensure CSRF protected links work properly after change session.
+    $this->drupalLogout();
+    $this->drupalLogin($this->develUser);
+
+    $this->assertLink('Cache clear');
+    $this->clickLink('Cache clear');
+    $this->assertText('Cache cleared.');
+
+    $this->assertLink('Run cron');
+    $this->clickLink('Run cron');
+    $this->assertText('Cron ran successfully.');
+  }
+
+}
diff --git a/modules/devel/src/Tests/DevelMailTest.php b/modules/devel/src/Tests/DevelMailTest.php
new file mode 100644
index 0000000..18192d4
--- /dev/null
+++ b/modules/devel/src/Tests/DevelMailTest.php
@@ -0,0 +1,53 @@
+<?php
+
+/**
+ * @file
+ * Tests for devel module.
+ */
+
+namespace Drupal\devel\Tests;
+
+use Drupal\devel\Plugin\Mail\DevelMailLog;
+use Drupal\simpletest\WebTestBase;
+
+/**
+ * Tests sending mails with debug interface.
+ *
+ * @group devel
+ */
+class DevelMailTest extends WebTestBase {
+  /**
+   * Modules to enable.
+   *
+   * @var array
+   */
+  public static $modules = array('devel');
+  protected $profile = 'testing';
+
+  /**
+   * Test mail logging functionality.
+   */
+  public function testDevelMail() {
+    $message = array();
+    $message['to'] = 'drupal@example.com';
+    $message['subject'] = 'Test mail';
+    $message['headers'] = array(
+      'From' => 'postmaster@example.com',
+      'X-stupid' => 'dumb',
+    );
+    $message['body'] = "I am the body of this message";
+    $d = new DevelMailLog();
+
+    $filename = $d->getFileName($message);
+    $content = $d->composeMessage($message);
+    $expected_filename = $d->getOutputDirectory() . '/drupal@example.com-Test_mail-' . date('y-m-d_his') . '.mail.txt';
+    $this->assertEqual($filename, $expected_filename);
+    $content = str_replace("\r", '', $content);
+    $this->assertEqual($content, 'From: postmaster@example.com
+X-stupid: dumb
+To: drupal@example.com
+Subject: Test mail
+
+I am the body of this message');
+  }
+}
diff --git a/modules/devel/src/Tests/DevelRebuildMenusTest.php b/modules/devel/src/Tests/DevelRebuildMenusTest.php
new file mode 100644
index 0000000..ad5d51e
--- /dev/null
+++ b/modules/devel/src/Tests/DevelRebuildMenusTest.php
@@ -0,0 +1,46 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Tests\DevelRebuildMenusTest.
+ */
+
+namespace Drupal\devel\Tests;
+
+use Drupal\simpletest\WebTestBase;
+
+/**
+ * Tests routes rebuild.
+ *
+ * @group devel
+ */
+class DevelRebuildMenusTest extends WebTestBase {
+
+  /**
+   * Modules to enable.
+   *
+   * @var array
+   */
+  public static $modules = array('devel');
+
+  /**
+   * Set up test.
+   */
+  protected function setUp() {
+    parent::setUp();
+
+    $web_user = $this->drupalCreateUser(array('administer site configuration'));
+    $this->drupalLogin($web_user);
+  }
+
+  /**
+   * Test routes rebuild.
+   */
+  public function testDevelRebuildMenus() {
+    $this->drupalGet('devel/menu/reset');
+    $this->assertResponse(200);
+    $this->drupalPostForm('devel/menu/reset', array(), t('Rebuild'));
+    $this->assertText(t('The menu router has been rebuilt.'));
+  }
+
+}
diff --git a/modules/devel/src/Tests/DevelReinstallTest.php b/modules/devel/src/Tests/DevelReinstallTest.php
new file mode 100644
index 0000000..69af943
--- /dev/null
+++ b/modules/devel/src/Tests/DevelReinstallTest.php
@@ -0,0 +1,65 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Tests\DevelReinstallTest.
+ */
+
+namespace Drupal\devel\Tests;
+
+use Drupal\simpletest\WebTestBase;
+
+/**
+ * Tests reinstall modules.
+ *
+ * @group devel
+ */
+class DevelReinstallTest extends WebTestBase {
+
+  /**
+   * Modules to enable.
+   *
+   * @var array
+   */
+  public static $modules = array('devel');
+
+  /**
+   * The profile to install as a basis for testing.
+   *
+   * @var string
+   */
+  protected $profile = 'minimal';
+
+  /**
+   * Set up test.
+   */
+  protected function setUp() {
+    parent::setUp();
+
+    $web_user = $this->drupalCreateUser(array('administer site configuration'));
+    $this->drupalLogin($web_user);
+  }
+
+  /**
+   * Reinstall modules.
+   */
+  public function testDevelReinstallModules() {
+    // Minimal profile enables only dblog, block and node.
+    $modules = array('dblog', 'block');
+
+    // Needed for compare correctly the message.
+    sort($modules);
+
+    $this->drupalGet('devel/reinstall');
+
+    // Prepare field data in an associative array
+    $edit = array();
+    foreach ($modules as $module) {
+      $edit["reinstall[$module]"] = TRUE;
+    }
+
+    $this->drupalPostForm('devel/reinstall', $edit, t('Reinstall'));
+    $this->assertText(t('Uninstalled and installed: @names.', array('@names' => implode(', ', $modules))));
+  }
+
+}
diff --git a/modules/devel/src/Tests/DevelSilentTest.php b/modules/devel/src/Tests/DevelSilentTest.php
new file mode 100644
index 0000000..6b98588
--- /dev/null
+++ b/modules/devel/src/Tests/DevelSilentTest.php
@@ -0,0 +1,95 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Tests\DevelSilentTest.
+ */
+
+namespace Drupal\devel\Tests;
+
+use Drupal\Component\Serialization\Json;
+use Drupal\file\Entity\File;
+use Drupal\image\Entity\ImageStyle;
+use Drupal\simpletest\WebTestBase;
+
+/**
+ * Tests devel silent.
+ *
+ * @group devel
+ */
+class DevelSilentTest extends WebTestBase {
+
+  /**
+   * Modules to enable.
+   *
+   * @var array
+   */
+  public static $modules = ['devel', 'devel_test', 'image', 'file'];
+
+  /**
+   * Tests devel silent.
+   */
+  public function testDevelSilent() {
+    // TODO Quickfix for dynamic_page_cache, enabled by default in the testing
+    // profile.
+    $this->container->get('module_installer')->uninstall(['dynamic_page_cache']);
+
+    $web_user = $this->drupalCreateUser([
+      'administer site configuration',
+      'access devel information',
+      'administer software updates'
+    ]);
+    $this->drupalLogin($web_user);
+
+    // Ensure that devel is disabled if response come from routes that are
+    // declared with '_devel_silent' requirement.
+    $this->drupalGet('devel-silent/route-requirement');
+    $this->assertText(t('"_devel_silent" route requirement forces devel to be inactive.'));
+
+    // Ensure that devel doesn't interfere with non html response (e.g JsonResponse).
+    $response = $this->drupalGet('devel-silent/json');
+    $this->assertResponse(200);
+    $expected = ['data' => 'Devel is active only on HtmlResponse.'];
+    $this->assertIdentical(Json::decode($response), $expected);
+
+    // Ensure that devel doesn't interfere with private image style creation
+    // and with BinaryFileResponse response.
+    $style = ImageStyle::create([
+      'name' => 'zyx',
+      'label' => $this->randomString(),
+    ]);
+    $style->save();
+
+    $image = current($this->drupalGetTestFiles('image'));
+    $image_uri = file_unmanaged_copy($image->uri, 'private://');
+
+    // Let the devel_test module know about this file, so it can claim
+    // ownership in hook_file_download().
+    \Drupal::state()->set('devel.test_file_download', $image_uri);
+
+    $this->drupalGet($style->buildUrl($image_uri));
+    $this->assertResponse(200);
+    $this->assertRaw(file_get_contents($style->buildUri($image_uri)), 'URL returns expected file.');
+
+    // Ensure that devel doesn't interfere with private files and with
+    // BinaryFileResponse response.
+    $file = File::create([
+      'uid' => $web_user->id(),
+      'filename' => 'drupal.txt',
+      'uri' => 'private://devel.txt',
+      'filemime' => 'text/plain',
+      'status' => FILE_STATUS_PERMANENT,
+    ]);
+    file_put_contents($file->getFileUri(), 'Hello world!');
+    $file->save();
+
+    // Let the image_module_test module know about this file, so it can claim
+    // ownership in hook_file_download().
+    \Drupal::state()->set('devel.test_file_download', $file->getFileUri());
+
+    $this->drupalGet($file->url());
+    $this->assertResponse(200);
+    $this->assertRaw(file_get_contents($file->getFileUri()), 'URL returns expected file.');
+  }
+
+}
diff --git a/modules/devel/src/Tests/DevelSwitchUserTest.php b/modules/devel/src/Tests/DevelSwitchUserTest.php
new file mode 100644
index 0000000..cc2f512
--- /dev/null
+++ b/modules/devel/src/Tests/DevelSwitchUserTest.php
@@ -0,0 +1,297 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel\Tests\DevelSwitchUserTest.
+ */
+
+namespace Drupal\devel\Tests;
+
+use Drupal\Component\Utility\SafeMarkup;
+use Drupal\simpletest\WebTestBase;
+
+/**
+ * Tests switch user.
+ *
+ * @group devel
+ */
+class DevelSwitchUserTest extends WebTestBase {
+
+  /**
+   * Modules to enable.
+   *
+   * @var array
+   */
+  public static $modules = ['devel', 'block'];
+
+  /**
+   * The block used by this test.
+   *
+   * @var \Drupal\block\BlockInterface
+   */
+  protected $block;
+
+  /**
+   * The devel user.
+   *
+   * @var \Drupal\user\Entity\User
+   */
+  protected $develUser;
+
+  /**
+   * The switch user.
+   *
+   * @var \Drupal\user\Entity\User
+   */
+  protected $switchUser;
+
+  /**
+   * The web user.
+   *
+   * @var \Drupal\user\Entity\User
+   */
+  protected $webUser;
+
+  /**
+   * Set up test.
+   */
+  protected function setUp() {
+    parent::setUp();
+
+    $this->block = $this->drupalPlaceBlock('devel_switch_user', ['id' => 'switch-user']);
+
+    $this->develUser = $this->drupalCreateUser(['access devel information', 'switch users']);
+    $this->switchUser = $this->drupalCreateUser(['switch users']);
+    $this->webUser = $this->drupalCreateUser();
+  }
+
+  /**
+   * Tests switch user.
+   */
+  public function testSwitchUser() {
+    $this->drupalLogin($this->webUser);
+
+    $this->drupalGet('');
+    $this->assertNoText($this->block->label(), 'Block title was not found.');
+
+    // Ensure that a token is required to switch user.
+    $this->drupalGet('/devel/switch/' . $this->webUser->getUsername());
+    $this->assertResponse(403);
+
+    $this->drupalLogin($this->develUser);
+
+    $this->drupalGet('');
+    $this->assertText($this->block->label(), 'Block title was found.');
+
+    // Ensure that if name in not passed the controller returns access denied.
+    $this->drupalGet('/devel/switch');
+    $this->assertResponse(403);
+
+    // Ensure that a token is required to switch user.
+    $this->drupalGet('/devel/switch/' . $this->switchUser->getUsername());
+    $this->assertResponse(403);
+
+    // Switch to another user account.
+    $this->drupalGet('/user/' . $this->switchUser->id());
+    $this->clickLink($this->switchUser->getUsername());
+    $this->assertSessionByUid($this->switchUser->id());
+    $this->assertNoSessionByUid($this->develUser->id());
+
+    // Switch back to initial account.
+    $this->clickLink($this->develUser->getUsername());
+    $this->assertNoSessionByUid($this->switchUser->id());
+    $this->assertSessionByUid($this->develUser->id());
+
+    // Use the search form to switch to another account.
+    $edit = ['userid' => $this->switchUser->getUsername()];
+    $this->drupalPostForm(NULL, $edit, t('Switch'));
+    $this->assertSessionByUid($this->switchUser->id());
+    $this->assertNoSessionByUid($this->develUser->id());
+  }
+
+  /**
+   * Tests the switch user block configuration.
+   */
+  public function testSwitchUserBlockConfiguration() {
+    $anonymous = \Drupal::config('user.settings')->get('anonymous');
+
+    // Create some users for the test.
+    for ($i = 0; $i < 12; $i++) {
+      $this->drupalCreateUser();
+    }
+
+    $this->drupalLogin($this->develUser);
+
+    $this->drupalGet('');
+    $this->assertText($this->block->label(), 'Block title was found.');
+
+    // Ensure that block default configuration is effectively used. The block
+    // default configuration is the following:
+    // - list_size : 12
+    // - include_anon : FALSE
+    // - show_form : TRUE
+    $this->assertSwitchUserSearchForm();
+    $this->assertSwitchUserListCount(12);
+    $this->assertSwitchUserListNoContainsUser($anonymous);
+
+    // Ensure that changing the list_size configuration property the number of
+    // user displayed in the list change.
+    $this->setBlockConfiguration('list_size', 4);
+    $this->drupalGet('');
+    $this->assertSwitchUserListCount(4);
+
+    // Ensure that changing the include_anon configuration property the
+    // anonymous user is displayed in the list.
+    $this->setBlockConfiguration('include_anon', TRUE);
+    $this->drupalGet('');
+    $this->assertSwitchUserListContainsUser($anonymous);
+
+    // Ensure that changing the show_form configuration property the
+    // form is not displayed.
+    $this->setBlockConfiguration('show_form', FALSE);
+    $this->drupalGet('');
+    $this->assertSwitchUserNoSearchForm();
+  }
+
+  /**
+   * Test the user list items.
+   */
+  public function testSwitchUserListItems() {
+    $anonymous = \Drupal::config('user.settings')->get('anonymous');
+
+    $this->setBlockConfiguration('list_size', 2);
+
+    // Login as web user so we are sure that this account is prioritized
+    // in the list if not enougth user with 'switch users' permission are
+    // present.
+    $this->drupalLogin($this->webUser);
+
+    $this->drupalLogin($this->develUser);
+    $this->drupalGet('');
+
+    // Ensure that user with 'switch users' permission are prioritized.
+    $this->assertSwitchUserListCount(2);
+    $this->assertSwitchUserListContainsUser($this->develUser->getUsername());
+    $this->assertSwitchUserListContainsUser($this->switchUser->getUsername());
+
+    // Ensure that blocked users are not shown in the list.
+    $this->switchUser->set('status', 0)->save();
+    $this->drupalGet('');
+    $this->assertSwitchUserListCount(2);
+    $this->assertSwitchUserListContainsUser($this->develUser->getUsername());
+    $this->assertSwitchUserListContainsUser($this->webUser->getUsername());
+    $this->assertSwitchUserListNoContainsUser($this->switchUser->getUsername());
+
+    // Ensure that anonymous user are prioritized if include_anon is set to true.
+    $this->setBlockConfiguration('include_anon', TRUE);
+    $this->drupalGet('');
+    $this->assertSwitchUserListCount(2);
+    $this->assertSwitchUserListContainsUser($this->develUser->getUsername());
+    $this->assertSwitchUserListContainsUser($anonymous);
+  }
+
+  /**
+   * Helper function for verify the number of items shown in the user list.
+   *
+   * @param int $number
+   *   The expected numer of items.
+   */
+  public function assertSwitchUserListCount($number) {
+    $result = $this->xpath('//div[@id=:block]//ul/li/a', [':block' => 'block-switch-user']);
+    $this->assert(count($result) == $number, 'The number of users shown in switch user is correct.');
+  }
+
+  /**
+   * Helper function for verify if the user list contains a username.
+   *
+   * @param string $username
+   *   The username to check.
+   */
+  public function assertSwitchUserListContainsUser($username) {
+    $result = $this->xpath('//div[@id=:block]//ul/li/a[normalize-space()=:user]', [':block' => 'block-switch-user', ':user' => $username]);
+    $this->assert(count($result) > 0, SafeMarkup::format('User "%user" is included in the switch user list.', ['%user' => $username]));
+  }
+
+  /**
+   * Helper function for verify if the user list not contains a username.
+   *
+   * @param string $username
+   *   The username to check.
+   */
+  public function assertSwitchUserListNoContainsUser($username) {
+    $result = $this->xpath('//div[@id=:block]//ul/li/a[normalize-space()=:user]', [':block' => 'block-switch-user', ':user' => $username]);
+    $this->assert(count($result) == 0, SafeMarkup::format('User "%user" is not included in the switch user list.', ['%user' => $username]));
+  }
+
+  /**
+   * Helper function for verify if the search form is shown.
+   */
+  public function assertSwitchUserSearchForm() {
+    $result = $this->xpath('//div[@id=:block]//form[contains(@class, :form)]', [':block' => 'block-switch-user', ':form' => 'devel-switchuser-form']);
+    $this->assert(count($result) > 0, 'The search form is shown.');
+  }
+
+  /**
+   * Helper function for verify if the search form is not shown.
+   */
+  public function assertSwitchUserNoSearchForm() {
+    $result = $this->xpath('//div[@id=:block]//form[contains(@class, :form)]', [':block' => 'block-switch-user', ':form' => 'devel-switchuser-form']);
+    $this->assert(count($result) == 0, 'The search form is not shown.');
+  }
+
+  /**
+   * Protected helper method to set the test block's configuration.
+   */
+  protected function setBlockConfiguration($key, $value) {
+    $block = $this->block->getPlugin();
+    $block->setConfigurationValue($key, $value);
+    $this->block->save();
+  }
+
+  /**
+   * Asserts that there is a session for a given user ID.
+   *
+   * Based off masquarade module.
+   *
+   * @param int $uid
+   *   The user ID for which to find a session record.
+   *
+   * TODO find a cleaner way to do this check.
+   */
+  protected function assertSessionByUid($uid) {
+    $query = \Drupal::database()->select('sessions');
+    $query->fields('sessions', array('uid'));
+    $query->condition('uid', $uid);
+    $result = $query->execute()->fetchAll();
+
+    if (empty($result)) {
+      $this->fail(SafeMarkup::format('No session found for uid @uid', array('@uid' => $uid)));
+    }
+    elseif (count($result) > 1) {
+      // If there is more than one session, then that must be unexpected.
+      $this->fail("Found more than 1 session for uid $uid.");
+    }
+    else {
+      $this->pass("Found session for uid $uid.");
+    }
+  }
+
+  /**
+   * Asserts that no session exists for a given uid.
+   *
+   * Based off masquarade module.
+   *
+   * @param int $uid
+   *   The user ID to assert.
+   *
+   * TODO find a cleaner way to do this check.
+   */
+  protected function assertNoSessionByUid($uid) {
+    $query = \Drupal::database()->select('sessions');
+    $query->fields('sessions', array('uid'));
+    $query->condition('uid', $uid);
+    $result = $query->execute()->fetchAll();
+    $this->assert(empty($result), "No session for uid $uid found.");
+  }
+
+}
diff --git a/modules/devel/tests/modules/devel_entity_test/devel_entity_test.info.yml b/modules/devel/tests/modules/devel_entity_test/devel_entity_test.info.yml
new file mode 100644
index 0000000..3ea87b9
--- /dev/null
+++ b/modules/devel/tests/modules/devel_entity_test/devel_entity_test.info.yml
@@ -0,0 +1,16 @@
+name: 'Devel entity test module'
+type: module
+description: 'Provides entity types for Devel tests.'
+package: Testing
+# version: VERSION
+# core: 8.x
+dependencies:
+  - field
+  - text
+  - entity_test
+
+# Information added by Drupal.org packaging script on 2015-11-08
+version: '8.x-1.x-dev'
+core: '8.x'
+project: 'devel'
+datestamp: 1446987552
diff --git a/modules/devel/tests/modules/devel_entity_test/devel_entity_test.links.task.yml b/modules/devel/tests/modules/devel_entity_test/devel_entity_test.links.task.yml
new file mode 100644
index 0000000..052baa9
--- /dev/null
+++ b/modules/devel/tests/modules/devel_entity_test/devel_entity_test.links.task.yml
@@ -0,0 +1,2 @@
+devel_entity_test.local_tasks:
+  deriver: 'Drupal\devel_entity_test\Plugin\Derivative\DevelEntityTestLocalTasks'
diff --git a/modules/devel/tests/modules/devel_entity_test/devel_entity_test.module b/modules/devel/tests/modules/devel_entity_test/devel_entity_test.module
new file mode 100644
index 0000000..14cfee1
--- /dev/null
+++ b/modules/devel/tests/modules/devel_entity_test/devel_entity_test.module
@@ -0,0 +1,29 @@
+<?php
+
+/**
+ * @file
+ * Test module for the entity API providing several entity types for testing.
+ */
+
+/**
+ * Implements hook_entity_view_mode_info_alter().
+ */
+function devel_entity_test_entity_view_mode_info_alter(&$view_modes) {
+  $entity_info = \Drupal::entityManager()->getDefinitions();
+  foreach ($entity_info as $entity_type => $info) {
+    if ($entity_info[$entity_type]->getProvider() == 'devel_entity_test_canonical' && !isset($view_modes[$entity_type])) {
+      $view_modes[$entity_type] = array(
+        'full' => array(
+          'label' => t('Full object'),
+          'status' => TRUE,
+          'cache' => TRUE,
+        ),
+        'teaser' => array(
+          'label' => t('Teaser'),
+          'status' => TRUE,
+          'cache' => TRUE,
+        ),
+      );
+    }
+  }
+}
diff --git a/modules/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestCanonical.php b/modules/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestCanonical.php
new file mode 100644
index 0000000..0747e11
--- /dev/null
+++ b/modules/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestCanonical.php
@@ -0,0 +1,49 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_entity_test\Entity\DevelEntityTestCanonical.
+ */
+
+namespace Drupal\devel_entity_test\Entity;
+
+use Drupal\entity_test\Entity\EntityTest;
+
+/**
+ * Defines the test entity class.
+ *
+ * @ContentEntityType(
+ *   id = "devel_entity_test_canonical",
+ *   label = @Translation("Devel test entity with canonical link"),
+ *   handlers = {
+ *     "list_builder" = "Drupal\entity_test\EntityTestListBuilder",
+ *     "view_builder" = "Drupal\entity_test\EntityTestViewBuilder",
+ *     "access" = "Drupal\entity_test\EntityTestAccessControlHandler",
+ *     "form" = {
+ *       "default" = "Drupal\entity_test\EntityTestForm",
+ *       "delete" = "Drupal\entity_test\EntityTestDeleteForm"
+ *     },
+ *     "route_provider" = {
+ *       "html" = "Drupal\Core\Entity\Routing\DefaultHtmlRouteProvider",
+ *     },
+ *     "translation" = "Drupal\content_translation\ContentTranslationHandler",
+ *     "views_data" = "Drupal\entity_test\EntityTestViewsData"
+ *   },
+ *   base_table = "devel_entity_test_canonical",
+ *   persistent_cache = FALSE,
+ *   entity_keys = {
+ *     "id" = "id",
+ *     "uuid" = "uuid",
+ *     "bundle" = "type",
+ *     "label" = "name",
+ *     "langcode" = "langcode",
+ *   },
+ *   links = {
+ *     "canonical" = "/devel_entity_test_canonical/{devel_entity_test_canonical}",
+ *   },
+ *   field_ui_base_route = "entity.entity_test.admin_form",
+ * )
+ */
+class DevelEntityTestCanonical extends EntityTest {
+
+}
diff --git a/modules/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestEdit.php b/modules/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestEdit.php
new file mode 100644
index 0000000..2f43069
--- /dev/null
+++ b/modules/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestEdit.php
@@ -0,0 +1,49 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_entity_test\Entity\DevelEntityTestEdit.
+ */
+
+namespace Drupal\devel_entity_test\Entity;
+
+use Drupal\entity_test\Entity\EntityTest;
+
+/**
+ * Defines the test entity class.
+ *
+ * @ContentEntityType(
+ *   id = "devel_entity_test_edit",
+ *   label = @Translation("Devel test entity with edit form link"),
+ *   handlers = {
+ *     "list_builder" = "Drupal\entity_test\EntityTestListBuilder",
+ *     "view_builder" = "Drupal\entity_test\EntityTestViewBuilder",
+ *     "access" = "Drupal\entity_test\EntityTestAccessControlHandler",
+ *     "form" = {
+ *       "default" = "Drupal\entity_test\EntityTestForm",
+ *       "delete" = "Drupal\entity_test\EntityTestDeleteForm"
+ *     },
+ *     "route_provider" = {
+ *       "html" = "Drupal\Core\Entity\Routing\DefaultHtmlRouteProvider",
+ *     },
+ *     "translation" = "Drupal\content_translation\ContentTranslationHandler",
+ *     "views_data" = "Drupal\entity_test\EntityTestViewsData"
+ *   },
+ *   base_table = "devel_entity_test_edit",
+ *   persistent_cache = FALSE,
+ *   entity_keys = {
+ *     "id" = "id",
+ *     "uuid" = "uuid",
+ *     "bundle" = "type",
+ *     "label" = "name",
+ *     "langcode" = "langcode",
+ *   },
+ *   links = {
+ *     "edit-form" = "/devel_entity_test_edit/manage/{devel_entity_test_edit}",
+ *   },
+ *   field_ui_base_route = "entity.entity_test.admin_form",
+ * )
+ */
+class DevelEntityTestEdit extends EntityTest {
+
+}
diff --git a/modules/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestNoLinks.php b/modules/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestNoLinks.php
new file mode 100644
index 0000000..011ac53
--- /dev/null
+++ b/modules/devel/tests/modules/devel_entity_test/src/Entity/DevelEntityTestNoLinks.php
@@ -0,0 +1,46 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_entity_test\Entity\DevelEntityTestNoLinks.
+ */
+
+namespace Drupal\devel_entity_test\Entity;
+
+use Drupal\entity_test\Entity\EntityTest;
+
+/**
+ * Defines the test entity class.
+ *
+ * @ContentEntityType(
+ *   id = "devel_entity_test_no_links",
+ *   label = @Translation("Devel test entity with no links"),
+ *   handlers = {
+ *     "list_builder" = "Drupal\entity_test\EntityTestListBuilder",
+ *     "view_builder" = "Drupal\entity_test\EntityTestViewBuilder",
+ *     "access" = "Drupal\entity_test\EntityTestAccessControlHandler",
+ *     "form" = {
+ *       "default" = "Drupal\entity_test\EntityTestForm",
+ *       "delete" = "Drupal\entity_test\EntityTestDeleteForm"
+ *     },
+ *     "route_provider" = {
+ *       "html" = "Drupal\Core\Entity\Routing\DefaultHtmlRouteProvider",
+ *     },
+ *     "translation" = "Drupal\content_translation\ContentTranslationHandler",
+ *     "views_data" = "Drupal\entity_test\EntityTestViewsData"
+ *   },
+ *   base_table = "devel_entity_test_no_links",
+ *   persistent_cache = FALSE,
+ *   entity_keys = {
+ *     "id" = "id",
+ *     "uuid" = "uuid",
+ *     "bundle" = "type",
+ *     "label" = "name",
+ *     "langcode" = "langcode",
+ *   },
+ *   field_ui_base_route = "entity.entity_test.admin_form",
+ * )
+ */
+class DevelEntityTestNoLinks extends EntityTest {
+
+}
diff --git a/modules/devel/tests/modules/devel_entity_test/src/Plugin/Derivative/DevelEntityTestLocalTasks.php b/modules/devel/tests/modules/devel_entity_test/src/Plugin/Derivative/DevelEntityTestLocalTasks.php
new file mode 100644
index 0000000..b80ab6d
--- /dev/null
+++ b/modules/devel/tests/modules/devel_entity_test/src/Plugin/Derivative/DevelEntityTestLocalTasks.php
@@ -0,0 +1,36 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_entity_test\Plugin\Derivative\DevelEntityTestLocalTasks.
+ */
+
+namespace Drupal\devel_entity_test\Plugin\Derivative;
+
+use Drupal\Component\Plugin\Derivative\DeriverBase;
+
+/**
+ * Defines the local tasks for all the entity_test entities.
+ */
+class DevelEntityTestLocalTasks extends DeriverBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getDerivativeDefinitions($base_plugin_definition) {
+    $this->derivatives = array();
+
+    $this->derivatives['devel_entity_test_canonical.canonical'] = array();
+    $this->derivatives['devel_entity_test_canonical.canonical']['base_route'] = "entity.devel_entity_test_canonical.canonical";
+    $this->derivatives['devel_entity_test_canonical.canonical']['route_name'] = "entity.devel_entity_test_canonical.canonical";
+    $this->derivatives['devel_entity_test_canonical.canonical']['title'] = 'View';
+
+    $this->derivatives['devel_entity_test_edit.edit'] = array();
+    $this->derivatives['devel_entity_test_edit.edit']['base_route'] = "entity.devel_entity_test_edit.edit_form";
+    $this->derivatives['devel_entity_test_edit.edit']['route_name'] = "entity.devel_entity_test_edit.edit_form";
+    $this->derivatives['devel_entity_test_edit.edit']['title'] = 'Edit';
+
+    return parent::getDerivativeDefinitions($base_plugin_definition);
+  }
+
+}
diff --git a/modules/devel/tests/modules/devel_test/devel_test.info.yml b/modules/devel/tests/modules/devel_test/devel_test.info.yml
new file mode 100644
index 0000000..1b3241a
--- /dev/null
+++ b/modules/devel/tests/modules/devel_test/devel_test.info.yml
@@ -0,0 +1,12 @@
+name: 'Devel test module'
+type: module
+description: 'Support module for Devel testing.'
+package: Testing
+# version: VERSION
+# core: 8.x
+
+# Information added by Drupal.org packaging script on 2015-11-08
+version: '8.x-1.x-dev'
+core: '8.x'
+project: 'devel'
+datestamp: 1446987552
diff --git a/modules/devel/tests/modules/devel_test/devel_test.module b/modules/devel/tests/modules/devel_test/devel_test.module
new file mode 100644
index 0000000..b756c48
--- /dev/null
+++ b/modules/devel/tests/modules/devel_test/devel_test.module
@@ -0,0 +1,16 @@
+<?php
+
+/**
+ * @file
+ * Support module for Devel testing.
+ */
+
+/**
+ * Implements hook_file_download().
+ */
+function devel_test_file_download($uri) {
+  $default_uri = \Drupal::state()->get('devel.test_file_download') ? : FALSE;
+  if ($default_uri === $uri) {
+    return array('X-Owned-By' => 'devel_test');
+  }
+}
diff --git a/modules/devel/tests/modules/devel_test/devel_test.routing.yml b/modules/devel/tests/modules/devel_test/devel_test.routing.yml
new file mode 100644
index 0000000..20ca3f3
--- /dev/null
+++ b/modules/devel/tests/modules/devel_test/devel_test.routing.yml
@@ -0,0 +1,32 @@
+devel.simple_page:
+  path: '/devel/simple-page'
+  defaults:
+    _controller: '\Drupal\devel_test\Controller\DevelTestController::simplePage'
+    _title: 'Simple Page'
+  requirements:
+    _permission: 'access devel information'
+
+devel.silent_global:
+  path: '/devel-silent/global-shoutdown'
+  defaults:
+    _controller: '\Drupal\devel_test\Controller\DevelSilentTestController::globalShoutdown'
+    _title: 'Devel shoutdown'
+  requirements:
+    _permission: 'access devel information'
+
+devel.silent_route_parameter:
+  path: '/devel-silent/route-requirement'
+  defaults:
+    _controller: '\Drupal\devel_test\Controller\DevelSilentTestController::develSilentRouteRequirement'
+    _title: 'Devel settings'
+  requirements:
+    _permission: 'access devel information'
+    _devel_silent: 'TRUE'
+
+devel.silent_json:
+  path: '/devel-silent/json'
+  defaults:
+    _controller: '\Drupal\devel_test\Controller\DevelSilentTestController::jsonResponse'
+    _title: 'Devel settings'
+  requirements:
+    _permission: 'access devel information'
diff --git a/modules/devel/tests/modules/devel_test/src/Controller/DevelSilentTestController.php b/modules/devel/tests/modules/devel_test/src/Controller/DevelSilentTestController.php
new file mode 100644
index 0000000..6c97288
--- /dev/null
+++ b/modules/devel/tests/modules/devel_test/src/Controller/DevelSilentTestController.php
@@ -0,0 +1,56 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_test\Controller\DevelSilentTestController.
+ */
+
+namespace Drupal\devel_test\Controller;
+
+use Drupal\Core\Controller\ControllerBase;
+use Symfony\Component\HttpFoundation\JsonResponse;
+
+/**
+ * Returns responses for devel module routes.
+ */
+class DevelSilentTestController extends ControllerBase {
+
+  /**
+   * Tests that devel is disabled if $GLOBALS['devel_shutdown'] is set.
+   *
+   * @return array
+   *   A render array.
+   */
+  public function globalShoutdown() {
+    $GLOBALS['devel_shutdown'] = FALSE;
+
+    return [
+      '#markup' => $this->t('$GLOBALS[\'devel_shutdown\'] = FALSE forces devel to be inactive.'),
+    ];
+  }
+
+  /**
+   * Tests that devel is disabled if response come from routes that are
+   * declared with '_devel_silent' requirement.
+   *
+   * @return array
+   *   A render array.
+   */
+  public function develSilentRouteRequirement() {
+    return [
+      '#markup' => $this->t('"_devel_silent" route requirement forces devel to be inactive.'),
+    ];
+  }
+
+  /**
+   * Tests that devel is disabled if is reyurned a JsonResponse response.
+   *
+   * @return \Symfony\Component\HttpFoundation\JsonResponse
+   *   A json response.
+   */
+  public function jsonResponse() {
+    $data = ['data' => 'Devel is active only on HtmlResponse.'];
+    return new JsonResponse($data);
+  }
+
+}
diff --git a/modules/devel/tests/modules/devel_test/src/Controller/DevelTestController.php b/modules/devel/tests/modules/devel_test/src/Controller/DevelTestController.php
new file mode 100644
index 0000000..47b55ed
--- /dev/null
+++ b/modules/devel/tests/modules/devel_test/src/Controller/DevelTestController.php
@@ -0,0 +1,29 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\devel_test\Controller\DevelTestController.
+ */
+
+namespace Drupal\devel_test\Controller;
+
+use Drupal\Core\Controller\ControllerBase;
+
+/**
+ * Returns responses for devel module routes.
+ */
+class DevelTestController extends ControllerBase {
+
+  /**
+   * Returns a simple page output.
+   *
+   * @return array
+   *   A render array.
+   */
+  public function simplePage() {
+    return [
+      '#markup' => $this->t('Simple page'),
+    ];
+  }
+
+}
diff --git a/modules/devel/webprofiler/README.md b/modules/devel/webprofiler/README.md
new file mode 100644
index 0000000..8790714
--- /dev/null
+++ b/modules/devel/webprofiler/README.md
@@ -0,0 +1,28 @@
+!! README.md is a work in progress !!
+
+#Dependencies:
+
+- d3.js: Webprofiler module requires D3 library to proper render data.
+  Download https://github.com/mbostock/d3 into /libraries/d3/d3.min.js
+  
+- highlight.js: Webprofiler module requires highlight library to syntax highlight collected queries.
+  Download http://highlightjs.org into /libraries/highlight
+
+#IDE link:
+
+Every class name discovered while profiling (controller class, event class) are linked to an url for directly open in
+an IDE, you can configure the url of those link based on the IDE you are using:
+
+- Sublime text (2 and 3): see https://github.com/dhoulb/subl for Mac OS X
+- Textmate: should be supported by default, use txmt://open?url=file://@file&line=@line as link
+- PhpStorm 8+: use phpstorm://open?file=@file&line=@line as link
+
+#Timeline:
+
+Now it is possible to also collect the time needed to instantiate every single service used in a request, to make it 
+work you need to add this two lines to settings.php (or, event better, to settings.local.php):
+
+```
+$class_loader->addPsr4('Drupal\\webprofiler\\', [ __DIR__ . '/../../modules/contrib/webprofiler/src']);
+$settings['container_base_class'] = '\Drupal\webprofiler\DependencyInjection\TraceableContainer';
+```
diff --git a/modules/devel/webprofiler/composer.json b/modules/devel/webprofiler/composer.json
new file mode 100644
index 0000000..b2af8ee
--- /dev/null
+++ b/modules/devel/webprofiler/composer.json
@@ -0,0 +1,9 @@
+{
+  "name": "drupal/webprofiler",
+  "description": "Drupal Web Profiler.",
+  "type": "drupal-module",
+  "license": "GPL-2.0+",
+  "require": {
+    "symfony/stopwatch": "2.4.*"
+  }
+}
diff --git a/modules/devel/webprofiler/config/install/webprofiler.config.yml b/modules/devel/webprofiler/config/install/webprofiler.config.yml
new file mode 100644
index 0000000..a050d00
--- /dev/null
+++ b/modules/devel/webprofiler/config/install/webprofiler.config.yml
@@ -0,0 +1,25 @@
+purge_on_cache_clear: true
+storage: profiler.database_storage
+exclude: "/contextual/*\r\n/toolbar/*\r\n/edit/*\r\n*.js\r\n*.css"
+ide_link: "txmt://open?url=file://@file&line=@line"
+active_toolbar_items:
+  assets: assets
+  blocks: blocks
+  cache: cache
+  database: database
+  drupal_extension: drupal_extension
+  forms: forms
+  performance_timing: performance_timing
+  php_config: php_config
+  request: request
+  time: time
+  user: user
+  views: views
+  config: '0'
+  events: '0'
+  http: '0'
+  routing: '0'
+  services: '0'
+  state: '0'
+query_sort: source
+query_highlight: 5
diff --git a/modules/devel/webprofiler/config/schema/webprofiler.schema.yml b/modules/devel/webprofiler/config/schema/webprofiler.schema.yml
new file mode 100644
index 0000000..ca4d616
--- /dev/null
+++ b/modules/devel/webprofiler/config/schema/webprofiler.schema.yml
@@ -0,0 +1,29 @@
+# Schema for the configuration files of the Webprofiler module.
+webprofiler.config:
+  type: config_object
+  label: 'Webprofiler configuration'
+  mapping:
+    purge_on_cache_clear:
+      type: boolean
+      label: 'Purge profiles on cache clear'
+    storage:
+      type: string
+      label: 'Storage implementation'
+    exclude:
+      type: string
+      label: 'Paths to exclude'
+    active_toolbar_items:
+      type: sequence
+      label: 'Active toolbar items'
+      sequence:
+        - type: string
+          label: 'Toolbar item'
+    ide_link:
+      type: string
+      label: 'IDE link'
+    query_sort:
+      type: string
+      label: 'Sort query log'
+    query_highlight:
+      type: integer
+      label: 'Slow query highlighting'
diff --git a/modules/devel/webprofiler/config/translations/console.en.yml b/modules/devel/webprofiler/config/translations/console.en.yml
new file mode 100644
index 0000000..2f4bfa9
--- /dev/null
+++ b/modules/devel/webprofiler/config/translations/console.en.yml
@@ -0,0 +1,54 @@
+commands:
+  webprofiler:
+    export:
+      description: Exports Webprofiler profile/s to file.
+      arguments:
+        id: Profile id.
+      options:
+        directory: Destination directory to store exported file/s.
+      messages:
+        success: Succesfully exported to %s
+        exported_count: <info>Exported %s profiles</info>
+        error_writing: Error writing file %s
+        error_no_profile: No profile with id %s
+      progress:
+          exporting: Exporting profiles...
+          archive: Create archive...
+          delete_tmp: Delete temp files...
+          done: Done.
+    list:
+      description: Lists Webprofiler profiles.
+      options:
+        ip: Filter by IP.
+        url: Filter by URL.
+        method: Filter by HTTP method.
+        limit: Limit printed profiles.
+      rows:
+        time: D, m/d/Y - H:i:s
+      header:
+       token: Token
+       ip: IP
+       method: Method
+       url: URL
+       time: Time
+    benchmark:
+      description: Benchmark an url.
+      arguments:
+       url: Url to benchmark.
+      options:
+        runs: Number of runs.
+        file: Save results as file.
+        cache-rebuild: Rebuild cache before start benchmark.
+      messages:
+        not_git: Not in a git repository.
+        error_login: Impossibile to login in the user.
+      progress:
+        cache_rebuild: Rebuilding cache...
+        login: Login user...
+        get: Http request...
+        compute_avg: Compute average...
+        compute_median: Compute median...
+        compute_95percentile: Compute 95 percentile...
+        git_hash: Compute GIT hash...
+        yaml: Generate output...
+        done: Done.
diff --git a/modules/devel/webprofiler/config/translations/console.es.yml b/modules/devel/webprofiler/config/translations/console.es.yml
new file mode 100644
index 0000000..71f66ef
--- /dev/null
+++ b/modules/devel/webprofiler/config/translations/console.es.yml
@@ -0,0 +1,54 @@
+commands:
+  webprofiler:
+    export:
+      description: Exportar Webprofiler perfil(es) a un archivo.
+      arguments:
+        id: Profile id.
+      options:
+        directory: Directorio de destiono para almacenar archivo(s) exportados.
+      messages:
+        success: Satisfactoriamente exportado en %s
+        exported_count: <info>Exportados %s perfiles</info>
+        error_writing: Error escribiendo el archivo %s
+        error_no_profile: No fue encontrado un perfil con id %s
+      progress:
+          exporting: Exportando perfiles...
+          archive: Creando archivos...
+          delete_tmp: Borrando archivos temporales...
+          done: Terminado.
+    list:
+      description: Listar perfiles Webprofiler.
+      options:
+        ip: Filtrar por IP.
+        url: Filtrar por URL.
+        method: Filtrar por mtodo HTTP.
+        limit: Limitar perfiles a mostrar.
+      rows:
+        time: D, d/m/Y - H:i:s
+      header:
+       token: Token
+       ip: IP
+       method: Mtodo
+       url: URL
+       time: Fecha
+    benchmark:
+      description: Benchmark una URL.
+      arguments:
+       url: Url para efectuar un benchmark.
+      options:
+        runs: Nmero de ejecuciones.
+        file: Guardar los resultados en un archivo.
+        cache-rebuild: Reconstruir cache antes de iniciar el benchmark.
+      messages:
+        not_git: No en un repositorio git.
+        error_login: Error ingresando al sistema.
+      progress:
+        cache_rebuild: Reconstruyendo cache...
+        login: Ingresando al sistema...
+        get: Solicitud Http...
+        compute_avg: Calculando promedio...
+        compute_median: Calculando media...
+        compute_95percentile: Calculando percentile 95...
+        git_hash: Calculando GIT hash...
+        yaml: Generando salida...
+        done: Terminado.
diff --git a/modules/devel/webprofiler/css/app/dashboard.css b/modules/devel/webprofiler/css/app/dashboard.css
new file mode 100644
index 0000000..dfa517a
--- /dev/null
+++ b/modules/devel/webprofiler/css/app/dashboard.css
@@ -0,0 +1,582 @@
+/* base themes */
+#webrofiler {
+  overflow: hidden;
+  font-size: 1em;
+  line-height: 1.2;
+  color: rgba(0, 0, 0, 0.7);
+  background-color: #ffffff; }
+  #webrofiler * {
+    box-sizing: border-box; }
+
+#webprofiler {
+  /*
+  
+  overview example
+  
+  <ul class="overview__list">
+    <li>
+      <a class="overview__link">
+        <img class="overview__icon" src="data:">
+        <span class="overview__title">
+        <span class="overview__subtitle">
+  
+  
+  */
+  /*
+  
+  general element template
+  
+  will be implemented in the next dashboard relase
+  
+  this HTML will contain the preview of any single card present inside the dashboard
+  
+  <a class="ui--[red||pink||purple||deepPurple||indigo||blue||lightBlue||cyan||teal||green||lightGreen||lime||yellow||amber||orange||deepOrange||brown||gray||blueGray] app l-card">
+  
+    <div class="app__bar">
+      <h3 class="app__title">
+      <img class="app__icon" src="data:">
+  
+    <div class="app__container">
+      <div class="app__main-data"> text
+      <div class="app__secondary-data"> text
+  
+  */ }
+  #webprofiler .tabs:after, #webprofiler .tabs__tabs:after, #webprofiler .tabs__panels:after, #webprofiler .tabs__panel:after, #webprofiler .resume:after, #webprofiler .collectors:after, #webprofiler .panel:after, #webprofiler .panel__toolbar:after, #webprofiler .panel__container:after, #webprofiler .panel__expand-header:after, #webprofiler .panel__expand-content:after, #webprofiler .app__bar:after, #webprofiler .app__container:after, #webprofiler .modal__bar:after, #webprofiler .modal__content:after {
+    content: ' ';
+    display: block;
+    clear: both; }
+  #webprofiler .panel__container, #webprofiler .ui--red, #webprofiler .ui--pink, #webprofiler .ui--purple, #webprofiler .ui--deepPurple, #webprofiler .ui--indigo, #webprofiler .ui--blue, #webprofiler .ui--lightBlue, #webprofiler .ui--cyan, #webprofiler .ui--teal, #webprofiler .ui--green, #webprofiler .ui--lightGreen, #webprofiler .ui--lime, #webprofiler .ui--yellow, #webprofiler .ui--amber, #webprofiler .ui--orange, #webprofiler .ui--deepOrange, #webprofiler .ui--brown, #webprofiler .ui--gray, #webprofiler .ui--blueGray, #webprofiler .modal__container {
+    box-shadow: 0 2px 4px -2px #000000;
+    margin-bottom: 40px;
+    border-bottom-right-radius: 2px;
+    border-bottom-left-radius: 2px;
+    overflow: hidden; }
+  #webprofiler .ui--red .app__title, #webprofiler .ui--pink .app__title, #webprofiler .ui--purple .app__title, #webprofiler .ui--deepPurple .app__title, #webprofiler .ui--blue .app__title, #webprofiler .ui--lightBlue .app__title, #webprofiler .ui--cyan .app__title, #webprofiler .ui--green .app__title, #webprofiler .ui--lightGreen .app__title, #webprofiler .ui--lime .app__title, #webprofiler .ui--yellow .app__title, #webprofiler .ui--amber .app__title, #webprofiler .ui--orange .app__title, #webprofiler .ui--deepOrange .app__title, #webprofiler .ui--brown .app__title {
+    color: white; }
+  #webprofiler .ui--indigo .app__title, #webprofiler .ui--teal .app__title, #webprofiler .ui--gray .app__title, #webprofiler .ui--blueGray .app__title, #webprofiler .modal__title {
+    color: rgba(0, 0, 0, 0.87); }
+  #webprofiler .ui--red .app__main-data, #webprofiler .ui--pink .app__main-data, #webprofiler .ui--purple .app__main-data, #webprofiler .ui--deepPurple .app__main-data, #webprofiler .ui--indigo .app__main-data, #webprofiler .ui--blue .app__main-data, #webprofiler .ui--lightBlue .app__main-data, #webprofiler .ui--cyan .app__main-data, #webprofiler .ui--teal .app__main-data, #webprofiler .ui--green .app__main-data, #webprofiler .ui--lightGreen .app__main-data, #webprofiler .ui--lime .app__main-data, #webprofiler .ui--yellow .app__main-data, #webprofiler .ui--amber .app__main-data, #webprofiler .ui--orange .app__main-data, #webprofiler .ui--deepOrange .app__main-data, #webprofiler .ui--brown .app__main-data, #webprofiler .ui--gray .app__main-data, #webprofiler .ui--blueGray .app__main-data, #webprofiler .modal__content {
+    color: rgba(0, 0, 0, 0.7); }
+  #webprofiler .ui--red .app__secondary-data, #webprofiler .ui--pink .app__secondary-data, #webprofiler .ui--purple .app__secondary-data, #webprofiler .ui--deepPurple .app__secondary-data, #webprofiler .ui--indigo .app__secondary-data, #webprofiler .ui--blue .app__secondary-data, #webprofiler .ui--lightBlue .app__secondary-data, #webprofiler .ui--cyan .app__secondary-data, #webprofiler .ui--teal .app__secondary-data, #webprofiler .ui--green .app__secondary-data, #webprofiler .ui--lightGreen .app__secondary-data, #webprofiler .ui--lime .app__secondary-data, #webprofiler .ui--yellow .app__secondary-data, #webprofiler .ui--amber .app__secondary-data, #webprofiler .ui--orange .app__secondary-data, #webprofiler .ui--deepOrange .app__secondary-data, #webprofiler .ui--brown .app__secondary-data, #webprofiler .ui--gray .app__secondary-data, #webprofiler .ui--blueGray .app__secondary-data {
+    color: rgba(0, 0, 0, 0.3); }
+  #webprofiler a {
+    color: #2979ff; }
+    #webprofiler a:hover {
+      color: #2962ff;
+      text-decoration: none; }
+  #webprofiler .list--unstyled {
+    margin: 0;
+    list-style-type: none;
+    padding: 0; }
+    #webprofiler .list--unstyled > li {
+      display: block;
+      padding: 0 8px; }
+  #webprofiler .list--inline {
+    margin: 0;
+    list-style-type: none;
+    padding: 0; }
+  #webprofiler .list--inline > li {
+      display: inline-block;
+      padding: 8px; }
+  #webprofiler .list--level-0 li {
+    padding: 0 0 0 0; }
+  #webprofiler .list--level-1 li {
+    padding: 0 0 0 8px; }
+  #webprofiler .list--level-3 li {
+    padding: 0 0 0 16px; }
+  #webprofiler pre {
+    padding: 16px; }
+  #webprofiler pre, #webprofiler code {
+    white-space: normal;
+    word-break: break-all;
+    word-break: break-word;
+    font-size: 14px;
+    background-color: #f5f5f5; }
+  #webprofiler .list-item--bold {
+      font-weight: bold;
+  }
+  #webprofiler code.code--json {
+    white-space: pre-wrap; }
+  #webprofiler thead {
+    white-space: nowrap; }
+    #webprofiler thead th {
+      background-color: transparent; }
+  #webprofiler th {
+    font-size: 12px;
+    color: rgba(0, 0, 0, 0.54);
+    border: none; }
+  #webprofiler td {
+    word-break: break-all;
+    font-size: 13px;
+    color: rgba(0, 0, 0, 0.87); }
+  #webprofiler tr {
+    border-bottom: 1px solid rgba(0, 0, 0, 0.18); }
+    #webprofiler tr:hover {
+      background-color: #eeeeee; }
+  #webprofiler td, #webprofiler th {
+    padding: 16px 24px;
+    min-height: 46px;
+    text-transform: none;
+    vertical-align: top; }
+  #webprofiler .table--compact {
+    table-layout: fixed; }
+    #webprofiler .table--compact td, #webprofiler .table--compact th {
+      word-spacing: 99em; }
+  #webprofiler .table--fixed {
+    table-layout: fixed; }
+  #webprofiler .table--duo th:first-child,
+  #webprofiler .table--duo td:first-child {
+    width: 35%; }
+  #webprofiler .table--trio th:first-child,
+  #webprofiler .table--trio td:first-child {
+    width: 80%; }
+  #webprofiler .table--trio th:nth-child(2),
+  #webprofiler .table--trio td:nth-child(2),
+  #webprofiler .table--trio th:nth-child(3),
+  #webprofiler .table--trio td:nth-child(3) {
+    width: 10%; }
+  #webprofiler [class*="button"] {
+    display: block;
+    color: #2979ff;
+    border-bottom-right-radius: 2px;
+    border-bottom-left-radius: 2px;
+    border: none;
+    text-transform: uppercase;
+    font-size: 16px;
+    text-align: center;
+    padding: 16px;
+    margin: 8px;
+    cursor: pointer;
+    min-width: 42px; }
+  #webprofiler .button--flat {
+    background-color: transparent; }
+    #webprofiler .button--flat:hover {
+      background-color: #eeeeee; }
+    #webprofiler .button--flat:active, #webprofiler .button--flat:focus {
+      background-color: #bdbdbd; }
+  #webprofiler .tabs {
+    position: relative;
+    margin: -16px 0 16px 0; }
+    #webprofiler .tabs a {
+      display: inline; }
+    #webprofiler .tabs__radio {
+      display: none; }
+    #webprofiler .tabs__tabs {
+      margin: 0 -16px 16px -16px;
+      text-transform: uppercase;
+      height: 48px;
+      background-color: #f5f5f5; }
+      #webprofiler .tabs__tabs > li {
+        padding: 0; }
+    #webprofiler .tabs__label {
+      border-bottom: 5px solid transparent;
+      text-align: center;
+      line-height: 48px;
+      min-width: 160px;
+      display: inline-block;
+      margin: -5px 0 0 0; }
+    #webprofiler .tabs__panel {
+      display: none;
+      width: 100%; }
+    #webprofiler .tabs__radio:checked:nth-child(1) ~ .tabs__panels .tabs__panel:nth-child(1) {
+      display: block; }
+    #webprofiler .tabs__radio:checked:nth-child(2) ~ .tabs__panels .tabs__panel:nth-child(2) {
+      display: block; }
+    #webprofiler .tabs__radio:checked:nth-child(3) ~ .tabs__panels .tabs__panel:nth-child(3) {
+      display: block; }
+    #webprofiler .tabs__radio:checked:nth-child(1) ~ .tabs__tabs li:nth-child(1) .tabs__label {
+      border-bottom-color: #2962ff; }
+    #webprofiler .tabs__radio:checked:nth-child(2) ~ .tabs__tabs li:nth-child(2) .tabs__label {
+      border-bottom-color: #2962ff; }
+    #webprofiler .tabs__radio:checked:nth-child(3) ~ .tabs__tabs li:nth-child(3) .tabs__label {
+      border-bottom-color: #2962ff; }
+  #webprofiler .overview {
+    display: table-cell;
+    width: 20%;
+    vertical-align: top;
+    font-size: 1.2em;
+    line-height: 2em;
+    background: #ffffff; }
+  #webprofiler .overview__list {
+    padding: 0;
+    margin: -1px -1px 0 0;
+    list-style-type: none;
+    border-top: 1px solid rgba(0, 0, 0, 0.18); }
+  #webprofiler .overview__link {
+    position: relative;
+    display: block;
+    padding: 0 0 0 72px;
+    border-right: 5px solid transparent; }
+    #webprofiler .overview__link:after {
+      content: '';
+      display: block;
+      position: absolute;
+      bottom: 0;
+      right: -5px;
+      left: 72px;
+      border-bottom: 1px solid rgba(0, 0, 0, 0.18); }
+  #webprofiler .overview__icon {
+    position: absolute;
+    top: 16px;
+    left: 16px; }
+  #webprofiler .overview__title {
+    display: block;
+    font-size: 16px;
+    line-height: 22px;
+    padding-top: 16px;
+    padding-bottom: 16px;
+    padding-right: 11px; }
+  #webprofiler .overview__subtitle {
+    display: block;
+    font-size: 14px;
+    line-height: 20px;
+    padding-bottom: 16px;
+    padding-right: 11px;
+    margin-top: -16px; }
+  #webprofiler .is--selected .overview__link {
+    color: #000000;
+    background-color: #f5f5f5;
+    border-right-color: #2962ff; }
+  #webprofiler .overview__link:hover {
+    color: #000000;
+    background-color: #82b1ff; }
+  #webprofiler .resume {
+    position: relative;
+    background-color: #e0e0e0;
+    border-bottom: 1px solid rgba(0, 0, 0, 0.18);
+    border-left: 1px solid rgba(0, 0, 0, 0.18);
+    padding: 16px 16px 0 16px;
+    margin-left: 20%; }
+  #webprofiler .resume__title {
+    display: block;
+    font-size: 24px;
+    line-height: 32px; }
+  #webprofiler .resume__subtitle,
+  #webprofiler .resume__time {
+    display: block;
+    font-size: 16px;
+    line-height: 24px; }
+  #webprofiler .resume__time {
+    margin-bottom: 52px; }
+  #webprofiler .resume__button {
+    position: absolute;
+    bottom: 0;
+    right: 16px; }
+  #webprofiler .collectors {
+    display: table;
+    width: 100%; }
+  #webprofiler .details {
+    display: table-cell;
+    overflow: hidden;
+    padding: 16px;
+    border-left: 1px solid rgba(0, 0, 0, 0.18); }
+  #webprofiler .details__title {
+    border-bottom: 1px solid #ccc;
+    padding-bottom: 5px; }
+  #webprofiler .details svg {
+    max-width: 100%; }
+  #webprofiler [class*='panel__filter--'] {
+    display: inline-block;
+    padding: 32px 16px 0 16px;
+    position: relative; }
+  #webprofiler .panel {
+    margin: 0 0 20px;
+    padding: 0;
+    background: #fafafa;
+    border: none; }
+    #webprofiler .panel select,
+    #webprofiler .panel input[type="text"] {
+      min-width: 165px;
+      font-size: 16px;
+      background-color: #fafafa;
+      border-color: transparent;
+      border-width: 0;
+      border-bottom: 2px solid #ffffff;
+      padding: 8px 0;
+      margin-bottom: 8px; }
+      #webprofiler .panel select:focus,
+      #webprofiler .panel input[type="text"]:focus {
+        outline: none;
+        border-bottom-color: #2979ff; }
+        #webprofiler .panel select:focus + label,
+        #webprofiler .panel input[type="text"]:focus + label {
+          color: #2979ff; }
+    #webprofiler .panel select {
+      min-width: 165px;
+      padding-right: 24px;
+      border-radius: 0;
+      background: url(../../images/caret-down.svg) no-repeat 99% 63%;
+      -moz-appearance: none; }
+      #webprofiler .panel select:hover {
+        box-shadow: none; }
+    #webprofiler .panel__title {
+      font-size: 24px;
+      line-height: 1;
+      background-color: #f5f5f5;
+      text-transform: none;
+      padding: 16px;
+      margin: -16px -16px 16px -16px; }
+    #webprofiler .panel__toolbar {
+      background-color: #fafafa;
+      margin: -16px -16px 16px -16px; }
+    #webprofiler .panel__filter-action {
+      display: inline-block; }
+    #webprofiler .panel__filter-label {
+      display: block;
+      position: absolute;
+      top: 0;
+      margin-top: 16px; }
+    #webprofiler .panel__container {
+      background-color: #ffffff;
+      position: relative;
+      padding: 16px; }
+    #webprofiler .panel__expand-content {
+      display: none; }
+  #webprofiler .is--open .panel__expand-content {
+    display: block; }
+  #webprofiler .is--hightlighted {
+    border-right: 10px solid #aa00ff;
+    padding-right: 6px; }
+  #webprofiler .is--hidden {
+    display: none; }
+  #webprofiler .app {
+    overflow: hidden;
+    position: relative;
+    display: block;
+    cursor: pointer; }
+    #webprofiler .app__bar {
+      padding: 16px; }
+    #webprofiler .app__title {
+      margin: 8px 32px 0 0;
+      font-weight: normal; }
+    #webprofiler .app__icon {
+      float: right;
+      height: 32px;
+      width: 32px; }
+    #webprofiler .app__container {
+      padding: 16px; }
+    #webprofiler .app__main-data {
+      font-size: 24px;
+      padding-bottom: 16px; }
+    #webprofiler .app__secondary-data {
+      font-size: 14px;
+      padding-bottom: 16px;
+      margin-top: -8px; }
+  #webprofiler .ui--red .app__bar {
+    background-color: #ff1744; }
+  #webprofiler .ui--red .app__container {
+    background-color: #ff8a80; }
+  #webprofiler .ui--pink .app__bar {
+    background-color: #f50057; }
+  #webprofiler .ui--pink .app__container {
+    background-color: #ff80ab; }
+  #webprofiler .ui--purple .app__bar {
+    background-color: #d500f9; }
+  #webprofiler .ui--purple .app__container {
+    background-color: #ea80fc; }
+  #webprofiler .ui--deepPurple .app__bar {
+    background-color: #651fff; }
+  #webprofiler .ui--deepPurple .app__container {
+    background-color: #b388ff; }
+  #webprofiler .ui--indigo .app__bar {
+    background-color: #3d5afe; }
+  #webprofiler .ui--indigo .app__container {
+    background-color: #8c9eff; }
+  #webprofiler .ui--blue .app__bar {
+    background-color: #2979ff; }
+  #webprofiler .ui--blue .app__container {
+    background-color: #82b1ff; }
+  #webprofiler .ui--lightBlue .app__bar {
+    background-color: #00b0ff; }
+  #webprofiler .ui--lightBlue .app__container {
+    background-color: #80d8ff; }
+  #webprofiler .ui--cyan .app__bar {
+    background-color: #00e5ff; }
+  #webprofiler .ui--cyan .app__container {
+    background-color: #84ffff; }
+  #webprofiler .ui--teal .app__bar {
+    background-color: #ade9b6; }
+  #webprofiler .ui--teal .app__container {
+    background-color: #a7ffeb; }
+  #webprofiler .ui--green .app__bar {
+    background-color: #00e676; }
+  #webprofiler .ui--green .app__container {
+    background-color: #b9f6ca; }
+  #webprofiler .ui--lightGreen .app__bar {
+    background-color: #76ff03; }
+  #webprofiler .ui--lightGreen .app__container {
+    background-color: #ccff90; }
+  #webprofiler .ui--lime .app__bar {
+    background-color: #c6ff00; }
+  #webprofiler .ui--lime .app__container {
+    background-color: #f4ff81; }
+  #webprofiler .ui--yellow .app__bar {
+    background-color: #ffea00; }
+  #webprofiler .ui--yellow .app__container {
+    background-color: #ffff8d; }
+  #webprofiler .ui--amber .app__bar {
+    background-color: #ffc400; }
+  #webprofiler .ui--amber .app__container {
+    background-color: #ffe57f; }
+  #webprofiler .ui--orange .app__bar {
+    background-color: #ff9100; }
+  #webprofiler .ui--orange .app__container {
+    background-color: #ffd180; }
+  #webprofiler .ui--deepOrange .app__bar {
+    background-color: #ff3d00; }
+  #webprofiler .ui--deepOrange .app__container {
+    background-color: #ff9e80; }
+  #webprofiler .ui--brown .app__bar {
+    background-color: #8d6e63; }
+  #webprofiler .ui--brown .app__container {
+    background-color: #d7ccc8; }
+  #webprofiler .ui--gray .app__bar {
+    background-color: #bdbdbd; }
+  #webprofiler .ui--gray .app__container {
+    background-color: #f5f5f5; }
+  #webprofiler .ui--blueGray .app__bar {
+    background-color: #bdbdbd; }
+  #webprofiler .ui--blueGray .app__container {
+    background-color: #f5f5f5; }
+  #webprofiler .loader--fixed {
+    position: fixed;
+    right: 0;
+    top: 50%;
+    width: 80%;
+    height: 100px;
+    zoom: 1.7;
+    text-align: center; }
+  #webprofiler .loader__circle {
+    animation: rotate 2s linear infinite;
+    height: 100px;
+    position: relative;
+    width: 100px; }
+  #webprofiler .loader__path {
+    stroke-dasharray: 1, 200;
+    stroke-dashoffset: 0;
+    animation: dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite;
+    stroke-linecap: round; }
+@keyframes rotate {
+  100% {
+    transform: rotate(360deg); } }
+@keyframes dash {
+  0% {
+    stroke-dasharray: 1, 200;
+    stroke-dashoffset: 0; }
+  50% {
+    stroke-dasharray: 89, 200;
+    stroke-dashoffset: -35; }
+  100% {
+    stroke-dasharray: 89, 200;
+    stroke-dashoffset: -124; } }
+@keyframes color {
+  100%, 0% {
+    stroke: #ff1744; }
+  40% {
+    stroke: #2979ff; }
+  66% {
+    stroke: #00e676; }
+  80%, 90% {
+    stroke: #ffea00; } }
+  #webprofiler .loader--linear {
+    height: 3px;
+    background-color: #ffea00;
+    position: absolute;
+    top: 0;
+    left: 0;
+    right: 0; }
+  #webprofiler .loader__bar {
+    content: "";
+    display: inline;
+    position: absolute;
+    width: 0;
+    height: 100%;
+    left: 50%;
+    text-align: center; }
+  #webprofiler .loader__bar:nth-child(1) {
+    background-color: #ff1744;
+    animation: loading 3s linear infinite; }
+  #webprofiler .loader__bar:nth-child(2) {
+    background-color: #2979ff;
+    animation: loading 3s linear 1s infinite; }
+  #webprofiler .loader__bar:nth-child(3) {
+    background-color: #00e676;
+    animation: loading 3s linear 2s infinite; }
+@keyframes loading {
+  from {
+    left: 50%;
+    width: 0;
+    z-index: 100; }
+  33.3333% {
+    left: 0;
+    width: 100%;
+    z-index: 10; }
+  to {
+    left: 0;
+    width: 100%; } }
+  #webprofiler .modal {
+    background-color: rgba(0, 0, 0, 0.87);
+    position: fixed;
+    top: 0;
+    bottom: 0;
+    left: 0;
+    right: 0; }
+    #webprofiler .modal__container {
+      border-top-right-radius: 2px;
+      border-top-left-radius: 2px;
+      box-shadow: 0 2px 4px -2px #000000;
+      background-color: #ffffff;
+      position: relative;
+      width: 33%;
+      min-width: 350px;
+      margin: 0 auto;
+      margin-top: 15%; }
+    #webprofiler .modal__bar {
+      padding: 16px; }
+    #webprofiler .modal__content {
+      padding: 16px;
+      font-size: 14px; }
+    #webprofiler .modal__title {
+      margin: 8px 32px 0 0;
+      font-weight: normal;
+      font-size: 24px; }
+    #webprofiler .modal__main-data {
+      font-size: 24px;
+      padding-bottom: 16px; }
+    #webprofiler .modal textarea {
+      white-space: normal;
+      word-break: break-all;
+      word-break: break-word;
+      font-size: 14px;
+      background-color: #f5f5f5;
+      max-width: 100%;
+      height: 320px;
+      width: 100%;
+      padding: 16px;
+      box-sizing: border-box;
+      border: none; }
+  #webprofiler .t--heading, #webprofiler .tabs__radio:checked:nth-child(1) ~ .tabs__tabs li:nth-child(1) .tabs__label, #webprofiler .tabs__radio:checked:nth-child(2) ~ .tabs__tabs li:nth-child(2) .tabs__label, #webprofiler .tabs__radio:checked:nth-child(3) ~ .tabs__tabs li:nth-child(3) .tabs__label, #webprofiler .overview__title, #webprofiler .resume__title, #webprofiler .panel select,
+  #webprofiler .panel input[type="text"], #webprofiler .panel__title {
+    color: black; }
+  #webprofiler .t--notice, #webprofiler .tabs__label, #webprofiler .overview__subtitle, #webprofiler .resume__subtitle,
+  #webprofiler .resume__time, #webprofiler .panel__filter-label {
+    color: rgba(0, 0, 0, 0.3); }
+  #webprofiler .l-card {
+    width: 32%;
+    margin-left: 1%;
+    margin-right: 1%;
+    float: left; }
+    #webprofiler .l-card:nth-child(3n + 1) {
+      margin-left: 0; }
+    #webprofiler .l-card:nth-child(3n) {
+      margin-right: 0; }
+  #webprofiler .l-left {
+    float: left; }
+  #webprofiler .l-right {
+    float: right; }
+  #webprofiler .h--word-broken {
+    word-break: break-all; }
+  #webprofiler .h--word-intact {
+    word-break: normal; }
+
+/*# sourceMappingURL=dashboard.css.map */
diff --git a/modules/devel/webprofiler/css/timeline.css b/modules/devel/webprofiler/css/timeline.css
new file mode 100644
index 0000000..2904b84
--- /dev/null
+++ b/modules/devel/webprofiler/css/timeline.css
@@ -0,0 +1,105 @@
+/**
+ * Timeline
+ */
+
+.timeline__legends {
+  font-size: 12px;
+  line-height: 1.5em;
+}
+
+.timeline__legends span {
+  border-left-width: 10px;
+  border-left-style: solid;
+  padding: 0 10px 0 5px;
+}
+
+.timeline__legends--default {
+  border-left-color: #E91E63;
+}
+
+.timeline__legends--section {
+  border-left-color: #3F51B5;
+}
+
+.timeline__legends--event_listener {
+  border-left-color: #00BCD4;
+}
+
+.timeline__legends--event_listener_loading {
+  border-left-color: #8BC34A;
+}
+
+.timeline__legends--template {
+  border-left-color: #FFC107;
+}
+
+.timeline__legends--service {
+    border-left-color: #795548;
+}
+
+text {
+    font-size: 12px;
+    line-height: 20px;
+    height: 22px;
+    fill: rgba(0, 0, 0, 0.87);
+}
+#timeline {
+    background: white;
+    margin: 10px 0;
+    width: 100%;
+    position: relative;
+    padding:  0 0 40px 0;
+}
+.timeline__row,
+.timeline__scale--x,
+.timeline__label rect {
+    stroke: rgba(0, 0, 0, 0.18);
+}
+.timeline__row{
+    fill: transparent;
+}
+.timeline__label rect {
+    fill: white;
+}
+.timeline__period--default {
+    fill: #E91E63;
+}
+.timeline__period--service {
+    fill: #795548;
+}
+.timeline__period--section {
+    fill: #3F51B5;
+}
+.timeline__period--event_listener {
+    fill: #00BCD4;
+}
+.timeline__period--event_listener_loading {
+    fill: #8BC34A;
+}
+.timeline__period--template {
+    fill: #FFC107;
+}
+.timeline__period-trigger{
+    fill: transparent;
+}
+.tooltip{
+    position: absolute;
+    padding: 8px;
+    background: rgba(0, 0, 0, 0.87);
+    border-bottom-left-radius: 2px;
+    border-bottom-right-radius: 2px;
+    width: 175px;
+    text-align: center;
+    display: none;
+    color: white;
+}
+.tooltip__title{
+    display: block;
+}
+.tooltip__content{
+    display: block;
+}
+.axis{
+    stroke-width: 2px;
+    fill: none;
+}
\ No newline at end of file
diff --git a/modules/devel/webprofiler/images/caret-down.svg b/modules/devel/webprofiler/images/caret-down.svg
new file mode 100644
index 0000000..4e48c8c
--- /dev/null
+++ b/modules/devel/webprofiler/images/caret-down.svg
@@ -0,0 +1 @@
+<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path fill="#333333" d="M3.8 5.4c-.165-.22-.075-.4.2-.4h8.002c.275 0 .365.18.199.4l-3.898 5.2c-.166.221-.436.221-.6 0l-3.903-5.2z"/></svg>
diff --git a/modules/devel/webprofiler/js/app/collections/collectors.js b/modules/devel/webprofiler/js/app/collections/collectors.js
new file mode 100644
index 0000000..ed26836
--- /dev/null
+++ b/modules/devel/webprofiler/js/app/collections/collectors.js
@@ -0,0 +1,35 @@
+(function ($, Drupal, drupalSettings, Backbone) {
+
+  "use strict";
+
+  Drupal.webprofiler.collectors.Collectors = Backbone.Collection.extend({
+    model: Drupal.webprofiler.models.Collector,
+
+    url: Drupal.url('admin/reports/profiler/view/' + drupalSettings.webprofiler.token + '/collectors'),
+
+    /**
+     * Unselect all models.
+     */
+    resetSelected: function () {
+      this.each(function (model) {
+        model.set({"selected": false});
+      });
+    },
+
+    /**
+     * Select a specific model from the collection.
+     *
+     * @param id
+     * @returns {*}
+     */
+    selectByID: function (id) {
+      this.resetSelected();
+      var collector = this.get(id);
+      collector.set({"selected": true});
+
+      return collector.id;
+    }
+  });
+
+}(jQuery, Drupal, drupalSettings, Backbone));
+
diff --git a/modules/devel/webprofiler/js/app/helpers.js b/modules/devel/webprofiler/js/app/helpers.js
new file mode 100644
index 0000000..dab617a
--- /dev/null
+++ b/modules/devel/webprofiler/js/app/helpers.js
@@ -0,0 +1,102 @@
+(function (drupalSettings) {
+
+  Drupal.webprofiler.helpers = (function () {
+
+    "use strict";
+
+    var escapeRx = function escapeRegExp(string) {
+        return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
+      },
+
+      repl = function replaceAll(string, find, replace) {
+        return string.replace(new RegExp(escapeRx(find), 'g'), replace);
+      },
+
+      shortLink = function (clazz) {
+        if (!clazz) {
+          return null;
+        }
+        clazz = repl(clazz, '/', '\\');
+        var parts = clazz.split("\\"), result = [], size = (parts.length - 1);
+
+        _.each(parts, function (item, key) {
+          if (key < size) {
+            result.push(item.substring(0, 1));
+          } else {
+            result.push(item);
+          }
+        });
+        return result.join("\\");
+      },
+
+      abbr = function (clazz) {
+        if (!clazz) {
+          return null;
+        }
+
+        return '<abbr title="' + clazz + '">' + shortLink(clazz) + '</abbr>';
+      },
+
+      ideLink = function (file, line) {
+        if (!file) {
+          return null;
+        }
+
+        line = line || 0;
+
+        return drupalSettings.webprofiler.idelink.replace("@file", file).replace("@line", line);
+      },
+
+      classLink = function (data) {
+        var link = ideLink(data['file'], data['line']), clazz = abbr(data['class']), method = data['method'], output = '';
+
+        output = clazz;
+        if (method) {
+          output += '::' + method;
+        }
+
+        if (link) {
+          output = '<a href="' + link + '">' + output + '</a>';
+        }
+
+        return output;
+      },
+
+      printTime = function (data, unit) {
+        unit = unit || 'ms';
+        data = Math.round((data + 0.00001) * 100) / 100;
+        return data + ' ' + unit;
+      },
+
+      frm = function (obj, level) {
+        level = level || 0;
+        var str = '<ul class="list--unstyled list--level-' + level + ' list--flat">', prop;
+        if (typeof obj != 'object') {
+          return obj;
+        }
+        for (prop in obj) {
+          if (isInt(prop)) {
+            str += '<li>' + frm(obj[prop], level + 1) + '</li>';
+          } else {
+            str += '<li><span class="list-item--bold">' + prop + '</span>: ' + frm(obj[prop], level + 1) + '</li>';
+          }
+        }
+        return str + '</ul>';
+      },
+
+      isInt = function (value) {
+        var x;
+        return isNaN(value) ? !1 : (x = parseFloat(value), (0 | x) === x);
+      };
+
+    return {
+      frm: frm,
+      ideLink: ideLink,
+      shortLink: shortLink,
+      classLink: classLink,
+      printTime: printTime
+    }
+
+  })();
+
+}(drupalSettings));
diff --git a/modules/devel/webprofiler/js/app/main.js b/modules/devel/webprofiler/js/app/main.js
new file mode 100644
index 0000000..22f9844
--- /dev/null
+++ b/modules/devel/webprofiler/js/app/main.js
@@ -0,0 +1,105 @@
+(function ($, Drupal, Backbone) {
+
+    "use strict";
+
+    /**
+     * Define namespaces.
+     */
+    Drupal.webprofiler = {
+        views: {},
+        models: {},
+        collectors: {},
+        routers: {}
+    };
+
+    Drupal.behaviors.webprofiler = {
+        attach: function (context) {
+            var el,
+                elz,
+                key,
+                sel,
+                value,
+                select,
+                selector,
+                unselected,
+                filter = [],
+
+                livefilter = function (e) {
+                    el = $(e).attr('id').replace('edit-', '');
+                    value = $(e).val();
+                    filter[el] = value.replace('/', '\/');
+                    selector = [];
+                    unselected = [];
+
+                    for (key in filter) {
+                        if (filter[key].length > 0 && filter[key] != ' ') {
+                            select = filter[key].split(' ').filter(Boolean);
+                            for (sel in select) {
+                                selector.push('[data-wp-' + key + ' *= ' + select[sel] + ']');
+                                unselected.push('[data-wp-' + key + ']:not([data-wp-' + key + ' *= ' + select[sel] + '])');
+                            }
+                        }
+                        else {
+                            selector.push('[data-wp-' + key + ']');
+                        }
+                    }
+                    for (elz in unselected) {
+                        $(unselected[elz]).addClass('is--hidden');
+                    }
+                    $(selector.join('')).removeClass('is--hidden');
+                },
+
+                modalFill = function(t,c){
+                    $('.modal__title').html(t);
+                    $('.modal__main-data').html(c);
+                },
+
+                clipboard = function (e, t) {
+                    var clip = e.parent().find(t).get(0),
+                        title = 'Original Code',
+                        content = '<textarea readonly >' +
+                            clip.textContent +
+                            '</textarea>';
+
+                    modalFill(title,content);
+                    $('.modal').show();
+                };
+
+            $(context).find('#collectors').once('webprofiler').each(function () {
+                new Drupal.webprofiler.routers.CollectorsRouter({el: $('#collectors')});
+                Backbone.history.start({
+                    pushState: false
+                });
+            });
+
+            $(context).find('.js--modal-close').each(function () {
+                $(this).on('click', function () {
+                    $('.js--modal').hide();
+                });
+            });
+
+            $(context).find('.js--live-filter').each(function () {
+                $(this).on('keyup', function () {
+                    livefilter($(this));
+                });
+                $(this).on('change', function () {
+                    livefilter($(this));
+                });
+            });
+
+            $(context).find('.js--panel-toggle').once('js--panel-toggle').each(function () {
+                $(this).on('click', function () {
+                    $(this).parent().parent().toggleClass('is--open');
+                });
+            });
+
+            $(context).find('.js--clipboard-trigger').once('js--clipboard-trigger').each(function () {
+                $(this).on('click', function () {
+                        clipboard($(this), '.js--clipboard-target')
+                    }
+                );
+            });
+        }
+    };
+
+}(jQuery, Drupal, Backbone));
diff --git a/modules/devel/webprofiler/js/app/models/collector.js b/modules/devel/webprofiler/js/app/models/collector.js
new file mode 100644
index 0000000..483033c
--- /dev/null
+++ b/modules/devel/webprofiler/js/app/models/collector.js
@@ -0,0 +1,15 @@
+(function ($, Drupal, drupalSettings, Backbone) {
+
+  "use strict";
+
+  Drupal.webprofiler.models.Collector = Backbone.Model.extend({
+    idAttribute: 'name',
+    urlRoot: Drupal.url('admin/reports/profiler/view/' + drupalSettings.webprofiler.token + '/collectors'),
+    defaults: {
+      name: "default",
+      data: [],
+      selected: false
+    }
+  });
+
+}(jQuery, Drupal, drupalSettings, Backbone));
diff --git a/modules/devel/webprofiler/js/app/routers/collectors.js b/modules/devel/webprofiler/js/app/routers/collectors.js
new file mode 100644
index 0000000..876f238
--- /dev/null
+++ b/modules/devel/webprofiler/js/app/routers/collectors.js
@@ -0,0 +1,48 @@
+(function ($, Drupal, drupalSettings, Backbone) {
+
+  "use strict";
+
+  var collectors = new Drupal.webprofiler.collectors.Collectors(drupalSettings.webprofiler.collectors);
+
+  Drupal.webprofiler.routers.CollectorsRouter = Backbone.Router.extend({
+    routes: {
+      ':id': 'selectCollector'
+    },
+
+    /**
+     *
+     * @param id
+     */
+    selectCollector: function (id) {
+      var collectors = this.collectors, layout = this.layout;
+
+      //collectors.resetSelected();
+      collectors.selectByID(id);
+
+      var collector = collectors.get(id);
+
+      if (collector.get('data').length != 0) {
+        layout.setDetails(collector);
+      } else {
+        var deferred = collectors.get(id).fetch();
+        deferred.done(function () {
+          layout.setDetails(collector);
+        });
+      }
+    },
+
+    /**
+     *
+     * @param options
+     */
+    initialize: function (options) {
+      this.collectors = collectors;
+      this.layout = Drupal.webprofiler.views.Layout.getInstance({
+        el: options.el,
+        router: this
+      });
+      this.layout.render();
+    }
+  });
+
+}(jQuery, Drupal, drupalSettings, Backbone));
diff --git a/modules/devel/webprofiler/js/app/views/collector.js b/modules/devel/webprofiler/js/app/views/collector.js
new file mode 100644
index 0000000..955a36e
--- /dev/null
+++ b/modules/devel/webprofiler/js/app/views/collector.js
@@ -0,0 +1,29 @@
+(function ($, Drupal, Backbone) {
+
+  "use strict";
+
+  Drupal.webprofiler.views.CollectorView = Backbone.View.extend({
+    tagName: 'li',
+    template: _.template($("script#collector").html()),
+
+    /**
+     *
+     */
+    initialize: function () {
+      _.bindAll(this, "render");
+      this.listenTo(this.model, 'change:selected', this.render);
+    },
+
+    /**
+     *
+     * @returns {Drupal.webprofiler.views.CollectorView}
+     */
+    render: function () {
+      this.$el.html(this.template(this.model.toJSON()));
+      this.$el.toggleClass('is--selected', this.model.get('selected'));
+      return this;
+    }
+
+  });
+
+}(jQuery, Drupal, Backbone));
diff --git a/modules/devel/webprofiler/js/app/views/collectorsList.js b/modules/devel/webprofiler/js/app/views/collectorsList.js
new file mode 100644
index 0000000..8628371
--- /dev/null
+++ b/modules/devel/webprofiler/js/app/views/collectorsList.js
@@ -0,0 +1,21 @@
+(function ($, Drupal, Backbone) {
+
+  "use strict";
+
+  Drupal.webprofiler.views.CollectorsList = Backbone.View.extend({
+    tagName: 'section',
+
+    /**
+     *
+     * @returns {Drupal.webprofiler.views.CollectorsList}
+     */
+    render: function () {
+      var collectorsView = this.collection.map(function (collector) {
+        return (new Drupal.webprofiler.views.CollectorView({model: collector})).render().el;
+      });
+      this.$el.html(collectorsView);
+      return this;
+    }
+  });
+
+}(jQuery, Drupal, Backbone));
diff --git a/modules/devel/webprofiler/js/app/views/details.js b/modules/devel/webprofiler/js/app/views/details.js
new file mode 100644
index 0000000..709f17e
--- /dev/null
+++ b/modules/devel/webprofiler/js/app/views/details.js
@@ -0,0 +1,20 @@
+(function ($, Drupal, Backbone) {
+
+  "use strict";
+
+  Drupal.webprofiler.views.DetailsView = Backbone.View.extend({
+    el: '#details',
+
+    /**
+     *
+     * @returns {Drupal.webprofiler.views.DetailsView}
+     */
+    render: function () {
+      var template = _.template($("script#" + this.model.get('name')).html());
+
+      this.$el.html(template(this.model.toJSON()));
+      return this;
+    }
+  });
+
+}(jQuery, Drupal, Backbone));
diff --git a/modules/devel/webprofiler/js/app/views/layout.js b/modules/devel/webprofiler/js/app/views/layout.js
new file mode 100644
index 0000000..6168b34
--- /dev/null
+++ b/modules/devel/webprofiler/js/app/views/layout.js
@@ -0,0 +1,83 @@
+(function ($, Drupal, drupalSettings, Backbone) {
+
+  "use strict";
+
+  Drupal.webprofiler.views.Layout = Backbone.View.extend({
+    template: _.template(
+      '<div id="overview" class="overview">' +
+      '<ul class="overview__list"></ul>' +
+      '</div>' +
+      '<div id="details" class="details">' +
+      'Choose a collector.' +
+      '</div>'
+    ),
+
+    /**
+     *
+     * @returns {Drupal.webprofiler.views.Layout}
+     */
+    render: function () {
+      this.$el.html(this.template());
+
+      if(this.currentDetails) {
+        this.currentDetails.setElement(this.$('#details')).render();
+      }
+
+      this.overview.setElement(this.$('#overview ul')).render();
+      return this;
+    },
+
+    /**
+     *
+     * @param options
+     */
+    initialize: function (options) {
+      options.router.collectors.on('request', this.beginSync);
+      options.router.collectors.on('sync', this.finishSync);
+
+      this.overview = new Drupal.webprofiler.views.CollectorsList({
+        collection: options.router.collectors,
+        router: options.router
+      });
+    },
+
+    /**
+     *
+     * @param collector
+     */
+    setDetails: function (collector) {
+      if (this.currentDetails) this.currentDetails.remove();
+      this.currentDetails = new Drupal.webprofiler.views.DetailsView({model: collector});
+      this.render();
+      Drupal.attachBehaviors(/*this.$el, drupalSettings*/);
+    },
+
+    /**
+     *
+     */
+    beginSync: function () {
+            $('.loader--fixed').fadeIn({duration: 100});
+    },
+
+    /**
+     *
+     */
+    finishSync: function () {
+            $('.loader--fixed').fadeOut({duration: 100});
+    }
+  });
+
+  var instance;
+  Drupal.webprofiler.views.Layout.getInstance = function (options) {
+    if (!instance) {
+      instance = new Drupal.webprofiler.views.Layout({
+        el: options.el,
+        router: options.router,
+        collection: options.router.collectors
+      });
+    }
+
+    return instance;
+  }
+
+}(jQuery, Drupal, drupalSettings, Backbone));
diff --git a/modules/devel/webprofiler/js/database.js b/modules/devel/webprofiler/js/database.js
new file mode 100644
index 0000000..5f50430
--- /dev/null
+++ b/modules/devel/webprofiler/js/database.js
@@ -0,0 +1,68 @@
+/**
+ * @file
+ * Database panel app.
+ */
+(function ($, Drupal, drupalSettings) {
+
+    "use strict";
+
+    Drupal.behaviors.webprofiler_database = {
+        attach: function (context) {
+            $(context).find('.js--explain-trigger').once('js--explain-trigger').each(function () {
+
+                $(this).on('click', function () {
+                    var position = $(this).attr('data-wp-queryPosition'),
+                        wrapper = $(this).parent().parent().find('.js--explain-target'),
+                        loader = $(this).parent().parent().find('.js--loader');
+
+                    if (wrapper.html().length === 0) {
+
+                        var url = Drupal.url('admin/reports/profiler/database_explain/' + drupalSettings.webprofiler.token + '/' + position);
+
+                        loader.show();
+
+                        $.getJSON(url, function (data) {
+                            _.templateSettings.variable = 'rc';
+                            var template = _.template(
+                                $("#wp-query-explain-template").html()
+                            );
+                            wrapper.html(template(data));
+                            loader.hide();
+                            delete _.templateSettings.variable;
+                        });
+                    }
+                    wrapper.toggle();
+
+                });
+            });
+
+            $(context).find('.js--code-toggle').once('js--code-toggle').each(function () {
+                $(this).on('click', function () {
+                    $(this).parent().find('.js--code-target').find('code').toggleClass('is--hidden');
+                });
+            });
+
+            $(context).find('.js--code-toggle--global').once('js--code-toggle--global').each(function () {
+                $(this).on('click', function () {
+
+                    if($(this).hasClass('js--placeholder-visible')){
+                        $('.js--placeholder-query').addClass('is--hidden');
+                        $('.js--original-query').removeClass('is--hidden');
+
+                    }else{
+                        $('.js--placeholder-query').removeClass('is--hidden');
+                        $('.js--original-query').addClass('is--hidden');
+                    }
+                    $(this).toggleClass('js--placeholder-visible');
+                });
+            });
+
+            if (typeof hljs != "undefined") {
+                $('code.sql').each(function (i, block) {
+                    hljs.highlightBlock(block);
+                });
+            }
+        }
+    }
+})
+(jQuery, Drupal, drupalSettings);
diff --git a/modules/devel/webprofiler/js/timeline.js b/modules/devel/webprofiler/js/timeline.js
new file mode 100644
index 0000000..0843f90
--- /dev/null
+++ b/modules/devel/webprofiler/js/timeline.js
@@ -0,0 +1,226 @@
+/**
+ * @file
+ * Timeline panel app.
+ */
+(function ($, Drupal, drupalSettings) {
+
+    "use strict";
+
+    Drupal.behaviors.webprofiler_timeline = {
+        attach: function (context) {
+            if (typeof d3 != "undefined") {
+
+                // data
+                var data = drupalSettings.webprofiler.time.events,
+                    parts = [],
+                    dataL = data.length,
+                    perL,
+                    labelW = [],
+                    rowW,
+                    scalePadding,
+                    endTime = parseInt(data[(dataL - 1)].endtime),
+                    roundTime = Math.ceil(endTime / 1000) * 1000,
+                    endScale;
+
+                for (var j = 0; j < dataL; j++) {
+                    perL = data[j].periods.length;
+                    for (var k = 0; k < perL; k++) {
+                        parts.push({
+                            "lane": j,
+                            "category": data[j].category,
+                            "memory": data[j].memory,
+                            "name": data[j].name,
+                            "start": data[j].periods[k].start,
+                            "end": data[j].periods[k].end
+                        });
+                    }
+                }
+
+                var tooltipCtrl = function (d, i) {
+                    tooltip.html('<span class="tooltip__content">memory usage: ' + d.memory + '</span>' +
+                    '<span class="tooltip__content">' + parseInt(d.start) + 'ms ~ ' + parseInt(d.end) + 'ms</span>');
+                    tooltip
+                        .style("display", 'block')
+                        .style("left", (d3.event.layerX - 87 ) + "px")
+                        .style("top", ((d.lane + 1) * 22 ) + "px")
+                        .style("opacity", .9);
+                };
+
+                var xscale = d3.scale.linear().domain([0, roundTime]).range([0, 1000]),
+                    container = d3.select('#timeline').append('svg').attr('height', (dataL + 1 ) * 22 + 'px').attr('width', '100%').attr('class', 'timeline__canvas'),
+
+
+                //tooltops
+                    tooltip = d3.select('#timeline')
+                        .append("div")
+                        .attr("class", "tooltip"),
+
+
+// rows
+                    rows = d3.select('.timeline__canvas')
+                        .append('g')
+                        .attr('class', 'timeline__rows')
+                        .attr('x', 0)
+                        .attr('y', 0)
+                        .selectAll('g')
+                        .data(data)
+                        .enter()
+                        .append('rect')
+                        .attr('class', 'timeline__row')
+                        .attr('x', 0)
+                        .attr('y', function (d, i) {
+                            return (i * 22);
+                        })
+                        .attr('height', 22)
+                        .attr('width', '100%')
+                        .each(function () {
+                            rowW = this.getBoundingClientRect().width;
+                        }),
+// scale
+                    scale = d3.select('.timeline__canvas')
+                        .append('g')
+                        .attr('class', 'timeline__scale')
+                        .attr('id', 'timeline__scale')
+                        .attr('x', 0)
+                        .attr('y', 0)
+                        .selectAll('g')
+                        .data(data)
+                        .enter()
+                        .append('a')
+                        .attr('xlink:href', function (d) {
+                            return Drupal.webprofiler.helpers.ideLink(d.link);
+                        })
+                        .attr('class', function (d) {
+                            return 'timeline__label ' + d.category
+                        })
+                        .attr('x', xscale(5))
+                        .attr('y', function (d, i) {
+                            return (((i + 1) * 22) - 5)
+                        });
+
+                scale.append('title')
+                    .text(function (d) {
+                        return d.name;
+                    });
+
+                scale.append('text')
+                    .attr('x', xscale(5))
+                    .attr('y', function (d, i) {
+                        return (((i + 1) * 22) - 5)
+                    })
+                    .text(function (d) {
+                        return Drupal.webprofiler.helpers.shortLink(d.name);
+                    })
+                    .each(function (d) {
+                        labelW.push(this.getBoundingClientRect().width);
+                    });
+
+                scalePadding = Math.max.apply(null, labelW) + 10;
+
+                scale.insert('rect', 'title')
+                    .attr('x', 0)
+                    .attr('y', function (d, i) {
+                        return (i * 22)
+                    })
+                    .attr('height', 22)
+                    .attr('stroke', 'transparent')
+                    .attr('strokw-width', 1)
+                    .attr('width', scalePadding);
+
+// times
+                var events = d3.select('.timeline__canvas')
+                    .insert('g', '.timeline__scale')
+                    .attr('class', 'timeline__parts')
+                    .attr('x', 0)
+                    .attr('y', 0)
+                    .selectAll('g')
+                    .data(parts)
+                    .enter();
+
+                events.append('rect').attr('class', function (d) {
+                    return 'timeline__period--' + d.category
+                })
+                    .attr('x', function (d) {
+                        return xscale(parseInt(d.start)) + scalePadding
+                    })
+                    .attr('y', function (d) {
+                        return d.lane * 22
+                    })
+                    .attr('height', 22)
+                    .attr('width', function (d) {
+                        return xscale(Math.max(parseInt(d.end - d.start), 1))
+                    });
+
+                events.append('rect')
+                    .attr('class', function (d) {
+                        return 'timeline__period-trigger'
+                    })
+                    .attr('x', function (d) {
+                        return xscale(parseInt(d.start)) + scalePadding - 5
+                    })
+                    .attr('y', function (d) {
+                        return d.lane * 22
+                    })
+                    .attr('height', 22)
+                    .attr('width', function (d) {
+
+                        return xscale(Math.max(parseInt(d.end - d.start), 1)) + 11
+                    })
+                    .on("mouseover", function (d, i) {
+                        tooltipCtrl(d, i);
+                    })
+                    .on("mouseout", function (d) {
+                        tooltip
+                            .style("display", 'none');
+                    });
+
+// Draw X-axis grid lines
+                var axis = d3.select('.timeline__parts').insert('g', '.timeline__parts')
+                    .selectAll("line")
+                    .data(xscale.ticks(10))
+                    .enter()
+                    .append("line")
+                    .attr("class", "timeline__scale--x")
+                    .attr("x1", xscale)
+                    .attr("x2", xscale)
+                    .attr("y1", 0)
+                    .attr("y2", data.length * 22)
+                    .attr("transform", "translate( " + scalePadding + " , 0)");
+
+                var xAxis = d3.svg.axis().scale(xscale).ticks(10).orient('bottom').tickFormat(function (d) {
+                    return d + ' ms'
+                });
+
+                var axe = d3.select('.timeline__parts').insert('g', '.timeline__parts')
+                    .attr("class", "axis")
+                    .attr('transform', 'translate(' + scalePadding + ', ' + dataL * 22 + ')')
+                    .call(xAxis);
+
+
+                endScale = xscale(endTime) - rowW - parseInt(scalePadding);
+
+                if( parseInt(xscale(endTime)) > ( rowW - parseInt(scalePadding))){
+                    var zoom = d3.select('.timeline__canvas')
+                        .call(
+                        d3.behavior.zoom()
+                            .scaleExtent([1, 1])
+                            .x(xscale)
+                            .on("zoom", function () {
+
+                                var t = d3.event.translate,
+                                    tx = t[0];
+
+                                tx = tx > 0 ? 0 : tx;
+
+                                tx = tx < endScale ? endScale : tx;
+
+
+                                d3.select('.timeline__parts').attr("transform", "translate( " + tx + " , 0)");
+                            }));
+                }
+
+            }
+        }
+    }
+
+})(jQuery, Drupal, drupalSettings);
diff --git a/modules/devel/webprofiler/src/Access/AccessManagerWrapper.php b/modules/devel/webprofiler/src/Access/AccessManagerWrapper.php
new file mode 100644
index 0000000..5de834f
--- /dev/null
+++ b/modules/devel/webprofiler/src/Access/AccessManagerWrapper.php
@@ -0,0 +1,83 @@
+<?php
+
+namespace Drupal\webprofiler\Access;
+
+use Drupal\Core\Access\AccessException;
+use Drupal\Core\Access\AccessManager;
+use Drupal\Component\Utility\ArgumentsResolverInterface;
+use Drupal\Core\Access\AccessResult;
+use Drupal\Core\Access\AccessResultInterface;
+use Drupal\Core\Routing\RouteMatchInterface;
+use Drupal\Core\Session\AccountInterface;
+use Drupal\webprofiler\DataCollector\RequestDataCollector;
+use Symfony\Component\HttpFoundation\Request;
+
+/**
+ * Attaches access check services to routes and runs them on request.
+ *
+ * @see \Drupal\Tests\Core\Access\AccessManagerTest
+ */
+class AccessManagerWrapper extends AccessManager {
+
+  /**
+   * @var \Drupal\webprofiler\DataCollector\RequestDataCollector
+   */
+  private $dataCollector;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function check(RouteMatchInterface $route_match, AccountInterface $account = NULL, Request $request = NULL, $return_as_object = FALSE) {
+    if (!isset($account)) {
+      $account = $this->currentUser;
+    }
+    $route = $route_match->getRouteObject();
+    $checks = $route->getOption('_access_checks') ?: array();
+
+    // Filter out checks which require the incoming request.
+    if (!isset($request)) {
+      $checks = array_diff($checks, $this->checkProvider->getChecksNeedRequest());
+    }
+
+    $result = AccessResult::neutral();
+    if (!empty($checks)) {
+      $arguments_resolver = $this->argumentsResolverFactory->getArgumentsResolver($route_match, $account, $request);
+
+      if (!$checks) {
+        return AccessResult::neutral();
+      }
+      $result = AccessResult::allowed();
+      foreach ($checks as $service_id) {
+        $result = $result->andIf($this->performCheck($service_id, $arguments_resolver, $request));
+      }
+    }
+    return $return_as_object ? $result : $result->isAllowed();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function performCheck($service_id, ArgumentsResolverInterface $arguments_resolver, Request $request = NULL) {
+    $callable = $this->checkProvider->loadCheck($service_id);
+    $arguments = $arguments_resolver->getArguments($callable);
+    /** @var \Drupal\Core\Access\AccessResultInterface $service_access **/
+    $service_access = call_user_func_array($callable, $arguments);
+
+    if (!$service_access instanceof AccessResultInterface) {
+      throw new AccessException("Access error in $service_id. Access services must return an object that implements AccessResultInterface.");
+    }
+
+    if($request) {
+      $this->dataCollector->addAccessCheck($service_id, $callable, $request);
+    }
+
+    return $service_access;
+  }
+
+  /**
+   * @param \Drupal\webprofiler\DataCollector\RequestDataCollector $dataCollector
+   */
+  public function setDataCollector(RequestDataCollector $dataCollector) {
+    $this->dataCollector = $dataCollector;
+  }
+}
diff --git a/modules/devel/webprofiler/src/Asset/CssCollectionRendererWrapper.php b/modules/devel/webprofiler/src/Asset/CssCollectionRendererWrapper.php
new file mode 100644
index 0000000..7db35d3
--- /dev/null
+++ b/modules/devel/webprofiler/src/Asset/CssCollectionRendererWrapper.php
@@ -0,0 +1,45 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Asset\CssCollectionRendererWrapper.
+ */
+
+namespace Drupal\webprofiler\Asset;
+
+use Drupal\Core\Asset\AssetCollectionRendererInterface;
+use Drupal\webprofiler\DataCollector\AssetsDataCollector;
+
+/**
+ * Class CssCollectionRendererWrapper.
+ */
+class CssCollectionRendererWrapper implements AssetCollectionRendererInterface {
+
+  /**
+   * @var \Drupal\Core\Asset\AssetCollectionRendererInterface
+   */
+  private $assetCollectionRenderer;
+
+  /**
+   * @var \Drupal\webprofiler\DataCollector\AssetsDataCollector
+   */
+  private $dataCollector;
+
+  /**
+   * @param \Drupal\Core\Asset\AssetCollectionRendererInterface $assetCollectionRenderer
+   * @param \Drupal\webprofiler\DataCollector\AssetsDataCollector $dataCollector
+   */
+  public function __construct(AssetCollectionRendererInterface $assetCollectionRenderer, AssetsDataCollector $dataCollector) {
+    $this->assetCollectionRenderer = $assetCollectionRenderer;
+    $this->dataCollector = $dataCollector;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function render(array $css_assets) {
+    $this->dataCollector->addCssAsset($css_assets);
+
+    return $this->assetCollectionRenderer->render($css_assets);
+  }
+}
diff --git a/modules/devel/webprofiler/src/Asset/JsCollectionRendererWrapper.php b/modules/devel/webprofiler/src/Asset/JsCollectionRendererWrapper.php
new file mode 100644
index 0000000..ffb7037
--- /dev/null
+++ b/modules/devel/webprofiler/src/Asset/JsCollectionRendererWrapper.php
@@ -0,0 +1,45 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Asset\JsCollectionRendererWrapper.
+ */
+
+namespace Drupal\webprofiler\Asset;
+
+use Drupal\Core\Asset\AssetCollectionRendererInterface;
+use Drupal\webprofiler\DataCollector\AssetsDataCollector;
+
+/**
+ * Class JsCollectionRendererWrapper.
+ */
+class JsCollectionRendererWrapper implements AssetCollectionRendererInterface {
+
+  /**
+   * @var \Drupal\Core\Asset\AssetCollectionRendererInterface
+   */
+  private $assetCollectionRenderer;
+
+  /**
+   * @var \Drupal\webprofiler\DataCollector\AssetsDataCollector
+   */
+  private $dataCollector;
+
+  /**
+   * @param \Drupal\Core\Asset\AssetCollectionRendererInterface $assetCollectionRenderer
+   * @param \Drupal\webprofiler\DataCollector\AssetsDataCollector $dataCollector
+   */
+  public function __construct(AssetCollectionRendererInterface $assetCollectionRenderer, AssetsDataCollector $dataCollector) {
+    $this->assetCollectionRenderer = $assetCollectionRenderer;
+    $this->dataCollector = $dataCollector;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function render(array $js_assets) {
+    $this->dataCollector->addJsAsset($js_assets);
+
+    return $this->assetCollectionRenderer->render($js_assets);
+  }
+}
diff --git a/modules/devel/webprofiler/src/Cache/CacheBackendWrapper.php b/modules/devel/webprofiler/src/Cache/CacheBackendWrapper.php
new file mode 100644
index 0000000..696cd5c
--- /dev/null
+++ b/modules/devel/webprofiler/src/Cache/CacheBackendWrapper.php
@@ -0,0 +1,184 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Cache\CacheBackendWrapper.
+ */
+
+namespace Drupal\webprofiler\Cache;
+
+use Drupal\Core\Cache\Cache;
+use Drupal\Core\Cache\CacheBackendInterface;
+use Drupal\webprofiler\DataCollector\CacheDataCollector;
+
+/**
+ * Wraps an existing cache backend to track calls to the cache backend.
+ */
+class CacheBackendWrapper implements CacheBackendInterface {
+
+  /**
+   * The data collector to register the calls.
+   *
+   * @var \Drupal\webprofiler\DataCollector\CacheDataCollector
+   */
+  protected $cacheDataCollector;
+
+  /**
+   * The wrapped cache backend.
+   *
+   * @var \Drupal\Core\Cache\CacheBackendInterface
+   */
+  protected $cacheBackend;
+
+  /**
+   * The name of the wrapped cache bin.
+   *
+   * @var string
+   */
+  protected $bin;
+
+  /**
+   * Constructs a new CacheBackendWrapper.
+   *
+   * @param \Drupal\webprofiler\DataCollector\CacheDataCollector $cacheDataCollector
+   *   The cache data collector to inform about cache get calls.
+   * @param \Drupal\Core\Cache\CacheBackendInterface $cacheBackend
+   *   The wrapped cache backend.
+   * @param string $bin
+   *   The name of the wrapped cache bin.
+   */
+  public function __construct(CacheDataCollector $cacheDataCollector, CacheBackendInterface $cacheBackend, $bin) {
+    $this->cacheDataCollector = $cacheDataCollector;
+    $this->cacheBackend = $cacheBackend;
+    $this->bin = $bin;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function get($cid, $allow_invalid = FALSE) {
+    $cache = $this->cacheBackend->get($cid, $allow_invalid);
+
+    if ($cache) {
+      $cacheCopy = new \StdClass();
+      $cacheCopy->cid = $cache->cid;
+      $cacheCopy->expire = $cache->expire;
+      $cacheCopy->tags = $cache->tags;
+
+      $this->cacheDataCollector->registerCacheHit($this->bin, $cacheCopy);
+    }
+    else {
+      $this->cacheDataCollector->registerCacheMiss($this->bin, $cid);
+    }
+
+    return $cache;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getMultiple(&$cids, $allow_invalid = FALSE) {
+    $cidsCopy = $cids;
+    $cache = $this->cacheBackend->getMultiple($cids, $allow_invalid);
+
+    foreach ($cidsCopy as $cid) {
+      if (in_array($cid, $cids)) {
+        $this->cacheDataCollector->registerCacheMiss($this->bin, $cid);
+      }
+      else {
+        $cacheCopy = new \StdClass();
+        $cacheCopy->cid = $cache[$cid]->cid;
+        $cacheCopy->expire = $cache[$cid]->expire;
+        $cacheCopy->tags = $cache[$cid]->tags;
+
+        $this->cacheDataCollector->registerCacheHit($this->bin, $cacheCopy);
+      }
+    }
+
+    return $cache;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function set($cid, $data, $expire = Cache::PERMANENT, array $tags = []) {
+    return $this->cacheBackend->set($cid, $data, $expire, $tags);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function setMultiple(array $items) {
+    return $this->cacheBackend->setMultiple($items);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function delete($cid) {
+    return $this->cacheBackend->delete($cid);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function deleteMultiple(array $cids) {
+    return $this->cacheBackend->deleteMultiple($cids);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function deleteTags(array $tags) {
+    return $this->cacheBackend->deleteTags($tags);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function deleteAll() {
+    return $this->cacheBackend->deleteAll();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function invalidate($cid) {
+    return $this->cacheBackend->invalidate($cid);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function invalidateMultiple(array $cids) {
+    return $this->cacheBackend->invalidateMultiple($cids);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function invalidateTags(array $tags) {
+    return $this->cacheBackend->invalidateTags($tags);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function invalidateAll() {
+    return $this->cacheBackend->invalidateAll();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function garbageCollection() {
+    return $this->cacheBackend->garbageCollection();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function removeBin() {
+    return $this->cacheBackend->removeBin();
+  }
+}
diff --git a/modules/devel/webprofiler/src/Cache/CacheFactoryWrapper.php b/modules/devel/webprofiler/src/Cache/CacheFactoryWrapper.php
new file mode 100644
index 0000000..ab6ed59
--- /dev/null
+++ b/modules/devel/webprofiler/src/Cache/CacheFactoryWrapper.php
@@ -0,0 +1,67 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Cache\CacheFactoryWrapper.
+ */
+
+namespace Drupal\webprofiler\Cache;
+
+use Drupal\Core\Cache\CacheFactoryInterface;
+use Drupal\webprofiler\DataCollector\CacheDataCollector;
+use Symfony\Component\DependencyInjection\ContainerAwareInterface;
+use Symfony\Component\DependencyInjection\ContainerAwareTrait;
+
+/**
+ * Wraps a cache factory to register all calls to the cache system.
+ */
+class CacheFactoryWrapper implements CacheFactoryInterface, ContainerAwareInterface {
+
+  use ContainerAwareTrait;
+
+  /**
+   * The cache factory.
+   *
+   * @var \Drupal\Core\Cache\CacheFactoryInterface
+   */
+  protected $cacheFactory;
+
+  /**
+   * The cache data collector.
+   *
+   * @var \Drupal\webprofiler\DataCollector\CacheDataCollector
+   */
+  protected $cacheDataCollector;
+
+  /**
+   * All wrapped cache backends.
+   *
+   * @var \Drupal\webprofiler\Cache\CacheBackendWrapper[]
+   */
+  protected $cacheBackends = [];
+
+  /**
+   * Creates a new CacheFactoryWrapper instance.
+   *
+   * @param \Drupal\Core\Cache\CacheFactoryInterface $cache_factory
+   *   The cache factory.
+   * @param \Drupal\webprofiler\DataCollector\CacheDataCollector $cacheDataCollector
+   *   The cache data collector.
+   */
+  public function __construct(CacheFactoryInterface $cache_factory, CacheDataCollector $cacheDataCollector) {
+    $this->cacheFactory = $cache_factory;
+    $this->cacheDataCollector = $cacheDataCollector;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function get($bin) {
+    if (!isset($this->cacheBackends[$bin])) {
+      $cache_backend = $this->cacheFactory->get($bin);
+      $this->cacheBackends[$bin] = new CacheBackendWrapper($this->cacheDataCollector, $cache_backend, $bin);
+    }
+    return $this->cacheBackends[$bin];
+  }
+
+}
diff --git a/modules/devel/webprofiler/src/Command/BenchmarkCommand.php b/modules/devel/webprofiler/src/Command/BenchmarkCommand.php
new file mode 100644
index 0000000..83fad27
--- /dev/null
+++ b/modules/devel/webprofiler/src/Command/BenchmarkCommand.php
@@ -0,0 +1,307 @@
+<?php
+
+/**
+ * @file
+ * Contains Drupal\webprofiler\Command\BenchmarkCommand.
+ */
+
+namespace Drupal\webprofiler\Command;
+
+use GuzzleHttp\ClientInterface;
+use GuzzleHttp\Cookie\CookieJar;
+use Symfony\Component\Console\Helper\ProgressBar;
+use Symfony\Component\Console\Input\InputArgument;
+use Symfony\Component\Console\Input\InputInterface;
+use Symfony\Component\Console\Input\InputOption;
+use Symfony\Component\Console\Output\OutputInterface;
+use Drupal\Console\Command\ContainerAwareCommand;
+use Symfony\Component\DomCrawler\Crawler;
+use Symfony\Component\Process\Process;
+use Symfony\Component\Yaml\Yaml;
+
+/**
+ * Class BenchmarkCommand
+ */
+class BenchmarkCommand extends ContainerAwareCommand {
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function configure() {
+    $this
+      ->setName('webprofiler:benchmark')
+      ->setDescription($this->trans('commands.webprofiler.benchmark.description'))
+      ->addArgument('url', InputArgument::REQUIRED, $this->trans('commands.webprofiler.benchmark.arguments.url'))
+      ->addOption('runs', NULL, InputOption::VALUE_REQUIRED, $this->trans('commands.webprofiler.benchmark.options.runs'), 100)
+      ->addOption('file', NULL, InputOption::VALUE_REQUIRED, $this->trans('commands.webprofiler.benchmark.options.file'))
+      ->addOption('cache-rebuild', 'cr', InputOption::VALUE_NONE, $this->trans('commands.webprofiler.benchmark.options.cache_rebuild'));
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function execute(InputInterface $input, OutputInterface $output) {
+    $runs = $input->getOption('runs');
+    $file = $input->getOption('file');
+    $cache_rebuild = $input->getOption('cache-rebuild');
+
+    // http://username:password@hostname/
+    $url = $input->getArgument('url');
+    $url_components = parse_url($url);
+    $login = isset($url_components['user']) && isset($url_components['pass']);
+
+    $steps = 3;
+
+    if ($cache_rebuild) {
+      $steps++;
+    }
+
+    if ($login) {
+      $steps++;
+    }
+
+    /** @var \Drupal\Core\Http\Client $client */
+    $client = $this->getContainer()->get('http_client');
+
+    $progress = new ProgressBar($output, $runs + $steps);
+    $progress->setFormat(' %current%/%max% [%bar%] %percent:3s%% %message%');
+
+    if ($cache_rebuild) {
+      $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.cache_rebuild'));
+      $this->RebuildCache();
+      $progress->advance();
+    }
+
+    if ($login) {
+      $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.login'));
+      $login_url = "{$url_components['scheme']}://{$url_components['host']}/user/login";
+
+      // Enable cookies storage.
+      $cookieJar = new CookieJar();
+      $client->setDefaultOption('cookies', $cookieJar);
+
+      // Retrieve a form_build_id using the DomCrawler component.
+      $response = $client->get($login_url)->getBody()->getContents();
+      $crawler = new Crawler($response);
+      $form_build_id = $crawler->filter('#user-login-form input[name=form_build_id]')
+        ->attr('value');
+      $op = $crawler->filter('#user-login-form input[name=op]')->attr('value');
+
+      // Login a user.
+      $response = $client->post($login_url, [
+        'body' => [
+          'name' => $url_components['user'],
+          'pass' => $url_components['pass'],
+          'form_build_id' => $form_build_id,
+          'form_id' => 'user_login_form',
+          'op' => $op,
+        ]
+      ]);
+      $progress->advance();
+
+      if ($response->getStatusCode() != 200) {
+        throw new \Exception($this->trans('commands.webprofiler.benchmark.messages.error_login'));
+      }
+    }
+
+    $datas = [];
+    for ($i = 0; $i < $runs; $i++) {
+      $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.get'));
+      $datas[] = $this->getData($client, $url);
+      $progress->advance();
+    }
+
+    $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.compute_avg'));
+    $avg = $this->computeAvg($datas);
+    $progress->advance();
+
+    $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.compute_median'));
+    $median = $this->computePercentile($datas, 50);
+    $progress->advance();
+
+    $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.compute_95percentile'));
+    $percentile95 = $this->computePercentile($datas, 95);
+    $progress->advance();
+
+    $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.git_hash'));
+    $gitHash = $this->getGitHash();
+    $progress->advance();
+
+    $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.yaml'));
+    $yaml = $this->generateYaml($gitHash, $runs, $url, $avg, $median, $percentile95);
+    $progress->advance();
+
+    $progress->setMessage($this->trans('commands.webprofiler.benchmark.progress.done'));
+    $progress->finish();
+    $output->writeln('');
+
+    if ($file) {
+      file_put_contents($file, $yaml);
+    }
+    else {
+      $output->writeln($yaml);
+    }
+
+  }
+
+  /**
+   * @param \GuzzleHttp\ClientInterface $client
+   * @param $url
+   *
+   * @return array
+   */
+  private function getData(ClientInterface $client, $url) {
+    /** @var \GuzzleHttp\Message\ResponseInterface $response */
+    $response = $client->get($url);
+
+    $token = $response->getHeader('X-Debug-Token');
+
+    /** @var \Drupal\webprofiler\Profiler\Profiler $profiler */
+    $profiler = $this->getContainer()->get('profiler');
+
+    /** @var \Symfony\Component\HttpKernel\Profiler\Profile $profile */
+    $profile = $profiler->loadProfile($token);
+
+    /** @var \Drupal\webprofiler\DataCollector\TimeDataCollector $timeDataCollector */
+    $timeDataCollector = $profile->getCollector('time');
+
+    return new BenchmarkData(
+      $token,
+      $timeDataCollector->getMemory(),
+      $timeDataCollector->getDuration());
+  }
+
+  /**
+   * @param \Drupal\webprofiler\Command\BenchmarkData[] $datas
+   *
+   * @return \Drupal\webprofiler\Command\BenchmarkData
+   */
+  private function computeAvg($datas) {
+    $profiles = count($datas);
+    $totalTime = 0;
+    $totalMemory = 0;
+
+    foreach ($datas as $data) {
+      $totalTime += $data->getTime();
+      $totalMemory += $data->getMemory();
+    }
+
+    return new BenchmarkData(NULL, $totalMemory / $profiles, $totalTime / $profiles);
+  }
+
+  /**
+   * Computes percentile using The Nearest Rank method.
+   *
+   * @param \Drupal\webprofiler\Command\BenchmarkData[] $datas
+   * @param $percentile
+   *
+   * @return \Drupal\webprofiler\Command\BenchmarkData
+   *
+   * @throws \Exception
+   */
+  private function computePercentile($datas, $percentile) {
+    if ($percentile < 0 || $percentile > 100) {
+      throw new \Exception('Percentile has to be between 0 and 100');
+    }
+
+    $profiles = count($datas);
+
+    $n = ceil((($percentile / 100) * $profiles));
+    $index = (int) $n - 1;
+
+    $orderedTime = $datas;
+    $this->getOrderedDatas($orderedTime, 'Time');
+
+    $orderedMemory = $datas;
+    $this->getOrderedDatas($orderedMemory, 'Memory');
+
+    return new BenchmarkData(NULL, $orderedMemory[$index]->getMemory(), $orderedTime[$index]->getTime());
+  }
+
+  /**
+   * @return string
+   */
+  private function getGitHash() {
+    try {
+      $process = new Process('git rev-parse HEAD');
+      $process->setTimeout(3600);
+      $process->run();
+      $git_hash = $process->getOutput();
+    } catch (\Exception $e) {
+      $git_hash = $this->trans('commands.webprofiler.benchmark.messages.not_git');
+    }
+
+    return $git_hash;
+  }
+
+  /**
+   * @param \Drupal\webprofiler\Command\BenchmarkData[] $datas
+   * @param $string
+   *
+   * @return array
+   */
+  private function getOrderedDatas(&$datas, $string) {
+    usort($datas, function ($a, $b) use ($string) {
+      $method = 'get' . $string;
+      if ($a->{$method} > $b->{$method}) {
+        return 1;
+      }
+      if ($a->{$method} < $b->{$method}) {
+        return -1;
+      }
+      return 0;
+    });
+  }
+
+  /**
+   * Rebuilds Drupal cache.
+   */
+  protected function RebuildCache() {
+    require_once DRUPAL_ROOT . '/core/includes/utility.inc';
+    $kernelHelper = $this->getHelper('kernel');
+    $classLoader = $kernelHelper->getClassLoader();
+    $request = $kernelHelper->getRequest();
+    drupal_rebuild($classLoader, $request);
+  }
+
+  /**
+   * @param $gitHash
+   * @param $runs
+   * @param $url
+   * @param \Drupal\webprofiler\Command\BenchmarkData $avg
+   * @param \Drupal\webprofiler\Command\BenchmarkData $median
+   * @param \Drupal\webprofiler\Command\BenchmarkData $percentile95
+   *
+   * @return string
+   */
+  private function generateYaml($gitHash, $runs, $url, BenchmarkData $avg, BenchmarkData $median, BenchmarkData $percentile95) {
+    $yaml = Yaml::dump([
+      'date' => date($this->trans('commands.webprofiler.list.rows.time'), time()),
+      'git_commit' => $gitHash,
+      'number_of_runs' => $runs,
+      'url' => $url,
+      'results' => [
+        'average' => [
+          'time' => sprintf('%.0f ms', $avg->getTime()),
+          'memory' => sprintf('%.1f MB', $avg->getMemory() / 1024 / 1024),
+        ],
+        'median' => [
+          'time' => sprintf('%.0f ms', $median->getTime()),
+          'memory' => sprintf('%.1f MB', $median->getMemory() / 1024 / 1024),
+        ],
+        '95_percentile' => [
+          'time' => sprintf('%.0f ms', $percentile95->getTime()),
+          'memory' => sprintf('%.1f MB', $percentile95->getMemory() / 1024 / 1024),
+        ],
+      ],
+    ]);
+    return $yaml;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function showMessage($output, $message, $type = 'info') {
+  }
+
+}
diff --git a/modules/devel/webprofiler/src/Command/BenchmarkData.php b/modules/devel/webprofiler/src/Command/BenchmarkData.php
new file mode 100644
index 0000000..44fbb7a
--- /dev/null
+++ b/modules/devel/webprofiler/src/Command/BenchmarkData.php
@@ -0,0 +1,62 @@
+<?php
+
+/**
+ * @file
+ * Contains Drupal\webprofiler\Command\BenchmarkData.
+ */
+
+namespace Drupal\webprofiler\Command;
+
+/**
+ * Class BenchmarkData
+ */
+class BenchmarkData {
+
+  /**
+   * @var
+   */
+  private $token;
+
+  /**
+   * @var
+   */
+  private $memory;
+
+  /**
+   * @var
+   */
+  private $time;
+
+  /**
+   * @param $token
+   * @param $memory
+   * @param $time
+   */
+  public function __construct($token, $memory, $time) {
+    $this->token = $token;
+    $this->memory = $memory;
+    $this->time = $time;
+  }
+
+  /**
+   * @return mixed
+   */
+  public function getToken() {
+    return $this->token;
+  }
+
+  /**
+   * @return mixed
+   */
+  public function getMemory() {
+    return $this->memory;
+  }
+
+  /**
+   * @return mixed
+   */
+  public function getTime() {
+    return $this->time;
+  }
+
+}
\ No newline at end of file
diff --git a/modules/devel/webprofiler/src/Command/ExportCommand.php b/modules/devel/webprofiler/src/Command/ExportCommand.php
new file mode 100644
index 0000000..370b86b
--- /dev/null
+++ b/modules/devel/webprofiler/src/Command/ExportCommand.php
@@ -0,0 +1,156 @@
+<?php
+
+/**
+ * @file
+ * Contains Drupal\webprofiler\Command\ExportCommand.
+ */
+
+namespace Drupal\webprofiler\Command;
+
+use Drupal\Console\Command\ContainerAwareCommand;
+use Drupal\Core\Archiver\ArchiveTar;
+use Drupal\webprofiler\Profiler\Profiler;
+use Symfony\Component\Console\Helper\ProgressBar;
+use Symfony\Component\Console\Input\InputArgument;
+use Symfony\Component\Console\Input\InputInterface;
+use Symfony\Component\Console\Input\InputOption;
+use Symfony\Component\Console\Output\OutputInterface;
+
+/**
+ * Class ExportCommand
+ */
+class ExportCommand extends ContainerAwareCommand {
+
+  /** @var string */
+  private $filename;
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function configure() {
+    $this
+      ->setName('webprofiler:export')
+      ->setDescription($this->trans('commands.webprofiler.export.description'))
+      ->addArgument('id', InputArgument::OPTIONAL, $this->trans('commands.webprofiler.export.arguments.id'))
+      ->addOption('directory', NULL, InputOption::VALUE_REQUIRED, $this->trans('commands.webprofiler.export.options.directory'), '/tmp');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function execute(InputInterface $input, OutputInterface $output) {
+    $id = $input->getArgument('id');
+    $directory = $input->getOption('directory');
+
+    /** @var \Drupal\webprofiler\Profiler\Profiler $profiler */
+    $profiler = $this->getContainer()->get('profiler');
+
+    try {
+      if ($id) {
+        $this->filename = $this->exportSingle($profiler, $id, $directory);
+      }
+      else {
+        $this->filename = $this->exportAll($profiler, $directory, $output);
+      }
+
+    } catch (\Exception $e) {
+      $output->writeln('<error>' . $e->getMessage() . '</error>');
+    }
+  }
+
+  /**
+   * Exports a single profile.
+   *
+   * @param \Drupal\webprofiler\Profiler\Profiler $profiler
+   * @param int $id
+   * @param string $directory
+   *
+   * @return string
+   *
+   * @throws \Exception
+   */
+  private function exportSingle(Profiler $profiler, $id, $directory) {
+    $profile = $profiler->loadProfile($id);
+    if ($profile) {
+      $data = $profiler->export($profile);
+
+      $filename = $directory . DIRECTORY_SEPARATOR . $id . '.txt';
+      if (file_put_contents($filename, $data) === FALSE) {
+        throw new \Exception(sprintf(
+          $this->trans('commands.webprofiler.export.messages.error_writing'),
+          $filename));
+      }
+    }
+    else {
+      throw new \Exception(sprintf(
+        $this->trans('commands.webprofiler.export.messages.error_no_profile'),
+        $id));
+    }
+
+    return $filename;
+  }
+
+  /**
+   * Exports all stored profiles (cap limit at 1000 items).
+   *
+   * @param \Drupal\webprofiler\Profiler\Profiler $profiler
+   * @param string $directory
+   * @param \Symfony\Component\Console\Output\OutputInterface $output
+   *
+   * @return string
+   */
+  private function exportAll(Profiler $profiler, $directory, $output) {
+    $filename = $directory . DIRECTORY_SEPARATOR . 'profiles_' . time() . '.tar.gz';
+    $archiver = new ArchiveTar($filename, 'gz');
+    $profiles = $profiler->find(NULL, NULL, 1000, NULL, '', '');
+    $progress = new ProgressBar($output, count($profiles) + 2);
+    $progress->setFormat(' %current%/%max% [%bar%] %percent:3s%% %message%');
+
+    $files = [];
+    $progress->start();
+    $progress->setMessage($this->trans('commands.webprofiler.export.progress.exporting'));
+    foreach ($profiles as $profile) {
+      $data = $profiler->export($profiler->loadProfile($profile['token']));
+      $profileFilename = $directory . "/{$profile['token']}.txt";
+      file_put_contents($profileFilename, $data);
+      $files[] = $profileFilename;
+      $progress->advance();
+    }
+
+    $progress->setMessage($this->trans('commands.webprofiler.export.progress.archive'));
+    $archiver->createModify($files, '', $directory);
+    $progress->advance();
+
+    $progress->setMessage($this->trans('commands.webprofiler.export.progress.delete_tmp'));
+    foreach ($files as $file) {
+      unlink($file);
+    }
+    $progress->advance();
+
+    $progress->setMessage($this->trans('commands.webprofiler.export.progress.done'));
+    $progress->finish();
+    $output->writeln('');
+
+    $output->writeln(sprintf(
+      $this->trans('commands.webprofiler.export.messages.exported_count'),
+      count($profiles)));
+
+    return $filename;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function showMessage($output, $message, $type = 'info') {
+    if (!$this->filename) {
+      return;
+    }
+
+    $completeMessageKey = 'commands.webprofiler.export.messages.success';
+    $completeMessage = sprintf($this->trans($completeMessageKey), $this->filename);
+
+    if ($completeMessage != $completeMessageKey) {
+      parent::showMessage($output, $completeMessage);
+    }
+  }
+}
diff --git a/modules/devel/webprofiler/src/Command/ListCommand.php b/modules/devel/webprofiler/src/Command/ListCommand.php
new file mode 100644
index 0000000..af92882
--- /dev/null
+++ b/modules/devel/webprofiler/src/Command/ListCommand.php
@@ -0,0 +1,78 @@
+<?php
+
+/**
+ * @file
+ * Contains Drupal\webprofiler\Command\ListCommand.
+ */
+
+namespace Drupal\webprofiler\Command;
+
+use Drupal\Console\Command\ContainerAwareCommand;
+use Symfony\Component\Console\Helper\Table;
+use Symfony\Component\Console\Input\InputInterface;
+use Symfony\Component\Console\Input\InputOption;
+use Symfony\Component\Console\Output\OutputInterface;
+
+/**
+ * Class ListCommand
+ */
+class ListCommand extends ContainerAwareCommand {
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function configure() {
+    $this
+      ->setName('webprofiler:list')
+      ->setDescription($this->trans('commands.webprofiler.list.description'))
+      ->addOption('ip', NULL, InputOption::VALUE_REQUIRED, $this->trans('commands.webprofiler.list.options.ip'), NULL)
+      ->addOption('url', NULL, InputOption::VALUE_REQUIRED, $this->trans('commands.webprofiler.list.options.url'), NULL)
+      ->addOption('method', NULL, InputOption::VALUE_REQUIRED, $this->trans('commands.webprofiler.list.options.method'), NULL)
+      ->addOption('limit', NULL, InputOption::VALUE_REQUIRED, $this->trans('commands.webprofiler.list.options.limit'), 10);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function execute(InputInterface $input, OutputInterface $output) {
+    $ip = $input->getOption('ip');
+    $url = $input->getOption('url');
+    $method = $input->getOption('method');
+    $limit = $input->getOption('limit');
+
+    /** @var \Drupal\webprofiler\Profiler\Profiler $profiler */
+    $profiler = $this->getContainer()->get('profiler');
+    $profiles = $profiler->find($ip, $url, $limit, $method, '', '');
+
+    $rows = [];
+    foreach ($profiles as $profile) {
+      $row = [];
+
+      $row[] = $profile['token'];
+      $row[] = $profile['ip'];
+      $row[] = $profile['method'];
+      $row[] = $profile['url'];
+      $row[] = date($this->trans('commands.webprofiler.list.rows.time'), $profile['time']);
+
+      $rows[] = $row;
+    }
+
+    $table = new Table($output);
+    $table
+      ->setHeaders([
+        $this->trans('commands.webprofiler.list.header.token'),
+        $this->trans('commands.webprofiler.list.header.ip'),
+        $this->trans('commands.webprofiler.list.header.method'),
+        $this->trans('commands.webprofiler.list.header.url'),
+        $this->trans('commands.webprofiler.list.header.time'),
+      ])
+      ->setRows($rows);
+    $table->render();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function showMessage($output, $message, $type = 'info') {
+  }
+}
diff --git a/modules/devel/webprofiler/src/Compiler/EventPass.php b/modules/devel/webprofiler/src/Compiler/EventPass.php
new file mode 100644
index 0000000..23ba03b
--- /dev/null
+++ b/modules/devel/webprofiler/src/Compiler/EventPass.php
@@ -0,0 +1,36 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Compiler\EventPass.
+ */
+
+namespace Drupal\webprofiler\Compiler;
+
+use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
+use Symfony\Component\DependencyInjection\ContainerBuilder;
+use Symfony\Component\DependencyInjection\Definition;
+use Symfony\Component\DependencyInjection\Reference;
+
+/**
+ * Class EventPass.
+ */
+class EventPass implements CompilerPassInterface {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function process(ContainerBuilder $container) {
+    $definition = $container->findDefinition('http_kernel.basic');
+    $definition->replaceArgument(1, new Reference('webprofiler.debug.controller_resolver'));
+
+    // Replace the regular event_dispatcher service with the debug one.
+    $definition = $container->findDefinition('event_dispatcher');
+    $definition->setPublic(FALSE);
+    $container->setDefinition('webprofiler.debug.event_dispatcher.default', $definition);
+    $container->register('event_dispatcher', 'Drupal\webprofiler\TraceableEventDispatcher')
+      ->addArgument(new Reference('webprofiler.debug.event_dispatcher.default'))
+      ->addArgument(new Reference('stopwatch'))
+      ->setProperty('_serviceId', 'event_dispatcher');
+  }
+}
diff --git a/modules/devel/webprofiler/src/Compiler/ProfilerPass.php b/modules/devel/webprofiler/src/Compiler/ProfilerPass.php
new file mode 100644
index 0000000..10b8d24
--- /dev/null
+++ b/modules/devel/webprofiler/src/Compiler/ProfilerPass.php
@@ -0,0 +1,64 @@
+<?php
+
+namespace Drupal\webprofiler\Compiler;
+
+use Drupal\Core\StreamWrapper\PublicStream;
+use Symfony\Component\DependencyInjection\Reference;
+use Symfony\Component\DependencyInjection\ContainerBuilder;
+use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
+
+/**
+ * Class ProfilerPass
+ */
+class ProfilerPass implements CompilerPassInterface {
+
+  /**
+   * @param \Symfony\Component\DependencyInjection\ContainerBuilder $container
+   *
+   * @throws \InvalidArgumentException
+   */
+  public function process(ContainerBuilder $container) {
+    // configure the profiler service
+    if (FALSE === $container->hasDefinition('profiler')) {
+      return;
+    }
+
+    $definition = $container->getDefinition('profiler');
+
+    $collectors = new \SplPriorityQueue();
+    $order = PHP_INT_MAX;
+    foreach ($container->findTaggedServiceIds('data_collector') as $id => $attributes) {
+      $priority = isset($attributes[0]['priority']) ? $attributes[0]['priority'] : 0;
+      $template = NULL;
+
+      if (isset($attributes[0]['template'])) {
+        if (!isset($attributes[0]['id'])) {
+          throw new \InvalidArgumentException(sprintf('Data collector service "%s" must have an id attribute in order to specify a template', $id));
+        }
+        if (!isset($attributes[0]['title'])) {
+          throw new \InvalidArgumentException(sprintf('Data collector service "%s" must have a title attribute', $id));
+        }
+
+        $template = [
+          $attributes[0]['id'],
+          $attributes[0]['template'],
+          $attributes[0]['title']
+        ];
+      }
+
+      $collectors->insert([$id, $template], [-$priority, --$order]);
+    }
+
+    $templates = [];
+    foreach ($collectors as $collector) {
+      $definition->addMethodCall('add', [new Reference($collector[0])]);
+      $templates[$collector[0]] = $collector[1];
+    }
+
+    $container->setParameter('data_collector.templates', $templates);
+
+    // set parameter to store the public folder path
+    $path = 'file:' . DRUPAL_ROOT . '/' . PublicStream::basePath() . '/profiler';
+    $container->setParameter('data_collector.storage', $path);
+  }
+}
diff --git a/modules/devel/webprofiler/src/Compiler/ServicePass.php b/modules/devel/webprofiler/src/Compiler/ServicePass.php
new file mode 100644
index 0000000..b1be703
--- /dev/null
+++ b/modules/devel/webprofiler/src/Compiler/ServicePass.php
@@ -0,0 +1,115 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Compiler\ServicePass.
+ */
+
+namespace Drupal\webprofiler\Compiler;
+
+use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
+use Symfony\Component\DependencyInjection\Compiler\ServiceReferenceGraph;
+use Symfony\Component\DependencyInjection\ContainerBuilder;
+use Symfony\Component\DependencyInjection\Definition;
+
+/**
+ * Class ServicePass
+ */
+class ServicePass implements CompilerPassInterface {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function process(ContainerBuilder $container) {
+    if (FALSE === $container->hasDefinition('webprofiler.services')) {
+      return;
+    }
+
+    $definition = $container->getDefinition('webprofiler.services');
+    $graph = $container->getCompiler()->getServiceReferenceGraph();
+
+    $definition->addMethodCall('setServices', [$this->extractData($container, $graph)]);
+  }
+
+  /**
+   * @param \Symfony\Component\DependencyInjection\ContainerBuilder $container
+   * @param \Symfony\Component\DependencyInjection\Compiler\ServiceReferenceGraph $graph
+   *
+   * @return array
+   */
+  private function extractData(ContainerBuilder $container, ServiceReferenceGraph $graph) {
+    $data = [];
+
+    foreach ($container->getDefinitions() as $id => $definition) {
+      $inEdges = [];
+      $outEdges = [];
+
+      if ($graph->hasNode($id)) {
+        $node = $graph->getNode($id);
+
+        /** @var \Symfony\Component\DependencyInjection\Compiler\ServiceReferenceGraphEdge $edge */
+        foreach ($node->getInEdges() as $edge) {
+          /** @var \Symfony\Component\DependencyInjection\Reference $edgeValue */
+          $edgeValue = $edge->getValue();
+
+          $inEdges[] = [
+            'id' => $edge->getSourceNode()->getId(),
+            'invalidBehavior' => $edgeValue ? $edgeValue->getInvalidBehavior() : NULL,
+            'strict' => $edgeValue ? $edgeValue->isStrict() : NULL,
+          ];
+        }
+
+
+        /** @var \Symfony\Component\DependencyInjection\Compiler\ServiceReferenceGraphEdge $edge */
+        foreach ($node->getOutEdges() as $edge) {
+          /** @var \Symfony\Component\DependencyInjection\Reference $edgeValue */
+          $edgeValue = $edge->getValue();
+
+          $outEdges[] = [
+            'id' => $edge->getDestNode()->getId(),
+            'invalidBehavior' => $edgeValue ? $edgeValue->getInvalidBehavior() : NULL,
+            'strict' => $edgeValue ? $edgeValue->isStrict() : NULL,
+          ];
+        }
+      }
+
+      if ($definition instanceof Definition) {
+        $class = $definition->getClass();
+
+        try {
+          $reflectedClass = new \ReflectionClass($class);
+          $file = $reflectedClass->getFileName();
+        } catch (\ReflectionException $e) {
+          $file = NULL;
+        }
+
+        $tags = $definition->getTags();
+        $public = $definition->isPublic();
+        $synthetic = $definition->isSynthetic();
+      }
+      else {
+        $id = $definition->__toString();
+        $class = NULL;
+        $file = NULL;
+        $tags = [];
+        $public = NULL;
+        $synthetic = NULL;
+      }
+
+      $data[$id] = [
+        'inEdges' => $inEdges,
+        'outEdges' => $outEdges,
+        'value' => [
+          'class' => $class,
+          'file' => $file,
+          'id' => $id,
+          'tags' => $tags,
+          'public' => $public,
+          'synthetic' => $synthetic,
+        ],
+      ];
+    }
+
+    return $data;
+  }
+}
diff --git a/modules/devel/webprofiler/src/Compiler/StoragePass.php b/modules/devel/webprofiler/src/Compiler/StoragePass.php
new file mode 100644
index 0000000..9d19be5
--- /dev/null
+++ b/modules/devel/webprofiler/src/Compiler/StoragePass.php
@@ -0,0 +1,37 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Compiler\StoragePass.
+ */
+
+namespace Drupal\webprofiler\Compiler;
+
+use Symfony\Component\DependencyInjection\Reference;
+use Symfony\Component\DependencyInjection\ContainerBuilder;
+use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
+
+/**
+ * Class StoragePass
+ */
+class StoragePass implements CompilerPassInterface {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function process(ContainerBuilder $container) {
+    if (FALSE === $container->hasDefinition('profiler.storage_manager')) {
+      return;
+    }
+
+    $definition = $container->getDefinition('profiler.storage_manager');
+
+    foreach ($container->findTaggedServiceIds('webprofiler_storage') as $id => $attributes) {
+      $definition->addMethodCall('addStorage', [
+        $id,
+        $attributes[0]['title'],
+        new Reference($id)
+      ]);
+    }
+  }
+}
diff --git a/modules/devel/webprofiler/src/Config/ConfigFactoryWrapper.php b/modules/devel/webprofiler/src/Config/ConfigFactoryWrapper.php
new file mode 100644
index 0000000..733a304
--- /dev/null
+++ b/modules/devel/webprofiler/src/Config/ConfigFactoryWrapper.php
@@ -0,0 +1,49 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Config\ConfigFactoryWrapper.
+ */
+
+namespace Drupal\webprofiler\Config;
+
+use Drupal\Core\Config\ConfigFactory;
+use Drupal\webprofiler\DataCollector\ConfigDataCollector;
+
+/**
+ * Wraps a config factory to be able to figure out all used config files.
+ */
+class ConfigFactoryWrapper extends ConfigFactory {
+
+  /**
+   * @var \Drupal\webprofiler\DataCollector\ConfigDataCollector
+   */
+  private $dataCollector;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function get($name) {
+    $result = parent::get($name);
+    $this->dataCollector->addConfigName($name);
+    return $result;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadMultiple(array $names) {
+    $result = parent::loadMultiple($names);
+    foreach (array_keys($result) as $name) {
+      $this->dataCollector->addConfigName($name);
+    }
+    return $result;
+  }
+
+  /**
+   * @param \Drupal\webprofiler\DataCollector\ConfigDataCollector $dataCollector
+   */
+  public function setDataCollector(ConfigDataCollector $dataCollector) {
+    $this->dataCollector = $dataCollector;
+  }
+}
diff --git a/modules/devel/webprofiler/src/Controller/DashboardController.php b/modules/devel/webprofiler/src/Controller/DashboardController.php
new file mode 100644
index 0000000..77c9eff
--- /dev/null
+++ b/modules/devel/webprofiler/src/Controller/DashboardController.php
@@ -0,0 +1,241 @@
+<?php
+
+namespace Drupal\webprofiler\Controller;
+
+use Drupal\Core\Controller\ControllerBase;
+use Drupal\Core\Datetime\DateFormatter;
+use Drupal\Core\Url;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\webprofiler\Profiler\ProfilerStorageManager;
+use Drupal\webprofiler\Profiler\TemplateManager;
+use Symfony\Component\HttpFoundation\JsonResponse;
+use Drupal\webprofiler\Profiler\Profiler;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+use Symfony\Component\HttpKernel\Profiler\Profile;
+use Symfony\Component\Routing\RouterInterface;
+
+/**
+ * Class DashboardController
+ */
+class DashboardController extends ControllerBase {
+
+  /**
+   * @var \Drupal\webprofiler\Profiler\Profiler
+   */
+  private $profiler;
+
+  /**
+   * @var \Symfony\Cmf\Component\Routing\ChainRouter
+   */
+  private $router;
+
+  /**
+   * @var \Drupal\webprofiler\Profiler\TemplateManager
+   */
+  private $templateManager;
+
+  /**
+   * @var \Drupal\Core\Datetime\DateFormatter
+   */
+  private $date;
+
+  /**
+   * @var \Drupal\webprofiler\Profiler\ProfilerStorageManager
+   */
+  private $storageManager;
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('profiler'),
+      $container->get('router'),
+      $container->get('template_manager'),
+      $container->get('date.formatter'),
+      $container->get('profiler.storage_manager')
+    );
+  }
+
+  /**
+   * Constructs a new WebprofilerController.
+   *
+   * @param \Drupal\webprofiler\Profiler\Profiler $profiler
+   * @param \Symfony\Component\Routing\RouterInterface $router
+   * @param \Drupal\webprofiler\Profiler\TemplateManager $templateManager
+   * @param \Drupal\Core\Datetime\DateFormatter $date
+   * @param \Drupal\webprofiler\Profiler\ProfilerStorageManager $storageManager
+   */
+  public function __construct(Profiler $profiler, RouterInterface $router, TemplateManager $templateManager, DateFormatter $date, ProfilerStorageManager $storageManager) {
+    $this->profiler = $profiler;
+    $this->router = $router;
+    $this->templateManager = $templateManager;
+    $this->date = $date;
+    $this->storageManager = $storageManager;
+  }
+
+  /**
+   * Generates the dashboard page.
+   *
+   * @param Profile $profile
+   *
+   * @return array
+   */
+  public function dashboardAction(Profile $profile) {
+    $this->profiler->disable();
+
+    $templateManager = $this->templateManager;
+    $templates = $templateManager->getTemplates($profile);
+
+    $panels = [];
+    $libraries = ['webprofiler/dashboard'];
+    $drupalSettings = [
+      'webprofiler' => [
+        'token' => $profile->getToken(),
+        'idelink' => $this->config('webprofiler.config')->get('ide_link'),
+        'collectors' => [],
+      ],
+    ];
+
+    foreach ($templates as $name => $template) {
+      /** @var DrupalDataCollectorInterface $collector */
+      $collector = $profile->getCollector($name);
+
+      if ($collector->hasPanel()) {
+        $rendered = $template->renderBlock('panel', [
+          'token' => $profile->getToken(),
+          'name' => $name,
+        ]);
+
+        $panels[] = [
+          '#theme' => 'webprofiler_panel',
+          '#panel' => $rendered,
+        ];
+
+        $drupalSettings['webprofiler']['collectors'][] = [
+          'id' => $name,
+          'name' => $name,
+          'label' => $collector->getTitle(),
+          'summary' => $collector->getPanelSummary(),
+          'icon' => $collector->getIcon(),
+        ];
+
+        $libraries = array_merge($libraries, $collector->getLibraries());
+        $drupalSettings['webprofiler'] += $collector->getDrupalSettings();
+      }
+    }
+
+    $build = [];
+    $build['panels'] = [
+      '#theme' => 'webprofiler_dashboard',
+      '#profile' => $profile,
+      '#panels' => $panels,
+      '#spinner_path' => '/' . $this->moduleHandler()
+          ->getModule('webprofiler')
+          ->getPath() . '/images/searching.gif',
+      '#attached' => [
+        'drupalSettings' => $drupalSettings,
+        'library' => $libraries,
+      ],
+    ];
+
+    return $build;
+  }
+
+  /**
+   * Generates the list page.
+   *
+   * @param \Symfony\Component\HttpFoundation\Request $request
+   *
+   * @return array
+   */
+  public function listAction(Request $request) {
+    $limit = $request->get('limit', 10);
+    $this->profiler->disable();
+
+    $ip = $request->query->get('ip');
+    $method = $request->query->get('method');
+    $url = $request->query->get('url');
+
+    $profiles = $this->profiler->find($ip, $url, $limit, $method, '', '');
+
+    $rows = [];
+    if (count($profiles)) {
+      foreach ($profiles as $profile) {
+        $row = [];
+        $row[] = $this->l($profile['token'], new Url('webprofiler.dashboard', ['profile' => $profile['token']]));
+        $row[] = $profile['ip'];
+        $row[] = $profile['method'];
+        $row[] = $profile['url'];
+        $row[] = $this->date->format($profile['time']);
+
+        $rows[] = $row;
+      }
+    }
+    else {
+      $rows[] = [
+        [
+          'data' => $this->t('No profiles found'),
+          'colspan' => 6,
+        ],
+      ];
+    }
+
+    $build = [];
+
+    $storage_id = $this->config('webprofiler.config')->get('storage');
+    $storage = $this->storageManager->getStorage($storage_id);
+
+    $build['resume'] = [
+      '#type' => 'inline_template',
+      '#template' => '<p>{{ message }}</p>',
+      '#context' => [
+        'message' => $this->t('Profiles stored with %storage service.', ['%storage' => $storage['title']]),
+      ],
+    ];
+
+    $build['filters'] = $this->formBuilder()
+      ->getForm('Drupal\\webprofiler\\Form\\ProfilesFilterForm');
+
+    $build['table'] = [
+      '#type' => 'table',
+      '#rows' => $rows,
+      '#header' => [
+        $this->t('Token'),
+        [
+          'data' => $this->t('Ip'),
+          'class' => [RESPONSIVE_PRIORITY_LOW],
+        ],
+        [
+          'data' => $this->t('Method'),
+          'class' => [RESPONSIVE_PRIORITY_LOW],
+        ],
+        $this->t('Url'),
+        [
+          'data' => $this->t('Time'),
+          'class' => [RESPONSIVE_PRIORITY_MEDIUM],
+        ],
+      ],
+      '#sticky' => TRUE,
+    ];
+
+    return $build;
+  }
+
+  /**
+   * Exposes collector's data as JSON.
+   *
+   * @param \Symfony\Component\HttpKernel\Profiler\Profile $profile
+   * @param $collector
+   *
+   * @return \Symfony\Component\HttpFoundation\JsonResponse
+   */
+  public function restCollectorAction(Profile $profile, $collector) {
+    $this->profiler->disable();
+
+    $data = $profile->getCollector($collector)->getData();
+
+    return new JsonResponse(['data' => $data]);
+  }
+}
diff --git a/modules/devel/webprofiler/src/Controller/DatabaseController.php b/modules/devel/webprofiler/src/Controller/DatabaseController.php
new file mode 100644
index 0000000..fba3b51
--- /dev/null
+++ b/modules/devel/webprofiler/src/Controller/DatabaseController.php
@@ -0,0 +1,101 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Controller\DatabaseController.
+ */
+
+namespace Drupal\webprofiler\Controller;
+
+use Drupal\Core\Controller\ControllerBase;
+use Drupal\Core\Database\Connection;
+use Drupal\Core\Database\Database;
+use Drupal\webprofiler\DataCollector\DatabaseDataCollector;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+use Symfony\Component\HttpFoundation\JsonResponse;
+use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;
+use Symfony\Component\HttpKernel\Profiler\Profile;
+use Symfony\Component\HttpKernel\Profiler\Profiler;
+
+/**
+ * Class DatabaseController
+ */
+class DatabaseController extends ControllerBase {
+
+  /**
+   * @var \Symfony\Component\HttpKernel\Profiler\Profiler
+   */
+  private $profiler;
+
+  /**
+   * @var \Drupal\Core\Database\Connection
+   */
+  private $database;
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('profiler'),
+      $container->get('database')
+    );
+  }
+
+  /**
+   * Constructs a new WebprofilerController.
+   *
+   * @param \Symfony\Component\HttpKernel\Profiler\Profiler $profiler
+   * @param \Drupal\Core\Database\Connection $database
+   */
+  public function __construct(Profiler $profiler, Connection $database) {
+    $this->profiler = $profiler;
+    $this->database = $database;
+  }
+
+  /**
+   * @param Profile $profile
+   * @param int $qid
+   *
+   * @return JsonResponse
+   */
+  public function explainAction(Profile $profile, $qid) {
+    $query = $this->getQuery($profile, $qid);
+
+    $data = [];
+    $result = $this->database->query('EXPLAIN ' . $query['query'], (array) $query['args'])
+      ->fetchAllAssoc('table');
+    $i = 1;
+    foreach ($result as $row) {
+      foreach ($row as $key => $value) {
+        $data[$i][$key] = $value;
+      }
+      $i++;
+    }
+
+    return new JsonResponse(['data' => $data]);
+  }
+
+  /**
+   * @param $profile ->getToken()
+   * @param int $qid
+   *
+   * @return array
+   */
+  private function getQuery(Profile $profile, $qid) {
+    $this->profiler->disable();
+    $token = $profile->getToken();
+
+    if (!$profile = $this->profiler->loadProfile($token)) {
+      throw new NotFoundHttpException($this->t('Token @token does not exist.', ['@token' => $token]));
+    }
+
+    /** @var DatabaseDataCollector $databaseCollector */
+    $databaseCollector = $profile->getCollector('database');
+
+    $queries = $databaseCollector->getQueries();
+    $query = $queries[$qid];
+
+    return $query;
+  }
+}
diff --git a/modules/devel/webprofiler/src/Controller/ToolbarController.php b/modules/devel/webprofiler/src/Controller/ToolbarController.php
new file mode 100644
index 0000000..de0e240
--- /dev/null
+++ b/modules/devel/webprofiler/src/Controller/ToolbarController.php
@@ -0,0 +1,108 @@
+<?php
+
+namespace Drupal\webprofiler\Controller;
+
+use Drupal\Component\Serialization\Json;
+use Drupal\Core\Controller\ControllerBase;
+use Drupal\Core\Render\RendererInterface;
+use Drupal\webprofiler\Profiler\Profiler;
+use Drupal\webprofiler\Profiler\TemplateManager;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+use Symfony\Component\HttpFoundation\JsonResponse;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\Profiler\Profile;
+
+/**
+ * Class ToolbarController
+ */
+class ToolbarController extends ControllerBase {
+
+  /**
+   * @var \Drupal\webprofiler\Profiler\Profiler
+   */
+  private $profiler;
+
+  /**
+   * @var \Drupal\webprofiler\Profiler\TemplateManager
+   */
+  private $templateManager;
+
+  /**
+   * @var \Drupal\Core\Render\RendererInterface
+   */
+  private $renderer;
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('profiler'),
+      $container->get('template_manager'),
+      $container->get('renderer')
+    );
+  }
+
+  /**
+   * Constructs a new WebprofilerController.
+   *
+   * @param \Drupal\webprofiler\Profiler\Profiler $profiler
+   * @param \Drupal\webprofiler\Profiler\TemplateManager $templateManager
+   * @param \Drupal\Core\Render\RendererInterface $renderer
+   */
+  public function __construct(Profiler $profiler, TemplateManager $templateManager, RendererInterface $renderer) {
+    $this->profiler = $profiler;
+    $this->templateManager = $templateManager;
+    $this->renderer = $renderer;
+  }
+
+  /**
+   * Generates the toolbar.
+   *
+   * @param Profile $profile
+   *
+   * @return array
+   */
+  public function toolbarAction(Profile $profile) {
+    $this->profiler->disable();
+
+    $templates = $this->templateManager->getTemplates($profile);
+
+    $rendered = '';
+    foreach ($templates as $name => $template) {
+      $rendered .= $template->renderBlock('toolbar', [
+        'collector' => $profile->getcollector($name),
+        'token' => $profile->getToken(),
+        'name' => $name
+      ]);
+    }
+
+    $toolbar = [
+      '#theme' => 'webprofiler_toolbar',
+      '#toolbar' => $rendered,
+      '#token' => $profile->getToken(),
+    ];
+
+    return new Response($this->renderer->render($toolbar));
+  }
+
+  /**
+   * @param \Symfony\Component\HttpKernel\Profiler\Profile $profile
+   * @param \Symfony\Component\HttpFoundation\Request $request
+   *
+   * @return \Symfony\Component\HttpFoundation\JsonResponse
+   */
+  public function savePerformanceTimingAction(Profile $profile, Request $request) {
+    $this->profiler->disable();
+
+    $data = Json::decode($request->getContent());
+
+    /** @var  $collector */
+    $collector = $profile->getCollector('performance_timing');
+    $collector->setData($data);
+    $this->profiler->updateProfile($profile);
+
+    return new JsonResponse(['success' => TRUE]);
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/AssetsDataCollector.php b/modules/devel/webprofiler/src/DataCollector/AssetsDataCollector.php
new file mode 100644
index 0000000..0d91645
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/AssetsDataCollector.php
@@ -0,0 +1,112 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\AssetsDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Component\Utility\NestedArray;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Collects data about the used assets (CSS/JS).
+ */
+class AssetsDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * The app root.
+   *
+   * @var string
+   */
+  protected $root;
+
+  /**
+   * Constructs a AssetDataCollector object.
+   *
+   * @param string $root
+   *   The app root.
+   */
+  public function __construct($root) {
+    $this->root = $root;
+
+    $this->data['js'] = [];
+    $this->data['css'] = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $this->data['assets']['installation_path'] = $this->root . '/';
+  }
+
+  /**
+   * @param $jsAsset
+   */
+  public function addJsAsset($jsAsset) {
+    $this->data['js'] = NestedArray::mergeDeepArray([
+      $jsAsset,
+      $this->data['js']
+    ]);
+  }
+
+  /**
+   * @param $cssAsset
+   */
+  public function addCssAsset($cssAsset) {
+    $this->data['css'] = NestedArray::mergeDeepArray([
+      $cssAsset,
+      $this->data['css']
+    ]);
+  }
+
+  /**
+   * Twig callback to return the amount of CSS files.
+   */
+  public function getCssCount() {
+    return count($this->data['css']);
+  }
+
+  /**
+   * Twig callback to return the amount of JS files.
+   */
+  public function getJsCount() {
+    return count($this->data['js']) - 1;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'assets';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Assets');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Total: @count', ['@count' => ($this->getCssCount() + $this->getJsCount())]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxQUE0NEI2NTlCQTkxMUUzQkFDRjg2NUVCQ0NFNTcwQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxQUE0NEI2NjlCQTkxMUUzQkFDRjg2NUVCQ0NFNTcwQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFBQTQ0QjYzOUJBOTExRTNCQUNGODY1RUJDQ0U1NzBCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFBQTQ0QjY0OUJBOTExRTNCQUNGODY1RUJDQ0U1NzBCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+C1mVdgAAAktJREFUeNrUlk+I6VEUx48/4SVKpkgiCywkK8ksWVhYSFm9hYXFqxfbt2KnLJS9hbKQhZXtFMVmUrKYkZmslPxLSvnvYZx37+2NTDPP03ss5tTpcu/xued77rm/Hw4iwqWNC1cwzv8CPlJ6lUypfSf+k256Ad8R/0HlL4l/uWCSL5zfO/xTLTkczrvx9aDwU7QUX61Ww/Pz88WAdrv9Oplyzz0UPp8PIpEIzrnWJ6EUJBAI2DgYDOD+/h7EYjFwuadz4X80SUFCoRB6vR6Mx2Mwm82QTqfh4eEBNBoN3NzcgFQqhdVqBbvd7s+ZUlkUJpFIoN1uQyQSAYvFAqlUiq2Xy2VwuVwQCoXAZrNBMpmE6XTK4nk83lsqOX0ki0h2xUajgYFAAJVKJRoMBoxGo9hqtXA4HCKNq1ar+Pj4iMFgEFUqFer1egyHw9jv93GxWDCOyWTCA5RaLBZjd9jhcGCz2cRXKxQKqNVqcTQaHeZKpRLqdDoWf3d3h6QMB+hB/nK5BL/fD4lEAsiPmUSfzwf1eh1qtRoYjUaQy+WQz+eBbAoej4fVN5PJgNVqZfV9J586lUBtMplgLpdDEoyktuj1ejEej7M1p9OJbrcbi8UirtdrNjebzQ6MN/KPfT6f436/Z3XudDp4e3uLlUqFQej37XbL5B7DjqEfthQBAgGzfpTJZJDNZpn0zWbDRgI/eQlOdjGFU1coFIfHGu3Lv90qbrfbXRFpJ4POAVGjh/r09PRCP38l3r3Q62RA/NtV3qb8T/Nn4irQXwIMANMNuV/Q8qbhAAAAAElFTkSuQmCC';
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/BlocksDataCollector.php b/modules/devel/webprofiler/src/DataCollector/BlocksDataCollector.php
new file mode 100644
index 0000000..eb73f30
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/BlocksDataCollector.php
@@ -0,0 +1,153 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\BlocksDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\block\Entity\Block;
+use Drupal\Core\Entity\EntityManagerInterface;
+use Drupal\Core\Entity\EntityStorageInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\webprofiler\Entity\EntityDecorator;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Class BlocksDataCollector
+ */
+class BlocksDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var
+   */
+  private $entityManager;
+
+  /**
+   * @param \Drupal\Core\Entity\EntityManagerInterface $entityManager
+   */
+  public function __construct(EntityManagerInterface $entityManager) {
+    $this->entityManager = $entityManager;
+
+    $this->data['blocks']['loaded'] = [];
+    $this->data['blocks']['rendered'] = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $storage = $this->entityManager->getStorage('block');
+
+    $loaded = $this->entityManager->getLoaded('block');
+    $rendered = $this->entityManager->getRendered('block');
+
+    if ($loaded) {
+      $this->data['blocks']['loaded'] = $this->getBlocksData($loaded, $storage);
+
+    }
+
+    if ($rendered) {
+      $this->data['blocks']['rendered'] = $this->getBlocksData($rendered, $storage);
+    }
+  }
+
+  /**
+   * @return array
+   */
+  public function getRenderedBlocks() {
+    return $this->data['blocks']['rendered'];
+  }
+
+  /**
+   * @return int
+   */
+  public function getRenderedBlocksCount() {
+    return count($this->getRenderedBlocks());
+  }
+
+  /**
+   * @return array
+   */
+  public function getLoadedBlocks() {
+    return $this->data['blocks']['loaded'];
+  }
+
+  /**
+   * @return int
+   */
+  public function getLoadedBlocksCount() {
+    return count($this->getLoadedBlocks());
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'blocks';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Blocks');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Loaded: @loaded, rendered: @rendered', [
+      '@loaded' => $this->getLoadedBlocksCount(),
+      '@rendered' => $this->getRenderedBlocksCount()
+    ]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowNDgwMTE3NDA3MjA2ODExOEY2MkNCNjI0NDY3NzkwRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowQjg5OTA4OEYwQTgxMUUzQkJDRThFQjA5Q0E1REFCRCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowQjg5OTA4N0YwQTgxMUUzQkJDRThFQjA5Q0E1REFCRCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDM4MDExNzQwNzIwNjgxMTg3MUZDQ0I0RjY1RTlEM0IiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDQ4MDExNzQwNzIwNjgxMThGNjJDQjYyNDQ2Nzc5MEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz68h+kGAAAAWElEQVR42mL8//8/A7UBEwMNwAg3lAVEODg4UCW2Dhw4wDgapgyMtEj8eCMKFPCkyI1GFCJMiUnQVDUUX0SNllK4wxRf+JAdUeQUfaMRRd+ib4SHKUCAAQAMcyf8vLAstgAAAABJRU5ErkJggg==';
+  }
+
+  /**
+   * @param $decorator
+   * @param $storage
+   *
+   * @return array
+   */
+  private function getBlocksData(EntityDecorator $decorator, EntityStorageInterface $storage) {
+    $blocks = [];
+
+    /** @var \Drupal\block\BlockInterface $block */
+    foreach ($decorator->getEntities() as $block) {
+      /** @var Block $entity */
+      $entity = $storage->load($block->get('id'));
+
+      $route = '';
+      if ($entity->hasLinkTemplate('edit-form')) {
+        $route = $entity->urlInfo('edit-form')->toString();
+      }
+
+      $id = $block->get('id');
+      $blocks[$id] = [
+        'id' => $id,
+        'region' => $block->getRegion(),
+        'status' => $block->get('status'),
+        'theme' => $block->getTheme(),
+        'plugin' => $block->get('plugin'),
+        'settings' => $block->get('settings'),
+        'route' => $route,
+      ];
+    }
+
+    return $blocks;
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/CacheDataCollector.php b/modules/devel/webprofiler/src/DataCollector/CacheDataCollector.php
new file mode 100644
index 0000000..70b63fe
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/CacheDataCollector.php
@@ -0,0 +1,177 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\CacheDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Collects the used cache bins and cache CIDs.
+ */
+class CacheDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  const WEBPROFILER_CACHE_HIT = 'bin_cids_hit';
+  const WEBPROFILER_CACHE_MISS = 'bin_cids_miss';
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+  }
+
+  /**
+   *
+   */
+  public function __construct() {
+    $this->data['total'][CacheDataCollector::WEBPROFILER_CACHE_HIT] = 0;
+    $this->data['total'][CacheDataCollector::WEBPROFILER_CACHE_MISS] = 0;
+    $this->data['cache'] = [];
+  }
+
+  /**
+   * Registers a cache get on a specific cache bin.
+   *
+   * @param $cache
+   */
+  public function registerCacheHit($bin, $cache) {
+    $current = isset($this->data['cache'][$bin][$cache->cid]) ? $this->data['cache'][$bin][$cache->cid] : NULL;
+
+    if (!$current) {
+      $current = $cache;
+      $current->{CacheDataCollector::WEBPROFILER_CACHE_HIT} = 0;
+      $current->{CacheDataCollector::WEBPROFILER_CACHE_MISS} = 0;
+      $this->data['cache'][$bin][$cache->cid] = $current;
+    }
+
+    $current->{CacheDataCollector::WEBPROFILER_CACHE_HIT}++;
+    $this->data['total'][CacheDataCollector::WEBPROFILER_CACHE_HIT]++;
+  }
+
+  /**
+   * Registers a cache get on a specific cache bin.
+   *
+   * @param $bin
+   * @param $cid
+   */
+  public function registerCacheMiss($bin, $cid) {
+    $current = isset($this->data['cache'][$bin][$cid]) ?
+      $this->data['cache'][$bin][$cid] : NULL;
+
+    if (!$current) {
+      $current = new \StdClass();
+      $current->{CacheDataCollector::WEBPROFILER_CACHE_HIT} = 0;
+      $current->{CacheDataCollector::WEBPROFILER_CACHE_MISS} = 0;
+      $this->data['cache'][$bin][$cid] = $current;
+    }
+
+    $current->{CacheDataCollector::WEBPROFILER_CACHE_MISS}++;
+    $this->data['total'][CacheDataCollector::WEBPROFILER_CACHE_MISS]++;
+  }
+
+  /**
+   * Callback to return the total amount of requested cache CIDS.
+   *
+   * @param string $type
+   *
+   * @return int
+   */
+  public function getCacheCidsCount($type) {
+    return $this->data['total'][$type];
+  }
+
+  /**
+   * Callback to return the total amount of hit cache CIDS.
+   *
+   * @return int
+   */
+  public function getCacheHitsCount() {
+    return $this->getCacheCidsCount(CacheDataCollector::WEBPROFILER_CACHE_HIT);
+  }
+
+  /**
+   * Callback to return the total amount of miss cache CIDS.
+   *
+   * @return int
+   */
+  public function getCacheMissesCount() {
+    return $this->getCacheCidsCount(CacheDataCollector::WEBPROFILER_CACHE_MISS);
+  }
+
+  /**
+   * Callback to return the total amount of hit cache CIDs keyed by bin.
+   *
+   * @param $type
+   *
+   * @return array
+   */
+  public function cacheCids($type) {
+    $hits = [];
+    foreach ($this->data['cache'] as $bin => $caches) {
+      $hits[$bin] = 0;
+      foreach ($caches as $cid => $cache) {
+        $hits[$bin] += $cache->{$type};
+      }
+    }
+
+    return $hits;
+  }
+
+  /**
+   * Callback to return hit cache CIDs keyed by bin.
+   *
+   * @return array
+   */
+  public function getCacheHits() {
+    return $this->cacheCids(CacheDataCollector::WEBPROFILER_CACHE_HIT);
+  }
+
+  /**
+   * Callback to return miss cache CIDs keyed by bin.
+   *
+   * @return array
+   */
+  public function getCacheMisses() {
+    return $this->cacheCids(CacheDataCollector::WEBPROFILER_CACHE_MISS);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'cache';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Cache');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Hit: @cache_hit, miss: @cache_miss', [
+      '@cache_hit' => $this->getCacheCidsCount(CacheDataCollector::WEBPROFILER_CACHE_HIT),
+      '@cache_miss' => $this->getCacheCidsCount(CacheDataCollector::WEBPROFILER_CACHE_MISS),
+    ]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2Njc3QTVEQTkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2Njc3QTVEQjkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRGQTVBQzYxOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRGQTVBQzYyOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+BsBwAAAAAJtJREFUeNpi/P//PwM1ARMDlcEIMdDBweEZjM0IihSgwEx8Gg4cOJCOrhGHOimqe5kF2QVYvDITl0vQvQwTo4oLkS1gQrPpPwiTEBkY6pnwKJ5JyOskJRvkcMUVxjgjhRhDsUUGSQZu3rwZb1j6+voyjhYOI9VAFmKTBTC3oMsTbyAx+RndAqxejo2NJdmL6HoYR6vRwWcgQIABAOn0PsqqgQzcAAAAAElFTkSuQmCC';
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/ConfigDataCollector.php b/modules/devel/webprofiler/src/DataCollector/ConfigDataCollector.php
new file mode 100644
index 0000000..3ff13a7
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/ConfigDataCollector.php
@@ -0,0 +1,73 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\ConfigDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Provides a datacollector to show all requested configs.
+ */
+class ConfigDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+  }
+
+  /**
+   * Registers a new requested config name.
+   *
+   * @param string $name
+   *   The name of the config.
+   */
+  public function addConfigName($name) {
+    $this->data['config_names'][$name] = isset($this->data['config_names'][$name]) ? $this->data['config_names'][$name] + 1 : 1;
+  }
+
+  /**
+   * Callback to display the config names.
+   */
+  public function getConfigNames() {
+    return $this->data['config_names'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'config';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Config');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Total: @count', ['@count' => count($this->getConfigNames())]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABsAAAAcCAYAAACQ0cTtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2Njc3QTVFMjkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2Njc3QTVFMzkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjY2NzdBNUUwOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY2NzdBNUUxOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+f0Re8gAAA3RJREFUeNrsVk9ME1kY/82fTqfQf5ROW2gpuKCioHbdEDeBxITdxE08eOHkiQOr8cZhNx7k4MGDmpAQxTtHPBgPXjCbeLDE/XtglSUGGyhxgBYLdNpSOu3MPN+MwUSQP1HUZONv8st7897M9833fb837zGEEHwusPiM+P86AxjmEqVKSfaBGuWvlHgf6cUUb9+65WhsbPzo706n0/j5wgWddgOUK1vSKEnSvjgyEQwGQW1xtBv+4jXjc7kcBgcH981gJpPZ3tmnjoa7NgOSXwYK2U+bRu76y73XLBaLIRQKvXe8paVlZ0c35L2ncWho6K3B/v5+JBIJOJ3Ot+PmfV9fnzWvcyJWpeNQ/O0oH7oILhK7Q4cnKR9RjlEWrCVtF0Xy/alTW5z19PRgbGwMo6OjlmHToekolUpheHgYhYL1Pso2F+a+OQd/cwTftdlRH9QhujPGconJx5/VyRMvpD+IWrxCa5bmeJ6/GolEtjibmppCuVyGz+dDd3e3ZTwajWJgYMAatyJiBcyGf0J7pwcdzQEcbktBnW8Fr3NMXcOSeLRpKSCw2cD0tNgEQ3+0q0DGx8ettre3FyMjI+/MrYhReKMcgpII1jePdZVBWQXcBxJYfOFGzsjjYGsyErYvdkLJnN1V+hMTE1Zrpm+jv4FVxoemhjISyWqsKi68JDWwcSUsPhWQSQBSdA4Lz+vh92j18rRyZs/rbLMjE0WaTSJlsab+h1LqNES7BqLpYB2vIPwYx/zjNqwlDsBR8VaRwlzzrs42FGlGtgWaBiVZjzLngVChNYQBGATas5OoKCvQSB6k4x64uXYGTwyW322dmao01WgqczNEujMRRYSjqhUOhwAbz4Klu4nB8yhyEtZyPEqh36BquSLYzpltBdLV1WWJwmzN6EzZb4aPUZCfVRHyeiA53Qi6XKhzuxGurUFD8Qz8Xga1BQ+y8SNLEKoe8jupcEOJ26HWSGN5VYYiJ3Ei9i14GpaNezOn8gIcjISn/3Sks8n2PyFqDzhd1y/XeL02URQ/4ExhwFOSMbtux0qxgoDHBb+7GiLPG9l8ce2vyYI8nQjHMXn/Fzy+uWzu1Ofpeze32/D29scVgLpjwMEfSrSVUe1PoUK/Yib+N/69+zuy8gJ9apGxzgcfCkLMmjspq3b4qZsH03XKPPP1kLofeC3AAMaxXzYck+ZeAAAAAElFTkSuQmCC';
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/DatabaseDataCollector.php b/modules/devel/webprofiler/src/DataCollector/DatabaseDataCollector.php
new file mode 100644
index 0000000..754cb87
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/DatabaseDataCollector.php
@@ -0,0 +1,239 @@
+<?php
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Drupal\Core\Database\Connection;
+use Drupal\Core\Database\Database;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Class DatabaseDataCollector
+ */
+class DatabaseDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\Core\Database\Connection
+   */
+  private $database;
+
+  /**
+   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   */
+  private $configFactory;
+
+  /**
+   * @param \Drupal\Core\Database\Connection $database
+   * @param \Drupal\Core\Config\ConfigFactoryInterface $configFactory
+   */
+  public function __construct(Connection $database, ConfigFactoryInterface $configFactory) {
+    $this->database = $database;
+    $this->configFactory = $configFactory;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $queries = $this->database->getLogger()->get('webprofiler');
+
+    foreach ($queries as &$query) {
+      // Remove caller args.
+      unset($query['caller']['args']);
+
+      // Remove query args element if empty.
+      if(empty($query['args'])) {
+        unset($query['args']);
+      }
+
+      // Save time in milliseconds.
+      $query['time'] = $query['time'] * 1000;
+    }
+
+    $querySort = $this->configFactory->get('webprofiler.config')->get('query_sort');
+    if('duration' === $querySort) {
+      usort($queries, [
+        "Drupal\\webprofiler\\DataCollector\\DatabaseDataCollector",
+        "orderQueryByTime",
+      ]);
+    }
+
+    $this->data['queries'] = $queries;
+
+    $options = $this->database->getConnectionOptions();
+
+    // Remove password for security.
+    unset($options['password']);
+
+    $this->data['database'] = $options;
+  }
+
+  /**
+   * @return array
+   */
+  public function getDatabase() {
+    return $this->data['database'];
+  }
+
+  /**
+   * @return int
+   */
+  public function getQueryCount() {
+    return count($this->data['queries']);
+  }
+
+  /**
+   * @return array
+   */
+  public function getQueries() {
+    return $this->data['queries'];
+  }
+
+  /**
+   * Returns the total execution time.
+   *
+   * @return float
+   */
+  public function getTime() {
+    $time = 0;
+
+    foreach ($this->data['queries'] as $query) {
+      $time += $query['time'];
+    }
+
+    return $time;
+  }
+
+  /**
+   * Returns a color based on the number of executed queries.
+   *
+   * @return string
+   */
+  public function getColorCode() {
+    if ($this->getQueryCount() < 100) {
+      return 'green';
+    }
+    if ($this->getQueryCount() < 200) {
+      return 'yellow';
+    }
+
+    return 'red';
+  }
+
+  /**
+   * Returns the configured query highlight threshold.
+   *
+   * @return int
+   */
+  public function getQueryHighlightThreshold() {
+    // When a profile is loaded from storage this object is deserialized and
+    // no constructor is called so we cannot use dependency injection.
+    return \Drupal::config('webprofiler.config')->get('query_highlight');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'database';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Database');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Executed queries: @count', ['@count' => $this->getQueryCount()]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQRJREFUeNpi/P//PwM1ARMDlcGogZQDlpMnT7pxc3NbA9nhQKxOpL5rQLwJiPeBsI6Ozl+YBOOOHTv+AOllQNwtLS39F2owKYZ/gRq8G4i3ggxEToggWzvc3d2Pk+1lNL4fFAs6ODi8JzdS7mMRVyDVoAMHDsANdAPiOCC+jCQvQKqBQB/BDbwBxK5AHA3E/kB8nKJkA8TMQBwLxaBIKQbi70AvTADSBiSadwFXpCikpKQU8PDwkGTaly9fHFigkaKIJid4584dkiMFFI6jkTJII0WVmpHCAixZQEXWYhDeuXMnyLsVlEQKI45qFBQZ8eRECi4DBaAlDqle/8A48ip6gAADANdQY88Uc0oGAAAAAElFTkSuQmCC';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getLibraries() {
+    return [
+      'webprofiler/database',
+    ];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getData() {
+    $data = $this->data;
+
+    $conn = Database::getConnection();
+    foreach ($data['queries'] as &$query) {
+      $explain = TRUE;
+      $type = 'select';
+
+      if (strpos($query['query'], 'INSERT') !== FALSE) {
+        $explain = FALSE;
+        $type = 'insert';
+      }
+
+      if (strpos($query['query'], 'UPDATE') !== FALSE) {
+        $explain = FALSE;
+        $type = 'update';
+      }
+
+      if (strpos($query['query'], 'CREATE') !== FALSE) {
+        $explain = FALSE;
+        $type = 'create';
+      }
+
+      if (strpos($query['query'], 'DELETE') !== FALSE) {
+        $explain = FALSE;
+        $type = 'delete';
+      }
+
+      $query['explain'] = $explain;
+      $query['type'] = $type;
+
+      $quoted = [];
+      foreach ((array) $query['args'] as $key => $val) {
+        $quoted[$key] = is_null($val) ? 'NULL' : $conn->quote($val);
+      }
+
+      $query['query_args'] = strtr($query['query'], $quoted);
+    }
+
+    $data['query_highlight_threshold'] = $this->getQueryHighlightThreshold();
+
+    return $data;
+  }
+
+  /**
+   * @param $a
+   * @param $b
+   *
+   * @return int
+   */
+  private function orderQueryByTime($a, $b) {
+    $at = $a['time'];
+    $bt = $b['time'];
+
+    if ($at == $bt) {
+      return 0;
+    }
+    return ($at < $bt) ? 1 : -1;
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/DrupalDataCollector.php b/modules/devel/webprofiler/src/DataCollector/DrupalDataCollector.php
new file mode 100644
index 0000000..7a7bf35
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/DrupalDataCollector.php
@@ -0,0 +1,101 @@
+<?php
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal;
+use Drupal\Core\Routing\RedirectDestinationInterface;
+use Drupal\Core\Routing\UrlGeneratorInterface;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Class DrupalDataCollector
+ */
+class DrupalDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\Core\Routing\RedirectDestinationInterface
+   */
+  private $redirectDestination;
+
+  /**
+   * @var \Drupal\Core\Routing\UrlGeneratorInterface
+   */
+  private $urlGenerator;
+
+  /**
+   * @param \Drupal\Core\Routing\RedirectDestinationInterface $redirectDestination
+   * @param \Drupal\Core\Routing\UrlGeneratorInterface $urlGenerator
+   */
+  public function __construct(RedirectDestinationInterface $redirectDestination, UrlGeneratorInterface $urlGenerator) {
+    $this->redirectDestination = $redirectDestination;
+    $this->urlGenerator = $urlGenerator;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $this->data['version'] = Drupal::VERSION;
+    $this->data['profile'] = drupal_get_profile();
+    $this->data['config_url'] = $this->urlGenerator->generateFromRoute('webprofiler.settings', [], ['query' => $this->redirectDestination->getAsArray()]);
+  }
+
+  /**
+   * @return string
+   */
+  public function getVersion() {
+    return $this->data['version'];
+  }
+
+  /**
+   * @return string
+   */
+  public function getProfile() {
+    return $this->data['profile'];
+  }
+
+  /**
+   * @return string
+   */
+  public function getConfigUrl() {
+    return $this->data['config_url'];
+  }
+
+  /**
+   * Returns the name of the collector.
+   *
+   * @return string The collector name
+   *
+   * @api
+   */
+  public function getName() {
+    return 'drupal';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Drupal');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function hasPanel() {
+    return FALSE;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCRDU5MUVDNzVGRTkxMUUzODdBMEJDOEZFRjA2QUY5MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCRDU5MUVDODVGRTkxMUUzODdBMEJDOEZFRjA2QUY5MiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkJENTkxRUM1NUZFOTExRTM4N0EwQkM4RkVGMDZBRjkyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkJENTkxRUM2NUZFOTExRTM4N0EwQkM4RkVGMDZBRjkyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+iYsuIgAAAiNJREFUeNq8lj3KwkAQhhOxUPAnoIgWQiysbFLYG2/gEVJaegQ9QfQECh4g3kA9QbxBLMQ2KaxE2G/ffG5Yl/ytiguDJBn32Z15d2dUQojy0wGgDHQwGFjj8Vh7hxFyZIHNZtOt1+uuDPRtYK/Xs4rFIpyJDFQaiIm73a7NYMyq1arf7/dnWWApIN3VHBPzINHwHX5J4FxAKg6j0Wh4aSDREGb8TxqIXJVKJSIDY1Yul30RmgqE87swHkrDq2cCkYNareZ9AmPWarX2mUAk/hswZrgkUoGyIsm7y1ggDachnrNPrVKpEKSJBxZYnC+Xi/l4PL56T99uN/y8KDYCUpj2i2JRzONkWZYyGo0UXdeV4/GobDYb5Xw+J/obxv+mTqdT8rWTpND1ek3ihm3bRNO0F188O44T+UwmE+TQjBXNcDiciLD5fE7Shuu6xDTN0JdGgfi+//J9v98nA6EmqIoHYsJPxuFwIOKxiERDVxNQ4I4PNw1Ram6DIFAWiwUWG5uv+/2+E98V+IdOp7OiZzF6pitMhC2XyxDEfOKg1+t1ldnTtNtthxcB8sAGcgQRUbWGufM8LxQPfJBv3n+73Tq5qgVyibqWdYsASOUfLYyJJ679yKyHadDZbBYqkn8HMHaO3ydMl674rI8RayOACKUo/+l0SuAf12ZI9TRYLSZCJYk76GgbnyA9TxOlMpiqqrnuQhxk7igd8raJbKi/bvX/BBgANANSieJk+XMAAAAASUVORK5CYII=';
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/DrupalDataCollectorTrait.php b/modules/devel/webprofiler/src/DataCollector/DrupalDataCollectorTrait.php
new file mode 100644
index 0000000..98a3faf
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/DrupalDataCollectorTrait.php
@@ -0,0 +1,115 @@
+<?php
+
+namespace Drupal\webprofiler\DataCollector;
+
+/**
+ * Class DrupalDataCollectorTrait
+ */
+trait DrupalDataCollectorTrait {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return NULL;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function hasPanel() {
+    return TRUE;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getLibraries() {
+    return [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getDrupalSettings() {
+    return [];
+  }
+
+  /**
+   * @return mixed
+   */
+  public function getData() {
+    return $this->data;
+  }
+
+  /**
+   * @param $class
+   * @param $method
+   *
+   * @return array
+   *
+   * @throws \ReflectionException
+   */
+  public function getMethodData($class, $method) {
+    $class = is_object($class) ? get_class($class) : $class;
+    $data = [];
+
+    try {
+      $reflectedMethod = new \ReflectionMethod($class, $method);
+
+      $data = [
+        'class' => $class,
+        'method' => $method,
+        'file' => $reflectedMethod->getFilename(),
+        'line' => $reflectedMethod->getStartLine(),
+      ];
+    } catch (\ReflectionException $re) {
+      // TODO: handle the exception.
+    } finally {
+      return $data;
+    }
+  }
+
+  /**
+   * @param $value
+   *
+   * @return int|string
+   */
+  private function convertToBytes($value) {
+    if ('-1' === $value) {
+      return -1;
+    }
+
+    $value = strtolower($value);
+    $max = strtolower(ltrim($value, '+'));
+    if (0 === strpos($max, '0x')) {
+      $max = intval($max, 16);
+    }
+    elseif (0 === strpos($max, '0')) {
+      $max = intval($max, 8);
+    }
+    else {
+      $max = intval($max);
+    }
+
+    switch (substr($value, -1)) {
+      case 't':
+        $max *= 1024;
+        break;
+
+      case 'g':
+        $max *= 1024;
+        break;
+
+      case 'm':
+        $max *= 1024;
+        break;
+
+      case 'k':
+        $max *= 1024;
+        break;
+    }
+
+    return $max;
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/EventsDataCollector.php b/modules/devel/webprofiler/src/DataCollector/EventsDataCollector.php
new file mode 100644
index 0000000..75d528f
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/EventsDataCollector.php
@@ -0,0 +1,96 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\EventsDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\EventDispatcher\EventDispatcherInterface;
+use Symfony\Component\HttpKernel\DataCollector\EventDataCollector as BaseEventDataCollector;
+
+/**
+ * Class EventsDataCollector
+ */
+class EventsDataCollector extends BaseEventDataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @return int
+   */
+  public function getCalledListenersCount() {
+    return count($this->getCalledListeners());
+  }
+
+  /**
+   * @return int
+   */
+  public function getNotCalledListenersCount() {
+    return count($this->getNotCalledListeners());
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function setCalledListeners(array $listeners) {
+    $listeners = $this->computePriority($listeners);
+    $this->data['called_listeners'] = $listeners;
+  }
+
+  /**
+   * Adds the priority value to the $listeners array.
+   *
+   * @param array $listeners
+   * @return array
+   */
+  private function computePriority(array $listeners) {
+    foreach ($listeners as &$listener) {
+      foreach ($listener['class']::getSubscribedEvents() as $event => $methods) {
+
+        if (is_string($methods)) {
+          $methods = [[$methods], 0];
+        }
+        else {
+          if (is_string($methods[0])) {
+            $methods = [$methods];
+          }
+        }
+
+        foreach ($methods as $method) {
+          if ($listener['event'] === $event) {
+            if ($listener['method'] === $method[0]) {
+              $listener['priority'] = isset($method[1]) ? $method[1] : 0;
+            }
+          }
+        }
+      }
+    }
+
+    return $listeners;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Events');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Called listeners: @listeners', ['@listeners' => count($this->getCalledListeners())]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABFJJREFUeNrkVVlIY2cY/RMTE81NMkkajUs1OBqkiVsjjAtStGrtSGyFjOjAQNVCKRb66ot9KrjgQx+FUgTBKkURbIfighWl4r6h44pajcZEo3ESTeKS9PzB2AyNZaD1qRcOem+S83/f+c53Lsvj8ZD/+mKTB7gehJTj+2d9fZ1MTk6S0NBQSW9vb97e3t7jmpqaXzIzM185HA7vd4KDg8nGxoaysbGxVCwWm/V6/aDL5TKlpKSQpKSkv5NyuVxyc3Mj7e7u/jw2NjYxJyfnMDIykmGz2UQgEBAWi0XcbjeRSqWhZWVl4v39fXVXV5cqNzf3exxmCNj+9fU1MzQ09JVWq32sUqmMu7u7QhwiDwoKIoeHh2R7e5twOByCwcrQhUShUJjz8vJkw8PDX5+fn8sDkvb3938YHR39rlAoNBoMBgGqtWxubnJRKbu9vZ20trZSQoJnvKioKMvZ2Rn/6urKmpqayvT19ekCks7NzaUnJyeboK0kPj7+cGZmJprH4zGnp6duEBFUTg4ODqjmIfPz87GQxoRnori4ODOKUPuTsnw+RRvPGIYJMZvNDNplYmJiLvPz839oamoSj4yMfAJNuRqN5mV9ff0fOPDF1NSUAt85lclkDkjnys7O/vGOlZLeQgjIgUggnmqHqmMqKip+z8jI8MAFnpKSkpXZ2dn38JkIUAFRQNjt/R2Xv09twBFwAGwClunp6efLy8tZdFgUW1tbiaOjo1/is9fUhcA+YL69fzvzSyQSEQZHfBJBT4J2Bf9qo9Rq9bxcLndeXl4STJrA8B4Mc/atN4pesAk5OTkh1PB0exYXF/kWi4UTFhZG+Hw+wZQJ5BDR7fEPIroYASu9uLggJpOJYO2I0+kkqI47Njb2MdzAKS4uXisvL5/FurIGBgaeYoDS1dVVsrKyQpaWlghsF7hS2IJERER4T4U/qckT4ccP6BYplco+rOcxqn0fZFqj0fgkLS3tV18m0EICktJV9F101xcWFj5Cu+HQ1YGNoeSXWGErpv8IwVOSlZXVh7xw0zy4V1MY3/uXWgetMzB8EZUHw7lKSEjgQ0MONLei2kcTExN5R0dHMehshw7x3umLRKI7YDhaDOSJ18hstq2qquobLMG30DKYkuzs7KggTa5Pf4p/rJReSCud1WplEBYuSMGrra39FG1ywsPDgwsLC+0YFoMAKi0qKupA5c57K0V1XjsdHx+/g6mXUksVFBS8wmF23FeMj48/w7PXiLsxePcG65qPDNCsra15XRCQFNP1AgRPMaA4aOvp6OjQ2O12cVtb20vE389YAHFLS0sO2vbYbLYQHKRHShEEy5ul+kIAe02Q5vy6urouTNyDV8VNT0/PBGzzxW1wRIHsM7T+W3V1tROvEE9lZeUCKlVgSfyD6S9SGsKdnZ1pOp3OkJ6efj04OPgTnmsAlv8PACXa/Q4L4UByuZqbm/UNDQ1vkLL+3+/9ByH9U4ABADscgvUMKuLiAAAAAElFTkSuQmCC';
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/ExtensionDataCollector.php b/modules/devel/webprofiler/src/DataCollector/ExtensionDataCollector.php
new file mode 100644
index 0000000..30087ff
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/ExtensionDataCollector.php
@@ -0,0 +1,161 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\ExtensionDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Extension\ModuleHandlerInterface;
+use Drupal\Core\Extension\ThemeHandlerInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Defines a data collector for the extension system.
+ */
+class ExtensionDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * The module handler.
+   *
+   * @var \Drupal\Core\Extension\ModuleHandlerInterface
+   */
+  protected $moduleHandler;
+
+  /**
+   * The theme handler.
+   *
+   * @var \Drupal\Core\Extension\ThemeHandlerInterface
+   */
+  protected $themeHandler;
+
+  /**
+   * The app root.
+   *
+   * @var string
+   */
+  protected $root;
+
+  /**
+   * @param \Drupal\Core\Extension\ModuleHandlerInterface $module_handler
+   *   The module handler.
+   * @param \Drupal\Core\Extension\ThemeHandlerInterface $theme_handler
+   *   The theme handler.
+   * @param string $root
+   *   The app root.
+   */
+  public function __construct(ModuleHandlerInterface $module_handler, ThemeHandlerInterface $theme_handler, $root) {
+    $this->moduleHandler = $module_handler;
+    $this->themeHandler = $theme_handler;
+    $this->root = $root;
+
+    $this->data['drupal_extension']['modules'] = [];
+    $this->data['drupal_extension']['themes'] = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $modules = $this->moduleHandler->getModuleList();
+    $themes = $this->themeHandler->listInfo();
+
+    $this->data['drupal_extension']['count'] = count($modules) + count($themes);
+    $this->data['drupal_extension']['modules'] = $modules;
+    $this->data['drupal_extension']['themes'] = $themes;
+    $this->data['drupal_extension']['installation_path'] = $this->root . '/';
+  }
+
+  /**
+   * Returns the total number of active extensions.
+   *
+   * @return int
+   */
+  public function getExtensionsCount() {
+    return isset($this->data['drupal_extension']['count']) ? $this->data['drupal_extension']['count'] : 0;
+  }
+
+  /**
+   * Returns the total number of active modules.
+   *
+   * @return int
+   */
+  public function getModulesCount() {
+    return count($this->data['drupal_extension']['modules']);
+  }
+
+  /**
+   * Returns the total number of active themes.
+   *
+   * @return int
+   */
+  public function getThemesCount() {
+    return count($this->data['drupal_extension']['themes']);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'drupal_extension';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Extensions');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Total: @extensions', ['@extensions' => $this->getExtensionsCount()]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0RkE1QUM1RjkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0RkE1QUM2MDkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRGQTVBQzVEOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRGQTVBQzVFOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+7LqYtwAAAUBJREFUeNpi/P//PwM1ARMDlcGogYPQQBYQ4eDgQIza/SClQNwIxA3okgcOHCDZhRVAfA6I64F4EjW8fBLqwn1AnAvE8aQaqAc1QAZJ7DMQRwPxayDuAGIBYgwUAeL1QHwWGm6XgLgUSf4FEPcAsQQQ+xBjICh8AmARBgSCQNwFxEFIatYCMagQcEHXzGhvb09s6bAdiL2gbHYg/oEm/x8Y00ykRAofEvsvzlgGmsoIpIWBWBaIlYD4Bg61B5DY/ED8HRrjIH2yINchh+E7IH4CxPeBuAAam8jgBBD3IfEtgZgTiPdC9T1BySloYCcQ20DTmTg0tuegWVICjZSNWLMeFgBKKsU45EDi9kA8H4ivEmsgNsAKxEXQBH0TiMtwFg5EgvnQXHIFmibfUGrgeaghTdBIxAoYR2u9EWAgQIABAKKeRzEX0gXIAAAAAElFTkSuQmCC';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getData() {
+    $data = $this->data;
+
+    // Copy protected properties over public ones to
+    // let json_encode to find them.
+    $this->copyToPublic($data['drupal_extension']['modules']);
+    $this->copyToPublic($data['drupal_extension']['themes']);
+
+    return $data;
+  }
+
+  /**
+   * Copies protected properties to public ones.
+   *
+   * @param \Drupal\Core\Extension\Extension[] $extensions
+   */
+  private function copyToPublic($extensions) {
+    foreach ($extensions as &$extension) {
+      $extension->public_type = $extension->getType();
+      $extension->public_name = $extension->getName();
+      $extension->public_path = $extension->getPath();
+      $extension->public_pathname = $extension->getPathname();
+      $extension->public_filename = $extension->getFilename();
+      $extension->public_extension_pathname = $extension->getExtensionPathname();
+      $extension->public_extension_filename = $extension->getExtensionFilename();
+    }
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/FormsDataCollector.php b/modules/devel/webprofiler/src/DataCollector/FormsDataCollector.php
new file mode 100644
index 0000000..79f6332
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/FormsDataCollector.php
@@ -0,0 +1,81 @@
+<?php
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\webprofiler\Form\FormBuilderWrapper;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Class FormsDataCollector
+ */
+class FormsDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\webprofiler\Form\FormBuilderWrapper
+   */
+  private $formBuilder;
+
+  /**
+   * @param \Drupal\webprofiler\Form\FormBuilderWrapper $formBuilder
+   */
+  public function __construct(FormBuilderWrapper $formBuilder) {
+    $this->formBuilder = $formBuilder;
+
+    $this->data['forms'] = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $this->data['forms'] = $this->formBuilder->getBuildForm();
+  }
+
+  /**
+   * @return array
+   */
+  public function getForms() {
+    return $this->data['forms'];
+  }
+
+  /**
+   * @return array
+   */
+  public function getFormsCount() {
+    return count($this->getForms());
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'forms';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Forms');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Rendered: @forms', ['@forms' => $this->getFormsCount()]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0RkE1QUM1QjkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0RkE1QUM1QzkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRGQTVBQzU5OTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRGQTVBQzVBOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+I7130QAAAKRJREFUeNrsVVsKxCAMzIgH8897eDHxGP55LX+0RmjpYxHdyrLsNl9iknEyExA5Z5oZgibH9wPKVlJrnVNKRwZCkPceQ4AhhOpUjJFaeaXUBRjssrW2FvDZGINS2GV9AQb3rpvCvZWhc24rKpdDmp17P2MKjzIFEAD16vdDi73Xbx2/pelZItnz6oiusneB32b4is0Iw8eUfzBlOiCef/l2LAIMAGACWQCJ5bXFAAAAAElFTkSuQmCC';
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/HttpDataCollector.php b/modules/devel/webprofiler/src/DataCollector/HttpDataCollector.php
new file mode 100644
index 0000000..c82e209
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/HttpDataCollector.php
@@ -0,0 +1,175 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\HttpDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\webprofiler\Http\HttpClientMiddleware;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use GuzzleHttp\TransferStats;
+use Psr\Log\LogLevel;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Collects data about http calls during request.
+ */
+class HttpDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \GuzzleHttp\Client
+   */
+  private $middleware;
+
+  /**
+   * @param \Drupal\webprofiler\Http\HttpClientMiddleware $middleware
+   */
+  public function __construct(HttpClientMiddleware $middleware) {
+    $this->middleware = $middleware;
+
+    $this->data['completed'] = [];
+    $this->data['failed'] = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $completed = $this->middleware->getCompletedRequests();
+    $failed = $this->middleware->getFailedRequests();
+
+    foreach ($completed as $data) {
+      /** @var \GuzzleHttp\Psr7\Request $request */
+      $request = $data['request'];
+      /** @var \GuzzleHttp\Psr7\Response $response */
+      $response = $data['response'];
+      /** @var \GuzzleHttp\TransferStats $stats */
+      $stats = $request->stats;
+
+      $uri = $request->getUri();
+      $this->data['completed'][] = [
+        'request' => [
+          'method' => $request->getMethod(),
+          'uri' => [
+            'schema' => $uri->getScheme(),
+            'host' => $uri->getHost(),
+            'port' => $uri->getPort(),
+            'path' => $uri->getPath(),
+            'query' => $uri->getQuery(),
+            'fragment' => $uri->getFragment(),
+          ],
+          'headers' => $request->getHeaders(),
+          'protocol' => $request->getProtocolVersion(),
+          'request_target' => $request->getRequestTarget(),
+          'stats' => [
+            'transferTime' => $stats->getTransferTime(),
+            'handlerStats' => $stats->getHandlerStats()
+          ],
+        ],
+        'response' => [
+          'phrase' => $response->getReasonPhrase(),
+          'status' => $response->getStatusCode(),
+          'headers' => $response->getHeaders(),
+          'protocol' => $response->getProtocolVersion(),
+        ]
+      ];
+    }
+
+    foreach ($failed as $data) {
+      /** @var \GuzzleHttp\Psr7\Request $request */
+      $request = $data['request'];
+      /** @var \GuzzleHttp\Psr7\Response $response */
+      $response = $data['response'];
+
+      $uri = $request->getUri();
+      $this->data['failed'][] = [
+        'request' => [
+          'method' => $request->getMethod(),
+          'uri' => [
+            'schema' => $uri->getScheme(),
+            'host' => $uri->getHost(),
+            'port' => $uri->getPort(),
+            'path' => $uri->getPath(),
+            'query' => $uri->getQuery(),
+            'fragment' => $uri->getFragment(),
+          ],
+          'headers' => $request->getHeaders(),
+          'protocol' => $request->getProtocolVersion(),
+          'request_target' => $request->getRequestTarget(),
+        ],
+        'response' => [
+          'phrase' => $response->getReasonPhrase(),
+          'status' => $response->getStatusCode(),
+          'headers' => $response->getHeaders(),
+          'protocol' => $response->getProtocolVersion(),
+        ]
+      ];
+    }
+  }
+
+  /**
+   * @return int
+   */
+  public function getCompletedRequestsCount() {
+    return count($this->getCompletedRequests());
+  }
+
+  /**
+   * @return array
+   */
+  public function getCompletedRequests() {
+    return $this->data['completed'];
+  }
+
+  /**
+   * @return int
+   */
+  public function getFailedRequestsCount() {
+    return count($this->getFailedRequests());
+  }
+
+  /**
+   * @return array
+   */
+  public function getFailedRequests() {
+    return $this->data['failed'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'http';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Http');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Completed @completed, error @error', [
+      '@completed' => $this->getCompletedRequestsCount(),
+      '@error' => $this->getFailedRequestsCount()
+    ]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATlJREFUeNrsleERgjAMha0TdISOwAZ2BEZghI7ABo7AOQFuwAjoBLgBblBbfb0LudByp/4jdw+PNnxtkqYq7/3h13Y8/MF26B9spfo6yAX1QSa6EY2Y0xLrzROgddAMOcgLmuFbhDqyG00W8Rm1JWgEWCG0oQBuJKjGigNUs/xWUJdJheZQJzhZFGkgKWkw1mM8bmTCvOPQcSVXrTA+Ydc0kujXJGg6p5VwrG5BJzb2CLriN9kT74afUylPloQ+kdDPELXpg1qGvwbtURwjFGkkC8RIZw6d2QeO7MII81wRbDm0Z068Zf0G1bxQl8z1UH1zoQwk9NRZdkPoHt+KbZoqa+HYZS4T3iimdEvRDrIF4KIRclBNjk+uSB2/eBJUvR9KSek26BZHOit2zl3oqkV91P6//3N7CTAAIIc/qj2gy4gAAAAASUVORK5CYII=';
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/MailDataCollector.php b/modules/devel/webprofiler/src/DataCollector/MailDataCollector.php
new file mode 100644
index 0000000..9eef096
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/MailDataCollector.php
@@ -0,0 +1,104 @@
+<?php
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Mail\MailInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Class MailDataCollector
+ */
+class MailDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var
+   */
+  private $messages;
+
+  /**
+   *
+   */
+  public function __construct() {
+    $this->messages = [];
+  }
+
+  /**
+   * Collects data for the given Request and Response.
+   *
+   * @param Request $request A Request instance
+   * @param Response $response A Response instance
+   * @param \Exception $exception An Exception instance
+   *
+   * @api
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $this->data['mail'] = $this->messages;
+  }
+
+  /**
+   * @param $message
+   * @param $plugin_id
+   * @param $configuration
+   * @param \Drupal\Core\Mail\MailInterface $mail
+   */
+  public function addMessage($message, $plugin_id, $configuration, MailInterface $mail) {
+    $class = get_class($mail);
+    $method = $this->getMethodData($class, 'mail');
+
+    $this->messages[] = [
+      'message' => $message,
+      'plugin' => [
+        'id' => $plugin_id,
+        'configuration' => $configuration,
+      ] + $method
+    ];
+  }
+
+  /**
+   * @return int
+   */
+  public function getMailSent() {
+    return count($this->data['mail']);
+  }
+
+  /**
+   * Returns the name of the collector.
+   *
+   * @return string The collector name
+   *
+   * @api
+   */
+  public function getName() {
+    return 'mail';
+  }
+
+  /**
+   * Returns the datacollector title.
+   *
+   * @return string
+   *   The datacollector title.
+   */
+  public function getTitle() {
+    return $this->t('Mail');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Total: @count', ['@count' => $this->getMailSent()]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABcAAAAcCAYAAACK7SRjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0NEOTU1MjM0OThFMTFFMDg3NzJBNTE2ODgwQzMxMzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0NEOTU1MjQ0OThFMTFFMDg3NzJBNTE2ODgwQzMxMzQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMEQ5OTQ5QzQ5OEMxMUUwODc3MkE1MTY4ODBDMzEzNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3Q0Q5NTUyMjQ5OEUxMUUwODc3MkE1MTY4ODBDMzEzNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpkRnSAAAAJ0SURBVHjaYvz//z8DrQATAw3BqOFYAaO9vT1FBhw4cGCAXA5MipxBQUHT3r17l0AVAxkZ/wkLC89as2ZNIcjlYkALXKnlWqBZTH/+/PEDmQsynLW/v3+NoaHhN2oYDjJn8uTJK4BMNpDhPwsLCwOKiop2+fn5vafEYC8vrw8gc/Lz8wOB3B8gw/nev38vn5WV5eTg4LA/Ly/vESsrK2npmYmJITU19SnQ8L0gc4DxpwgyF2S4EEjB58+f+crLy31YWFjOt7S0XBYUFPxHjMEcHBz/6+rqboqJiZ0qKSnxBpkDlRICGc4MU/j792+2CRMm+L18+fLSxIkTDykoKPzBZ7CoqOi/np6eE8rKylvb29v9fvz4wYEkzYKRzjk5OX/LyMjcnDRpEkjjdisrK6wRraOj8wvokAMLFy788ejRoxcaGhrPCWai4ODgB8DUE3/mzBknYMToASNoMzAfvEVW4+Tk9LmhoWFbTU2NwunTpx2BjiiMjo6+hm4WCzJHUlLyz+vXrxkfP36sDOI/ffpUPikpibe7u3sLsJjQW7VqlSrQxe+Avjmanp7u9PbtWzGQOmCCkARmmu/m5uYfT548yY/V5UpKSl+2b9+uiiz26dMnIWBSDTp27NgdYGrYCIzwE7m5uR4wg2Hg/PnzSsDI/QlKOcjZ3wGUBLm5uf+DwLdv38gub4AG/xcSEvr35s0bZmCB5sgCE/z69SsjyDJKMtG/f/8YQQYD8wkoGf8H51AbG5sH1CpbQBnQ09PzBiiHgoIFFHlBQGwLxLxUMP8dqJgH4k3gIhfIkAKVYkDMTmmhCHIxEL8A4peMo02L4WU4QIABANxZAoDIQDv3AAAAAElFTkSuQmCC';
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/PerformanceTimingDataCollector.php b/modules/devel/webprofiler/src/DataCollector/PerformanceTimingDataCollector.php
new file mode 100644
index 0000000..af3947c
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/PerformanceTimingDataCollector.php
@@ -0,0 +1,88 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\PerformanceTimingDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\Frontend\PerformanceTimingData;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Collects data about frontend performance.
+ */
+class PerformanceTimingDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+
+  }
+
+  /**
+   * @param $data
+   */
+  public function setData($data) {
+    $this->data['performance'] = $data;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'performance_timing';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Performance Timing');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    if (isset($this->data['performance'])) {
+      $performanceData = new PerformanceTimingData($this->data['performance']);
+      return $this->t('TTFB: @ttfb', ['@ttfb' => sprintf('%.0f ms', $performanceData->getTtfbTiming())]);
+    }
+
+    return NULL;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpi/P//PwO1ARMDDcCooUPEUEYi1AgAcQIQ+0P5H4B4IxAvwKaYmCSqAMT7gbgBajhMrB8qLkCsoQFQQ0CuOw/EBjgsLIAajmEouvdBhukD8UQgdkASwwXuA7EhNEhwuvQ8iXHSj2Q53FBY7BtADVxIoqEfoQYnYJPEF3bEROZ6WDDBvO+ALcCxJCsBAmpA4SuA7P2PBDQUEOGTDTA1TNCYs6dCRgIlxQswQ0GMB0A8nwgv4gqa+VCXgpMWC1QiEerF9WgaDmJJp/OhkUNIHUHQgJ4ecQHkiMKXXALQIowqpdR8pJi/AA0qvC4lFsyHYqK8zzhaRQ8NQwECDABNaU12xhTp2QAAAABJRU5ErkJggg==';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getData() {
+    $data = $this->data;
+
+    if (isset($this->data['performance'])) {
+      $performanceData = new PerformanceTimingData($this->data['performance']);
+      $data['performance']['computed']['DNS lookup time'] = $performanceData->getDNSTiming();
+      $data['performance']['computed']['TCP handshake time'] = $performanceData->getTCPTiming();
+      $data['performance']['computed']['Time to first byte'] = $performanceData->getTtfbTiming();
+      $data['performance']['computed']['Data download time'] = $performanceData->getDataTiming();
+      $data['performance']['computed']['DOM building time'] = $performanceData->getDomTiming();
+    }
+
+    return $data;
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/PhpConfigDataCollector.php b/modules/devel/webprofiler/src/DataCollector/PhpConfigDataCollector.php
new file mode 100644
index 0000000..d959a48
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/PhpConfigDataCollector.php
@@ -0,0 +1,163 @@
+<?php
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Routing\LinkGeneratorTrait;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+
+/**
+ * Provides a data collector to collect all kind of php information.
+ */
+class PhpConfigDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait, LinkGeneratorTrait;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $this->data = [
+      'token' => $response->headers->get('X-Debug-Token'),
+      'php_version' => PHP_VERSION,
+      'xdebug_enabled' => extension_loaded('xdebug'),
+      'xhprof_enabled' => extension_loaded('xhprof'),
+      'eaccel_enabled' => extension_loaded('eaccelerator') && ini_get('eaccelerator.enable'),
+      'apc_enabled' => extension_loaded('apc') && ini_get('apc.enabled'),
+      'xcache_enabled' => extension_loaded('xcache') && ini_get('xcache.cacher'),
+      'wincache_enabled' => extension_loaded('wincache') && ini_get('wincache.ocenabled'),
+      'zend_opcache_enabled' => extension_loaded('Zend OPcache') && ini_get('opcache.enable'),
+      'sapi_name' => php_sapi_name()
+    ];
+  }
+
+  /**
+   * Gets the token.
+   *
+   * @return string The token
+   */
+  public function getToken() {
+    return $this->data['token'];
+  }
+
+  /**
+   * Gets the PHP version.
+   *
+   * @return string The PHP version
+   */
+  public function getPhpVersion() {
+    return $this->data['php_version'];
+  }
+
+  /**
+   * Returns true if the XDebug is enabled.
+   *
+   * @return Boolean true if XDebug is enabled, false otherwise
+   */
+  public function hasXDebug() {
+    return $this->data['xdebug_enabled'];
+  }
+
+  /**
+   * Returns true if the XHProf is enabled.
+   *
+   * @return Boolean true if XHProf is enabled, false otherwise
+   */
+  public function hasXHProf() {
+    return $this->data['xhprof_enabled'];
+  }
+
+  /**
+   * Returns true if EAccelerator is enabled.
+   *
+   * @return Boolean true if EAccelerator is enabled, false otherwise
+   */
+  public function hasEAccelerator() {
+    return $this->data['eaccel_enabled'];
+  }
+
+  /**
+   * Returns true if APC is enabled.
+   *
+   * @return Boolean true if APC is enabled, false otherwise
+   */
+  public function hasApc() {
+    return $this->data['apc_enabled'];
+  }
+
+  /**
+   * Returns true if Zend OPcache is enabled
+   *
+   * @return Boolean true if Zend OPcache is enabled, false otherwise
+   */
+  public function hasZendOpcache() {
+    return $this->data['zend_opcache_enabled'];
+  }
+
+  /**
+   * Returns true if XCache is enabled.
+   *
+   * @return Boolean true if XCache is enabled, false otherwise
+   */
+  public function hasXCache() {
+    return $this->data['xcache_enabled'];
+  }
+
+  /**
+   * Returns true if WinCache is enabled.
+   *
+   * @return Boolean true if WinCache is enabled, false otherwise
+   */
+  public function hasWinCache() {
+    return $this->data['wincache_enabled'];
+  }
+
+  /**
+   * Returns true if any accelerator is enabled.
+   *
+   * @return Boolean true if any accelerator is enabled, false otherwise
+   */
+  public function hasAccelerator() {
+    return $this->hasApc() || $this->hasZendOpcache() || $this->hasEAccelerator() || $this->hasXCache() || $this->hasWinCache();
+  }
+
+  /**
+   * Gets the PHP SAPI name.
+   *
+   * @return string The environment
+   */
+  public function getSapiName() {
+    return $this->data['sapi_name'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('PHP Config');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('PHP: @version', ['@version' => $this->getPhpVersion()]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'php_config';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAMAAAC5xgRsAAAAZlBMVEX///////////////////////////////////////////////////////////////////////////////////////////+ZmZmZmZlISEhJSUmdnZ1HR0fR0dFZWVlpaWlfX18/Pz+puygPAAAAIXRSTlMACwwlJygpLzIzNjs8QEtMUmd6e32AucDBw8fIydTm6u5l8MjvAAAAo0lEQVR42r2P2Q6CMBBFL6XsZRGRfZv//0nbDBNEE19MnJeTc5ILKf58ahiUwzy/AJpIWwREwQnEXRdbGCLjrO+djWRvVMiJcigxB7viGogxDdJpSmHEmCVPS7YczJvgUu+CS30IvtbNYZMvsGVo2mVpG/kbm4auiCpdcC3YPCAhSpAdUzaAn6qPKZtUT6ZSzb4bi2hdo9MQ1nX4ASjfV+/4/Z40pyCHrNTbIgAAAABJRU5ErkJggg==';
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/RequestDataCollector.php b/modules/devel/webprofiler/src/DataCollector/RequestDataCollector.php
new file mode 100644
index 0000000..e0e8576
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/RequestDataCollector.php
@@ -0,0 +1,88 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\RequestDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Controller\ControllerResolverInterface;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\RequestDataCollector as BaseRequestDataCollector;
+
+/**
+ * Integrate _content into the RequestDataCollector
+ */
+class RequestDataCollector extends BaseRequestDataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\Core\Controller\ControllerResolverInterface
+   */
+  private $controllerResolver;
+
+  /**
+   * @var array
+   */
+  private $accessCheck;
+
+  /**
+   * @param \Drupal\Core\Controller\ControllerResolverInterface $controllerResolver
+   */
+  public function __construct(ControllerResolverInterface $controllerResolver) {
+    parent::__construct();
+
+    $this->controllerResolver = $controllerResolver;
+    $this->accessCheck = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    parent::collect($request, $response, $exception);
+
+    $controller = $this->controllerResolver->getController($request);
+
+    $this->data['controller'] = $this->getMethodData($controller[0], $controller[1]);
+    $this->data['access_check'] = $this->accessCheck;
+  }
+
+  /**
+   * @param $service_id
+   * @param $callable
+   * @param $request
+   */
+  public function addAccessCheck($service_id, $callable, Request $request) {
+    $this->accessCheck[$request->getPathInfo()][] = [
+      'service_id' => $service_id,
+      'callable' => $this->getMethodData($callable[0], $callable[1]),
+    ];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Request');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->data['status_code'].' '.$this->data['status_text'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAQAAADYBBcfAAACvElEQVR42tVTbUhTYRTerDCnKVoUUr/KCZmypA9Koet0bXNLJ5XazDJ/WFaCUY0pExRZXxYiJgsxWWjkaL+yK+po1gjyR2QfmqWxtBmaBtqWGnabT++c11Fu4l/P4VzOPc95zoHznsNZodIbLDdRcKnc1Bu8DAK45ZsOnykQNMopsNooLxCknb0cDq5vml9FtHiIgpBR0R6iihYyFMTDt2Lg56ObPkI6TMGXSof1EV67IqCwisJSWliFAG/E0CfFIiebdNypcxi/1zgyFiIiZ3sJQr0RQx5frLa6k7SOKRo3oMFNR5t62h2rttKXEOKFqDCxtXNmmBokO2KKTlp3IdWuT2dYRNGKwEXEBCcL172G5FG0aIxC0kR9PBTVH1kkwQn+IqJnCE33EalVzT9GJQS1tAdD3CKicJYFrxqx7W2ejCEdZy1FiC5tZxHhLJKOZaRdQJAyV/YAvDliySALHxmxR4Hqe2iwvaOR/CEuZYJFSgYhVbZRkA8KGdEktrqnqra90NndCdkt77fjIHIhexOrfO6O3bbbOj/rqu5IptgyR3sU93QbOYhquZK4MCDp0Ina/PLsu5JvbCTRaapUdUmIV/RzoMdsk/0hWRNdAvKOmvqlN0drsJbJf1P4YsQ5lGrJeuosiOUgbOC8cto3LfOXTdVd7BqZsQKbse+0jUL6WPcesqs4MNSUTQAxGjwFiC8m3yzmqwHJBWYKBJ9WNqW/dHkpU/osch1Yj5RJfXPfSEe/2UPsN490NPfZG5CKyJmcV5ayHyzy7BMqsXfuHhGK/cjAIeSpR92gehR55D8TcQhDEKJwytBJ4fr4NULvrEM8NszfJPyxDoHYAQ1oPCWmIX4gifmDS/DV2DKeb25FHWr76yEG7/9L4YFPeiQQ4/8LkgJ8Et+NncTCsYqzXAEXa7CWdPZzGWdlyV+vST0JanfPvwAAAABJRU5ErkJggg==';
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/RoutingDataCollector.php b/modules/devel/webprofiler/src/DataCollector/RoutingDataCollector.php
new file mode 100644
index 0000000..23cbd2f
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/RoutingDataCollector.php
@@ -0,0 +1,96 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\RoutingDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\Routing\RouteProviderInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Provides a data collector which shows all available routes.
+ */
+class RoutingDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * The route profiler.
+   *
+   * @var \Drupal\Core\Routing\RouteProviderInterface
+   */
+  protected $routeProvider;
+
+  /**
+   * Constructs a new RoutingDataCollector.
+   *
+   * @param \Drupal\Core\Routing\RouteProviderInterface $routeProvider
+   *   The route provider.
+   */
+  public function __construct(RouteProviderInterface $routeProvider) {
+    $this->routeProvider = $routeProvider;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $this->data['routing'] = [];
+    foreach ($this->routeProvider->getAllRoutes() as $route_name => $route) {
+      // @TODO Find a better visual representation.
+      $this->data['routing'][] = [
+        'name' => $route_name,
+        'path' => $route->getPath(),
+      ];
+    }
+  }
+
+  /**
+   * @return int
+   */
+  public function getRoutesCount() {
+    return count($this->routing());
+  }
+
+  /**
+   * Twig callback for displaying the routes.
+   */
+  public function routing() {
+    return $this->data['routing'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Routing');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'routing';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Defined routes: @route', ['@route' => $this->getRoutesCount()]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPxJREFUeNrkVsERREAQ7D0koXwlIAISkIGXvwAkoJSfHITg5SMUVR4eMuCxZ1xxV+5uuTL30lV8bPX09PSuFVJKcOOGP+DipLrrusoFdV1Lz/NgmiaKosC0XrAopYT0fc/f/jAMa41Pj23bkrpi9bRpGmRZ9lRKFSzLkl9UHMI4jijLcuaaSZMkQdd1fNMn5r0EHIFhGEjTlDenYRjCcZyHUnqRwXEcz77sYepM+Z1yTOEXZEFVVYcUba2iItsNcbr9IAiw5HMd1CJZtU1VpG3bIooi3gPF933keY43pb9gb1Bskdrap58luMjvRNO04wcK18RfIa59mbgLMAASuWsKAyoEhgAAAABJRU5ErkJggg==';
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/ServicesDataCollector.php b/modules/devel/webprofiler/src/DataCollector/ServicesDataCollector.php
new file mode 100644
index 0000000..26f1196
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/ServicesDataCollector.php
@@ -0,0 +1,166 @@
+<?php
+
+/**
+ * @file
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\DependencyInjection\TraceableContainer;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Symfony\Component\DependencyInjection\IntrospectableContainerInterface;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Class ServicesDataCollector
+ */
+class ServicesDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Symfony\Component\DependencyInjection\IntrospectableContainerInterface
+   *   $container
+   */
+  private $container;
+
+  /**
+   * @param IntrospectableContainerInterface $container
+   */
+  public function __construct(IntrospectableContainerInterface $container) {
+    $this->container = $container;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    if ($this->getServicesCount()) {
+
+      $tracedData = [];
+      if ($this->container instanceof TraceableContainer) {
+        $tracedData = $this->container->getTracedData();
+      }
+
+      foreach (array_keys($this->getServices()) as $id) {
+        $this->data['services'][$id]['initialized'] = ($this->container->initialized($id)) ? TRUE : FALSE;
+        $this->data['services'][$id]['time'] = isset($tracedData[$id]) ? $tracedData[$id] : NULL;
+      }
+    }
+  }
+
+  /**
+   * @param $services
+   */
+  public function setServices($services) {
+    $this->data['services'] = $services;
+  }
+
+  /**
+   * @return array
+   */
+  public function getServices() {
+    return $this->data['services'];
+  }
+
+  /**
+   * @return int
+   */
+  public function getServicesCount() {
+    return count($this->getServices());
+  }
+
+  /**
+   * @return array
+   */
+  public function getInitializedServices() {
+    return array_filter($this->getServices(), function($item) {
+      return $item['initialized'];
+    });
+  }
+
+  /**
+   * @return int
+   */
+  public function getInitializedServicesCount() {
+    return count($this->getInitializedServices());
+  }
+
+  /**
+   * @return array
+   */
+  public function getInitializedServicesWithoutWebprofiler() {
+    return array_filter($this->getInitializedServices(), function($item) {
+      return strpos($item['value']['id'], 'webprofiler') !== 0;
+    });
+  }
+
+  /**
+   * @return int
+   */
+  public function getInitializedServicesWithoutWebprofilerCount() {
+    return count($this->getInitializedServicesWithoutWebprofiler());
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'services';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Services');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Initialized: @count', [
+      '@count' => $this->getInitializedServicesCount(),
+    ]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQVJREFUeNrkVe0NgjAQBeMAdYO6AWxQNtANGEFHcALZANyADegGsIFsIBvgu6Q/LtWmxdTEjyYvd6Hw8t5de6TzPCex1yp5w/pz0rVrQymVIXSAACqt9TGG0p0hpHWIZb9lebWENOXn1FgWbL8GJHACNHs+ohyjlxSEZPEcKGYC6SbEvljgUHzEOR3IXiiB6YOTlLqdo1Y54tZHDLIauCHtETtn962P6EUVqhhi0gelIJEEk1MjMg9Py9xol/0SuBqFva/DULY3ZSqQF767v8TyZKv83tFXWVaEufsUG+DCr2nwQLGOlGQNizZPy3fMU16K5uV5+qQEpFTC+hCN9Pd/0XcBBgBxwVqjDkAznAAAAABJRU5ErkJggg==';
+  }
+
+  /**
+   * @return array
+   */
+  public function getData() {
+    $data = $this->data;
+
+    $http_middleware = array_filter($data['services'], function($service) {
+      return isset($service['value']['tags']['http_middleware']);
+    });
+
+    foreach ($http_middleware as &$service) {
+      $service['value']['handle_method'] = $this->getMethodData($service['value']['class'], 'handle');
+    }
+
+    uasort($http_middleware, function ($a, $b) {
+      $va = $a['value']['tags']['http_middleware'][0]['priority'];
+      $vb = $b['value']['tags']['http_middleware'][0]['priority'];
+
+      if ($va == $vb) {
+        return 0;
+      }
+      return ($va > $vb) ? -1 : 1;
+    });
+
+    $data['http_middleware'] = $http_middleware;
+
+    return $data;
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/StateDataCollector.php b/modules/devel/webprofiler/src/DataCollector/StateDataCollector.php
new file mode 100644
index 0000000..cc3e5da
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/StateDataCollector.php
@@ -0,0 +1,70 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\StateDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Provides a data collector to get all requested state values.
+ */
+class StateDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+  }
+
+  /**
+   * @param $key
+   */
+  public function addState($key) {
+    $this->data['state_get'][$key] = isset($this->data['state_get'][$key]) ? $this->data['state_get'][$key] + 1 : 1;
+  }
+
+  /**
+   * Twig callback to show all requested state keys.
+   */
+  public function getStateKeysCount() {
+    return count($this->data['state_get']);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('State');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'state';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Total: @variables', ['@variables' => $this->getStateKeysCount()]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2Njc3QTVERTkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2Njc3QTVERjkxNkMxMUUzQjA3OUEzQTNEMUVGMjVDOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjY2NzdBNURDOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY2NzdBNUREOTE2QzExRTNCMDc5QTNBM0QxRUYyNUM4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+tji6wwAAAUFJREFUeNpi/P//PwO1ARMDDcDQMZSBgZExE4h/AvF/KuA/QFzKCCS+TZ40iVNeXp5i9718+ZIhNS3tL5OoqChVDAQBcXFxBqBZzDQJU0Z2Do7/FubmVDPwzNmzwymdhoSEgDEM8PDwgPkJCQk49bDgMxCkEWQAyKAXL14wXLhwgWHChAlguTVr1pBnKMiwgoICsEEgC+7cuQPGHR0deH3HzMLC0iAjI4NV8tSpUwzv3r1jYGNjY3BycoJbgg88e/6cuIg6cuQImAZ5n2qx7+HhAaZtbGzArqXYUJCBIAwKR1jMq6ioMBgYGJAeURUVFWCNsHAERRAsKYFofJGF01CQIaBktGPHDjANAjU1NWBXg8IWX/gOobz/8+fP7x8/fqSKYV++fGH4+vXrX1B1EgXET6hUnTwH4jTG0Xqf6gAgwABnDJn0eW/JMwAAAABJRU5ErkJggg==';
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/ThemeDataCollector.php b/modules/devel/webprofiler/src/DataCollector/ThemeDataCollector.php
new file mode 100644
index 0000000..8dd4dd0
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/ThemeDataCollector.php
@@ -0,0 +1,262 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\ThemeDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Theme\ThemeManagerInterface;
+use Drupal\Core\Theme\ThemeNegotiatorInterface;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\Theme\ThemeNegotiatorWrapper;
+use Drupal\webprofiler\Twig\Dumper\HtmlDumper;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+use Symfony\Component\HttpKernel\DataCollector\LateDataCollectorInterface;
+
+/**
+ * Class ThemeDataCollector
+ */
+class ThemeDataCollector extends DataCollector implements DrupalDataCollectorInterface, LateDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\Core\Theme\ThemeManagerInterface
+   */
+  private $themeManager;
+
+  /**
+   * @var \Drupal\Core\Theme\ThemeNegotiatorInterface
+   */
+  private $themeNegotiator;
+
+  /**
+   * @var \Twig_Profiler_Profile
+   */
+  private $profile;
+
+  /**
+   * @var
+   */
+  private $computed;
+
+  /**
+   * @param \Drupal\Core\Theme\ThemeManagerInterface $themeManager
+   * @param \Drupal\Core\Theme\ThemeNegotiatorInterface $themeNegotiator
+   * @param \Twig_Profiler_Profile $profile
+   */
+  public function __construct(ThemeManagerInterface $themeManager, ThemeNegotiatorInterface $themeNegotiator, \Twig_Profiler_Profile $profile) {
+    $this->themeManager = $themeManager;
+    $this->themeNegotiator = $themeNegotiator;
+    $this->profile = $profile;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $activeTheme = $this->themeManager->getActiveTheme();
+
+    $this->data['activeTheme'] = [
+      'name' => $activeTheme->getName(),
+      'path' => $activeTheme->getPath(),
+      'engine' => $activeTheme->getEngine(),
+      'owner' => $activeTheme->getOwner(),
+      'baseThemes' => $activeTheme->getBaseThemes(),
+      'extension' => $activeTheme->getExtension(),
+      'styleSheetsRemove' => $activeTheme->getStyleSheetsRemove(),
+      'libraries' => $activeTheme->getLibraries(),
+      'regions' => $activeTheme->getRegions(),
+    ];
+
+    if ($this->themeNegotiator instanceof ThemeNegotiatorWrapper) {
+      $this->data['negotiator'] = [
+        'class' => $this->getMethodData($this->themeNegotiator->getNegotiator(), 'determineActiveTheme'),
+        'id' => $this->themeNegotiator->getNegotiator()->_serviceId,
+      ];
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function lateCollect() {
+    $this->data['twig'] = serialize($this->profile);
+  }
+
+  /**
+   * @return string
+   */
+  public function getActiveTheme() {
+    return $this->data['activeTheme'];
+  }
+
+  /**
+   * @return array
+   */
+  public function getThemeNegotiator() {
+    return $this->data['negotiator'];
+  }
+
+  /**
+   * @return int
+   */
+  public function getTime() {
+    return $this->getProfile()->getDuration() * 1000;
+  }
+
+  /**
+   * @return mixed
+   */
+  public function getTemplateCount() {
+    return $this->getComputedData('template_count');
+  }
+
+  /**
+   * @return mixed
+   */
+  public function getTemplates() {
+    return $this->getComputedData('templates');
+  }
+
+  /**
+   * @return mixed
+   */
+  public function getBlockCount() {
+    return $this->getComputedData('block_count');
+  }
+
+  /**
+   * @return mixed
+   */
+  public function getMacroCount() {
+    return $this->getComputedData('macro_count');
+  }
+
+  /**
+   * @return \Twig_Markup
+   */
+  public function getHtmlCallGraph() {
+    $dumper = new HtmlDumper();
+
+    return new \Twig_Markup($dumper->dump($this->getProfile()), 'UTF-8');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'theme';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Theme');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Name: @name', ['@name' => $this->getActiveTheme()['name']]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAlVJREFUeNrMlk1IVFEUx53K6AOjUBQri6SihQiRziaRQegDlKJFBCpSiZtoE4hWtFFRwcCVBqEWfaAE7SoXajXLQoRcFAUSaBgUJQxKYUrT78D/wevx3psaE7rw49x377ln7vl4500kmUxm/OuxJmMVxrqwzVgsth5xHKogCnthCd7BU7gdj8envOciQe5j8CyiFQq0tAgDsA+OaG0eLmF4INQoxrYg+iEXhqEGiqGBw/3SGUeU6MgC61mBMUU5GzEKJ6ES5S5knbbXui/jmv8MjCkGMxEPFbsFyAeL1y6pXEenSO4fctlIhCXqqtmGj5ADcblZoX1z8aLn/Es475soDhcyfwt3LPDK8jPYFlIcZrCCEH0LqlP7NXN/CCUL/CvmkynKcczPoNv9Y5LXuHVC2Y6mMFoetOG4/0kl9LfDquMyN076ue/I11ANHSqVH0pgLUz7GK2HjUHuf1DGm/jVYZVYJeILz5163oy46Tn/GL5r396yc+hXOzcckiyVQp7CsVNvmI2DHoODcMFcR6eZ+RO4747pJuYjcFilssMM6vB7+Or8IGMWWjDWx7ntzHvglCWZtfbf3n0UtiJ6FVO/8QbuQh+H59C37nUD9sAj1k6ENZQylctuJWsGJswDDibY32C3gitKsCUwyt7nlK0vpMc2Wh/Q4zIcxeDztDu/QjSoPmujzWswZef3GLRXuV2xPa3u/yDwjfoDgxE1nP1aquOG91b64StWlp0xtaKvKbfMUS1maukWvEj7a6pxBg6oL1iddnsbSFox/S/+TKyK0V8CDABrCdI/1oTqiQAAAABJRU5ErkJggg==';
+  }
+
+  /**
+   * @return array
+   */
+  public function getData() {
+    $data = $this->data;
+
+    $data['twig'] = [
+      'callgraph' => (string) $this->getHtmlCallGraph(),
+      'render_time' => $this->getTime(),
+      'template_count' => $this->getTemplateCount(),
+      'templates' => $this->getTemplates(),
+      'block_count' => $this->getBlockCount(),
+      'macro_count' => $this->getMacroCount(),
+    ];
+
+    return $data;
+  }
+
+  /**
+   * @return mixed|\Twig_Profiler_Profile
+   */
+  private function getProfile() {
+    if (NULL === $this->profile) {
+      $this->profile = unserialize($this->data['twig']);
+    }
+
+    return $this->profile;
+  }
+
+  /**
+   * @param $index
+   *
+   * @return mixed
+   */
+  private function getComputedData($index) {
+    if (NULL === $this->computed) {
+      $this->computed = $this->computeData($this->getProfile());
+    }
+
+    return $this->computed[$index];
+  }
+
+  /**
+   * @param \Twig_Profiler_Profile $profile
+   *
+   * @return array
+   */
+  private function computeData(\Twig_Profiler_Profile $profile) {
+    $data = [
+      'template_count' => 0,
+      'block_count' => 0,
+      'macro_count' => 0,
+    ];
+
+    $templates = [];
+    foreach ($profile as $p) {
+      $d = $this->computeData($p);
+
+      $data['template_count'] += ($p->isTemplate() ? 1 : 0) + $d['template_count'];
+      $data['block_count'] += ($p->isBlock() ? 1 : 0) + $d['block_count'];
+      $data['macro_count'] += ($p->isMacro() ? 1 : 0) + $d['macro_count'];
+
+      if ($p->isTemplate()) {
+        if (!isset($templates[$p->getTemplate()])) {
+          $templates[$p->getTemplate()] = 1;
+        }
+        else {
+          $templates[$p->getTemplate()]++;
+        }
+      }
+
+      foreach ($d['templates'] as $template => $count) {
+        if (!isset($templates[$template])) {
+          $templates[$template] = $count;
+        }
+        else {
+          $templates[$template] += $count;
+        }
+      }
+    }
+    $data['templates'] = $templates;
+
+    return $data;
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/TimeDataCollector.php b/modules/devel/webprofiler/src/DataCollector/TimeDataCollector.php
new file mode 100644
index 0000000..fb93b4f
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/TimeDataCollector.php
@@ -0,0 +1,163 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\TimeDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\field\Tests\reEnableModuleFieldTest;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\TimeDataCollector as BaseTimeDataCollector;
+use Symfony\Component\HttpKernel\KernelInterface;
+use Symfony\Component\Stopwatch\StopwatchEvent;
+
+/**
+ * Class TimeDataCollector.
+ */
+class TimeDataCollector extends BaseTimeDataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @param \Symfony\Component\HttpKernel\KernelInterface $kernel
+   * @param $stopwatch
+   */
+  public function __construct(KernelInterface $kernel = NULL, $stopwatch = NULL) {
+    parent::__construct($kernel, $stopwatch);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    parent::collect($request, $response, $exception);
+
+    $this->data['memory_limit'] = $this->convertToBytes(ini_get('memory_limit'));
+    $this->updateMemoryUsage();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function lateCollect() {
+    parent::lateCollect();
+
+    $this->updateMemoryUsage();
+  }
+
+  /**
+   * Gets the memory.
+   *
+   * @return int
+   *   The memory
+   */
+  public function getMemory() {
+    return $this->data['memory'];
+  }
+
+  /**
+   * Gets the PHP memory limit.
+   *
+   * @return int
+   *   The memory limit
+   */
+  public function getMemoryLimit() {
+    return $this->data['memory_limit'];
+  }
+
+  /**
+   * Updates the memory usage data.
+   */
+  public function updateMemoryUsage() {
+    $this->data['memory'] = memory_get_peak_usage(TRUE);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Timeline');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Duration: @duration', ['@duration' => sprintf('%.0f ms', $this->getDuration())]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABAAAAAcCAYAAABoMT8aAAABqUlEQVR42t2Vv0sCYRyHX9OmEhsMx/YKGlwLQ69DTEUSBJEQEy5J3FRc/BsuiFqEIIcQIRo6ysUhoaBBWhoaGoJwiMJLglRKrs8bXgienmkQdPDAwX2f57j3fhFJkkbiPwTK5bIiFoul3kmPud8MqKMewDXpwuGww+12n9hsNhFnlijYf/Z4PDmO45Yxo+10ZFGTyWRMEItU6AdCx7lczkgd6n7J2Wx2xm63P6jJMk6n80YQBBN1aUDv9XqvlAbbm2LE7/cLODRB0un0VveAeoDC8/waCQQC18MGQqHQOcEKvw8bcLlcL6TfYnVtCrGRAlartUUYhmn1jKg/E3USjUYfhw3E4/F7ks/nz4YNFIvFQ/ogbUYikdefyqlU6gnuOg2YK5XKvs/n+xhUDgaDTVEUt+HO04ABOBA5isViDTU5kUi81Wq1AzhWMEkDGmAEq2C3UCjcYXGauDvfEsuyUjKZbJRKpVvM8IABU9SVX+cxYABmwIE9cFqtVi9xtgvsC2AHbIAFoKey0gdlHEyDObAEWLACFsEsMALdIJ80+dK0bTS95v7+v/AJnis0eO906QwAAAAASUVORK5CYII=';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getLibraries() {
+    return [
+      'webprofiler/timeline',
+    ];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getDrupalSettings() {
+    /** @var StopwatchEvent[] $collectedEvents */
+    $collectedEvents = $this->getEvents();
+
+    if (!empty($collectedEvents)) {
+      $sectionPeriods = $collectedEvents['__section__']->getPeriods();
+      $endTime = end($sectionPeriods)->getEndTime();
+      $events = [];
+
+      foreach ($collectedEvents as $key => $collectedEvent) {
+        if ('__section__' != $key) {
+          $periods = [];
+          foreach ($collectedEvent->getPeriods() as $period) {
+            $periods[] = [
+              'start' => sprintf("%F", $period->getStartTime()),
+              'end' => sprintf("%F", $period->getEndTime()),
+            ];
+          }
+
+          $events[] = [
+            "name" => $key,
+            "category" => $collectedEvent->getCategory(),
+            "origin" => sprintf("%F", $collectedEvent->getOrigin()),
+            "starttime" => sprintf("%F", $collectedEvent->getStartTime()),
+            "endtime" => sprintf("%F", $collectedEvent->getEndTime()),
+            "duration" => sprintf("%F", $collectedEvent->getDuration()),
+            "memory" => sprintf("%.1F", $collectedEvent->getMemory() / 1024 / 1024),
+            "periods" => $periods,
+          ];
+        }
+      }
+
+      return ['time' => ['events' => $events, 'endtime' => $endTime]];
+    }
+    else {
+      return ['time' => ['events' => [], 'endtime' => 0]];
+    }
+  }
+
+  /**
+   * @return array
+   */
+  public function getData() {
+    $data = $this->data;
+
+    $data['duration'] = $this->getDuration();
+    $data['initTime'] = $this->getInitTime();
+
+    return $data;
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/TranslationsDataCollector.php b/modules/devel/webprofiler/src/DataCollector/TranslationsDataCollector.php
new file mode 100644
index 0000000..0918aaf
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/TranslationsDataCollector.php
@@ -0,0 +1,99 @@
+<?php
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Routing\UrlGeneratorInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\Core\StringTranslation\TranslationInterface;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\webprofiler\StringTranslation\TranslationManagerWrapper;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Class TranslationsDataCollector
+ */
+class TranslationsDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\Core\StringTranslation\TranslationInterface
+   */
+  private $translation;
+
+  /**
+   * @var \Drupal\Core\Routing\UrlGeneratorInterface
+   */
+  private $urlGenerator;
+
+  /**
+   * @param \Drupal\Core\StringTranslation\TranslationInterface $translation
+   * @param \Drupal\Core\Routing\UrlGeneratorInterface $urlGenerator
+   */
+  public function __construct(TranslationInterface $translation, UrlGeneratorInterface $urlGenerator) {
+    $this->translation = $translation;
+    $this->urlGenerator = $urlGenerator;
+
+    $this->data['translations']['translated'] = [];
+    $this->data['translations']['untranslated'] = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    if($this->translation instanceof TranslationManagerWrapper) {
+      /** \Drupal\webprofiler\StringTranslation\TranslationManagerWrapper $this->translation */
+      $this->data['translations']['translated'] = $this->translation->getTranslated();
+      $this->data['translations']['untranslated'] = $this->translation->getUntranslated();
+    }
+    $data['user_interface_translations_path'] = $this->urlGenerator->generateFromRoute('locale.translate_page');
+  }
+
+  /**
+   * @return int
+   */
+  public function getTranslatedCount() {
+    return count($this->data['translations']['translated']);
+  }
+
+  /**
+   * @return int
+   */
+  public function getUntranslatedCount() {
+    return count($this->data['translations']['untranslated']);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'translations';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Translations');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Translated: @translated, untranslated: @untranslated', [
+      '@translated' => $this->getTranslatedCount(),
+      '@untranslated' => $this->getUntranslatedCount()
+    ]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgpJREFUeNrUVrFuwjAQPUcZiAQDQ6WEbgwwMCJVqhjgBxhYGSvEDzBkZYSBH+ADoFJHlg4MdIMKxiLBXKAbUmEm9bPiyAREEgRDTzqZ2Mfzu7tnJ8xxHLq1aXQHuwsos2078p9arVYg0yL3CXcnwCdubKDp3F+5myFin9xYK0xNzQiZm1c3KpVKUb1ep2QyebvuFwoFSqfTlM/nbweay+VoOBxeDar7JwC03W49UO5fs9nsZTwef8qYUqkUjSmAYrGYqKlhGFSpVH45oBFFdkdM0RjUst1uC7Z45ofjWdO0t8Ph8CDjyuUyZTIZ6na7tNvtTmSn+2s5n88FIMwdPzhgUWYBA2A2mxVjIpEQarEsiwaDAS2XSxPH9OI1xVNnbmo0Go28eTDkAOL3YrGg/X4v1tfr9WmjLplsULVaFawbjYbHkjfzqPsr7o9RwJE2HOkifbAGS1ljdL/G/ScsWK/XE+NmsxGMkW6/3xfgWMMIpu9hLgkEN5tNDwClgAoADjAYRszr8m7kD2gGU5uh1hEjmoGUUU/oGLVEXaVhA2yoKYAwRwFx/Ezj8bjHEIYaSgVgDptNp1NiePG5QCfS4qyZXANop9MR7JANWAFA6hWgWEcmqqTYOWBVl0jZf0ViU+hUNk0AyVf0ObYK0+8IslupF8qlkxVWdoipsaCPiaBr7uwr+t98ofwJMADuIP9IDjFbLwAAAABJRU5ErkJggg==';
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/UserDataCollector.php b/modules/devel/webprofiler/src/DataCollector/UserDataCollector.php
new file mode 100644
index 0000000..beaa734
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/UserDataCollector.php
@@ -0,0 +1,142 @@
+<?php
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Authentication\AuthenticationCollectorInterface;
+use Drupal\Core\Session\AccountInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\Core\Entity\EntityManagerInterface;
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Drupal\Component\Utility\SafeMarkup;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Class UserDataCollector
+ */
+class UserDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\Core\Session\AccountInterface
+   */
+  private $currentUser;
+
+  /**
+   * @var \Drupal\Core\Entity\EntityManagerInterface
+   */
+  private $entityManager;
+
+  /**
+   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   */
+  private $configFactory;
+
+  /**
+   * @var \Drupal\Core\Authentication\AuthenticationCollectorInterface
+   */
+  private $providerCollector;
+
+  /**
+   * @param \Drupal\Core\Session\AccountInterface $currentUser
+   * @param \Drupal\Core\Entity\EntityManagerInterface $entityManager
+   * @param \Drupal\Core\Config\ConfigFactoryInterface $configFactory
+   * @param \Drupal\Core\Authentication\AuthenticationCollectorInterface $providerCollector
+   */
+  public function __construct(AccountInterface $currentUser, EntityManagerInterface $entityManager, ConfigFactoryInterface $configFactory, AuthenticationCollectorInterface $providerCollector) {
+    $this->currentUser = $currentUser;
+    $this->entityManager = $entityManager;
+    $this->configFactory = $configFactory;
+    $this->providerCollector = $providerCollector;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $this->data['name'] = $this->currentUser->getUsername();
+    $this->data['authenticated'] = $this->currentUser->isAuthenticated();
+
+    $this->data['roles'] = [];
+    $storage = $this->entityManager->getStorage('user_role');
+    foreach ($this->currentUser->getRoles() as $role) {
+      $entity = $storage->load($role);
+      $this->data['roles'][] = $entity->label();
+    }
+
+    foreach ($this->providerCollector->getSortedProviders() as $provider_id => $provider) {
+      if ($provider->applies($request)) {
+        $this->data['provider'] = $provider_id;
+      }
+    }
+
+    $this->data['anonymous'] = $this->configFactory->get('user.settings')
+      ->get('anonymous');
+  }
+
+  /**
+   * @return \Drupal\Core\Session\AccountInterface
+   */
+  public function getUserName() {
+    return $this->data['name'];
+  }
+
+  /**
+   * @return bool
+   */
+  public function getAuthenticated() {
+    return $this->data['authenticated'];
+  }
+
+  /**
+   * @return array
+   */
+  public function getRoles() {
+    return $this->data['roles'];
+  }
+
+  /**
+   * @return string
+   */
+  public function getProvider() {
+    return $this->data['provider'];
+  }
+
+  /**
+   * @return string
+   */
+  public function getAnonymous() {
+    return $this->data['anonymous'];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'user';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('User');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->getUserName();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABgAAAAcCAYAAAB75n/uAAAC70lEQVR42u2V3UtTYRzHu+mFwCwK+gO6CEryPlg7yiYx50vDqUwjFIZDSYUk2ZTmCysHvg9ZVggOQZiRScsR4VwXTjEwdKZWk8o6gd5UOt0mbev7g/PAkLONIOkiBx+25/v89vuc85zn2Q5Fo9F95UDwnwhS5HK5TyqVRv8m1JN6k+AiC+fn54cwbgFNIrTQ/J9IqDcJJDGBHsgDgYBSq9W6ysvLPf39/SSUUU7zsQ1yc3MjmN90OBzfRkZG1umzQqGIxPSTkIBjgdDkaGNjoza2kcFgUCE/QvMsq6io2PV6vQu1tbV8Xl7etkql2qqvr/+MbDE/Pz8s9OP2Cjhwwmw29+4R3Kec1WZnZ4fn5uamc3Jyttra2qbH8ero6JgdHh5+CvFHq9X6JZHgzODgoCVW0NPTY0N+ltU2Nzdv4GqXsYSrPp+vDw80aLFYxru6uhyQ/rDb7a8TCVJDodB1jUazTVlxcXGQ5/mbyE+z2u7u7veY38BVT3Z2djopm5qa6isrK/tQWVn5qb29fSGR4DC4PDAwMEsZHuArjGnyGKutq6v7ajQaF6urq9/MzMz0QuSemJiwQDwGkR0POhhXgILjNTU1TaWlpTxlOp1uyWQyaUjMajMzM8Nut/tJQUHBOpZppbCwkM/KytrBznuL9xDVxBMo8KXHYnu6qKjIivmrbIy67x6Px4Yd58W672ApfzY0NCyNjo7OZmRkiAv8fr+O47iwmABXtoXaG3uykF6vX7bZbF6cgZWqqiqezYkKcNtmjO+CF2AyhufgjsvlMiU7vXEF+4C4ALf9CwdrlVAqlcFkTdRqdQSHLUDgBEeSCrArAsiGwENs0XfJBE6ncxm1D8Aj/B6tigkkJSUlmxSwLYhMDeRsyyUCd+lHrWxtbe2aTCbbZTn1ZD92F0Cr8GBfgnsgDZwDt8EzMBmHMXBLqD0PDMAh9Gql3iRIESQSIAXp4CRIBZeEjIvDFZAm1J4C6UK9ROiZcvCn/+8FvwHtDdJEaRY+oQAAAABJRU5ErkJggg==';
+  }
+}
diff --git a/modules/devel/webprofiler/src/DataCollector/ViewsDataCollector.php b/modules/devel/webprofiler/src/DataCollector/ViewsDataCollector.php
new file mode 100644
index 0000000..bdb25a6
--- /dev/null
+++ b/modules/devel/webprofiler/src/DataCollector/ViewsDataCollector.php
@@ -0,0 +1,123 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DataCollector\ViewsDataCollector.
+ */
+
+namespace Drupal\webprofiler\DataCollector;
+
+use Drupal\Core\Entity\EntityManagerInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\webprofiler\DrupalDataCollectorInterface;
+use Drupal\webprofiler\Views\TraceableViewExecutable;
+use Drupal\webprofiler\Views\ViewExecutableFactoryWrapper;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\DataCollector\DataCollector;
+
+/**
+ * Collects data about rendered views.
+ */
+class ViewsDataCollector extends DataCollector implements DrupalDataCollectorInterface {
+
+  use StringTranslationTrait, DrupalDataCollectorTrait;
+
+  /**
+   * @var \Drupal\webprofiler\Views\ViewExecutableFactoryWrapper
+   */
+  private $view_executable_factory;
+
+  /**
+   * @var \Drupal\Core\Entity\EntityManagerInterface
+   */
+  private $entityManager;
+
+  /**
+   * @param ViewExecutableFactoryWrapper $view_executable_factory
+   * @param \Drupal\Core\Entity\EntityManagerInterface $entityManager
+   */
+  public function __construct(ViewExecutableFactoryWrapper $view_executable_factory, EntityManagerInterface $entityManager) {
+    $this->entityManager = $entityManager;
+    $this->view_executable_factory = $view_executable_factory;
+
+    $this->data['views'] = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function collect(Request $request, Response $response, \Exception $exception = NULL) {
+    $views = $this->view_executable_factory->getViews();
+    $storage = $this->entityManager->getStorage('view');
+
+    /** @var TraceableViewExecutable $view */
+    foreach ($views as $view) {
+      if ($view->executed) {
+        $data = [
+          'id' => $view->storage->id(),
+          'current_display' => $view->current_display,
+          'build_time' => $view->getBuildTime(),
+          'execute_time' => $view->getExecuteTime(),
+          'render_time' => $view->getRenderTime(),
+        ];
+
+        $entity = $storage->load($view->storage->id());
+        if ($entity->hasLinkTemplate('edit-display-form')) {
+          $route = $entity->urlInfo('edit-display-form');
+          $route->setRouteParameter('display_id', $view->current_display);
+          $data['route'] = $route->toString();
+        }
+
+        $this->data['views'][] = $data;
+      }
+    }
+
+//    TODO: also use those data.
+//    $loaded = $this->entityManager->getLoaded('view');
+//
+//    if ($loaded) {
+//      /** @var \Drupal\webprofiler\Entity\EntityStorageDecorator $views */
+//      foreach ($loaded->getEntities() as $views) {
+//        $this->data['views'][] = array(
+//          'id' => $views->get('id'),
+//        );
+//      }
+//    }
+  }
+
+  /**
+   * @return int
+   */
+  public function getViewsCount() {
+    return count($this->data['views']);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'views';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTitle() {
+    return $this->t('Views');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getPanelSummary() {
+    return $this->t('Total: @count', ['@count' => $this->getViewsCount()]);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getIcon() {
+    return 'iVBORw0KGgoAAAANSUhEUgAAABUAAAAcCAYAAACOGPReAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowNDgwMTE3NDA3MjA2ODExOEY2MkNCNjI0NDY3NzkwRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNEVFREM2NkQ4MUMxMUUzQkMwRUNBMkQwMzE4QjVBMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNEVFREM2NUQ4MUMxMUUzQkMwRUNBMkQwMzE4QjVBMyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDQ4MDExNzQwNzIwNjgxMThGNjJDQjYyNDQ2Nzc5MEQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDQ4MDExNzQwNzIwNjgxMThGNjJDQjYyNDQ2Nzc5MEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6vqYfFAAAAXUlEQVR42mL8//8/A7UBEwMNwKih1AcsIGLz5s1USwK+vr6MLMgcSg2EOW6IhSkycHR0BHth//79jMh8fACmlr4uRbcVnT8apqNhOhqmAxZR1CyoGUfrfaoDgAADAA4QNs9x67RnAAAAAElFTkSuQmCC';
+  }
+}
diff --git a/modules/devel/webprofiler/src/Decorator.php b/modules/devel/webprofiler/src/Decorator.php
new file mode 100644
index 0000000..f00d9ca
--- /dev/null
+++ b/modules/devel/webprofiler/src/Decorator.php
@@ -0,0 +1,99 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Decorator.
+ */
+
+namespace Drupal\webprofiler;
+
+/**
+ * Generic class Decorator.
+ */
+class Decorator {
+
+  /**
+   * @var
+   */
+  protected $object;
+
+  /**
+   * Class constructor.
+   *
+   * @param object $object
+   *   The object to decorate.
+   */
+  public function __construct($object) {
+    $this->object = $object;
+  }
+
+  /**
+   * Return the original (i.e. non decorated) object.
+   *
+   * @return mixed
+   *   The original object.
+   */
+  public function getOriginalObject() {
+    $object = $this->object;
+    while ($object instanceof Decorator) {
+      $object = $object->getOriginalObject();
+    }
+    return $object;
+  }
+
+  /**
+   * Returns true if $method is a PHP callable.
+   *
+   * @param string $method
+   *   The method name.
+   * @param bool $checkSelf
+   *
+   * @return bool|mixed
+   */
+  public function isCallable($method, $checkSelf = FALSE) {
+    //Check the original object
+    $object = $this->getOriginalObject();
+    if (is_callable([$object, $method])) {
+      return $object;
+    }
+    // Check Decorators.
+    $object = $checkSelf ? $this : $this->object;
+    while ($object instanceof Decorator) {
+      if (is_callable([$object, $method])) {
+        return $object;
+      }
+      $object = $this->object;
+    }
+    return FALSE;
+  }
+
+  /**
+   * @param $method
+   * @param $args
+   *
+   * @return mixed
+   *
+   * @throws \Exception
+   */
+  public function __call($method, $args) {
+    if ($object = $this->isCallable($method)) {
+      return call_user_func_array([$object, $method], $args);
+    }
+    throw new \Exception(
+      'Undefined method - ' . get_class($this->getOriginalObject()) . '::' . $method
+    );
+  }
+
+  /**
+   * @param $property
+   *
+   * @return null
+   */
+  public function __get($property) {
+    $object = $this->getOriginalObject();
+    if (property_exists($object, $property)) {
+      return $object->$property;
+    }
+    return NULL;
+  }
+}
diff --git a/modules/devel/webprofiler/src/DependencyInjection/TraceableContainer.php b/modules/devel/webprofiler/src/DependencyInjection/TraceableContainer.php
new file mode 100644
index 0000000..a0140e3
--- /dev/null
+++ b/modules/devel/webprofiler/src/DependencyInjection/TraceableContainer.php
@@ -0,0 +1,71 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DependencyInjection\TraceableContainer.
+ */
+
+namespace Drupal\webprofiler\DependencyInjection;
+
+use Drupal\Component\Utility\Timer;
+use Drupal\Core\DependencyInjection\Container;
+
+/**
+ * Extends the Drupal container class to trace service instantiations.
+ */
+class TraceableContainer extends Container {
+
+  /**
+   * @var array
+   */
+  protected $tracedData;
+
+  /**
+   * @var \Symfony\Component\Stopwatch\Stopwatch
+   */
+  private $stopwatch = NULL;
+
+  /**
+   * @var bool
+   */
+  private $hasStopwatch = FALSE;
+
+  /**
+   * @param string $id
+   * @param int $invalidBehavior
+   *
+   * @return object
+   */
+  public function get($id, $invalidBehavior = self::EXCEPTION_ON_INVALID_REFERENCE) {
+    if (!$this->stopwatch && $this->has('stopwatch')) {
+      $this->stopwatch = $this->createService(unserialize($this->serviceDefinitions['stopwatch']), 'stopwatch');
+      $this->stopwatch->openSection();
+      $this->hasStopwatch = TRUE;
+    }
+
+    if ('stopwatch' === $id) {
+      return $this->stopwatch;
+    }
+
+    Timer::start($id);
+    if ($this->hasStopwatch) {
+      $e = $this->stopwatch->start($id, 'service');
+    }
+
+    $service = parent::get($id, $invalidBehavior);
+
+    $this->tracedData[$id] = Timer::stop($id);
+    if ($this->hasStopwatch && $e->isStarted()) {
+      $e->stop();
+    }
+
+    return $service;
+  }
+
+  /**
+   * @return array
+   */
+  public function getTracedData() {
+    return $this->tracedData;
+  }
+}
diff --git a/modules/devel/webprofiler/src/DrupalDataCollectorInterface.php b/modules/devel/webprofiler/src/DrupalDataCollectorInterface.php
new file mode 100644
index 0000000..2c72188
--- /dev/null
+++ b/modules/devel/webprofiler/src/DrupalDataCollectorInterface.php
@@ -0,0 +1,67 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\DrupalDataCollectorInterface.
+ */
+
+namespace Drupal\webprofiler;
+
+/**
+ * Interface DrupalDataCollectorInterface.
+ */
+interface DrupalDataCollectorInterface {
+
+  /**
+   * Returns the datacollector title.
+   *
+   * @return string
+   *   The datacollector title.
+   */
+  public function getTitle();
+
+  /**
+   * Returns the name of the collector.
+   *
+   * @return string
+   *   The collector name.
+   */
+  public function getName();
+
+  /**
+   * Returns the string used in vertical tab summary.
+   *
+   * @return string
+   *   The panel summary.
+   */
+  public function getPanelSummary();
+
+  /**
+   * Returns the collector icon in base64 format.
+   *
+   * @return string
+   *   The collector icon.
+   */
+  public function getIcon();
+
+  /**
+   * Returns true if this datacollector has a detail panel.
+   *
+   * @return bool
+   *   True if datacollector has a detail panel, false otherwise.
+   */
+  public function hasPanel();
+
+  /**
+   * Returns the libraries needed in detail panel.
+   *
+   * @return array
+   *   The render array for detail panel.
+   */
+  public function getLibraries();
+
+  /**
+   * @return array
+   */
+  public function getDrupalSettings();
+}
diff --git a/modules/devel/webprofiler/src/Entity/EntityDecorator.php b/modules/devel/webprofiler/src/Entity/EntityDecorator.php
new file mode 100644
index 0000000..036b444
--- /dev/null
+++ b/modules/devel/webprofiler/src/Entity/EntityDecorator.php
@@ -0,0 +1,28 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Entity\EntityDecorator.
+ */
+
+namespace Drupal\webprofiler\Entity;
+
+use Drupal\webprofiler\Decorator;
+
+/**
+ * Class EntityDecorator
+ */
+class EntityDecorator extends Decorator {
+
+  /**
+   * @var array
+   */
+  protected $entities;
+
+  /**
+   * @return mixed
+   */
+  public function getEntities() {
+    return $this->entities;
+  }
+}
diff --git a/modules/devel/webprofiler/src/Entity/EntityManagerWrapper.php b/modules/devel/webprofiler/src/Entity/EntityManagerWrapper.php
new file mode 100644
index 0000000..ecce6ad
--- /dev/null
+++ b/modules/devel/webprofiler/src/Entity/EntityManagerWrapper.php
@@ -0,0 +1,490 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Entity\EntityManagerWrapper.
+ */
+
+namespace Drupal\webprofiler\Entity;
+
+use Drupal\Core\Config\Entity\ConfigEntityStorageInterface;
+use Drupal\Core\Entity\EntityInterface;
+use Drupal\Core\Entity\EntityManagerInterface;
+use Drupal\Core\Entity\EntityTypeInterface;
+use Drupal\Core\Entity\EntityViewBuilderInterface;
+use Drupal\Core\Field\FieldDefinitionInterface;
+use Drupal\Core\Field\FieldStorageDefinitionInterface;
+use Drupal\Core\Plugin\DefaultPluginManager;
+use Symfony\Component\DependencyInjection\ContainerAwareInterface;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Class EntityManagerWrapper
+ */
+class EntityManagerWrapper extends DefaultPluginManager implements EntityManagerInterface, ContainerAwareInterface {
+
+  /**
+   * @var array
+   */
+  private $loaded;
+
+  /**
+   * @var array
+   */
+  private $rendered;
+
+  /**
+   * @var \Drupal\Core\Entity\EntityManagerInterface
+   */
+  private $entityManager;
+
+  /**
+   * @param \Drupal\Core\Entity\EntityManagerInterface $entityManager
+   */
+  public function __construct(EntityManagerInterface $entityManager) {
+    $this->entityManager = $entityManager;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getStorage($entity_type) {
+    /** @var ConfigEntityStorageInterface $handler */
+    $handler = $this->getHandler($entity_type, 'storage');
+
+    switch ($entity_type) {
+      case 'block':
+        if (!isset($this->loaded['block'])) {
+          $handler = new EntityStorageDecorator($handler);
+          $this->loaded['block'] = $handler;
+        }
+        else {
+          $handler = $this->loaded['block'];
+        }
+        break;
+      case 'view':
+        if (!isset($this->loaded['view'])) {
+          $handler = new EntityStorageDecorator($handler);
+          $this->loaded['view'] = $handler;
+        }
+        else {
+          $handler = $this->loaded['view'];
+        }
+        break;
+    }
+
+    return $handler;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getViewBuilder($entity_type) {
+    /** @var EntityViewBuilderInterface $handler */
+    $handler = $this->getHandler($entity_type, 'view_builder');
+
+    switch ($entity_type) {
+      case 'block':
+        if (!isset($this->rendered['block'])) {
+          $handler = new EntityViewBuilderDecorator($handler);
+          $this->rendered['block'] = $handler;
+        }
+        else {
+          $handler = $this->rendered['block'];
+        }
+        break;
+    }
+
+    return $handler;
+  }
+
+  /**
+   * @param $type
+   *
+   * @return array
+   */
+  public function getLoaded($type) {
+    return isset($this->loaded[$type]) ? $this->loaded[$type] : NULL;
+  }
+
+  /**
+   * @param $type
+   *
+   * @return array
+   */
+  public function getRendered($type) {
+    return isset($this->rendered[$type]) ? $this->rendered[$type]: NULL;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function useCaches($use_caches = FALSE) {
+    $this->entityManager->useCaches($use_caches = FALSE);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function hasDefinition($plugin_id) {
+    return $this->entityManager->hasDefinition($plugin_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onBundleCreate($bundle, $entity_type_id) {
+    $this->entityManager->onBundleCreate($bundle, $entity_type_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onBundleDelete($bundle, $entity_type_id) {
+    $this->entityManager->onBundleDelete($bundle, $entity_type_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getEntityTypeLabels($group = FALSE) {
+    return $this->entityManager->getEntityTypeLabels($group = FALSE);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getBaseFieldDefinitions($entity_type_id) {
+    return $this->entityManager->getBaseFieldDefinitions($entity_type_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFieldDefinitions($entity_type_id, $bundle) {
+    return $this->entityManager->getFieldDefinitions($entity_type_id, $bundle);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFieldStorageDefinitions($entity_type_id) {
+    return $this->entityManager->getFieldStorageDefinitions($entity_type_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getLastInstalledFieldStorageDefinitions($entity_type_id) {
+    return $this->entityManager->getLastInstalledFieldStorageDefinitions($entity_type_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFieldMap() {
+    return $this->entityManager->getFieldMap();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFieldMapByFieldType($field_type) {
+    return $this->entityManager->getFieldMapByFieldType($field_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getAccessControlHandler($entity_type) {
+    return $this->entityManager->getAccessControlHandler($entity_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getAllBundleInfo() {
+    return $this->entityManager->getAllBundleInfo();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function clearCachedDefinitions() {
+    $this->entityManager->clearCachedDefinitions();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function clearCachedFieldDefinitions() {
+    $this->entityManager->clearCachedFieldDefinitions();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function clearCachedBundles() {
+    $this->entityManager->clearCachedBundles();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getListBuilder($entity_type) {
+    return $this->entityManager->getListBuilder($entity_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormObject($entity_type, $operation) {
+    return $this->entityManager->getFormObject($entity_type, $operation);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getRouteProviders($entity_type) {
+    return $this->entityManager->getRouteProviders($entity_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function hasHandler($entity_type, $handler_type) {
+    return $this->entityManager->hasHandler($entity_type, $handler_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getHandler($entity_type, $handler_type) {
+    return $this->entityManager->getHandler($entity_type, $handler_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function createHandlerInstance($class, EntityTypeInterface $definition = NULL) {
+    return $this->entityManager->createHandlerInstance($class, $definition);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getBundleInfo($entity_type) {
+    return $this->entityManager->getBundleInfo($entity_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getExtraFields($entity_type_id, $bundle) {
+    return $this->entityManager->getExtraFields($entity_type_id, $bundle);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getTranslationFromContext(EntityInterface $entity, $langcode = NULL, $context = []) {
+    return $this->entityManager->getTranslationFromContext($entity, $langcode, $context);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getDefinition($entity_type_id, $exception_on_invalid = TRUE) {
+    return $this->entityManager->getDefinition($entity_type_id, $exception_on_invalid);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getLastInstalledDefinition($entity_type_id) {
+    return $this->entityManager->getLastInstalledDefinition($entity_type_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getDefinitions() {
+    return $this->entityManager->getDefinitions();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getAllViewModes() {
+    return $this->entityManager->getAllViewModes();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getViewModes($entity_type_id) {
+    return $this->entityManager->getViewModes($entity_type_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getAllFormModes() {
+    return $this->entityManager->getAllFormModes();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormModes($entity_type_id) {
+    return $this->entityManager->getFormModes($entity_type_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getViewModeOptions($entity_type_id, $include_disabled = FALSE) {
+    return $this->entityManager->getViewModeOptions($entity_type_id, $include_disabled);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormModeOptions($entity_type_id) {
+    return $this->entityManager->getFormModeOptions($entity_type_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getViewModeOptionsByBundle($entity_type_id, $bundle) {
+    return $this->entityManager->getViewModeOptionsByBundle($entity_type_id, $bundle);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormModeOptionsByBundle($entity_type_id, $bundle) {
+    return $this->entityManager->getFormModeOptionsByBundle($entity_type_id, $bundle);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadEntityByUuid($entity_type_id, $uuid) {
+    return $this->entityManager->loadEntityByUuid($entity_type_id, $uuid);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadEntityByConfigTarget($entity_type_id, $target) {
+    return $this->entityManager->loadEntityByConfigTarget($entity_type_id, $target);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getEntityTypeFromClass($class_name) {
+    return $this->entityManager->getEntityTypeFromClass($class_name);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onEntityTypeCreate(EntityTypeInterface $entity_type) {
+    $this->entityManager->onEntityTypeCreate($entity_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onEntityTypeUpdate(EntityTypeInterface $entity_type, EntityTypeInterface $original) {
+    $this->entityManager->onEntityTypeUpdate($entity_type, $original);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onEntityTypeDelete(EntityTypeInterface $entity_type) {
+    $this->entityManager->onEntityTypeDelete($entity_type);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function createInstance($plugin_id, array $configuration = []) {
+    return $this->entityManager->createInstance($plugin_id, $configuration);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onFieldDefinitionCreate(FieldDefinitionInterface $field_definition) {
+    $this->entityManager->onFieldDefinitionCreate($field_definition);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onFieldDefinitionUpdate(FieldDefinitionInterface $field_definition, FieldDefinitionInterface $original) {
+    $this->entityManager->onFieldDefinitionUpdate($field_definition, $original);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onFieldDefinitionDelete(FieldDefinitionInterface $field_definition) {
+    $this->entityManager->onFieldDefinitionDelete($field_definition);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onFieldStorageDefinitionCreate(FieldStorageDefinitionInterface $storage_definition) {
+    $this->entityManager->onFieldStorageDefinitionCreate($storage_definition);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onFieldStorageDefinitionUpdate(FieldStorageDefinitionInterface $storage_definition, FieldStorageDefinitionInterface $original) {
+    $this->entityManager->onFieldStorageDefinitionUpdate($storage_definition, $original);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function onFieldStorageDefinitionDelete(FieldStorageDefinitionInterface $storage_definition) {
+    $this->entityManager->onFieldStorageDefinitionDelete($storage_definition);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getInstance(array $options) {
+    return $this->entityManager->getInstance($options);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function setContainer(ContainerInterface $container = NULL) {
+    $this->entityManager->setContainer($container = NULL);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function clearDisplayModeInfo() {
+    return $this->entityManager->clearDisplayModeInfo();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function setFieldMap(array $field_map) {
+    return $this->entityManager->setFieldMap($field_map);
+  }
+
+}
diff --git a/modules/devel/webprofiler/src/Entity/EntityStorageDecorator.php b/modules/devel/webprofiler/src/Entity/EntityStorageDecorator.php
new file mode 100644
index 0000000..57583f9
--- /dev/null
+++ b/modules/devel/webprofiler/src/Entity/EntityStorageDecorator.php
@@ -0,0 +1,187 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Entity\EntityStorageDecorator.
+ */
+
+namespace Drupal\webprofiler\Entity;
+
+use Drupal\Core\Config\Entity\ConfigEntityInterface;
+use Drupal\Core\Config\Entity\ConfigEntityStorageInterface;
+use Drupal\Core\Entity\EntityInterface;
+
+/**
+ * Class EntityStorageDecorator
+ */
+class EntityStorageDecorator extends EntityDecorator implements ConfigEntityStorageInterface {
+
+  /**
+   * @param ConfigEntityStorageInterface $controller
+   */
+  public function __construct(ConfigEntityStorageInterface $controller) {
+    parent::__construct($controller);
+
+    $this->entities = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function resetCache(array $ids = NULL) {
+    $this->getOriginalObject()->resetCache($ids);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadMultiple(array $ids = NULL) {
+    $entities = $this->getOriginalObject()->loadMultiple($ids);
+
+    $this->entities = array_merge($this->entities, $entities);
+
+    return $entities;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function load($id) {
+    $entity = $this->getOriginalObject()->load($id);
+
+    $this->entities[] = $entity;
+
+    return $entity;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadUnchanged($id) {
+    return $this->getOriginalObject()->loadUnchanged($id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadRevision($revision_id) {
+    return $this->getOriginalObject()->loadRevision($revision_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function deleteRevision($revision_id) {
+    $this->getOriginalObject()->deleteRevision($revision_id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadByProperties(array $values = []) {
+    $entities = $this->getOriginalObject()->loadByProperties($values);
+
+    $this->entities = array_merge($this->entities, $entities);
+
+    return $entities;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function create(array $values = []) {
+    return $this->getOriginalObject()->create($values);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function delete(array $entities) {
+    $this->getOriginalObject()->delete($entities);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function save(EntityInterface $entity) {
+    return $this->getOriginalObject()->save($entity);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getQueryServicename() {
+    return $this->getOriginalObject()->getQueryServicename();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getQuery($conjunction = 'AND') {
+    return $this->getOriginalObject()->getQuery($conjunction);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getEntityTypeId() {
+    return $this->getOriginalObject()->getEntityTypeId();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getEntityType() {
+    return $this->getOriginalObject()->getEntityType();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getConfigPrefix() {
+    return $this->getOriginalObject()->getConfigPrefix();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function getIDFromConfigName($config_name, $config_prefix) {
+    return substr($config_name, strlen($config_prefix . '.'));
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function createFromStorageRecord(array $values) {
+    return $this->getOriginalObject()->createFromStorageRecord($values);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function updateFromStorageRecord(ConfigEntityInterface $entity, array $values) {
+    return $this->getOriginalObject()
+      ->updateFromStorageRecord($entity, $values);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getAggregateQuery($conjunction = 'AND') {
+    return $this->getOriginalObject()->getAggregateQuery($conjunction);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadOverrideFree($id) {
+    return $this->getOriginalObject()->loadOverrideFree($id);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function loadMultipleOverrideFree(array $ids = NULL) {
+    return $this->getOriginalObject()->loadMultipleOverrideFree($ids);
+  }
+}
diff --git a/modules/devel/webprofiler/src/Entity/EntityViewBuilderDecorator.php b/modules/devel/webprofiler/src/Entity/EntityViewBuilderDecorator.php
new file mode 100644
index 0000000..64f0489
--- /dev/null
+++ b/modules/devel/webprofiler/src/Entity/EntityViewBuilderDecorator.php
@@ -0,0 +1,83 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Entity\EntityViewBuilderDecorator.
+ */
+
+namespace Drupal\webprofiler\Entity;
+
+use Drupal\Core\Entity\EntityInterface;
+use Drupal\Core\Entity\EntityViewBuilderInterface;
+use Drupal\Core\Field\FieldItemInterface;
+use Drupal\Core\Field\FieldItemListInterface;
+
+/**
+ * Class EntityViewBuilderDecorator
+ */
+class EntityViewBuilderDecorator extends EntityDecorator implements EntityViewBuilderInterface {
+
+  /**
+   * @param EntityViewBuilderInterface $controller
+   */
+  public function __construct(EntityViewBuilderInterface $controller) {
+    parent::__construct($controller);
+
+    $this->entities = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildComponents(array &$build, array $entities, array $displays, $view_mode, $langcode = NULL) {
+    $this->getOriginalObject()
+      ->buildComponents($build, $entities, $displays, $view_mode, $langcode);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function view(EntityInterface $entity, $view_mode = 'full', $langcode = NULL) {
+    $this->entities[] = $entity;
+
+    return $this->getOriginalObject()->view($entity, $view_mode, $langcode);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function viewMultiple(array $entities = [], $view_mode = 'full', $langcode = NULL) {
+    $this->entities = array_merge($this->entities, $entities);
+
+    return $this->getOriginalObject()
+      ->viewMultiple($entities, $view_mode, $langcode);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function resetCache(array $entities = NULL) {
+    $this->getOriginalObject()->resetCache($entities);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function viewField(FieldItemListInterface $items, $display_options = []) {
+    return $this->getOriginalObject()->viewField($items, $display_options);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function viewFieldItem(FieldItemInterface $item, $display_options = []) {
+    return $this->getOriginalObject()->viewFieldItem($item, $display_options);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getCacheTags() {
+    return $this->getOriginalObject()->getCacheTag();
+  }
+}
diff --git a/modules/devel/webprofiler/src/EventSubscriber/WebprofilerEventSubscriber.php b/modules/devel/webprofiler/src/EventSubscriber/WebprofilerEventSubscriber.php
new file mode 100644
index 0000000..46a42a1
--- /dev/null
+++ b/modules/devel/webprofiler/src/EventSubscriber/WebprofilerEventSubscriber.php
@@ -0,0 +1,97 @@
+<?php
+
+namespace Drupal\webprofiler\EventSubscriber;
+
+use Drupal\Core\Render\RendererInterface;
+use Drupal\Core\Routing\UrlGeneratorInterface;
+use Drupal\Core\Session\AccountInterface;
+use Symfony\Component\EventDispatcher\EventSubscriberInterface;
+use Symfony\Component\HttpFoundation\Response;
+use Symfony\Component\HttpKernel\Event\FilterResponseEvent;
+use Symfony\Component\HttpKernel\KernelEvents;
+
+/**
+ * Class WebprofilerEventSubscriber
+ */
+class WebprofilerEventSubscriber implements EventSubscriberInterface {
+
+  /**
+   * @var \Drupal\Core\Session\AccountInterface
+   */
+  private $currentUser;
+
+  /**
+   * @var \Drupal\Core\Routing\UrlGeneratorInterface
+   */
+  protected $urlGenerator;
+
+  /**
+   * @var \Drupal\Core\Render\RendererInterface
+   */
+  protected $renderer;
+
+  /**
+   * @param \Drupal\Core\Session\AccountInterface $currentUser
+   * @param \Drupal\Core\Routing\UrlGeneratorInterface $urlGenerator
+   * @param \Drupal\Core\Render\RendererInterface $renderer
+   */
+  public function __construct(AccountInterface $currentUser, UrlGeneratorInterface $urlGenerator, RendererInterface $renderer) {
+    $this->currentUser = $currentUser;
+    $this->urlGenerator = $urlGenerator;
+    $this->renderer = $renderer;
+  }
+
+  /**
+   * @param \Symfony\Component\HttpKernel\Event\FilterResponseEvent $event
+   */
+  public function onKernelResponse(FilterResponseEvent $event) {
+    $response = $event->getResponse();
+    $request = $event->getRequest();
+
+    if ($response->headers->has('X-Debug-Token') && NULL !== $this->urlGenerator) {
+      $response->headers->set(
+        'X-Debug-Token-Link',
+        $this->urlGenerator->generate('webprofiler.dashboard', ['profile' => $response->headers->get('X-Debug-Token')])
+      );
+    }
+
+    // do not capture redirects or modify XML HTTP Requests
+    if ($request->isXmlHttpRequest()) {
+      return;
+    }
+
+    if ($this->currentUser->hasPermission('view webprofiler toolbar')) {
+      $this->injectToolbar($response);
+    }
+  }
+
+  /**
+   * @param \Symfony\Component\HttpFoundation\Response $response
+   */
+  protected function injectToolbar(Response $response) {
+    $content = $response->getContent();
+    $pos = mb_strripos($content, '</body>');
+
+    if (FALSE !== $pos) {
+      if ($token = $response->headers->get('X-Debug-Token')) {
+        $loader = [
+          '#theme' => 'webprofiler_loader',
+          '#token' => $token,
+          '#profiler_url' => $this->urlGenerator->generate('webprofiler.toolbar', ['profile' => $token]),
+        ];
+
+        $content = mb_substr($content, 0, $pos) . $this->renderer->renderRoot($loader) . mb_substr($content, $pos);
+        $response->setContent($content);
+      }
+    }
+  }
+
+  /**
+   * @return array
+   */
+  public static function getSubscribedEvents() {
+    return [
+      KernelEvents::RESPONSE => ['onKernelResponse', -128],
+    ];
+  }
+}
diff --git a/modules/devel/webprofiler/src/Form/ConfigForm.php b/modules/devel/webprofiler/src/Form/ConfigForm.php
new file mode 100644
index 0000000..7455b4b
--- /dev/null
+++ b/modules/devel/webprofiler/src/Form/ConfigForm.php
@@ -0,0 +1,220 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Form\ConfigForm.
+ */
+
+namespace Drupal\webprofiler\Form;
+
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Drupal\Core\Form\ConfigFormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\webprofiler\Profiler\ProfilerStorageManager;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+use Symfony\Component\HttpKernel\Profiler\Profiler;
+
+/**
+ * Class ConfigForm
+ */
+class ConfigForm extends ConfigFormBase {
+
+  /**
+   * @var \Symfony\Component\HttpKernel\Profiler\Profiler
+   */
+  private $profiler;
+
+  /**
+   * @var array
+   */
+  private $templates;
+
+  /**
+   * @var \Drupal\webprofiler\Profiler\ProfilerStorageManager
+   */
+  private $storageManager;
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container) {
+    return new static(
+      $container->get('config.factory'),
+      $container->get('profiler'),
+      $container->get('profiler.storage_manager'),
+      $container->getParameter('data_collector.templates')
+    );
+  }
+
+  /**
+   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   * @param Profiler $profiler
+   * @param \Drupal\webprofiler\Profiler\ProfilerStorageManager $storageManager
+   * @param array $templates
+   */
+  public function __construct(ConfigFactoryInterface $config_factory, Profiler $profiler, ProfilerStorageManager $storageManager, $templates) {
+    parent::__construct($config_factory);
+
+    $this->profiler = $profiler;
+    $this->templates = $templates;
+    $this->storageManager = $storageManager;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'webprofiler_config';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state) {
+    $config = $this->config('webprofiler.config');
+
+    $form['purge_on_cache_clear'] = [
+      '#type' => 'checkbox',
+      '#title' => $this->t('Purge on cache clear'),
+      '#description' => $this->t('Deletes all profiler files during cache clear.'),
+      '#default_value' => $config->get('purge_on_cache_clear'),
+    ];
+
+    $storages = $this->storageManager->getStorages();
+
+    $form['storage'] = [
+      '#type' => 'select',
+      '#title' => $this->t('Storage backend'),
+      '#description' => $this->t('Choose were to store profiler data.'),
+      '#options' => $storages,
+      '#default_value' => $config->get('storage'),
+    ];
+
+    $form['exclude'] = [
+      '#type' => 'textarea',
+      '#title' => $this->t('Exclude'),
+      '#default_value' => $config->get('exclude'),
+      '#description' => $this->t('Paths to exclude for profiling. One path per line.'),
+    ];
+
+    $form['active_toolbar_items'] = [
+      '#type' => 'checkboxes',
+      '#title' => $this->t('Active toolbar items'),
+      '#options' => $this->getCollectors(),
+      '#description' => $this->t('Choose which items to show into the toolbar.'),
+      '#default_value' => $config->get('active_toolbar_items'),
+    ];
+
+    $form['ide_link'] = [
+      '#type' => 'textfield',
+      '#title' => $this->t('IDE link'),
+      '#description' => $this->t('IDE link for open files.'),
+      '#default_value' => $config->get('ide_link'),
+    ];
+
+    $form['database'] = [
+      '#type' => 'details',
+      '#title' => $this->t('Database settings'),
+      '#open' => FALSE,
+      '#states' => array(
+        'visible' => array(
+          array(
+            ':input[name="active_toolbar_items[database]' => array('checked' => TRUE),
+          ),
+        ),
+      ),
+    ];
+
+    $form['database']['query_sort'] = [
+      '#type' => 'radios',
+      '#title' => $this->t('Sort query log'),
+      '#options' => ['source' => 'by source', 'duration' => 'by duration'],
+      '#description' => $this->t('The query table can be sorted in the order that the queries were executed or by descending duration.'),
+      '#default_value' => $config->get('query_sort'),
+    ];
+
+    $form['database']['query_highlight'] = [
+      '#type' => 'number',
+      '#title' => $this->t('Slow query highlighting'),
+      '#description' => $this->t('Enter an integer in milliseconds. Any query which takes longer than this many milliseconds will be highlighted in the query log. This indicates a possibly inefficient query, or a candidate for caching.'),
+      '#default_value' => $config->get('query_highlight'),
+      '#min' => 0,
+    ];
+
+    $storageId = $this->config('webprofiler.config')->get('storage');
+    $storage = $this->storageManager->getStorage($storageId);
+
+    $form['purge'] = [
+      '#type' => 'details',
+      '#title' => $this->t('Purge profiles'),
+      '#open' => FALSE,
+    ];
+
+    $form['purge']['purge'] = [
+      '#type' => 'submit',
+      '#value' => $this->t('Purge'),
+      '#submit' => [[$this, 'purge']],
+    ];
+
+    $form['purge']['purge-help'] = [
+      '#type' => 'inline_template',
+      '#template' => '<div class="form-item">{{ message }}</div>',
+      '#context' => [
+        'message' => $this->t('Purge %storage profiles.', ['%storage' => $storage['title']]),
+      ],
+    ];
+
+    return parent::buildForm($form, $form_state);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    $this->config('webprofiler.config')
+      ->set('purge_on_cache_clear', $form_state->getValue('purge_on_cache_clear'))
+      ->set('storage', $form_state->getValue('storage'))
+      ->set('exclude', $form_state->getValue('exclude'))
+      ->set('active_toolbar_items', $form_state->getValue('active_toolbar_items'))
+      ->set('ide_link', $form_state->getValue('ide_link'))
+      ->set('query_sort', $form_state->getValue('query_sort'))
+      ->set('query_highlight', $form_state->getValue('query_highlight'))
+      ->save();
+
+    parent::submitForm($form, $form_state);
+  }
+
+  /**
+   * Purges profiles.
+   */
+  public function purge(array &$form, FormStateInterface $form_state) {
+    $this->profiler->purge();
+    drupal_set_message($this->t('Profiles purged'));
+  }
+
+  /**
+   * @return array
+   */
+  private function getCollectors() {
+    $options = [];
+    foreach ($this->templates as $template) {
+      // drupal collector should not be disabled
+      if ($template[0] != 'drupal') {
+        $options[$template[0]] = $template[2];
+      }
+    }
+
+    asort($options);
+
+    return $options;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getEditableConfigNames() {
+    return [
+      'webprofiler.config',
+    ];
+  }
+}
diff --git a/modules/devel/webprofiler/src/Form/FormBuilderWrapper.php b/modules/devel/webprofiler/src/Form/FormBuilderWrapper.php
new file mode 100644
index 0000000..48064b8
--- /dev/null
+++ b/modules/devel/webprofiler/src/Form/FormBuilderWrapper.php
@@ -0,0 +1,61 @@
+<?php
+
+namespace Drupal\webprofiler\Form;
+
+use Drupal\Core\Form\FormBuilder;
+use Drupal\Core\Form\FormStateInterface;
+
+/**
+ * Class FormBuilderWrapper
+ */
+class FormBuilderWrapper extends FormBuilder {
+
+  /**
+   * @var array
+   */
+  private $buildForms;
+
+  /**
+   * @return array
+   */
+  public function getBuildForm() {
+    return $this->buildForms;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function prepareForm($form_id, &$form, FormStateInterface &$form_state) {
+    parent::prepareForm($form_id, $form, $form_state);
+
+    if (!$this->buildForms) {
+      $this->buildForms = [];
+    }
+
+    $elements = [];
+    foreach ($form as $key => $value) {
+      if (strpos($key, '#') !== 0) {
+        $elements[$key]['#title'] = isset($value['#title']) ? $value['#title'] : NULL;
+        $elements[$key]['#access'] = isset($value['#access']) ? $value['#access'] : NULL;
+        $elements[$key]['#type'] = isset($value['#type']) ? $value['#type'] : NULL;
+      }
+    }
+
+    $buildInfo = $form_state->getBuildInfo();
+
+    $class = get_class($buildInfo['callback_object']);
+    $method = new \ReflectionMethod($class, 'buildForm');
+
+    $this->buildForms[$buildInfo['form_id']] = [
+      'class' => [
+        'class' => $class,
+        'method' => 'buildForm',
+        'file' => $method->getFilename(),
+        'line' => $method->getStartLine(),
+      ],
+      'form' => $elements,
+    ];
+
+    return $form;
+  }
+}
diff --git a/modules/devel/webprofiler/src/Form/ProfilesFilterForm.php b/modules/devel/webprofiler/src/Form/ProfilesFilterForm.php
new file mode 100644
index 0000000..87e04dc
--- /dev/null
+++ b/modules/devel/webprofiler/src/Form/ProfilesFilterForm.php
@@ -0,0 +1,91 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Form\PurgeForm.
+ */
+
+namespace Drupal\webprofiler\Form;
+
+use Drupal\Core\Form\FormBase;
+use Drupal\Core\Form\FormStateInterface;
+use Drupal\Core\Url;
+
+/**
+ * Class ProfilesFilterForm
+ */
+class ProfilesFilterForm extends FormBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFormId() {
+    return 'webprofiler_profiles_filter';
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function buildForm(array $form, FormStateInterface $form_state) {
+    $form['ip'] = [
+      '#type' => 'textfield',
+      '#title' => $this->t('IP'),
+      '#size' => 30,
+      '#default_value' => $this->getRequest()->query->get('ip'),
+      '#prefix' => '<div class="form--inline clearfix">',
+    ];
+
+    $form['url'] = [
+      '#type' => 'textfield',
+      '#title' => $this->t('Url'),
+      '#size' => 30,
+      '#default_value' => $this->getRequest()->query->get('url'),
+    ];
+
+    $form['method'] = [
+      '#type' => 'select',
+      '#title' => $this->t('Method'),
+      '#options' => ['GET' => 'GET', 'POST' => 'POST'],
+      '#default_value' => $this->getRequest()->query->get('method'),
+    ];
+
+    $limits = [10, 50, 100];
+    $form['limit'] = [
+      '#type' => 'select',
+      '#title' => $this->t('Limit'),
+      '#options' => array_combine($limits, $limits),
+      '#default_value' => $this->getRequest()->query->get('limit'),
+    ];
+
+    $form['actions'] = ['#type' => 'actions'];
+    $form['actions']['filter'] = [
+      '#type' => 'submit',
+      '#value' => t('Filter'),
+      '#attributes' => ['class' => ['button--primary']],
+      '#suffix' => '</div>',
+    ];
+
+    return $form;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function submitForm(array &$form, FormStateInterface $form_state) {
+    $ip = $form_state->getValue('ip');// ['values']['ip'];
+    $url = $form_state->getValue('url');
+    $method = $form_state->getValue('method');
+    $limit = $form_state->getValue('limit');
+
+    $url = new Url('webprofiler.admin_list', [], [
+      'query' => [
+        'ip' => $ip,
+        'url' => $url,
+        'method' => $method,
+        'limit' => $limit,
+      ]
+    ]);
+
+    $form_state->setRedirectUrl($url);
+  }
+}
diff --git a/modules/devel/webprofiler/src/Frontend/PerformanceTimingData.php b/modules/devel/webprofiler/src/Frontend/PerformanceTimingData.php
new file mode 100644
index 0000000..da5565c
--- /dev/null
+++ b/modules/devel/webprofiler/src/Frontend/PerformanceTimingData.php
@@ -0,0 +1,81 @@
+<?php
+
+namespace Drupal\webprofiler\Frontend;
+
+/**
+ * Class PerformanceTimingData
+ */
+class PerformanceTimingData {
+
+  /**
+   * @var array
+   */
+  private $data;
+
+  /**
+   * @param array $data
+   */
+  public function __construct($data) {
+    $this->data = $data;
+  }
+
+  /**
+   * @return int
+   */
+  public function getDNSTiming() {
+    if (isset($this->data['domainLookupEnd']) && isset($this->data['domainLookupStart'])) {
+      return $this->data['domainLookupEnd'] - $this->data['domainLookupStart'];
+    }
+    else {
+      return 0;
+    }
+  }
+
+  /**
+   * @return int
+   */
+  public function getTCPTiming() {
+    if (isset($this->data['connectEnd']) && isset($this->data['connectStart'])) {
+      return $this->data['connectEnd'] - $this->data['connectStart'];
+    }
+    else {
+      return 0;
+    }
+  }
+
+  /**
+   * @return int
+   */
+  public function getTtfbTiming() {
+    if (isset($this->data['responseStart']) && isset($this->data['connectEnd'])) {
+      return $this->data['responseStart'] - $this->data['connectEnd'];
+    }
+    else {
+      return 0;
+    }
+  }
+
+  /**
+   * @return int
+   */
+  public function getDataTiming() {
+    if (isset($this->data['responseEnd']) && isset($this->data['responseStart'])) {
+      return $this->data['responseEnd'] - $this->data['responseStart'];
+    }
+    else {
+      return 0;
+    }
+  }
+
+  /**
+   * @return int
+   */
+  public function getDomTiming() {
+    if (isset($this->data['loadEventStart']) && isset($this->data['responseEnd'])) {
+      return $this->data['loadEventStart'] - $this->data['responseEnd'];
+    }
+    else {
+      return 0;
+    }
+  }
+}
diff --git a/modules/devel/webprofiler/src/Helper/ClassShortener.php b/modules/devel/webprofiler/src/Helper/ClassShortener.php
new file mode 100644
index 0000000..4d28377
--- /dev/null
+++ b/modules/devel/webprofiler/src/Helper/ClassShortener.php
@@ -0,0 +1,34 @@
+<?php
+
+namespace Drupal\webprofiler\Helper;
+
+use Drupal\Component\Utility\SafeMarkup;
+
+/**
+ * Class ClassShortener
+ */
+class ClassShortener implements ClassShortenerInterface {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function shortenClass($class) {
+    $parts = explode('\\', $class);
+    $result = [];
+    $size = count($parts) - 1;
+
+    foreach ($parts as $key => $part) {
+      if ($key < $size) {
+        $result[] = substr($part, 0, 1);
+      }
+      else {
+        $result[] = $part;
+      }
+    }
+
+    return SafeMarkup::format("<abbr title=\"@class\">@short</abbr>", [
+      '@class' => $class,
+      '@short' => implode('\\', $result)
+    ]);
+  }
+}
diff --git a/modules/devel/webprofiler/src/Helper/ClassShortenerInterface.php b/modules/devel/webprofiler/src/Helper/ClassShortenerInterface.php
new file mode 100644
index 0000000..e1b2af5
--- /dev/null
+++ b/modules/devel/webprofiler/src/Helper/ClassShortenerInterface.php
@@ -0,0 +1,17 @@
+<?php
+
+namespace Drupal\webprofiler\Helper;
+
+/**
+ * Interface ClassShortenerInterface
+ */
+interface ClassShortenerInterface {
+
+  /**
+   * @param string $class
+   *
+   * @return string
+   */
+  public function shortenClass($class);
+
+}
diff --git a/modules/devel/webprofiler/src/Helper/IdeLinkGenerator.php b/modules/devel/webprofiler/src/Helper/IdeLinkGenerator.php
new file mode 100644
index 0000000..68a4088
--- /dev/null
+++ b/modules/devel/webprofiler/src/Helper/IdeLinkGenerator.php
@@ -0,0 +1,39 @@
+<?php
+
+/**
+ * @file
+ * Contains Drupal\webprofiler\IdeLinkGenerator.
+ */
+
+namespace Drupal\webprofiler\Helper;
+
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Drupal\Component\Utility\SafeMarkup;
+
+/**
+ * Class IdeLinkGenerator.
+ */
+class IdeLinkGenerator implements IdeLinkGeneratorInterface {
+
+  /**
+   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   */
+  private $config_factory;
+
+  /**
+   * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
+   */
+  public function __construct(ConfigFactoryInterface $config_factory) {
+    $this->config_factory = $config_factory;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function generateLink($file, $line) {
+    $ide_link = $this->config_factory->get('webprofiler.config')
+      ->get('ide_link');
+
+    return SafeMarkup::format($ide_link, ['@file' => $file, '@line' => $line]);
+  }
+}
diff --git a/modules/devel/webprofiler/src/Helper/IdeLinkGeneratorInterface.php b/modules/devel/webprofiler/src/Helper/IdeLinkGeneratorInterface.php
new file mode 100644
index 0000000..22babdc
--- /dev/null
+++ b/modules/devel/webprofiler/src/Helper/IdeLinkGeneratorInterface.php
@@ -0,0 +1,22 @@
+<?php
+
+/**
+ * @file
+ * Contains Drupal\webprofiler\IdeLinkGeneratorInterface.
+ */
+
+namespace Drupal\webprofiler\Helper;
+
+/**
+ * Interface IdeLinkGeneratorInterface.
+ */
+interface IdeLinkGeneratorInterface {
+
+  /**
+   * @param $file
+   * @param $line
+   *
+   * @return string
+   */
+  public function generateLink($file, $line);
+}
diff --git a/modules/devel/webprofiler/src/Http/HttpClientMiddleware.php b/modules/devel/webprofiler/src/Http/HttpClientMiddleware.php
new file mode 100644
index 0000000..b64a2a6
--- /dev/null
+++ b/modules/devel/webprofiler/src/Http/HttpClientMiddleware.php
@@ -0,0 +1,84 @@
+<?php
+
+namespace Drupal\webprofiler\Http;
+
+use GuzzleHttp\Exception\RequestException;
+use GuzzleHttp\TransferStats;
+use Psr\Http\Message\RequestInterface;
+
+/**
+ * Class HttpClientMiddleware
+ */
+class HttpClientMiddleware {
+
+  /**
+   * @var array
+   */
+  private $completedRequests;
+
+  /**
+   * @var array
+   */
+  private $failedRequests;
+
+  /**
+   *
+   */
+  public function __construct() {
+    $this->completedRequests = [];
+    $this->failedRequests = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function __invoke() {
+    return function ($handler) {
+      return function (RequestInterface $request, array $options) use ($handler) {
+
+        $options['on_stats'] = function (TransferStats $stats) use ($request) {
+          $request->stats = $stats;
+        };
+
+        return $handler($request, $options)->then(
+          function ($response) use ($request) {
+
+            $this->completedRequests[] = [
+              'request' => $request,
+              'response' => $response,
+            ];
+
+            return $response;
+          },
+          function ($reason) use ($request) {
+            $response = $reason instanceof RequestException
+              ? $reason->getResponse()
+              : null;
+
+            $this->failedRequests[] = [
+              'request' => $request,
+              'response' => $response,
+              'message' => $reason->getMessage(),
+            ];
+
+            return \GuzzleHttp\Promise\rejection_for($reason);
+          }
+        );
+      };
+    };
+  }
+
+  /**
+   * @return array
+   */
+  public function getCompletedRequests() {
+    return $this->completedRequests;
+  }
+
+  /**
+   * @return array
+   */
+  public function getFailedRequests() {
+    return $this->failedRequests;
+  }
+}
diff --git a/modules/devel/webprofiler/src/Mail/MailManagerWrapper.php b/modules/devel/webprofiler/src/Mail/MailManagerWrapper.php
new file mode 100644
index 0000000..ac31005
--- /dev/null
+++ b/modules/devel/webprofiler/src/Mail/MailManagerWrapper.php
@@ -0,0 +1,35 @@
+<?php
+
+namespace Drupal\webprofiler\Mail;
+
+use Drupal\Core\Mail\MailManager;
+use Drupal\webprofiler\DataCollector\MailDataCollector;
+
+/**
+ * Class MailManagerWrapper
+ */
+class MailManagerWrapper extends MailManager {
+
+  /**
+   * @var
+   */
+  private $dataCollector;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function createInstance($plugin_id, array $configuration = []) {
+    $instance = parent::createInstance($plugin_id, $configuration);
+
+    $wrapper = new MailPluginWrapper($instance, $this->dataCollector, $plugin_id, $configuration);
+
+    return $wrapper;
+  }
+
+  /**
+   * @param \Drupal\webprofiler\DataCollector\MailDataCollector $dataCollector
+   */
+  public function setDataCollector(MailDataCollector $dataCollector) {
+    $this->dataCollector = $dataCollector;
+  }
+}
diff --git a/modules/devel/webprofiler/src/Mail/MailPluginWrapper.php b/modules/devel/webprofiler/src/Mail/MailPluginWrapper.php
new file mode 100644
index 0000000..8c5299a
--- /dev/null
+++ b/modules/devel/webprofiler/src/Mail/MailPluginWrapper.php
@@ -0,0 +1,61 @@
+<?php
+
+namespace Drupal\webprofiler\Mail;
+
+use Drupal\Core\Mail\MailInterface;
+use Drupal\webprofiler\DataCollector\MailDataCollector;
+
+/**
+ * Class MailPluginWrapper
+ */
+class MailPluginWrapper implements MailInterface {
+
+  /**
+   * @var \Drupal\Core\Mail\MailInterface
+   */
+  private $mail;
+
+  /**
+   * @var \Drupal\webprofiler\DataCollector\MailDataCollector
+   */
+  private $dataCollector;
+
+  /**
+   * @var
+   */
+  private $plugin_id;
+
+  /**
+   * @var
+   */
+  private $configuration;
+
+  /**
+   * @param \Drupal\Core\Mail\MailInterface $mail
+   * @param \Drupal\webprofiler\DataCollector\MailDataCollector $dataCollector
+   * @param $plugin_id
+   * @param $configuration
+   */
+  public function __construct(MailInterface $mail, MailDataCollector $dataCollector, $plugin_id, $configuration) {
+    $this->mail = $mail;
+    $this->dataCollector = $dataCollector;
+    $this->plugin_id = $plugin_id;
+    $this->configuration = $configuration;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function format(array $message) {
+    return $this->mail->format($message);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function mail(array $message) {
+    $this->dataCollector->addMessage($message, $this->plugin_id, $this->configuration, $this->mail);
+
+    return $this->mail->mail($message);
+  }
+}
diff --git a/modules/devel/webprofiler/src/Profiler/DatabaseProfilerStorage.php b/modules/devel/webprofiler/src/Profiler/DatabaseProfilerStorage.php
new file mode 100644
index 0000000..66b15a6
--- /dev/null
+++ b/modules/devel/webprofiler/src/Profiler/DatabaseProfilerStorage.php
@@ -0,0 +1,160 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Profiler\DatabaseProfilerStorage.
+ */
+
+namespace Drupal\webprofiler\Profiler;
+
+use Drupal\Core\Database\Connection;
+use Symfony\Component\HttpKernel\Profiler\Profile;
+use Symfony\Component\HttpKernel\Profiler\ProfilerStorageInterface;
+
+/**
+ * Implements a profiler storage using the DBTNG query api.
+ */
+class DatabaseProfilerStorage implements ProfilerStorageInterface {
+
+  /**
+   * The database connection.
+   *
+   * @var \Drupal\Core\Database\Connection
+   */
+  protected $database;
+
+  /**
+   * Constructs a new DatabaseProfilerStorage instance.
+   *
+   * @param \Drupal\Core\Database\Connection $database
+   *   The database connection.
+   */
+  function __construct(Connection $database) {
+    $this->database = $database;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function find($ip, $url, $limit, $method, $start = NULL, $end = NULL) {
+    $select = $this->database->select('webprofiler', 'wp', ['fetch' => \PDO::FETCH_ASSOC]);
+
+    if (NULL === $start) {
+      $start = 0;
+    }
+
+    if (NULL === $end) {
+      $end = time();
+    }
+
+    if ($ip = preg_replace('/[^\d\.]/', '', $ip)) {
+      $select->condition('ip', '%' . $this->database->escapeLike($ip) . '%', 'LIKE');
+    }
+
+    if ($url) {
+      $select->condition('url', '%' . $this->database->escapeLike(addcslashes($url, '%_\\')) . '%', 'LIKE');
+    }
+
+    if ($method) {
+      $select->condition('method', $method);
+    }
+
+    if (!empty($start)) {
+      $select->condition('time', $start, '>=');
+    }
+
+    if (!empty($end)) {
+      $select->condition('time', $end, '<=');
+    }
+
+    $select->fields('wp', [
+      'token',
+      'ip',
+      'method',
+      'url',
+      'time',
+      'parent'
+    ]);
+    $select->orderBy('time', 'DESC');
+    $select->range(0, $limit);
+    return $select->execute()
+      ->fetchAllAssoc('token');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function read($token) {
+    $record = $this->database->select('webprofiler', 'w')
+      ->fields('w')
+      ->condition('token', $token)
+      ->execute()
+      ->fetch();
+    if (isset($record->data)) {
+      return $this->createProfileFromData($token, $record);
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function write(Profile $profile) {
+    $args = [
+      'token' => $profile->getToken(),
+      'parent' => $profile->getParentToken(),
+      'data' => base64_encode(serialize($profile->getCollectors())),
+      'ip' => $profile->getIp(),
+      'method' => $profile->getMethod(),
+      'url' => $profile->getUrl(),
+      'time' => $profile->getTime(),
+      'created_at' => time(),
+    ];
+
+    try {
+      $query = $this->database->select('webprofiler', 'w')
+        ->fields('w', ['token']);
+      $query->condition('token', $profile->getToken());
+      $count = $query->countQuery()->execute()->fetchAssoc();
+
+      if ($count['expression']) {
+        $this->database->update('webprofiler')
+          ->fields($args)
+          ->condition('token', $profile->getToken())
+          ->execute();
+      }
+      else {
+        $this->database->insert('webprofiler')->fields($args)->execute();
+      }
+
+      $status = TRUE;
+    } catch (\Exception $e) {
+      $status = FALSE;
+    }
+
+    return $status;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function purge() {
+    $this->database->truncate('webprofiler')->execute();
+  }
+
+  /**
+   * @param string $token
+   * @param $data
+   *
+   * @return Profile
+   */
+  private function createProfileFromData($token, $data) {
+    $profile = new Profile($token);
+    $profile->setIp($data->ip);
+    $profile->setMethod($data->method);
+    $profile->setUrl($data->url);
+    $profile->setTime($data->time);
+    $profile->setCollectors(unserialize(base64_decode($data->data)));
+
+    return $profile;
+  }
+}
diff --git a/modules/devel/webprofiler/src/Profiler/Profiler.php b/modules/devel/webprofiler/src/Profiler/Profiler.php
new file mode 100644
index 0000000..438dcb4
--- /dev/null
+++ b/modules/devel/webprofiler/src/Profiler/Profiler.php
@@ -0,0 +1,77 @@
+<?php
+
+namespace Drupal\webprofiler\Profiler;
+
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Psr\Log\LoggerInterface;
+use Symfony\Component\HttpKernel\DataCollector\DataCollectorInterface;
+use Symfony\Component\HttpKernel\Profiler\Profile;
+use Symfony\Component\HttpKernel\Profiler\Profiler as SymfonyProfiler;
+use Symfony\Component\HttpKernel\Profiler\ProfilerStorageInterface;
+
+/**
+ * Class Profiler
+ */
+class Profiler extends SymfonyProfiler {
+
+  /**
+   * @var \Drupal\Core\Config\ConfigFactoryInterface $config
+   */
+  private $config;
+
+  /**
+   * @var array
+   */
+  private $activeToolbarItems;
+
+  private $localStorage;
+  private $localLogger;
+
+  /**
+   * Constructor.
+   *
+   * @param \Symfony\Component\HttpKernel\Profiler\ProfilerStorageInterface $storage
+   *   A ProfilerStorageInterface instance
+   * @param \Psr\Log\LoggerInterface $logger
+   *   A LoggerInterface instance
+   * @param \Drupal\Core\Config\ConfigFactoryInterface $config
+   */
+  public function __construct(ProfilerStorageInterface $storage, LoggerInterface $logger = NULL, ConfigFactoryInterface $config) {
+    parent::__construct($storage, $logger);
+
+    $this->localStorage = $storage;
+    $this->localLogger = $logger;
+
+    $this->config = $config;
+    $this->activeToolbarItems = $this->config->get('webprofiler.config')
+      ->get('active_toolbar_items');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function add(DataCollectorInterface $collector) {
+    // drupal collector should not be disabled
+    if ($collector->getName() == 'drupal') {
+      parent::add($collector);
+    }
+    else {
+      if ($this->activeToolbarItems && array_key_exists($collector->getName(), $this->activeToolbarItems) && $this->activeToolbarItems[$collector->getName()] !== '0') {
+        parent::add($collector);
+      }
+    }
+  }
+
+  /**
+   * @param \Symfony\Component\HttpKernel\Profiler\Profile $profile
+   *
+   * @return bool
+   */
+  public function updateProfile(Profile $profile) {
+    if (!($ret = $this->localStorage->write($profile)) && NULL !== $this->localLogger) {
+      $this->localLogger->warning('Unable to store the profiler information.');
+    }
+
+    return $ret;
+  }
+}
diff --git a/modules/devel/webprofiler/src/Profiler/ProfilerStorageFactory.php b/modules/devel/webprofiler/src/Profiler/ProfilerStorageFactory.php
new file mode 100644
index 0000000..5ba1545
--- /dev/null
+++ b/modules/devel/webprofiler/src/Profiler/ProfilerStorageFactory.php
@@ -0,0 +1,26 @@
+<?php
+
+namespace Drupal\webprofiler\Profiler;
+
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * Class ProfilerStorageFactory
+ */
+class ProfilerStorageFactory {
+
+  /**
+   * @param \Drupal\Core\Config\ConfigFactoryInterface $config
+   * @param \Symfony\Component\DependencyInjection\ContainerInterface $container
+   *
+   * @return \Symfony\Component\HttpKernel\Profiler\ProfilerStorageInterface
+   */
+  final public static function getProfilerStorage(ConfigFactoryInterface $config, ContainerInterface $container) {
+    $storage = $config->get('webprofiler.config')
+      ->get('storage') ?: 'profiler.database_storage';
+
+    return $container->get($storage);
+  }
+
+}
diff --git a/modules/devel/webprofiler/src/Profiler/ProfilerStorageManager.php b/modules/devel/webprofiler/src/Profiler/ProfilerStorageManager.php
new file mode 100644
index 0000000..fcd3683
--- /dev/null
+++ b/modules/devel/webprofiler/src/Profiler/ProfilerStorageManager.php
@@ -0,0 +1,52 @@
+<?php
+
+namespace Drupal\webprofiler\Profiler;
+
+use Symfony\Component\HttpKernel\Profiler\ProfilerStorageInterface;
+
+/**
+ * Class ProfilerStorageManager
+ */
+class ProfilerStorageManager {
+
+  /**
+   * @var array
+   */
+  private $storages;
+
+  /**
+   * @return array
+   */
+  public function getStorages() {
+    $output = [];
+
+    /** @var \Symfony\Component\HttpKernel\Profiler\ProfilerStorageInterface $storage */
+    foreach ($this->storages as $id => $storage) {
+      $output[$id] = $storage['title'];
+    }
+
+    return $output;
+  }
+
+  /**
+   * @param $id
+   *
+   * @return array
+   */
+  public function getStorage($id) {
+    return $this->storages[$id];
+  }
+
+  /**
+   * @param $id
+   * @param $title
+   * @param \Symfony\Component\HttpKernel\Profiler\ProfilerStorageInterface $storage
+   */
+  public function addStorage($id, $title, ProfilerStorageInterface $storage) {
+    $this->storages[$id] = [
+      'title' => $title,
+      'class' => $storage,
+    ];
+  }
+
+}
diff --git a/modules/devel/webprofiler/src/Profiler/TemplateManager.php b/modules/devel/webprofiler/src/Profiler/TemplateManager.php
new file mode 100644
index 0000000..87aa685
--- /dev/null
+++ b/modules/devel/webprofiler/src/Profiler/TemplateManager.php
@@ -0,0 +1,130 @@
+<?php
+
+/*
+ * This file is part of the Symfony package.
+ *
+ * (c) Fabien Potencier <fabien@symfony.com>
+ *
+ * For the full copyright and license information, please view the LICENSE
+ * file that was distributed with this source code.
+ */
+
+namespace Drupal\webprofiler\Profiler;
+
+use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;
+use Symfony\Component\HttpKernel\Profiler\Profiler as SymfonyProfiler;
+use Symfony\Component\HttpKernel\Profiler\Profile;
+
+/**
+ * Profiler Templates Manager
+ */
+class TemplateManager {
+
+  /**
+   * @var \Twig_Environment
+   */
+  protected $twig;
+
+  /**
+   * @var \Twig_Loader_Chain
+   */
+  protected $twigLoader;
+
+  /**
+   * @var array
+   */
+  protected $templates;
+
+  /**
+   * @var \Symfony\Component\HttpKernel\Profiler\Profiler
+   */
+  protected $profiler;
+
+  /**
+   * Constructor.
+   *
+   * @param SymfonyProfiler $profiler
+   * @param \Twig_Environment $twig
+   * @param \Twig_Loader_Chain $twigLoader
+   * @param array $templates
+   */
+  public function __construct(SymfonyProfiler $profiler, \Twig_Environment $twig, \Twig_Loader_Chain $twigLoader, array $templates) {
+    $this->profiler = $profiler;
+    $this->twig = $twig;
+    $this->twigLoader = $twigLoader;
+    $this->templates = $templates;
+  }
+
+  /**
+   * Gets the template name for a given panel.
+   *
+   * @param Profile $profile
+   * @param string $panel
+   *
+   * @return mixed
+   *
+   * @throws \Symfony\Component\HttpKernel\Exception\NotFoundHttpException
+   */
+  public function getName(Profile $profile, $panel) {
+    $templates = $this->getNames($profile);
+
+    if (!isset($templates[$panel])) {
+      throw new NotFoundHttpException(sprintf('Panel "%s" is not registered in profiler or is not present in viewed profile.', $panel));
+    }
+
+    return $templates[$panel];
+  }
+
+  /**
+   * Gets the templates for a given profile.
+   *
+   * @param \Symfony\Component\HttpKernel\Profiler\Profile $profile
+   *
+   * @return array
+   */
+  public function getTemplates(Profile $profile) {
+    $templates = $this->getNames($profile);
+    foreach ($templates as $name => $template) {
+      $templates[$name] = $this->twig->loadTemplate($template);
+    }
+
+    return $templates;
+  }
+
+  /**
+   * Gets template names of templates that are present in the viewed profile.
+   *
+   * @param \Symfony\Component\HttpKernel\Profiler\Profile $profile
+   *
+   * @return array
+   *
+   * @throws \UnexpectedValueException
+   */
+  protected function getNames(Profile $profile) {
+    $templates = [];
+
+    foreach ($this->templates as $arguments) {
+      if (NULL === $arguments) {
+        continue;
+      }
+
+      list($name, $template) = $arguments;
+
+      if (!$this->profiler->has($name) || !$profile->hasCollector($name)) {
+        continue;
+      }
+
+      if ('.html.twig' === substr($template, -10)) {
+        $template = substr($template, 0, -10);
+      }
+
+      if (!$this->twigLoader->exists($template . '.html.twig')) {
+        throw new \UnexpectedValueException(sprintf('The profiler template "%s.html.twig" for data collector "%s" does not exist.', $template, $name));
+      }
+
+      $templates[$name] = $template . '.html.twig';
+    }
+
+    return $templates;
+  }
+}
diff --git a/modules/devel/webprofiler/src/RequestMatcher/WebprofilerRequestMatcher.php b/modules/devel/webprofiler/src/RequestMatcher/WebprofilerRequestMatcher.php
new file mode 100644
index 0000000..4e1b41d
--- /dev/null
+++ b/modules/devel/webprofiler/src/RequestMatcher/WebprofilerRequestMatcher.php
@@ -0,0 +1,47 @@
+<?php
+
+namespace Drupal\webprofiler\RequestMatcher;
+
+use Drupal\Core\Config\ConfigFactoryInterface;
+use Drupal\Core\Path\PathMatcherInterface;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpFoundation\RequestMatcherInterface;
+
+/**
+ * Class WebprofilerRequestMatcher
+ */
+class WebprofilerRequestMatcher implements RequestMatcherInterface {
+
+  /**
+   * @var \Drupal\Core\Config\ConfigFactoryInterface
+   */
+  private $configFactory;
+
+  /**
+   * @var \Drupal\Core\Path\PathMatcherInterface
+   */
+  private $pathMatcher;
+
+  /**
+   * @param ConfigFactoryInterface $configFactory
+   * @param \Drupal\Core\Path\PathMatcherInterface $pathMatcher
+   */
+  public function __construct(ConfigFactoryInterface $configFactory, PathMatcherInterface $pathMatcher) {
+    $this->configFactory = $configFactory;
+    $this->pathMatcher = $pathMatcher;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function matches(Request $request) {
+    $path = $request->getPathInfo();
+
+    $patterns = $this->configFactory->get('webprofiler.config')->get('exclude');
+
+    // never add Webprofiler to phpinfo page.
+    $patterns .= "\r\n/admin/reports/status/php";
+
+    return !$this->pathMatcher->matchPath($path, $patterns);
+  }
+}
diff --git a/modules/devel/webprofiler/src/Routing/TokenConverter.php b/modules/devel/webprofiler/src/Routing/TokenConverter.php
new file mode 100644
index 0000000..ea168cd
--- /dev/null
+++ b/modules/devel/webprofiler/src/Routing/TokenConverter.php
@@ -0,0 +1,54 @@
+<?php
+
+namespace Drupal\webprofiler\Routing;
+
+use Drupal\Core\ParamConverter\ParamConverterInterface;
+use Drupal\webprofiler\Profiler\Profiler;
+use Symfony\Component\Routing\Route;
+
+/**
+ * Class TokenConverter
+ */
+class TokenConverter implements ParamConverterInterface {
+
+  /**
+   * @var \Drupal\webprofiler\Profiler\Profiler
+   */
+  private $profiler;
+
+  /**
+   * Constructs a new WebprofilerController.
+   *
+   * @param \Drupal\webprofiler\Profiler\Profiler $profiler
+   */
+  public function __construct(Profiler $profiler) {
+    $this->profiler = $profiler;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function convert($value, $definition, $name, array $defaults) {
+    if (NULL === $this->profiler) {
+      return NULL;
+    }
+
+    $profile = $this->profiler->loadProfile($value);
+
+    if (NULL === $profile) {
+      return NULL;
+    }
+
+    return $profile;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function applies($definition, $name, Route $route) {
+    if (!empty($definition['type']) && $definition['type'] === 'webprofiler:token') {
+      return TRUE;
+    }
+    return FALSE;
+  }
+}
diff --git a/modules/devel/webprofiler/src/StackMiddleware/WebprofilerMiddleware.php b/modules/devel/webprofiler/src/StackMiddleware/WebprofilerMiddleware.php
new file mode 100644
index 0000000..0fe24b5
--- /dev/null
+++ b/modules/devel/webprofiler/src/StackMiddleware/WebprofilerMiddleware.php
@@ -0,0 +1,45 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\StackMiddleware\WebprofilerMiddleware.
+ */
+
+namespace Drupal\webprofiler\StackMiddleware;
+
+use Drupal\Core\Database\Database;
+use Symfony\Component\HttpFoundation\Request;
+use Symfony\Component\HttpKernel\HttpKernelInterface;
+
+/**
+ * Class WebprofilerMiddleware
+ */
+class WebprofilerMiddleware implements HttpKernelInterface {
+
+  /**
+   * The decorated kernel.
+   *
+   * @var \Symfony\Component\HttpKernel\HttpKernelInterface
+   */
+  protected $httpKernel;
+
+  /**
+   * Constructs a WebprofilerMiddleware object.
+   *
+   * @param \Symfony\Component\HttpKernel\HttpKernelInterface $http_kernel
+   *   The decorated kernel.
+   */
+  public function __construct(HttpKernelInterface $http_kernel) {
+    $this->httpKernel = $http_kernel;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function handle(Request $request, $type = self::MASTER_REQUEST, $catch = TRUE) {
+    Database::startLog('webprofiler');
+
+    return $this->httpKernel->handle($request, $type, $catch);
+  }
+
+}
diff --git a/modules/devel/webprofiler/src/State/StateWrapper.php b/modules/devel/webprofiler/src/State/StateWrapper.php
new file mode 100644
index 0000000..adc03e9
--- /dev/null
+++ b/modules/devel/webprofiler/src/State/StateWrapper.php
@@ -0,0 +1,91 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\State\StateWrapper.
+ */
+
+namespace Drupal\webprofiler\State;
+
+use Drupal\Core\State\StateInterface;
+use Drupal\webprofiler\DataCollector\StateDataCollector;
+
+/**
+ * Class StateWrapper
+ */
+class StateWrapper implements StateInterface {
+
+  /**
+   * @var \Drupal\Core\State\StateInterface
+   */
+  private $state;
+
+  /**
+   * @var \Drupal\webprofiler\DataCollector\StateDataCollector
+   */
+  private $dataCollector;
+
+  /**
+   * @param \Drupal\Core\State\StateInterface $state
+   * @param \Drupal\webprofiler\DataCollector\StateDataCollector $dataCollector
+   */
+  public function __construct(StateInterface $state, StateDataCollector $dataCollector) {
+    $this->state = $state;
+    $this->dataCollector = $dataCollector;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function get($key, $default = NULL) {
+    $this->dataCollector->addState($key);
+
+    return $this->state->get($key, $default);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getMultiple(array $keys) {
+    foreach ($keys as $key) {
+      $this->dataCollector->addState($key);
+    }
+
+    return $this->state->getMultiple($keys);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function set($key, $value) {
+    $this->state->set($key, $value);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function setMultiple(array $data) {
+    $this->state->setMultiple($data);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function delete($key) {
+    $this->state->delete($key);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function deleteMultiple(array $keys) {
+    $this->state->deleteMultiple($keys);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function resetCache() {
+    $this->state->resetCache();
+  }
+}
diff --git a/modules/devel/webprofiler/src/Stopwatch.php b/modules/devel/webprofiler/src/Stopwatch.php
new file mode 100644
index 0000000..520fa3a
--- /dev/null
+++ b/modules/devel/webprofiler/src/Stopwatch.php
@@ -0,0 +1,548 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Stopwatch.
+ */
+
+namespace Drupal\webprofiler {
+
+  /**
+   * Class Stopwatch
+   */
+  class Stopwatch extends \Symfony\Component\Stopwatch\Stopwatch {
+
+  }
+
+}
+
+namespace Symfony\Component\Stopwatch {
+
+  /**
+   * Class Stopwatch
+   */
+  class Stopwatch {
+    /**
+     * @var Section[]
+     */
+    private $sections;
+
+    /**
+     * @var array
+     */
+    private $activeSections;
+
+    /**
+     *
+     */
+    public function __construct() {
+      $this->sections = $this->activeSections = ['__root__' => new Section('__root__')];
+    }
+
+    /**
+     * Creates a new section or re-opens an existing section.
+     *
+     * @param string|null $id The id of the session to re-open, null to create a new one
+     *
+     * @throws \LogicException When the section to re-open is not reachable
+     */
+    public function openSection($id = NULL) {
+      $current = end($this->activeSections);
+
+      if (NULL !== $id && NULL === $current->get($id)) {
+        throw new \LogicException(sprintf('The section "%s" has been started at an other level and can not be opened.', $id));
+      }
+
+      $this->start('__section__.child', 'section');
+      $this->activeSections[] = $current->open($id);
+      $this->start('__section__');
+    }
+
+    /**
+     * Stops the last started section.
+     *
+     * The id parameter is used to retrieve the events from this section.
+     *
+     * @see getSectionEvents
+     *
+     * @param string $id The identifier of the section
+     *
+     * @throws \LogicException When there's no started section to be stopped
+     */
+    public function stopSection($id) {
+      $this->stop('__section__');
+
+      if (1 == count($this->activeSections)) {
+        throw new \LogicException('There is no started section to stop.');
+      }
+
+      $this->sections[$id] = array_pop($this->activeSections)->setId($id);
+      $this->stop('__section__.child');
+    }
+
+    /**
+     * Starts an event.
+     *
+     * @param string $name The event name
+     * @param string $category The event category
+     *
+     * @return StopwatchEvent A StopwatchEvent instance
+     */
+    public function start($name, $category = NULL) {
+      return end($this->activeSections)->startEvent($name, $category);
+    }
+
+    /**
+     * Checks if the event was started
+     *
+     * @param string $name The event name
+     *
+     * @return bool
+     */
+    public function isStarted($name) {
+      return end($this->activeSections)->isEventStarted($name);
+    }
+
+    /**
+     * Stops an event.
+     *
+     * @param string $name The event name
+     *
+     * @return StopwatchEvent A StopwatchEvent instance
+     */
+    public function stop($name) {
+      return end($this->activeSections)->stopEvent($name);
+    }
+
+    /**
+     * Stops then restarts an event.
+     *
+     * @param string $name The event name
+     *
+     * @return StopwatchEvent A StopwatchEvent instance
+     */
+    public function lap($name) {
+      return end($this->activeSections)->stopEvent($name)->start();
+    }
+
+    /**
+     * Gets all events for a given section.
+     *
+     * @param string $id A section identifier
+     *
+     * @return StopwatchEvent[] An array of StopwatchEvent instances
+     */
+    public function getSectionEvents($id) {
+      return isset($this->sections[$id]) ? $this->sections[$id]->getEvents() : [];
+    }
+  }
+
+
+  /**
+   * @internal This class is for internal usage only
+   *
+   * @author Fabien Potencier <fabien@symfony.com>
+   */
+  class Section {
+    /**
+     * @var StopwatchEvent[]
+     */
+    private $events = [];
+
+    /**
+     * @var null|float
+     */
+    private $origin;
+
+    /**
+     * @var string
+     */
+    private $id;
+
+    /**
+     * @var Section[]
+     */
+    private $children = [];
+
+    /**
+     * Constructor.
+     *
+     * @param float|null $origin Set the origin of the events in this section, use null to set their origin to their start time
+     */
+    public function __construct($origin = NULL) {
+      $this->origin = is_numeric($origin) ? $origin : NULL;
+    }
+
+    /**
+     * Returns the child section.
+     *
+     * @param string $id The child section identifier
+     *
+     * @return Section|null The child section or null when none found
+     */
+    public function get($id) {
+      foreach ($this->children as $child) {
+        if ($id === $child->getId()) {
+          return $child;
+        }
+      }
+
+      return NULL;
+    }
+
+    /**
+     * Creates or re-opens a child section.
+     *
+     * @param string|null $id null to create a new section, the identifier to re-open an existing one.
+     *
+     * @return Section A child section
+     */
+    public function open($id) {
+      if (NULL === $session = $this->get($id)) {
+        $session = $this->children[] = new self(microtime(TRUE) * 1000);
+      }
+
+      return $session;
+    }
+
+    /**
+     * @return string The identifier of the section
+     */
+    public function getId() {
+      return $this->id;
+    }
+
+    /**
+     * Sets the session identifier.
+     *
+     * @param string $id The session identifier
+     *
+     * @return Section The current section
+     */
+    public function setId($id) {
+      $this->id = $id;
+
+      return $this;
+    }
+
+    /**
+     * Starts an event.
+     *
+     * @param string $name The event name
+     * @param string $category The event category
+     *
+     * @return StopwatchEvent The event
+     */
+    public function startEvent($name, $category) {
+      if (!isset($this->events[$name])) {
+        $this->events[$name] = new StopwatchEvent($this->origin ?: microtime(TRUE) * 1000, $category);
+      }
+
+      return $this->events[$name]->start();
+    }
+
+    /**
+     * Checks if the event was started
+     *
+     * @param string $name The event name
+     *
+     * @return bool
+     */
+    public function isEventStarted($name) {
+      return isset($this->events[$name]) && $this->events[$name]->isStarted();
+    }
+
+    /**
+     * Stops an event.
+     *
+     * @param string $name The event name
+     *
+     * @return StopwatchEvent The event
+     *
+     * @throws \LogicException When the event has not been started
+     */
+    public function stopEvent($name) {
+      if (!isset($this->events[$name])) {
+        throw new \LogicException(sprintf('Event "%s" is not started.', $name));
+      }
+
+      return $this->events[$name]->stop();
+    }
+
+    /**
+     * Stops then restarts an event.
+     *
+     * @param string $name The event name
+     *
+     * @return StopwatchEvent The event
+     *
+     * @throws \LogicException When the event has not been started
+     */
+    public function lap($name) {
+      return $this->stopEvent($name)->start();
+    }
+
+    /**
+     * Returns the events from this section.
+     *
+     * @return StopwatchEvent[] An array of StopwatchEvent instances
+     */
+    public function getEvents() {
+      return $this->events;
+    }
+  }
+
+  /**
+   * Class StopwatchEvent
+   */
+  class StopwatchEvent {
+    /**
+     * @var StopwatchPeriod[]
+     */
+    private $periods = [];
+
+    /**
+     * @var float
+     */
+    private $origin;
+
+    /**
+     * @var string
+     */
+    private $category;
+
+    /**
+     * @var float[]
+     */
+    private $started = [];
+
+    /**
+     * Constructor.
+     *
+     * @param float $origin The origin time in milliseconds
+     * @param string|null $category The event category or null to use the default
+     *
+     * @throws \InvalidArgumentException When the raw time is not valid
+     */
+    public function __construct($origin, $category = NULL) {
+      $this->origin = $this->formatTime($origin);
+      $this->category = is_string($category) ? $category : 'default';
+    }
+
+    /**
+     * Gets the category.
+     *
+     * @return string The category
+     */
+    public function getCategory() {
+      return $this->category;
+    }
+
+    /**
+     * Gets the origin.
+     *
+     * @return float The origin in milliseconds
+     */
+    public function getOrigin() {
+      return $this->origin;
+    }
+
+    /**
+     * Starts a new event period.
+     *
+     * @return StopwatchEvent The event
+     */
+    public function start() {
+      $this->started[] = $this->getNow();
+
+      return $this;
+    }
+
+    /**
+     * Stops the last started event period.
+     *
+     * @throws \LogicException When start wasn't called before stopping
+     *
+     * @return StopwatchEvent The event
+     *
+     * @throws \LogicException When stop() is called without a matching call to start()
+     */
+    public function stop() {
+      if (!count($this->started)) {
+        throw new \LogicException('stop() called but start() has not been called before.');
+      }
+
+      $this->periods[] = new StopwatchPeriod(array_pop($this->started), $this->getNow());
+
+      return $this;
+    }
+
+    /**
+     * Checks if the event was started
+     *
+     * @return bool
+     */
+    public function isStarted() {
+      return !empty($this->started);
+    }
+
+    /**
+     * Stops the current period and then starts a new one.
+     *
+     * @return StopwatchEvent The event
+     */
+    public function lap() {
+      return $this->stop()->start();
+    }
+
+    /**
+     * Stops all non already stopped periods.
+     */
+    public function ensureStopped() {
+      while (count($this->started)) {
+        $this->stop();
+      }
+    }
+
+    /**
+     * Gets all event periods.
+     *
+     * @return StopwatchPeriod[] An array of StopwatchPeriod instances
+     */
+    public function getPeriods() {
+      return $this->periods;
+    }
+
+    /**
+     * Gets the relative time of the start of the first period.
+     *
+     * @return integer The time (in milliseconds)
+     */
+    public function getStartTime() {
+      return isset($this->periods[0]) ? $this->periods[0]->getStartTime() : 0;
+    }
+
+    /**
+     * Gets the relative time of the end of the last period.
+     *
+     * @return integer The time (in milliseconds)
+     */
+    public function getEndTime() {
+      return ($count = count($this->periods)) ? $this->periods[$count - 1]->getEndTime() : 0;
+    }
+
+    /**
+     * Gets the duration of the events (including all periods).
+     *
+     * @return integer The duration (in milliseconds)
+     */
+    public function getDuration() {
+      $total = 0;
+      foreach ($this->periods as $period) {
+        $total += $period->getDuration();
+      }
+
+      return $total;
+    }
+
+    /**
+     * Gets the max memory usage of all periods.
+     *
+     * @return integer The memory usage (in bytes)
+     */
+    public function getMemory() {
+      $memory = 0;
+      foreach ($this->periods as $period) {
+        if ($period->getMemory() > $memory) {
+          $memory = $period->getMemory();
+        }
+      }
+
+      return $memory;
+    }
+
+    /**
+     * Return the current time relative to origin.
+     *
+     * @return float Time in ms
+     */
+    protected function getNow() {
+      return $this->formatTime(microtime(TRUE) * 1000 - $this->origin);
+    }
+
+    /**
+     * Formats a time.
+     *
+     * @param integer|float $time A raw time
+     *
+     * @return float The formatted time
+     *
+     * @throws \InvalidArgumentException When the raw time is not valid
+     */
+    private function formatTime($time) {
+      if (!is_numeric($time)) {
+        throw new \InvalidArgumentException('The time must be a numerical value');
+      }
+
+      return round($time, 1);
+    }
+  }
+
+  /**
+   * Class StopwatchPeriod
+   */
+  class StopwatchPeriod {
+    private $start;
+    private $end;
+    private $memory;
+
+    /**
+     * Constructor.
+     *
+     * @param integer $start The relative time of the start of the period (in milliseconds)
+     * @param integer $end The relative time of the end of the period (in milliseconds)
+     */
+    public function __construct($start, $end) {
+      $this->start = (integer) $start;
+      $this->end = (integer) $end;
+      $this->memory = memory_get_usage(TRUE);
+    }
+
+    /**
+     * Gets the relative time of the start of the period.
+     *
+     * @return integer The time (in milliseconds)
+     */
+    public function getStartTime() {
+      return $this->start;
+    }
+
+    /**
+     * Gets the relative time of the end of the period.
+     *
+     * @return integer The time (in milliseconds)
+     */
+    public function getEndTime() {
+      return $this->end;
+    }
+
+    /**
+     * Gets the time spent in this period.
+     *
+     * @return integer The period duration (in milliseconds)
+     */
+    public function getDuration() {
+      return $this->end - $this->start;
+    }
+
+    /**
+     * Gets the memory usage.
+     *
+     * @return integer The memory usage (in bytes)
+     */
+    public function getMemory() {
+      return $this->memory;
+    }
+  }
+
+}
diff --git a/modules/devel/webprofiler/src/StringTranslation/TranslationManagerWrapper.php b/modules/devel/webprofiler/src/StringTranslation/TranslationManagerWrapper.php
new file mode 100644
index 0000000..7967646
--- /dev/null
+++ b/modules/devel/webprofiler/src/StringTranslation/TranslationManagerWrapper.php
@@ -0,0 +1,69 @@
+<?php
+
+namespace Drupal\webprofiler\StringTranslation;
+
+use Drupal\Core\StringTranslation\TranslationManager;
+
+/**
+ * Class TranslationManagerWrapper
+ */
+class TranslationManagerWrapper extends TranslationManager {
+
+  /**
+   * @var \Drupal\webprofiler\StringTranslation\TranslationManagerWrapper
+   */
+  private $translationManager;
+
+  /**
+   * @var array
+   */
+  private $translated;
+
+  /**
+   * @var array
+   */
+  private $untranslated;
+
+  /**
+   * @param \Drupal\webprofiler\StringTranslation\TranslationManagerWrapper $translationManager
+   */
+  public function setDataCollector(TranslationManagerWrapper $translationManager) {
+    $this->translationManager = $translationManager;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function doTranslate($string, array $options = array()) {
+    // Merge in defaults.
+    if (empty($options['langcode'])) {
+      $options['langcode'] = $this->defaultLangcode;
+    }
+    if (empty($options['context'])) {
+      $options['context'] = '';
+    }
+    $translation = $this->getStringTranslation($options['langcode'], $string, $options['context']);
+
+    if($translation) {
+      $this->translated[$string] = $translation;
+    } else {
+      $this->untranslated[$string] = $string;
+    }
+
+    return $translation === FALSE ? $string : $translation;
+  }
+
+  /**
+   * @return array
+   */
+  public function getTranslated() {
+    return $this->translated;
+  }
+
+  /**
+   * @return array
+   */
+  public function getUntranslated() {
+    return $this->untranslated;
+  }
+}
diff --git a/modules/devel/webprofiler/src/Theme/ThemeNegotiatorWrapper.php b/modules/devel/webprofiler/src/Theme/ThemeNegotiatorWrapper.php
new file mode 100644
index 0000000..512df39
--- /dev/null
+++ b/modules/devel/webprofiler/src/Theme/ThemeNegotiatorWrapper.php
@@ -0,0 +1,44 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\Theme\ThemeNegotiatorWrapper.
+ */
+
+namespace Drupal\webprofiler\Theme;
+
+use Drupal\Core\Routing\RouteMatchInterface;
+use Drupal\Core\Theme\ThemeNegotiator;
+
+/**
+ * Class ThemeNegotiatorWrapper
+ */
+class ThemeNegotiatorWrapper extends ThemeNegotiator {
+
+  /**
+   * @var \Drupal\Core\Theme\ThemeNegotiatorInterface
+   */
+  private $negotiator;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function determineActiveTheme(RouteMatchInterface $route_match) {
+    foreach ($this->getSortedNegotiators() as $negotiator) {
+      if ($negotiator->applies($route_match)) {
+        $theme = $negotiator->determineActiveTheme($route_match);
+        if ($theme !== NULL && $this->themeAccess->checkAccess($theme)) {
+          $this->negotiator = $negotiator;
+          return $theme;
+        }
+      }
+    }
+  }
+
+  /**
+   * @return \Drupal\Core\Theme\ThemeNegotiatorInterface
+   */
+  public function getNegotiator() {
+    return $this->negotiator;
+  }
+}
diff --git a/modules/devel/webprofiler/src/TraceableEventDispatcher.php b/modules/devel/webprofiler/src/TraceableEventDispatcher.php
new file mode 100644
index 0000000..54d01be
--- /dev/null
+++ b/modules/devel/webprofiler/src/TraceableEventDispatcher.php
@@ -0,0 +1,55 @@
+<?php
+
+namespace Drupal\webprofiler;
+
+use Symfony\Component\EventDispatcher\Debug\TraceableEventDispatcher as BaseTraceableEventDispatcher;
+use Symfony\Component\HttpKernel\KernelEvents;
+use Symfony\Component\EventDispatcher\Event;
+
+/**
+ * Class TraceableEventDispatcher
+ */
+class TraceableEventDispatcher extends BaseTraceableEventDispatcher {
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function preDispatch($eventName, Event $event) {
+    switch ($eventName) {
+      case KernelEvents::VIEW:
+      case KernelEvents::RESPONSE:
+        // stop only if a controller has been executed
+        if ($this->stopwatch->isStarted('controller')) {
+          $this->stopwatch->stop('controller');
+        }
+        break;
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function postDispatch($eventName, Event $event) {
+    switch ($eventName) {
+      case KernelEvents::CONTROLLER:
+        $this->stopwatch->start('controller', 'section');
+        break;
+      case KernelEvents::RESPONSE:
+        $token = $event->getResponse()->headers->get('X-Debug-Token');
+        try {
+          $this->stopwatch->stopSection($token);
+        } catch (\LogicException $e) {
+        }
+        break;
+      case KernelEvents::TERMINATE:
+        // In the special case described in the `preDispatch` method above, the `$token` section
+        // does not exist, then closing it throws an exception which must be caught.
+        $token = $event->getResponse()->headers->get('X-Debug-Token');
+        try {
+          $this->stopwatch->stopSection($token);
+        } catch (\LogicException $e) {
+        }
+        break;
+    }
+  }
+}
diff --git a/modules/devel/webprofiler/src/Twig/Dumper/HtmlDumper.php b/modules/devel/webprofiler/src/Twig/Dumper/HtmlDumper.php
new file mode 100644
index 0000000..7b3ac02
--- /dev/null
+++ b/modules/devel/webprofiler/src/Twig/Dumper/HtmlDumper.php
@@ -0,0 +1,35 @@
+<?php
+
+namespace Drupal\webprofiler\Twig\Dumper;
+
+/**
+ * Class HtmlDumper
+ */
+class HtmlDumper extends \Twig_Profiler_Dumper_Text {
+
+  private static $colors = array(
+    'block' => '#dfd',
+    'macro' => '#ddf',
+    'template' => '#ffd',
+    'big' => '#d44',
+  );
+
+  /**
+   * {@inheritdoc}
+   */
+  public function dump(\Twig_Profiler_Profile $profile) {
+    return '<pre class="h--word-intact"><code class="code--json">' . parent::dump($profile) . '</code></pre>';
+  }
+
+  protected function formatTemplate(\Twig_Profiler_Profile $profile, $prefix) {
+    return sprintf('%s <span style="background-color: %s">%s</span>', $prefix, self::$colors['template'], $profile->getTemplate());
+  }
+
+  protected function formatNonTemplate(\Twig_Profiler_Profile $profile, $prefix) {
+    return sprintf('%s %s::%s(<span style="background-color: %s">%s</span>)', $prefix, $profile->getTemplate(), $profile->getType(), isset(self::$colors[$profile->getType()]) ? self::$colors[$profile->getType()] : 'auto', $profile->getName());
+  }
+
+  protected function formatTime(\Twig_Profiler_Profile $profile, $percent) {
+    return sprintf('<span style="color: %s">%.2fms/%.0f%%</span>', $percent > 20 ? self::$colors['big'] : 'auto', $profile->getDuration() * 1000, $percent);
+  }
+}
diff --git a/modules/devel/webprofiler/src/Twig/Extension/ProfilerExtension.php b/modules/devel/webprofiler/src/Twig/Extension/ProfilerExtension.php
new file mode 100644
index 0000000..ed598e4
--- /dev/null
+++ b/modules/devel/webprofiler/src/Twig/Extension/ProfilerExtension.php
@@ -0,0 +1,93 @@
+<?php
+
+namespace Drupal\webprofiler\Twig\Extension;
+
+use Drupal\webprofiler\Helper\ClassShortenerInterface;
+use Drupal\webprofiler\Helper\IdeLinkGeneratorInterface;
+use Symfony\Component\Stopwatch\Stopwatch;
+
+/**
+ * Class ProfilerExtension
+ */
+class ProfilerExtension extends \Twig_Extension_Profiler {
+
+  /**
+   * @var \Symfony\Component\Stopwatch\Stopwatch
+   */
+  private $stopwatch;
+  private $events;
+  private $ideLink;
+  private $classShortener;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function __construct(\Twig_Profiler_Profile $profile, Stopwatch $stopwatch = NULL, IdeLinkGeneratorInterface $ideLink, ClassShortenerInterface $classShortener) {
+    parent::__construct($profile);
+
+    $this->ideLink = $ideLink;
+    $this->classShortener = $classShortener;
+
+    $this->stopwatch = $stopwatch;
+    $this->events = new \SplObjectStorage();
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function enter(\Twig_Profiler_Profile $profile) {
+    if ($this->stopwatch && $profile->isTemplate()) {
+      $this->events[$profile] = $this->stopwatch->start($profile->getName(), 'template');
+    }
+
+    parent::enter($profile);
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function leave(\Twig_Profiler_Profile $profile) {
+    parent::leave($profile);
+
+    if ($this->stopwatch && $profile->isTemplate()) {
+      $this->events[$profile]->stop();
+      unset($this->events[$profile]);
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getFunctions() {
+    return [
+      new \Twig_SimpleFunction('abbr', [$this, 'getAbbr']),
+      new \Twig_SimpleFunction('idelink', [$this, 'getIdeLink']),
+    ];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getName() {
+    return 'native_profiler';
+  }
+
+  /**
+   * @param $class
+   *
+   * @return string
+   */
+  public function getAbbr($class) {
+    return $this->classShortener->shortenClass($class);
+  }
+
+  /**
+   * @param $file
+   * @param $line
+   *
+   * @return string
+   */
+  public function getIdeLink($file, $line) {
+    return $this->ideLink->generateLink($file, $line);
+  }
+}
diff --git a/modules/devel/webprofiler/src/Views/TraceableViewExecutable.php b/modules/devel/webprofiler/src/Views/TraceableViewExecutable.php
new file mode 100644
index 0000000..3f41dc5
--- /dev/null
+++ b/modules/devel/webprofiler/src/Views/TraceableViewExecutable.php
@@ -0,0 +1,156 @@
+<?php
+
+namespace Drupal\webprofiler\Views;
+
+use Drupal\views\ViewExecutable;
+use Symfony\Component\HttpFoundation\Response;
+
+/**
+ * Class TraceableViewExecutable
+ */
+class TraceableViewExecutable extends ViewExecutable {
+
+  /**
+   * @var float
+   */
+  protected $render_time;
+
+  /**
+   * Gets the build time.
+   *
+   * @return float
+   */
+  public function getBuildTime() {
+    return $this->build_time;
+  }
+
+  /**
+   * Gets the execute time.
+   *
+   * @return float
+   */
+  public function getExecuteTime() {
+    return $this->execute_time;
+  }
+
+  /**
+   * Gets the render time.
+   *
+   * @return float
+   */
+  public function getRenderTime() {
+    return $this->render_time;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function render($display_id = NULL) {
+    $start = microtime(TRUE);
+
+    $this->execute($display_id);
+
+    // Check to see if the build failed.
+    if (!empty($this->build_info['fail'])) {
+      return;
+    }
+    if (!empty($this->build_info['denied'])) {
+      return;
+    }
+
+    $exposed_form = $this->display_handler->getPlugin('exposed_form');
+    $exposed_form->preRender($this->result);
+
+    $module_handler = \Drupal::moduleHandler();
+
+    // @TODO In the longrun, it would be great to execute a view without
+    //   the theme system at all. See https://www.drupal.org/node/2322623.
+    $active_theme = \Drupal::theme()->getActiveTheme();
+    $themes = array_keys($active_theme->getBaseThemes());
+    $themes[] = $active_theme->getName();
+
+    // Check for already-cached output.
+    if (!empty($this->live_preview)) {
+      $cache = FALSE;
+    }
+    else {
+      /** @var \Drupal\views\Plugin\views\cache\CachePluginBase $cache */
+      $cache = $this->display_handler->getPlugin('cache');
+    }
+
+    // Run preRender for the pager as it might change the result.
+    if (!empty($this->pager)) {
+      $this->pager->preRender($this->result);
+    }
+
+    // Initialize the style plugin.
+    $this->initStyle();
+
+    if (!isset($this->response)) {
+      // Set the response so other parts can alter it.
+      $this->response = new Response('', 200);
+    }
+
+    // Give field handlers the opportunity to perform additional queries
+    // using the entire resultset prior to rendering.
+    if ($this->style_plugin->usesFields()) {
+      foreach ($this->field as $id => $handler) {
+        if (!empty($this->field[$id])) {
+          $this->field[$id]->preRender($this->result);
+        }
+      }
+    }
+
+    $this->style_plugin->preRender($this->result);
+
+    // Let each area handler have access to the result set.
+    $areas = ['header', 'footer'];
+    // Only call preRender() on the empty handlers if the result is empty.
+    if (empty($this->result)) {
+      $areas[] = 'empty';
+    }
+    foreach ($areas as $area) {
+      foreach ($this->{$area} as $handler) {
+        $handler->preRender($this->result);
+      }
+    }
+
+    // Let modules modify the view just prior to rendering it.
+    $module_handler->invokeAll('views_pre_render', [$this]);
+
+    // Let the themes play too, because pre render is a very themey thing.
+    foreach ($themes as $theme_name) {
+      $function = $theme_name . '_views_pre_render';
+      if (function_exists($function)) {
+        $function($this);
+      }
+    }
+
+    $this->display_handler->output = $this->display_handler->render();
+
+    $exposed_form->postRender($this->display_handler->output);
+
+    if ($cache) {
+      $cache->postRender($this->display_handler->output);
+    }
+
+    // Let modules modify the view output after it is rendered.
+    $module_handler->invokeAll('views_post_render', [
+      $this,
+      &$this->display_handler->output,
+      $cache
+    ]);
+
+    // Let the themes play too, because post render is a very themey thing.
+    foreach ($themes as $theme_name) {
+      $function = $theme_name . '_views_post_render';
+      if (function_exists($function)) {
+        $function($this);
+      }
+    }
+
+    $this->render_time = microtime(TRUE) - $start;
+
+    return $this->display_handler->output;
+  }
+}
diff --git a/modules/devel/webprofiler/src/Views/ViewExecutableFactoryWrapper.php b/modules/devel/webprofiler/src/Views/ViewExecutableFactoryWrapper.php
new file mode 100644
index 0000000..6aa363f
--- /dev/null
+++ b/modules/devel/webprofiler/src/Views/ViewExecutableFactoryWrapper.php
@@ -0,0 +1,47 @@
+<?php
+
+namespace Drupal\webprofiler\Views;
+
+use Drupal\Core\Routing\RouteProviderInterface;
+use Drupal\Core\Session\AccountInterface;
+use Drupal\views\ViewEntityInterface;
+use Drupal\views\ViewExecutable;
+use Drupal\views\ViewExecutableFactory;
+use Drupal\views\ViewsData;
+use Symfony\Component\HttpFoundation\RequestStack;
+
+/**
+ * Class ViewExecutableFactoryWrapper
+ */
+class ViewExecutableFactoryWrapper extends ViewExecutableFactory {
+
+  /** @var ViewExecutable $view_executable */
+  private $views;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function __construct(AccountInterface $user, RequestStack $request_stack, ViewsData $views_data, RouteProviderInterface $route_provider) {
+    parent::__construct($user, $request_stack, $views_data, $route_provider);
+
+    $this->views = [];
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function get(ViewEntityInterface $view) {
+    $view_executable = new TraceableViewExecutable($view, $this->user, $this->viewsData, $this->routeProvider);
+    $view_executable->setRequest($this->requestStack->getCurrentRequest());
+    $this->views[] = $view_executable;
+
+    return $view_executable;
+  }
+
+  /**
+   * @return TraceableViewExecutable
+   */
+  public function getViews() {
+    return $this->views;
+  }
+}
diff --git a/modules/devel/webprofiler/src/WebprofilerServiceProvider.php b/modules/devel/webprofiler/src/WebprofilerServiceProvider.php
new file mode 100644
index 0000000..101df2c
--- /dev/null
+++ b/modules/devel/webprofiler/src/WebprofilerServiceProvider.php
@@ -0,0 +1,118 @@
+<?php
+
+/**
+ * @file
+ * Contains \Drupal\webprofiler\WebprofilerServiceProvider.
+ */
+
+namespace Drupal\webprofiler;
+
+use Drupal\Core\DependencyInjection\ContainerBuilder;
+use Drupal\Core\DependencyInjection\ServiceProviderBase;
+use Drupal\webprofiler\Compiler\EventPass;
+use Drupal\webprofiler\Compiler\ProfilerPass;
+use Drupal\webprofiler\Compiler\ServicePass;
+use Drupal\webprofiler\Compiler\StoragePass;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+use Symfony\Component\DependencyInjection\Compiler\PassConfig;
+use Symfony\Component\DependencyInjection\Reference;
+
+/**
+ * Defines a service profiler for the webprofiler module.
+ */
+class WebprofilerServiceProvider extends ServiceProviderBase {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function register(ContainerBuilder $container) {
+    // Add a compiler pass to discover all data collector services.
+    $container->addCompilerPass(new ProfilerPass());
+
+    // Add a compiler pass to discover all available storage backend.
+    $container->addCompilerPass(new StoragePass());
+
+    $container->addCompilerPass(new ServicePass(), PassConfig::TYPE_AFTER_REMOVING);
+    $container->addCompilerPass(new EventPass(), PassConfig::TYPE_AFTER_REMOVING);
+
+    $modules = $container->getParameter('container.modules');
+
+    // Add ViewsDataCollector only if Views module is enabled.
+    if (isset($modules['views'])) {
+      $container->register('webprofiler.views', 'Drupal\webprofiler\DataCollector\ViewsDataCollector')
+        ->addArgument(new Reference(('views.executable')))
+        ->addArgument(new Reference(('entity.manager')))
+        ->addTag('data_collector', [
+          'template' => '@webprofiler/Collector/views.html.twig',
+          'id' => 'views',
+          'title' => 'Views',
+          'priority' => 75,
+        ]);
+    }
+
+    // Add BlockDataCollector only if Block module is enabled.
+    if (isset($modules['block'])) {
+      $container->register('webprofiler.blocks', 'Drupal\webprofiler\DataCollector\BlocksDataCollector')
+        ->addArgument(new Reference(('entity.manager')))
+        ->addTag('data_collector', [
+          'template' => '@webprofiler/Collector/blocks.html.twig',
+          'id' => 'blocks',
+          'title' => 'Blocks',
+          'priority' => 78,
+        ]);
+    }
+
+    // Add TranslationsDataCollector only if Locale module is enabled.
+    if (isset($modules['locale'])) {
+      $container->register('webprofiler.translations', 'Drupal\webprofiler\DataCollector\TranslationsDataCollector')
+        ->addArgument(new Reference(('string_translation')))
+        ->addArgument(new Reference(('url_generator')))
+        ->addTag('data_collector', [
+          'template' => '@webprofiler/Collector/translations.html.twig',
+          'id' => 'translations',
+          'title' => 'Translations',
+          'priority' => 210,
+        ]);
+    }
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function alter(ContainerBuilder $container) {
+    $modules = $container->getParameter('container.modules');
+
+    // Alter the views.executable service only if Views module is enabled.
+    if (isset($modules['views'])) {
+      $container->getDefinition('views.executable')
+        ->setClass('Drupal\webprofiler\Views\ViewExecutableFactoryWrapper');
+    }
+
+    // Replace the regular form_builder service with a traceable one.
+    $container->getDefinition('form_builder')
+      ->setClass('Drupal\webprofiler\Form\FormBuilderWrapper');
+
+    // Replace the regular plugin.manager.mail service with a traceable one.
+    $container->getDefinition('plugin.manager.mail')
+      ->setClass('Drupal\webprofiler\Mail\MailManagerWrapper')
+      ->addMethodCall('setDataCollector', [new Reference('webprofiler.mail')]);
+
+    // Replace the regular access_manager service with a traceable one.
+    $container->getDefinition('access_manager')
+      ->setClass('Drupal\webprofiler\Access\AccessManagerWrapper')
+      ->addMethodCall('setDataCollector', [new Reference('webprofiler.request')]);
+
+    // Replace the regular theme.negotiator service with a traceable one.
+    $container->getDefinition('theme.negotiator')
+      ->setClass('Drupal\webprofiler\Theme\ThemeNegotiatorWrapper');
+
+    // Replace the regular config.factory service with a traceable one.
+    $container->getDefinition('config.factory')
+      ->setClass('Drupal\webprofiler\Config\ConfigFactoryWrapper')
+      ->addMethodCall('setDataCollector', [new Reference('webprofiler.config')]);
+
+    // Replace the regular string_translation service with a traceable one.
+    $container->getDefinition('string_translation')
+      ->setClass('Drupal\webprofiler\StringTranslation\TranslationManagerWrapper');
+  }
+}
diff --git a/modules/devel/webprofiler/templates/Collector/assets.html.twig b/modules/devel/webprofiler/templates/Collector/assets.html.twig
new file mode 100644
index 0000000..d537541
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/assets.html.twig
@@ -0,0 +1,133 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'assets'}) }}" title="{{ 'Assets'|t }}">
+        <img width="20" height="28" alt="{{ 'Assets'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getcsscount + collector.getjscount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+
+    <div class="sf-toolbar-info-piece">
+        <b>CSS</b>
+        <span>{{ collector.getcsscount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>JS</b>
+        <span>{{ collector.getjscount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="assets" type="text/template">
+        <h2 class="panel__title">{{ 'Assets'|t }}</h2>
+        <div class="tabs">
+            <% if( data.js.length != 0){ %>
+            <input class="tabs__radio" type="radio" id="js" name="tabs" checked/>
+            <% } %>
+            <% if( data.js.length != 0){ %>
+            <input class="tabs__radio" type="radio" id="css" name="tabs"/>
+            <% } %>
+            <ul class="tabs__tabs list--inline">
+                <% if( data.js.length != 0){ %>
+                <li><label class="tabs__label" for="js">JS</label></li>
+                <% } %>
+                <% if( data.js.length != 0){ %>
+                <li><label class="tabs__label" for="css">CSS</label></li>
+                <% } %>
+            </ul>
+            <div class="tabs__panels">
+                <div class="tabs__panel">
+                    <% if( data.js.length != 0){ %>
+                    <% _.each( data.js, function( item, key ){ %>
+                    <% if( key === 'drupalSettings' ){ %>
+                    <div class="panel__container">
+                        <div class="panel__expand-header ">
+                            <ul class="list--inline">
+                                <li><b>asset</b> <%- key %></li>
+                            </ul>
+                            <div class="button--flat l-right js--panel-toggle">{{ 'Data'|t }}</div>
+                        </div>
+                        <div class="panel__expand-content">
+                            <% if(item.data && item.data.length != 0){ %>
+                        <pre>
+                            <code class="code--json "><%= JSON.stringify(item.data, null, 4) %></code>
+                        </pre>
+                            <% } %>
+                            <table class="table--duo">
+                                <% _.each( item, function( item, key ){ %>
+                                <tr>
+                                    <% if(key != 'data'){ %>
+                                    <th><%- key %></th>
+                                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                                    <% } %>
+                                </tr>
+                                <% }); %>
+                            </table>
+                        </div>
+                    </div>
+                    <% } else { %>
+                    <div class="panel__container">
+                        <div class="panel__expand-header ">
+                            <ul class="list--inline">
+                                <li><b>asset</b> <%= Drupal.webprofiler.helpers.classLink({"file":
+                                    data.assets.installation_path + key, "class": key, "line": 0}) %>
+                                </li>
+                                <li><b>version</b> <%- item.version %></li>
+                                <li><b>scope</b> <%- item.scope %></li>
+                            </ul>
+                            <div class="button--flat l-right js--panel-toggle">{{ 'Data'|t }}</div>
+                        </div>
+                        <div class="panel__expand-content">
+                            <table class="table--duo">
+                                <% _.each( item, function( item, key ){ %>
+                                <tr>
+                                    <th><%- key %></th>
+                                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                                </tr>
+                                <% }); %>
+                            </table>
+                        </div>
+                    </div>
+                    <% } %>
+                    <% }); %>
+                    <% } %>
+                </div>
+                <div class="tabs__panel">
+                    <% if( data.css.length != 0){ %>
+                    <% _.each( data.css, function( item, key ){ %>
+                    <div class="panel__container">
+                        <div class="panel__expand-header ">
+                            <ul class="list--inline">
+                                <li><b>asset</b> <%= Drupal.webprofiler.helpers.classLink({"file":
+                                    data.assets.installation_path + key, "class": key, "line": 0}) %>
+                                </li>
+                                <li><b>version</b> <%- item.version %></li>
+                            </ul>
+                            <div class="button--flat l-right js--panel-toggle">{{ 'Data'|t }}</div>
+                        </div>
+                        <div class="panel__expand-content">
+                            <table class="table--duo">
+                                <% _.each( item, function( item, key ){ %>
+                                <tr>
+                                    <th><%- key %></th>
+                                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                                </tr>
+                                <% }); %>
+                            </table>
+                        </div>
+                    </div>
+                    <% }); %>
+                </div>
+            </div>
+        </div>
+
+        <% } %>
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/blocks.html.twig b/modules/devel/webprofiler/templates/Collector/blocks.html.twig
new file mode 100644
index 0000000..4146f27
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/blocks.html.twig
@@ -0,0 +1,113 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'blocks'}) }}" title="{{ 'Blocks'|t }}">
+        <img width="20" height="28" alt="{{ 'Blocks'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.renderedBlocksCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Loaded'|t }}</b>
+        <span>{{ collector.loadedBlocksCount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Rendered'|t }}</b>
+        <span>{{ collector.renderedBlocksCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="blocks" type="text/template">
+        <h2 class="panel__title">{{ 'Blocks'|t }}</h2>
+
+        <form class="panel__toolbar">
+            <div class="panel__filter--text">
+                <input id="edit-sid" class="js--live-filter" placeholder="{{ 'ID'|t }}" type="text"/>
+                <label for="edit-sid" class="panel__filter-label">{{ 'ID'|t }}</label>
+            </div>
+            <div class="panel__filter--text">
+                <input id="edit-label" class="js--live-filter" placeholder="{{ 'Label'|t }}" type="text"/>
+                <label for="edit-label" class="panel__filter-label">{{ 'Label'|t }}</label>
+            </div>
+            <div class="panel__filter--text">
+                <input id="edit-region" class="js--live-filter" placeholder="{{ 'Region'|t }}" type="text"/>
+                <label for="edit-region" class="panel__filter-label">{{ 'Region'|t }}</label>
+            </div>
+            <div class="panel__filter--text">
+                <input id="edit-provider" class="js--live-filter" placeholder="{{ 'Provider'|t }}" type="text"/>
+                <label for="edit-provider" class="panel__filter-label">{{ 'Provider'|t }}</label>
+            </div>
+            <div class="panel__filter--select">
+                <select id="edit-rendered" class="js--live-filter">
+                    <option value="">{{ 'Any'|t }}</option>
+                    <option value="1">{{ 'Yes'|t }}</option>
+                    <option value="0">{{ 'No'|t }}</option>
+                </select>
+                <label for="edit-rendered" class="panel__filter-label">{{ 'Rendered'|t }}</label>
+            </div>
+        </form>
+
+        <% _.each( data.blocks.loaded, function( item ){ %>
+
+        <div class="panel__container"
+             data-wp-sid="<%- item.id %>"
+             data-wp-label="<%= item.settings.label %>"
+             data-wp-region="<%= item.region %>"
+             data-wp-provider="<%= item.settings.provider %>"
+             data-wp-rendered="<%- (data.blocks.rendered[item.id]) ? '1' : '0' %>">
+
+            <div class="panel__expand-header">
+                <ul class="list--inline">
+                    <li>
+                        <b>{{ 'ID'|t }}</b> <%- item.id %>
+                    </li>
+                    <li>
+                        <b>{{ 'Label'|t }}</b> <%= item.settings.label %>
+                    </li>
+                    <li>
+                        <b>{{ 'Region'|t }}</b> <%= (item.region == -1) ? '{{ 'No region'|t }}' : item.region %>
+                    </li>
+                    <li>
+                        <b><%- (data.blocks.rendered[item.id]) ? '' : '{{ 'Not rendered'|t }}' %></b>
+                    </li>
+                </ul>
+                <div class="button--flat l-right js--panel-toggle">{{ 'Info'|t }}</div>
+                <a class="button--flat l-right " href="<%- item.route %>">{{ 'Edit'|t }}</a>
+
+            </div>
+
+            <div class="panel__expand-content">
+                <div class="wp-query-arguments">
+                    <table class="table--duo">
+                        <tr>
+                            <th>{{ 'Provider'|t }}</th>
+                            <td><%- item.settings.provider %></td>
+                        </tr>
+                        <tr>
+                            <th>{{ 'Theme'|t }}</th>
+                            <td><%- item.theme %></td>
+                        </tr>
+                        <tr>
+                            <th>{{ 'Status'|t }}</th>
+                            <td><%- (item.status) ? '{{ 'Enabled'|t }}' : '{{ 'Disabled'|t }}' %></td>
+                        </tr>
+                        <tr>
+                            <th>{{ 'Plugin'|t }}</th>
+                            <td><%- item.plugin %></td>
+                        </tr>
+                    </table>
+                </div>
+            </div>
+        </div>
+        <% }); %>
+
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/cache.html.twig b/modules/devel/webprofiler/templates/Collector/cache.html.twig
new file mode 100644
index 0000000..61539b6
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/cache.html.twig
@@ -0,0 +1,63 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'cache'}) }}" title="{{ 'Cache'|t }}">
+        <img width="20" height="28" alt="{{ 'Cache'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getCacheHitsCount }}
+            / {{ collector.getCacheMissesCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+
+    {% for bin, cids in collector.getCacheHits %}
+        <div class="sf-toolbar-info-piece">
+            <b>{{ bin }}</b>
+            <span>{{ cids }}</span>
+        </div>
+    {% endfor %}
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="cache" type="text/template">
+        <h2 class="panel__title">{{ 'Cache'|t }}</h2>
+        <% if( data.cache.length != 0){ %>
+        <% _.each( data.cache, function( item, key ){ %>
+        <div class="panel__container">
+
+            <ul class="list--inline">
+                <li><b>Bin</b> <%= key %></li>
+            </ul>
+
+            <table class="table--trio">
+                <thead>
+                <tr>
+                    <th>{{ 'ID'|t }}</th>
+                    <th>{{ 'hit'|t }}</th>
+                    <th>{{ 'miss'|t }}</th>
+                </tr>
+                </thead>
+                <tbody>
+                <% _.each( item, function( value, key ){ %>
+                <tr>
+                    <td><%= key %></td>
+                    <td><%= value['bin_cids_hit'] %></td>
+                    <td><%= value['bin_cids_miss'] %></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+        <% }); %>
+        <% } else { %>
+        <div class="panel__container">
+            <p>{{ 'No results'|t }}</p>
+        </div>
+        <% } %>
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/config.html.twig b/modules/devel/webprofiler/templates/Collector/config.html.twig
new file mode 100644
index 0000000..954ea5f
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/config.html.twig
@@ -0,0 +1,37 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: "config"}) }}" title="{{ 'Config'|t }}">
+        <img width="20" height="28" alt="{{ 'Config'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getConfigNames|length }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Config get'|t }}</b>
+        <span>{{ collector.getConfigNames|length }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="config" type="text/template">
+        <h2 class="panel__title">{{ 'Configuration'|t }}</h2>
+        <div class="panel__container">
+            <table>
+                <% _.each( data.config_names, function( item, key ){ %>
+                <tr>
+                    <th><%- key %></th>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                </tr>
+                <% }); %>
+            </table>
+
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/database.html.twig b/modules/devel/webprofiler/templates/Collector/database.html.twig
new file mode 100644
index 0000000..6c4e546
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/database.html.twig
@@ -0,0 +1,158 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'database'}) }}" title="{{ 'Database'|t }}">
+        <img width="20" height="28" alt="{{ 'Database'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status sf-toolbar-status-{{ collector.colorCode }}">{{ collector.querycount }}</span>
+        {% if collector.querycount > 0 %}
+            <span class="sf-toolbar-info-piece-additional-detail">in {{ '%0.2f ms'|format(collector.time) }}</span>
+        {% endif %}
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'DB Queries'|t }}</b>
+        <span>{{ collector.querycount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Query time'|t }}</b>
+        <span>{{ '%0.2f ms'|format(collector.time) }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Default database'|t }}</b>
+        <span>{{ collector.database.driver }}://{{ collector.database.host }}:{{ collector.database.port }}
+            /{{ collector.database.database }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="database" type="text/template">
+        <h2 class="panel__title">{{ 'Database'|t }}</h2>
+
+        <form class="panel__toolbar">
+            <div class="panel__filter--text">
+                <input id="edit-caller" class="js--live-filter" placeholder="{{ 'Caller'|t }}" type="text"/>
+                <label for="edit-caller" class="panel__filter-label">{{ 'Caller'|t }}</label>
+            </div>
+            <div class="panel__filter--select">
+                <select id="edit-type" class="js--live-filter">
+                    <option value="">{{ 'Any'|t }}</option>
+                    <option value="select">Select</option>
+                    <option value="insert">Insert</option>
+                    <option value="update">Update</option>
+                    <option value="create">Create</option>
+                    <option value="delete">Delete</option>
+                </select>
+                <label for="edit-type" class="panel__filter-label">{{ 'Query type'|t }}</label>
+            </div>
+            <div class="panel__filter--select">
+                <select id="edit-hightlighted" class="js--live-filter">
+                    <option value="">{{ 'Any'|t }}</option>
+                    <option value="1">{{ 'Yes'|t }}</option>
+                    <option value="0">{{ 'No'|t }}</option>
+                </select>
+                <label for="edit-type" class="panel__filter-label">{{ 'Slow queryes'|t }}</label>
+            </div>
+
+            <div class="button--flat l-right js--code-toggle--global js--placeholder-visible">{{ 'Swap Placeholders'|t }}</div>
+
+        </form>
+
+        <% _.each( data.queries, function( item, key ){ %>
+        <div class="panel__container<% if (item.time > data.query_highlight_threshold) { %> is--hightlighted <% } %>"
+             data-wp-caller="<%- item.caller.class %>"
+             data-wp-type="<%- item.type %>"
+             data-wp-hightlighted="<%- (item.time > data.query_highlight_threshold) ? '1' : '0' %>">
+            <div class="panel__expand-header ">
+                    <pre <% if( item.query_args) { %> class="js--code-target"<% } %> >
+                        <code class="sql js--placeholder-query">
+                            <%- item.query %>
+                        </code>
+                        <% if( item.query_args) { %>
+                        <code class="sql js--clipboard-target is--hidden js--original-query">
+                            <%- item.query_args %>
+                        </code>
+                        <% } %>
+
+                    </pre>
+                <ul class="list--inline">
+                    <li><b>{{ 'Time'|t }}</b>: <%- Drupal.webprofiler.helpers.printTime(item.time) %></li>
+                    <li><b>{{ 'Caller'|t }}</b>: <%= Drupal.webprofiler.helpers.classLink({"file" : item.caller.file,
+                        "class" : item.caller.class, "line" : item.caller.line, "method" : item.caller.function}) %>
+                    </li>
+                    <li><b>{{ 'Target'|t }}</b>: <%- item.target %></li>
+                </ul>
+
+                <% if(item.query_args){ %>
+                <div class="button--flat l-right js--code-toggle">{{ 'Swap Placeholders'|t }}</div>
+                <% } %>
+                <% if(item.args){ %>
+                <div class="button--flat l-right js--panel-toggle">{{ 'Info'|t }}</div>
+                <% } %>
+                <!--div class="button--flat l-right js--clipboard-trigger">{{ 'Copy Query'|t }}</div-->
+                <% if(item.explain){ %>
+                <div class="button--flat l-right js--explain-trigger"
+                     data-wp-queryPosition="<%- key %>"
+                        >{{ 'Explain'|t }}</div>
+                <% } %>
+            </div>
+
+            <% if(item.explain){ %>
+            <div class="loader--linear js--loader" style="display: none">
+                <div class="loader__bar"></div>
+                <div class="loader__bar"></div>
+                <div class="loader__bar"></div>
+            </div>
+            <div class="panel__expand-content js--explain-target"></div>
+            <% } %>
+
+            <% if(item.args){ %>
+            <div class="panel__expand-content">
+                <div class="wp-query-arguments">
+                    <table class="table--duo">
+                        <thead>
+                        <tr>
+                            <th>{{ 'placeholder'|t }}</th>
+                            <th>{{ 'value'|t }}</th>
+                        </tr>
+                        </thead>
+                        <tbody>
+                        <% _.each( item.args, function( item, key ){ %>
+                        <tr>
+                            <td><%- key %></td>
+                            <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                        </tr>
+                        <% }); %>
+                        </tbody>
+                    </table>
+                </div>
+            </div>
+            <% } %>
+        </div>
+        <% }); %>
+    </script>
+    <script id="wp-query-explain-template" type="text/template">
+        <table class="table--compact">
+            <thead>
+            <tr>
+                <% _.each(rc.data[1], function(value, key, list) { %>
+                <th><%= key %></th>
+                <% }); %>
+            </tr>
+            </thead>
+            <% _.each(rc.data, function(value) { %>
+            <tr>
+                <% _.each(value, function(value2, key, list) { %>
+                <td><%= value2 %></td>
+                <% }); %>
+            </tr>
+            <% }); %>
+        </table>
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/drupal.html.twig b/modules/devel/webprofiler/templates/Collector/drupal.html.twig
new file mode 100644
index 0000000..b12f16f
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/drupal.html.twig
@@ -0,0 +1,58 @@
+{% block toolbar %}
+    {% set icon %}
+    <span>
+        <img width="13" height="28" alt="Drupal"
+             src="data:image/png;base64,{{ collector.icon }}">
+        <a href="https://www.drupal.org">
+            <span>{{ collector.version }}</span>
+        </a>
+        </span>
+    {% endset %}
+    {% set text %}
+    {% spaceless %}
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'Drupal version'|t }}</b>
+            <span>{{ collector.version }}</span>
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'Installed profile'|t }}</b>
+            <span>{{ collector.profile }}</span>
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <span><a href="{{ collector.getConfigUrl }}"
+                     title="{{ 'Configure Webprofiler'|t }}">{{ 'Configure Webprofiler'|t }}</a></span>
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <span><a href="{{ url("webprofiler.admin_list") }}"
+                     title="{{ 'View latest reports'|t }}">{{ 'View latest reports'|t }}</a></span>
+        </div>
+        <hr/>
+        <div class="sf-toolbar-info-piece">
+            <span><a href="https://www.drupal.org/documentation">{{ 'Drupal Documentation'|t }}</a></span>
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <span><a href="https://www.drupal.org/contribute">{{ 'Get involved!'|t }}</a></span>
+        </div>
+    {% endspaceless %}
+    {% endset %}
+
+    {% if link %}
+        {% set icon %}
+        <a href="#">{{ icon }}</a>
+        {% endset %}
+    {% endif %}
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="drupal" type="text/template">
+        <h2 class="panel__title">{{ 'Drupal'|t }}</h2>
+        <div class="panel__container">
+
+        </div>
+    </script>
+{% endblock %}
+
diff --git a/modules/devel/webprofiler/templates/Collector/events.html.twig b/modules/devel/webprofiler/templates/Collector/events.html.twig
new file mode 100644
index 0000000..9167413
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/events.html.twig
@@ -0,0 +1,79 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'events'}) }}" title="{{ 'Events'|t }}">
+        <img width="20" height="28" alt="{{ 'Events'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}">
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getCalledListenersCount }}</span>
+    </a>
+    {% endset %}
+
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Triggered'|t }}</b>
+        <span>{{ collector.getCalledListenersCount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Not triggered'|t }}</b>
+        <span>{{ collector.getNotCalledListenersCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="events" type="text/template">
+
+        <h2 class="panel__title">{{ 'Events'|t }}</h2>
+        <div class="panel__container">
+
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'Called listeners'|t }}</th>
+                <th>{{ 'Class'|t }}</th>
+                <th>{{ 'Priority'|t }}</th>
+                </thead>
+                <tbody> <% _.each( data.called_listeners, function( item ){ %>
+                <tr>
+                    <td><%= item.event %></td>
+                    <% if(item.type == 'Method') { %>
+                    <td>
+                        <%= Drupal.webprofiler.helpers.classLink(item) %>
+                    </td>
+                    <% } else { %>
+                    <td>{{ 'Closure'|t }}</td>
+                    <% } %>
+                    <td><%= item.priority %></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+        <div class="panel__container">
+
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'Non called listeners'|t }}</th>
+                <th>{{ 'Class'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each( data.not_called_listeners, function( item ){ %>
+                <tr>
+                    <td><%= item.event %></td>
+                    <% if(item.type == 'Method') { %>
+                    <td>
+                        <%= Drupal.webprofiler.helpers.classLink(item) %>
+                    </td>
+                    <% } else { %>
+                    <td>{{ 'Closure'|t }}</td>
+                    <% } %>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/extensions.html.twig b/modules/devel/webprofiler/templates/Collector/extensions.html.twig
new file mode 100644
index 0000000..987a9fe
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/extensions.html.twig
@@ -0,0 +1,95 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'drupal_extension'}) }}"
+       title="{{ 'Extensions'|t }}">
+        <img width="20" height="28" alt="{{ 'Extensions'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status{% if 150 < collector.countExtensions %} sf-toolbar-status-yellow{% endif %}">{{ collector.getExtensionsCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Active Modules'|t }}</b>
+        <span>{{ collector.getModulesCount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Active Themes'|t }}</b>
+        <span>{{ collector.getThemesCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="drupal_extension" type="text/template">
+        <h2 class="panel__title">{{ 'Extensions'|t }}</h2>
+        <div class="tabs">
+            <input class="tabs__radio" type="radio" id="modules" name="tabs" checked/>
+            <input class="tabs__radio" type="radio" id="themes" name="tabs"/>
+            <ul class="tabs__tabs list--inline">
+                <li><label class="tabs__label" for="modules">{{ 'Modules'|t }}</label></li>
+                <li><label class="tabs__label" for="themes">{{ 'Themes'|t }}</label></li>
+            </ul>
+
+            <div class="tabs__panels">
+                <div class="tabs__panel">
+                    <div class="panel__container">
+                        <table class="table--compact">
+                            <thead>
+                            <tr>
+                                <th>{{ 'Name'|t }}</th>
+                                <th>{{ 'Path'|t }}</th>
+                                <th>{{ 'Info file'|t }}</th>
+                            </tr>
+                            </thead>
+                            <tbody>
+                            <% _.each( data.drupal_extension.modules, function( value, key ){ %>
+                            <% if(value.public_type == 'module') { %>
+                            <tr>
+                                <td><%- key %></td>
+                                <td><%- value.public_path %></td>
+                                <td><%= Drupal.webprofiler.helpers.classLink({"file" :
+                                    data.drupal_extension.installation_path + value.public_pathname, "class":
+                                    value.public_pathname, "line": 0}) %>
+                                </td>
+                            </tr>
+                            <% } %>
+                            <% }); %>
+                            </tbody>
+                        </table>
+                    </div>
+                </div>
+
+                <div class="tabs__panel">
+                    <div class="panel__container">
+                        <table class="table--compact">
+                            <thead>
+                            <tr>
+                                <th>{{ 'Name'|t }}</th>
+                                <th>{{ 'Path'|t }}</th>
+                                <th>{{ 'Info file'|t }}</th>
+                            </tr>
+                            </thead>
+                            <tbody>
+                            <% _.each( data.drupal_extension.themes, function( value, key ){ %>
+                            <tr>
+                                <td><%- key %></td>
+                                <td><%- value.public_path %></td>
+                                <td><%= Drupal.webprofiler.helpers.classLink({"file" :
+                                    data.drupal_extension.installation_path + value.public_pathname, "class":
+                                    value.public_pathname, "line": 0}) %>
+                                </td>
+                            </tr>
+                            <% }); %>
+                            </tbody>
+                        </table>
+                    </div>
+                </div>
+            </div>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/forms.html.twig b/modules/devel/webprofiler/templates/Collector/forms.html.twig
new file mode 100644
index 0000000..a602f45
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/forms.html.twig
@@ -0,0 +1,67 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'forms'}) }}" title="{{ 'Forms'|t }}">
+        <img width="21" height="28" alt="{{ 'Forms'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}">
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getFormsCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    {% spaceless %}
+        <div class="sf-toolbar-info-piece">
+            {% for keys, form in collector.getForms %}
+                <b>{{ keys }}</b>
+                <div><a href="{{ idelink(form.class.file, form.class.line)|raw }}">{{ abbr(form.class.class)|raw }}
+                        ::{{ form.class.method }}</a></div>
+            {% endfor %}
+        </div>
+    {% endspaceless %}
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="forms" type="text/template">
+        <h2 class="panel__title">{{ 'Forms'|t }}</h2>
+        <% if( data.forms && data.forms.length != 0){ %>
+            <% _.each( data.forms, function( item, key ){ %>
+                <div class="panel__container">
+
+                    <ul class="list--inline">
+                        <li><b>ID</b> <%= key %></li>
+                        <li><b>class</b> <%= Drupal.webprofiler.helpers.classLink(item.class) %></li>
+                    </ul>
+
+                    <table class="table--compact">
+                        <thead>
+                        <tr>
+                            <th>{{ 'form'|t }}</th>
+                            <th>{{ 'title'|t }}</th>
+                            <th>{{ 'access'|t }}</th>
+                            <th>{{ 'type'|t }}</th>
+                        </tr>
+                        </thead>
+                        <tbody>
+                        <% _.each( item.form, function( value , key ){ %>
+                        <tr>
+                            <td><%= key %></td>
+                            <td><% if(value['#title'] == null ){ %> {{ '-' }} <% } else { %> <%= value['#title'] %><% } %></td>
+                            <td><% if(value['#access'] == null ){ %> {{ 'null' }} <% } else { %> <%= value['#access'] %><% } %></td>
+                            <td><% if(value['#type'] == null ){ %> {{ 'null' }} <% } else { %> <%= value['#type'] %><% } %></td>
+                        </tr>
+                        <% }); %>
+                        </tbody>
+                    </table>
+                </div>
+            <% }); %>
+        <% } else { %>
+            <div class="panel__container">
+                <p>{{ 'No results'|t }}</p>
+            </div>
+        <% } %>
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/http.html.twig b/modules/devel/webprofiler/templates/Collector/http.html.twig
new file mode 100644
index 0000000..ea7ad04
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/http.html.twig
@@ -0,0 +1,77 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'http'}) }}" title="{{ 'Http'|t }}">
+        <img width="20" height="28" alt="{{ 'Http'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.completedRequestsCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Completed'|t }}</b>
+        <span>{{ collector.completedRequestsCount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+      <b>{{ 'Failed'|t }}</b>
+      <span>{{ collector.failedRequestsCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="http" type="text/template">
+        <h2 class="panel__title">{{ 'Http'|t }}</h2>
+
+        <% if( data.completed.length != 0 || data.failed.length != 0){ %>
+        <% _.each( data.completed, function( item ) { %>
+        <div class="panel__container">
+            <div class="panel__expand-header">
+                <ul class="list--inline">
+                    <li>
+                        <b>{{ 'Host'|t }}</b>: <%- item.request.uri.host %>
+                    </li>
+                    <li>
+                        <b>{{ 'Path'|t }}</b>: <%- item.request.uri.path %>
+                    </li>
+                    <li>
+                        <b>{{ 'Status'|t }}</b>: <%- item.response.status %> <%- item.response.phrase %>
+                    </li>
+                </ul>
+                <div class="button--flat l-right js--panel-toggle">{{ 'Info'|t }}</div>
+            </div>
+
+            <div class="panel__expand-content">
+                <table class="table--duo">
+                    <% _.each( item.request, function( message, key ) { %>
+
+                    <% if(key == 'stats') { key = 'stats (time in milliseconds and data in bytes)' } %>
+
+                    <tr>
+                        <th><%- key %></th>
+                        <td><%= Drupal.webprofiler.helpers.frm(message) %></td>
+                    </tr>
+                    <% }); %>
+                </table>
+                <table class="table--duo">
+                    <% _.each( item.response, function( header, key ) { %>
+                    <tr>
+                        <th><%- key %></th>
+                        <td><%= Drupal.webprofiler.helpers.frm(header) %></td>
+                    </tr>
+                    <% }); %>
+                </table>
+            </div>
+        </div>
+        <% }); %>
+        <% } else { %>
+        <div class="panel__container">
+            <p>{{ 'No external http calls'|t }}</p>
+        </div>
+        <% } %>
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/mail.html.twig b/modules/devel/webprofiler/templates/Collector/mail.html.twig
new file mode 100644
index 0000000..8a4bc77
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/mail.html.twig
@@ -0,0 +1,76 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: "mail"}) }}" title="{{ 'Mail'|t }}">
+        <img height="28" alt="{{ 'Mail'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-status">{{ collector.mailsent }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>Mail sent</b>
+        <span>{{ collector.mailsent }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="mail" type="text/template">
+        <h2 class="panel__title">{{ 'Mail dashboard'|t }}</h2>
+
+        <% if( data.mail.length != 0){ %>
+        <% _.each( data.mail, function( item ) { %>
+        <div class="panel__container">
+            <div class="panel__expand-header">
+                <ul class="list--inline">
+                    <li>
+                        <b>{{ 'Plugin'|t }}</b>: <%= Drupal.webprofiler.helpers.classLink(item.plugin) %>
+                    </li>
+                    <li>
+                        <b>{{ 'ID'|t }}</b>: <%- item.message.id %>
+                    </li>
+                    <li>
+                        <b>{{ 'To'|t }}</b>: <%- item.message.to %>
+                    </li>
+                    <li>
+                        <b>{{ 'Subject'|t }}</b>: <%- item.message.subject %>
+                    </li>
+                </ul>
+                <div class="button--flat l-right js--panel-toggle">{{ 'Info'|t }}</div>
+            </div>
+
+            <div class="panel__expand-content">
+                <table class="table--duo">
+                <% _.each( item.message, function( message, key ) { %>
+                <% if( key != 'params' && key != 'headers' ){ %>
+                <tr>
+                    <th><%- key %></th>
+                    <td><%- message %></td>
+                </tr>
+                <% } %>
+                <% }); %>
+                </table>
+                <table class="table--duo">
+                    <% _.each( item.message.headers, function( header, key ) { %>
+                    <tr>
+                        <th><%- key %></th>
+                        <td><%- header %></td>
+                    </tr>
+                    <% }); %>
+                </table>
+            </div>
+
+        </div>
+        <% }); %>
+        <% } else { %>
+        <div class="panel__container">
+            <p>{{ 'No mail sent'|t }}</p>
+        </div>
+        <% } %>
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/performance_timing.html.twig b/modules/devel/webprofiler/templates/Collector/performance_timing.html.twig
new file mode 100644
index 0000000..5e8cf41
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/performance_timing.html.twig
@@ -0,0 +1,76 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'performance_timing'}) }}"
+       title="{{ 'Performance Timing'|t }}">
+        <img width="20" height="28" alt="{{ 'Performance Timing'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span id="wp--frontend__toolbar"></span>
+    </a>
+    {% endset %}
+    {% set text %}
+
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'DNS lookup'|t }}</b>
+        <span id="wp--frontend__dns"></span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'TCP handshake'|t }}</b>
+        <span id="wp--frontend__tcp"></span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'TTFB' }}</b>
+        <span id="wp--frontend__ttfb"></span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Data download'|t }}</b>
+        <span id="wp--frontend__data"></span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'DOM building'|t }}</b>
+        <span id="wp--frontend__dom"></span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+
+    <script>
+        var perf = performance.timing,
+                dns = parseInt(perf.domainLookupEnd - perf.domainLookupStart),
+                tcp = parseInt(perf.connectEnd - perf.connectStart),
+                ttfb = parseInt(perf.responseStart - perf.connectEnd),
+                data = parseInt(perf.responseEnd - perf.responseStart),
+                dom = parseInt(perf.loadEventStart - perf.responseEnd);
+
+        Webprofiler.ajax('{{ url("webprofiler.frontend.save", {profile: token}) }}', false, JSON.stringify(perf));
+
+        document.getElementById('wp--frontend__toolbar').innerHTML = ttfb + ' ms';
+        document.getElementById('wp--frontend__dns').innerHTML = dns + ' ms';
+        document.getElementById('wp--frontend__tcp').innerHTML = tcp + ' ms';
+        document.getElementById('wp--frontend__ttfb').innerHTML = ttfb + ' ms';
+        document.getElementById('wp--frontend__data').innerHTML = data + ' ms';
+        document.getElementById('wp--frontend__dom').innerHTML = dom + ' ms';
+    </script>
+{% endblock %}
+
+{% block panel %}
+    <script id="performance_timing" type="text/template">
+        <h2 class="panel__title">{{ 'Performance timing'|t }}</h2>
+        <div class="panel__container">
+            <% if(data.performance && data.performance.computed) { %>
+                <table class="table--duo">
+                    <% _.each( data.performance.computed, function( item, key ){ %>
+                    <tr>
+                        <th><%- key %></th>
+                        <td><%- Drupal.webprofiler.helpers.printTime(item) %></td>
+                    </tr>
+                    <% }); %>
+                </table>
+            <% } else { %>
+                <p>{{ 'No collected data, maybe this profile hasn\'t been generated by a browser GET o has been generated by an unsupported browser.'|t }}</p>
+            <% } %>
+        </div>
+    </script>
+{% endblock %}
\ No newline at end of file
diff --git a/modules/devel/webprofiler/templates/Collector/php_config.html.twig b/modules/devel/webprofiler/templates/Collector/php_config.html.twig
new file mode 100644
index 0000000..c91f9f3
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/php_config.html.twig
@@ -0,0 +1,52 @@
+{% block toolbar %}
+    {# PHP Information #}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'php_config'}) }}"
+       title="{{ 'PHP config'|t }}">
+        <img width="26" height="28" alt="{{ 'PHP config'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}">
+    </a>
+    {% endset %}
+    {% set text %}
+    {% spaceless %}
+        <div class="sf-toolbar-info-piece sf-toolbar-info-php">
+            <b>PHP</b>
+            <span><a href="{{ url("system.php") }}">{{ collector.phpversion }}</a></span>
+        </div>
+        <div class="sf-toolbar-info-piece sf-toolbar-info-php-ext">
+            <b>{{ 'PHP Extensions'|t }}</b>
+            <span class="sf-toolbar-status sf-toolbar-status-{{ collector.hasxdebug ? 'green' : 'red' }}">xdebug</span>
+            <span class="sf-toolbar-status sf-toolbar-status-{{ collector.hasaccelerator ? 'green' : 'red' }}">accel</span>
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'PHP SAPI'|t }}</b>
+            <span>{{ collector.sapiName }}</span>
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <b>Token</b>
+            <span>{{ token }}</span>
+        </div>
+    {% endspaceless %}
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="php_config" type="text/template">
+        <h2 class="panel__title">{{ 'PHP config'|t }}</h2>
+        <div class="panel__container">
+            <table class="table--duo">
+                <% _.each( data, function( item, key ){ %>
+                <tr>
+                    <th><%- key %></th>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                </tr>
+                <% }); %>
+            </table>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/request.html.twig b/modules/devel/webprofiler/templates/Collector/request.html.twig
new file mode 100644
index 0000000..4a1e1e3
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/request.html.twig
@@ -0,0 +1,206 @@
+{% block toolbar %}
+    {% set request_handler %}
+    <a href="{{ idelink(collector.controller.file, collector.controller.line)|raw }}">{{ abbr(collector.controller.class)|raw }}
+        ::{{ collector.controller.method }}</a>
+    {% endset %}
+
+    {% set request_status_code_color = (400 > collector.statuscode) ? ((200 == collector.statuscode) ? 'green' : 'yellow') : 'red' %}
+
+    {% set request_route = collector.route ? collector.route : 'NONE' %}
+
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'request'}) }}" title="{{ 'Request'|t }}">
+        <img width="28" height="28" alt="{{ 'Request'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}">
+    <span class="sf-toolbar-status sf-toolbar-status-{{ request_status_code_color }}"
+          title="{{ collector.statustext }}">{{ collector.statuscode }}</span>
+    </a>
+    {% endset %}
+
+    {% set text %}
+    {% spaceless %}
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'Status'|t }}</b>
+            <span class="sf-toolbar-status sf-toolbar-status-{{ request_status_code_color }}">{{ collector.statuscode }}</span> {{ collector.statustext }}
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'Controller'|t }}</b>
+            {{ request_handler }}
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'Route name'|t }}</b>
+            <span>{{ request_route }}</span>
+        </div>
+    {% endspaceless %}
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="request" type="text/template">
+        <h2 class="panel__title">{{ 'Request'|t }}</h2>
+
+        <% if (!_.isEmpty(data.request_query)) { %>
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'GET Parameters'|t }}</th>
+                <th>{{ 'Value'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each( data.request_query, function( item, key ){ %>
+                <tr>
+                    <td><%- key %></td>
+                    <td><%- item %></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+        <% } %>
+
+        <% if (!_.isEmpty(data.request_request)) { %>
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'POST Parameters'|t }}</th>
+                <th>{{ 'Value'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each( data.request_request, function( item, key ){ %>
+                <tr>
+                    <td><%- key %></td>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+        <% } %>
+
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'Attributes'|t }}</th>
+                <th>{{ 'Value'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each( data.request_attributes, function( item, key ){ %>
+                <tr>
+                    <td><%- key %></td>
+
+                    <% if(key == '_controller') { %>
+                    <td><%= Drupal.webprofiler.helpers.classLink(data.controller) %></td>
+                    <% } else { %>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                    <% } %>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+
+        <% if (!_.isEmpty(data.request_cookies)) { %>
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'Cookies'|t }}</th>
+                <th>{{ 'Value'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each( data.request_cookies, function( item, key ){ %>
+                <tr>
+                    <td><%- key %></td>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+        <% } %>
+
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'Request headers'|t }}</th>
+                <th>{{ 'Value'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each( data.request_headers, function( item, key ){ %>
+                <tr>
+                    <td><%- key %></td>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+
+        <% if (!_.isEmpty(data.content)) { %>
+        <div class="panel__container">
+            <div class="h--word-broken"><%- data.content %></div>
+        </div>
+        <% } %>
+
+        <% if (!_.isEmpty(data.access_check)) { %>
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'Path'|t }}</th>
+                <th>{{ 'Access check'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each(data.access_check, function(items, key){ %>
+                <tr>
+                    <td><%- key %></td>
+                    <td>
+                        <% _.each(items, function(item){ %>
+                        <%- item.service_id %>
+                        <% }); %>
+                    </td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+        <% } %>
+
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'Server Parameters'|t }}</th>
+                <th>{{ 'Value'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each( data.request_server, function( item, key ){ %>
+                <tr>
+                    <td><%- key %></td>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <th>{{ 'Response headers'|t }}</th>
+                <th>{{ 'Value'|t }}</th>
+                </thead>
+                <tbody>
+                <% _.each( data.response_headers, function( item, key ){ %>
+                <tr>
+                    <td><%- key %></td>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/routing.html.twig b/modules/devel/webprofiler/templates/Collector/routing.html.twig
new file mode 100644
index 0000000..7670011
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/routing.html.twig
@@ -0,0 +1,50 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'routing'}) }}" title="{{ 'Routing'|t }}">
+        <img width="20" height="28" alt="{{ 'Routing'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}">
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getRoutesCount }}</span>
+    </a>
+
+    {% endset %}
+
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Routes'|t }}</b>
+        <span>{{ collector.getRoutesCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="routing" type="text/template">
+        <h2 class="panel__title">{{ 'Routing'|t }}</h2>
+        <div class="panel__container">
+            <table class="table--duo">
+                <thead>
+                <tr>
+                    <th>{{ 'name'|t }}</th>
+                    <th>{{ 'path'|t }}</th>
+                </tr>
+                </thead>
+                <tbody>
+                <% _.each( data.routing, function( item ){ %>
+                    <tr>
+                        <td>
+                            <%- item.name %>
+                        </td>
+                        <td>
+                            <%- item.path %>
+                        </td>
+                    </tr>
+                <% }); %>
+                </tbody>
+            </table>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/services.html.twig b/modules/devel/webprofiler/templates/Collector/services.html.twig
new file mode 100644
index 0000000..dab3e55
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/services.html.twig
@@ -0,0 +1,149 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'services'}) }}" title="{{ 'Services'|t }}">
+        <img width="20" height="28" alt="{{ 'Services'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getInitializedServicesCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Initialized'|t }}</b>
+        <span>{{ collector.getInitializedServicesCount }} ({{ collector.getInitializedServicesWithoutWebprofilerCount }}
+            )</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Available'|t }}</b>
+        <span>{{ collector.getServicesCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="services" type="text/template">
+        <h2 class="panel__title">{{ 'Services'|t }}</h2>
+        <div class="tabs">
+            <input class="tabs__radio" type="radio" id="services" name="tabs" checked/>
+            <input class="tabs__radio" type="radio" id="http_middleware" name="tabs"/>
+            <ul class="tabs__tabs list--inline">
+                <li><label class="tabs__label" for="services">services</label></li>
+                <li><label class="tabs__label" for="http_middleware">middleware</label></li>
+            </ul>
+
+            <div class="tabs__panels">
+                <div class="tabs__panel">
+                    <form class="panel__toolbar">
+                        <div class="panel__filter--text">
+                            <input id="edit-sid" class="js--live-filter" placeholder="{{ 'ID'|t }}" type="text"/>
+                            <label for="edit-sid" class="panel__filter-label">{{ 'ID'|t }}</label>
+                        </div>
+                        <div class="panel__filter--text">
+                            <input id="edit-class" class="js--live-filter" placeholder="{{ 'Class'|t }}" type="text"/>
+                            <label for="edit-class" class="panel__filter-label">{{ 'Class'|t }}</label>
+                        </div>
+                        <div class="panel__filter--text">
+                            <input id="edit-tags" class="js--live-filter" placeholder="{{ 'Tags'|t }}" type="text"/>
+                            <label for="edit-tags" class="panel__filter-label">{{ 'Tags'|t }}</label>
+                        </div>
+                        <div class="panel__filter--select">
+                            <select id="edit-initialized" class="js--live-filter">
+                                <option value="">{{ 'Any'|t }}</option>
+                                <option value="1">{{ 'Yes'|t }}</option>
+                                <option value="0">{{ 'No'|t }}</option>
+                            </select>
+                            <label for="edit-initialized" class="panel__filter-label">{{ 'Initialized'|t }}</label>
+                        </div>
+                    </form>
+
+                    <% _.each( data.services, function( item, key ){ %>
+
+                    <% clazz = Drupal.webprofiler.helpers.classLink({"file" : item.value.file, "class" :
+                    item.value.class}) %>
+                    <% depends = _.map(item.outEdges, function(el) { return el.id; }).join(', ') %>
+                    <% tags = _.map(item.value.tags, function(el, key) { return key; }).join(', ') %>
+
+                    <div class="panel__container"
+                         data-wp-sid="<%- key %>"
+                         data-wp-class="<%- item.value.class %>"
+                         data-wp-tags="<%- tags %>"
+                         data-wp-initialized="<%- (item.initialized) ? '1' : '0' %>">
+
+                        <div class="panel__expand-header">
+                            <ul class="list--inline">
+                                <li>
+                                    <b>{{ 'ID'|t }}</b> <%- key %>
+                                </li>
+                                <% if (clazz) { %>
+                                <li>
+                                    <b>{{ 'Class'|t }}</b> <%= clazz %>
+                                </li>
+                                <% } %>
+                                <li>
+                                    <b>{{ 'Initialized'|t }}</b> <%- (item.initialized) ? '{{ 'Yes'|t }}' : '{{ 'No'|t }}' %>
+                                </li>
+                                <% if ( item.time ) { %>
+                                    <li>
+                                        <b>{{ 'Count'|t }}</b> <%- item.time.count %>
+                                    </li>
+                                    <li>
+                                        <b>{{ 'Time'|t }}</b> <%- Drupal.webprofiler.helpers.printTime(item.time.time) %>
+                                    </li>
+                                <% } %>
+                            </ul>
+                            <% if ( tags.length > 0 || depends.length > 0 ) { %>
+                            <div class="button--flat l-right js--panel-toggle">{{ 'Info'|t }}</div>
+                            <% } %>
+                        </div>
+
+                        <% if ( tags.length > 0 || depends.length > 0 ) { %>
+                        <div class="panel__expand-content">
+                            <div class="wp-query-arguments">
+                                <table class="table--duo">
+                                    <tr>
+                                        <th>{{ 'Tags'|t }}</th>
+                                        <td><%- (tags) ? tags : '-' %></td>
+                                    </tr>
+                                    <tr>
+                                        <th>{{ 'Depends'|t }}</th>
+                                        <td><%- (depends) ? depends : '-' %></td>
+                                    </tr>
+                                </table>
+                            </div>
+                        </div>
+                        <% } %>
+                    </div>
+                    <% }); %>
+                </div>
+
+                <div class="tabs__panel">
+                    <div class="panel__container">
+                        <table>
+                            <thead>
+                            <tr>
+                                <th>{{ 'id'|t }}</th>
+                                <th>{{ 'class'|t }}</th>
+                                <th>{{ 'priority'|t }}</th>
+                            </tr>
+                            </thead>
+                            <tbody>
+                            <% _.each( data.http_middleware, function( item, key ){ %>
+                            <% clazz = Drupal.webprofiler.helpers.classLink(item.value.handle_method) %>
+                            <tr>
+                                <td><%- key %></td>
+                                <td><%= clazz %></td>
+                                <td><%- item.value.tags.http_middleware[0].priority %></td>
+                            </tr>
+                            <% }); %>
+                            </tbody>
+                        </table>
+                    </div>
+                </div>
+            </div>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/state.html.twig b/modules/devel/webprofiler/templates/Collector/state.html.twig
new file mode 100644
index 0000000..e19b13b
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/state.html.twig
@@ -0,0 +1,36 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'state'}) }}" title="{{ 'State'|t }}">
+        <img width="20" height="28" alt="{{ 'State'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getStateKeysCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'State get'|t }}</b>
+        <span>{{ collector.getStateKeysCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="state" type="text/template">
+        <h2 class="panel__title">{{ 'State'|t }}</h2>
+        <div class="panel__container">
+            <table>
+                <% _.each( data.state_get, function( item, key ){ %>
+                <tr>
+                    <th><%- key %></th>
+                    <td><%= Drupal.webprofiler.helpers.frm(item) %></td>
+                </tr>
+                <% }); %>
+            </table>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/theme.html.twig b/modules/devel/webprofiler/templates/Collector/theme.html.twig
new file mode 100644
index 0000000..66fa5fd
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/theme.html.twig
@@ -0,0 +1,147 @@
+{% block toolbar %}
+    {% set negotiator %}
+    <a href="{{ idelink(collector.themeNegotiator.class.file, collector.themeNegotiator.class.line)|raw }}">{{ abbr(collector.themeNegotiator.class.class)|raw }}
+        ::{{ collector.themeNegotiator.class.method }}</a>
+    {% endset %}
+    {% set time = collector.templatecount ? '%0.0f ms'|format(collector.time) : 'n/a' %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'theme'}) }}" title="{{ 'Theme'|t }}">
+        <img width="20" height="28" alt="{{ 'Theme'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.activeTheme.name }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Name'|t }}</b>
+        <span>{{ collector.activeTheme.name }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Engine'|t }}</b>
+        <span>{{ collector.activeTheme.engine }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Negotiator'|t }}</b>
+        <span>{{ negotiator }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Render Time'|t }}</b>
+        <span>{{ time }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Template Calls'|t }}</b>
+        <span>{{ collector.templatecount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Block Calls'|t }}</b>
+        <span>{{ collector.blockcount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Macro Calls'|t }}</b>
+        <span>{{ collector.macrocount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="theme" type="text/template">
+        <h2 class="panel__title">{{ 'Theme'|t }}</h2>
+        <div class="panel__container">
+            <table class="table--fixed">
+                <tr>
+                    <th>{{ 'Name'|t }}</th>
+                    <td><%- data.activeTheme.name %> (<a href="/admin/appearance/settings/bartik">{{ 'Edit'|t }})</a>
+                    </td>
+                </tr>
+                <tr>
+                    <th>{{ 'Engine'|t }}</th>
+                    <td><%- data.activeTheme.engine %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Base theme'|t }}</th>
+                    <td><%- data.activeTheme.extension.base_theme %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Regions'|t }}</th>
+                    <td><%= Drupal.webprofiler.helpers.frm(data.activeTheme.regions) %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Libraries'|t }}</th>
+                    <td><%= Drupal.webprofiler.helpers.frm(data.activeTheme.libraries) %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Style sheets removed'|t }}</th>
+                    <td><%= Drupal.webprofiler.helpers.frm(data.activeTheme.styleSheetsRemove) %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Path'|t }}</th>
+                    <td><%- data.activeTheme.path %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Negotiator'|t }}</th>
+                    <td><%= Drupal.webprofiler.helpers.classLink(data.negotiator.class) %></td>
+                </tr>
+            </table>
+        </div>
+
+        <div class="panel__container">
+            <ul class="list--inline">
+                <li><b>{{ 'Twig statistics'|t }}</b></li>
+            </ul>
+
+            <table class="table--fixed">
+                <tr>
+                    <th>{{ 'Total Render Time'|t }}</th>
+                    <td><%- Drupal.webprofiler.helpers.printTime(data.twig.render_time) %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Template Calls'|t }}</th>
+                    <td><%- data.twig.template_count %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Block Calls'|t }}</th>
+                    <td><%- data.twig.block_count %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Macro Calls'|t }}</th>
+                    <td><%- data.twig.macro_count %></td>
+                </tr>
+            </table>
+        </div>
+
+        <div class="panel__container">
+            <ul class="list--inline">
+                <li><b>{{ 'Twig rendered templates'|t }}</b></li>
+            </ul>
+
+            <table class="table--fixed">
+                <thead>
+                <tr>
+                    <th>{{ 'template'|t }}</th>
+                    <th>{{ 'count'|t }}</th>
+                </tr>
+                </thead>
+                <% _.each( data.twig.templates, function( item, key ){ %>
+                <tr>
+                    <th><%- key %></th>
+                    <td><%- item %></td>
+                </tr>
+                <% }); %>
+            </table>
+        </div>
+
+        <div class="panel__container">
+            <ul class="list--inline">
+                <li><b>{{ 'Twig callgraph'|t }}</b></li>
+            </ul>
+
+            <%= data.twig.callgraph %>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/time.html.twig b/modules/devel/webprofiler/templates/Collector/time.html.twig
new file mode 100644
index 0000000..9aeb76a
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/time.html.twig
@@ -0,0 +1,59 @@
+{% block toolbar %}
+    {% set duration = collector.events|length ? '%.0f ms'|format(collector.duration) : 'n/a' %}
+    {% set memory = '%.1f MB'|format(collector.memory / 1024 / 1024) %}
+    {% set total_memory = collector.memoryLimit == -1 ? '&infin;' : '%.1f MB'|format(collector.memoryLimit / 1024)|escape %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: "time"}) }}" title="{{ 'Timeline'|t }}">
+        <img width="20" height="28" alt="{{ 'Timeline'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span>{{ duration }} / {{ memory }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Total time'|t }}</b>
+        <span>{{ duration }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Memory'|t }}</b>
+        <span>{{ memory }} / {{ total_memory }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="time" type="text/template">
+        <h2 class="panel__title">{{ 'Timeline'|t }}</h2>
+
+        <div class="panel__container">
+            <ul class="list--inline">
+                <li>
+                    <b>{{ 'Total time'|t }}</b> <%- Drupal.webprofiler.helpers.printTime(data.duration) %>
+                </li>
+                <li>
+                    <b>{{ 'Initialization time'|t }}</b> <%- Drupal.webprofiler.helpers.printTime(data.initTime) %>
+                </li>
+            </ul>
+            <br/><br/>
+
+            <div class="timeline">
+                <div class="timeline__legends">
+                    <span class="timeline__legends--default">default</span>
+                    <span class="timeline__legends--section">section</span>
+                    <span class="timeline__legends--event_listener">event_listener</span>
+                    <span class="timeline__legends--event_listener_loading">event_listener_loading</span>
+                    <span class="timeline__legends--template">template</span>
+                    <span class="timeline__legends--service">service</span>
+                </div>
+
+                <div id="timeline"></div>
+            </div>
+        </div>
+
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/translations.html.twig b/modules/devel/webprofiler/templates/Collector/translations.html.twig
new file mode 100644
index 0000000..08683ba
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/translations.html.twig
@@ -0,0 +1,85 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: "translations"}) }}"
+       title="{{ 'Translations'|t }}">
+        <img height="28" alt="{{ 'Translations'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-status">{{ collector.untranslatedCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Translated'|t }}</b>
+        <span>{{ collector.translatedCount }}</span>
+    </div>
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Untranslated'|t }}</b>
+        <span>{{ collector.untranslatedCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="translations" type="text/template">
+        <h2 class="panel__title">{{ 'Translations'|t }}</h2>
+        <div class="tabs">
+            <input class="tabs__radio" type="radio" id="translated" name="tabs" checked/>
+            <input class="tabs__radio" type="radio" id="untranslated" name="tabs"/>
+            <ul class="tabs__tabs list--inline">
+                <li><label class="tabs__label" for="translated">{{ 'Translated'|t }}</label></li>
+                <li><label class="tabs__label" for="untranslated">{{ 'Unranslated'|t }}</label></li>
+            </ul>
+
+            <div class="tabs__panels">
+                <div class="tabs__panel">
+                    <div class="panel__container">
+                        <table class="table--duo">
+                            <thead>
+                            <tr>
+                                <th>{{ 'Original'|t }}</th>
+                                <th>{{ 'Tanslation'|t }}</th>
+                                <th>{{ 'Action'|t }}</th>
+                            </tr>
+                            </thead>
+                            <tbody>
+                            <% _.each( data.translations.translated, function( value, key ){ %>
+                            <tr>
+                                <td><%= key %></td>
+                                <td><%= value %></td>
+                                <td><a href="<%- data.user_interface_translations_path %>?string=<%- key%>" target="_blank" class="h--word-intact">{{ 'Edit'|t }}</a></td>
+                            </tr>
+                            <% }); %>
+                            </tbody>
+                        </table>
+                    </div>
+                </div>
+
+                <div class="tabs__panel">
+                    <div class="panel__container">
+                        <table class="table--duo">
+                            <thead>
+                            <tr>
+                                <th>{{ 'Original'|t }}</th>
+                                <th>{{ 'Action'|t }}</th>
+                            </tr>
+                            </thead>
+                            <tbody>
+                            <% _.each( data.translations.untranslated, function( value, key ){ %>
+                            <tr>
+                                <td><%= key %></td>
+                                <td><a href="<%- data.user_interface_translations_path %>?string=<%- key%>" target="_blank" class="h--word-intact">{{ 'Edit'|t }}</a></td>
+                            </tr>
+                            <% }); %>
+                            </tbody>
+                        </table>
+                    </div>
+                </div>
+            </div>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/user.html.twig b/modules/devel/webprofiler/templates/Collector/user.html.twig
new file mode 100644
index 0000000..ef36997
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/user.html.twig
@@ -0,0 +1,63 @@
+{% block toolbar %}
+    {% set color_code = (collector.authenticated) ? 'green' : 'red' %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'user'}) }}" title="{{ 'User'|t }}">
+        <img width="24" height="28" alt="{{ 'User'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status sf-toolbar-status-{{ color_code }}">
+            {% if collector.authenticated %}
+                {{ collector.username }}
+            {% endif %}
+        </span>
+    </a>
+    {% endset %}
+    {% set text %}
+    {% if collector.authenticated %}
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'Logged in as'|t }}</b>
+            <span class="sf-toolbar-status sf-toolbar-status-{{ color_code }}">{{ collector.username }}</span>
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'Roles'|t }}</b>
+            <span>{{ collector.roles|join(', ') }}</span>
+        </div>
+        <div class="sf-toolbar-info-piece">
+            <b>{{ 'Authenticated by'|t }}</b>
+            <span>{{ collector.provider }}</span>
+        </div>
+    {% else %}
+        {{ collector.anonymous }}
+    {% endif %}
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="user" type="text/template">
+        <h2 class="panel__title">{{ 'User'|t }}</h2>
+        <div class="panel__container">
+            <table class="table--duo">
+                <tr>
+                    <th>{{ 'Name'|t }}</th>
+                    <td><%- data.name %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Authenticated'|t }}</th>
+                    <td><%- data.authenticated %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Provider'|t }}</th>
+                    <td><%- data.provider %></td>
+                </tr>
+                <tr>
+                    <th>{{ 'Roles'|t }}</th>
+                    <td><%- data.roles.join(', ') %></td>
+                </tr>
+            </table>
+        </div>
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Collector/views.html.twig b/modules/devel/webprofiler/templates/Collector/views.html.twig
new file mode 100644
index 0000000..d4a2e2f
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Collector/views.html.twig
@@ -0,0 +1,58 @@
+{% block toolbar %}
+    {% set icon %}
+    <a href="{{ url("webprofiler.dashboard", {profile: token}, {fragment: 'views'}) }}" title="{{ 'Views'|t }}">
+        <img width="20" height="28" alt="{{ 'Views'|t }}"
+             src="data:image/png;base64,{{ collector.icon }}"/>
+        <span class="sf-toolbar-info-piece-additional sf-toolbar-status">{{ collector.getViewsCount }}</span>
+    </a>
+    {% endset %}
+    {% set text %}
+
+    <div class="sf-toolbar-info-piece">
+        <b>{{ 'Views'|t }}</b>
+        <span>{{ collector.getViewsCount }}</span>
+    </div>
+    {% endset %}
+
+    <div class="sf-toolbar-block">
+        <div class="sf-toolbar-icon">{{ icon|default('') }}</div>
+        <div class="sf-toolbar-info">{{ text|default('') }}</div>
+    </div>
+{% endblock %}
+
+{% block panel %}
+    <script id="views" type="text/template">
+        <h2 class="panel__title">{{ 'Views'|t }}</h2>
+        <div class="panel__container">
+            <% if( data.views.length != 0){ %>
+            <table class="table--duo">
+                <thead>
+                <tr>
+                    <th>{{ 'name'|t }}</th>
+                    <th>{{ 'display'|t }}</th>
+                    <th>{{ 'build time'|t }}</th>
+                    <th>{{ 'execute time'|t }}</th>
+                    <th>{{ 'render time'|t }}</th>
+                    <th>{{ 'Action'|t }}</th>
+                </tr>
+                </thead>
+                <tbody>
+                <% _.each( data.views, function( item ){ %>
+                <tr>
+                    <td><%- item.id %></td>
+                    <td><%- item.current_display %></td>
+                    <td><%- Drupal.webprofiler.helpers.printTime(item.build_time) %></td>
+                    <td><%- Drupal.webprofiler.helpers.printTime(item.execute_time) %></td>
+                    <td><%- Drupal.webprofiler.helpers.printTime(item.render_time) %></td>
+                    <td><a href="<%- item.route %>">{{ 'Edit'|t }}</a></td>
+                </tr>
+                <% }); %>
+                </tbody>
+            </table>
+            <% } else { %>
+            <p>{{ 'No results'|t }}</p>
+            <% } %>
+        </div>
+
+    </script>
+{% endblock %}
diff --git a/modules/devel/webprofiler/templates/Profiler/webprofiler_dashboard.html.twig b/modules/devel/webprofiler/templates/Profiler/webprofiler_dashboard.html.twig
new file mode 100644
index 0000000..be4fb68
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Profiler/webprofiler_dashboard.html.twig
@@ -0,0 +1,57 @@
+{% set resume %}
+<div id="resume" class="resume">
+    <span class="resume__subtitle">
+        {{ profile.method|upper }}
+        {% if profile.method|upper in ['GET', 'HEAD'] %}
+            <a href="{{ profile.url }}">{{ profile.url }}</a>
+        {% else %}
+            <em>{{ profile.url }}</em>
+        {% endif %}
+    </span>
+    <span class="resume__time">
+        <em>by {{ profile.ip }}</em> at <em>{{ profile.time|date('r') }}</em>
+    </span>
+
+    <a id="resume-view-all" class="button--flat resume__button"
+       href="{{ url("webprofiler.admin_list") }}">{{ 'View latest'|t }}</a>
+</div>
+{% endset %}
+
+<div id="webprofiler">
+
+    {{ resume }}
+
+    <div id="collectors" class="collectors panel">
+    </div>
+
+    <div class="loader--fixed" style="display: none">
+        <svg class="loader__circle">
+            <circle class="loader__path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
+        </svg>
+    </div>
+
+    <script id="collector" type="text/template">
+        <a href="#<%= id %>" title="<%= summary %>" class="overview__link">
+            <img src="data:image/png;base64,<%= icon %>"
+                 class="overview__icon">
+            <span class="overview__title"><%= label %></span>
+            <% if(typeof(summary) !== "undefined") { %>
+            <span class="overview__subtitle"><%= summary %></span>
+            <% } %>
+        </a>
+    </script>
+
+    {{ panels }}
+
+    <div class="modal js--modal" style="display: none">
+        <div class="modal__container">
+            <div class="modal__bar">
+                <h3 class="modal__title"></h3>
+            </div>
+            <div class="modal__content">
+                <div class="modal__main-data"></div>
+            </div>
+            <a class="button--flat js--modal-close l-right">Close</a>
+        </div>
+    </div>
+</div>
diff --git a/modules/devel/webprofiler/templates/Profiler/webprofiler_loader.html.twig b/modules/devel/webprofiler/templates/Profiler/webprofiler_loader.html.twig
new file mode 100644
index 0000000..b640ba1
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Profiler/webprofiler_loader.html.twig
@@ -0,0 +1,73 @@
+<div id="webprofiler{{ token }}" class="sf-toolbar" style="display: none"></div>
+
+<script>
+    Webprofiler = (function () {
+        "use strict";
+
+        var key = 'webprofiler/profiler/',
+
+                getPreference = function (name) {
+                    if (!window.localStorage) {
+                        return null;
+                    }
+
+                    return localStorage.getItem(key + name);
+                },
+
+                setPreference = function (name, value) {
+                    if (!window.localStorage) {
+                        return null;
+                    }
+
+                    localStorage.setItem(key + name, value);
+                    return true;
+                },
+
+                load = function () {
+                    ajax('{{ profiler_url }}', function (result) {
+                        var toolbar = document.getElementById('webprofiler{{ token }}');
+                        toolbar.innerHTML = result;
+                        toolbar.style.display = 'block';
+
+                        if (getPreference('toolbar/displayState') == 'none') {
+                            document.getElementById('sfToolbarMainContent-{{ token }}').style.display = 'none';
+                            document.getElementById('sfToolbarClearer-{{ token }}').style.display = 'none';
+                            document.getElementById('sfMiniToolbar-{{ token }}').style.display = 'block';
+                        } else {
+                            document.getElementById('sfToolbarMainContent-{{ token }}').style.display = 'block';
+                            document.getElementById('sfToolbarClearer-{{ token }}').style.display = 'block';
+                            document.getElementById('sfMiniToolbar-{{ token }}').style.display = 'none';
+                        }
+
+                        var arr = toolbar.getElementsByTagName('script');
+                        for (var n = 0; n < arr.length; n++) {
+                            eval(arr[n].innerHTML);
+                        }
+                    });
+                },
+
+                ajax = function (url, callback, data) {
+                    try {
+                        var x = new (XMLHttpRequest || ActiveXObject)('MSXML2.XMLHTTP.3.0');
+                        x.open(data ? 'POST' : 'GET', url, 1);
+                        x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
+                        x.setRequestHeader('Content-type', 'application/json');
+                        x.onreadystatechange = function () {
+                            x.readyState > 3 && callback && callback(x.responseText, x);
+                        };
+                        x.send(data);
+                    } catch (e) {
+                        window.console && console.log(e);
+                    }
+                };
+
+        return {
+            getPreference: getPreference,
+            setPreference: setPreference,
+            load: load,
+            ajax: ajax
+        }
+    })();
+
+    Webprofiler.load();
+</script>
diff --git a/modules/devel/webprofiler/templates/Profiler/webprofiler_panel.html.twig b/modules/devel/webprofiler/templates/Profiler/webprofiler_panel.html.twig
new file mode 100644
index 0000000..b06daff
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Profiler/webprofiler_panel.html.twig
@@ -0,0 +1 @@
+{{ panel|raw }}
diff --git a/modules/devel/webprofiler/templates/Profiler/webprofiler_toolbar.css.twig b/modules/devel/webprofiler/templates/Profiler/webprofiler_toolbar.css.twig
new file mode 100644
index 0000000..ff58abc
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Profiler/webprofiler_toolbar.css.twig
@@ -0,0 +1,311 @@
+.sf-minitoolbar {
+display: none;
+
+position: fixed;
+bottom: 0;
+right: 0;
+
+padding: 5px 5px 0;
+
+background-color: #f7f7f7;
+background-image: -moz-linear-gradient(top, #e4e4e4, #ffffff);
+background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#e4e4e4), to(#ffffff));
+background-image: -o-linear-gradient(top, #e4e4e4, #ffffff);
+background: linear-gradient(top, #e4e4e4, #ffffff);
+
+border-radius: 16px 0 0 0;
+
+z-index: 6000000;
+}
+
+.sf-toolbarreset {
+position: fixed;
+background-color: #f7f7f7;
+left: 0;
+right: 0;
+height: 38px;
+margin: 0;
+padding: 0 40px 0 0;
+z-index: 6000000;
+font: 11px Verdana, Arial, sans-serif;
+text-align: left;
+color: #2f2f2f;
+
+background-image: -moz-linear-gradient(top, #e4e4e4, #ffffff);
+background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#e4e4e4), to(#ffffff));
+background-image: -o-linear-gradient(top, #e4e4e4, #ffffff);
+background: linear-gradient(top, #e4e4e4, #ffffff);
+
+bottom: 0;
+border-top: 1px solid #bbb;
+}
+.sf-toolbarreset abbr {
+border-bottom: 1px dotted #000000;
+}
+.sf-toolbarreset span,
+.sf-toolbarreset div {
+font-size: 11px;
+}
+.sf-toolbarreset img {
+width: auto;
+display: inline;
+}
+
+.sf-toolbarreset .hide-button {
+display: block;
+position: absolute;
+top: 0;
+right: 0;
+width: 40px;
+height: 40px;
+cursor: pointer;
+background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAMAAAAMCGV4AAAAllBMVEXDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PExMTPz8/Q0NDR0dHT09Pb29vc3Nzf39/h4eHi4uLj4+P6+vr7+/v8/Pz9/f3///+Nh2QuAAAAIXRSTlMABgwPGBswMzk8QktRV4SKjZOWmaKlq7TAxszb3urt+fy1vNEpAAAAiklEQVQIHUXBBxKCQBREwRFzDqjoGh+C2YV//8u5Sll2S0E/dof1tKdKM6GyqCto7PjZRJIS/mbSELgXOSd/BzpKIH1ZefVWpDDTHsi8mZVnwImPi5ndCLbaAZk3M58Bay0h9VbeSvMpjDUAHj4jL55AW1rxN5fU2PLjIgVRzNdxVFOlGzvnJi0Fb1XNGBHA9uQOAAAAAElFTkSuQmCC');
+background-repeat: no-repeat;
+background-position: 13px 11px;
+}
+.sf-toolbarreset a {
+color: #000 !important;
+border: none;
+}
+
+.sf-toolbar-block {
+white-space: nowrap;
+color: #2f2f2f;
+display: block;
+min-height: 28px;
+border-right: 1px solid #e4e4e4;
+padding: 0;
+float: left;
+cursor: default;
+}
+
+.sf-toolbar-block span {
+display: inline-block;
+}
+
+.sf-toolbar-block .sf-toolbar-info-piece {
+line-height: 19px;
+margin-bottom: 5px;
+}
+
+.sf-toolbar-block .sf-toolbar-info-piece .sf-toolbar-status {
+padding: 0px 5px;
+border-radius: 5px;
+margin-bottom: 0px;
+vertical-align: top;
+}
+
+.sf-toolbar-block .sf-toolbar-info-piece:last-child {
+margin-bottom: 0;
+}
+
+.sf-toolbar-block .sf-toolbar-info-piece a,
+.sf-toolbar-block .sf-toolbar-info-piece abbr {
+color: #2f2f2f;
+}
+
+.sf-toolbar-block .sf-toolbar-info-piece b {
+display: inline-block;
+width: 110px;
+vertical-align: top;
+}
+
+.sf-toolbar-block .sf-toolbar-info-with-next-pointer:after {
+content: ' :: ';
+color: #999;
+}
+
+.sf-toolbar-block .sf-toolbar-info-with-delimiter {
+border-right: 1px solid #999;
+padding-right: 5px;
+margin-right: 5px;
+}
+
+.sf-toolbar-block .sf-toolbar-info {
+display: none;
+position: absolute;
+background-color: #fff;
+border: 1px solid #bbb;
+padding: 9px 0;
+margin-left: -1px;
+
+bottom: 38px;
+border-bottom-width: 0;
+border-bottom: 1px solid #bbb;
+border-radius: 4px 4px 0 0;
+}
+
+.sf-toolbarreset > div:last-of-type .sf-toolbar-info {
+right: -1px;
+}
+
+.sf-toolbar-block .sf-toolbar-info:empty {
+visibility: hidden;
+}
+
+.sf-toolbar-block .sf-toolbar-status {
+display: inline-block;
+color: #fff;
+background-color: #666;
+padding: 3px 6px;
+border-radius: 3px;
+margin-bottom: 2px;
+vertical-align: middle;
+min-width: 6px;
+min-height: 13px;
+}
+
+.sf-toolbar-block .sf-toolbar-status abbr {
+color: #fff;
+border-bottom: 1px dotted black;
+}
+
+.sf-toolbar-block .sf-toolbar-status-green {
+background-color: #759e1a;
+}
+
+.sf-toolbar-block .sf-toolbar-status-red {
+background-color: #a33;
+}
+
+.sf-toolbar-block .sf-toolbar-status-yellow {
+background-color: #ffcc00;
+color: #000;
+}
+
+.sf-toolbar-block .sf-toolbar-status-black {
+background-color: #000;
+}
+
+.sf-toolbar-block .sf-toolbar-icon {
+display: block;
+}
+
+.sf-toolbar-block .sf-toolbar-icon > a,
+.sf-toolbar-block .sf-toolbar-icon > span {
+display: block;
+font-weight: normal;
+text-decoration: none;
+margin: 0;
+padding: 5px 6px;
+min-width: 20px;
+text-align: center;
+vertical-align: middle;
+}
+
+.sf-toolbar-block .sf-toolbar-icon > a,
+.sf-toolbar-block .sf-toolbar-icon > a:link
+.sf-toolbar-block .sf-toolbar-icon > a:hover {
+color: black !important;
+}
+
+.sf-toolbar-block .sf-toolbar-icon > a[href]:after {
+content: "";
+}
+
+.sf-toolbar-block .sf-toolbar-icon img {
+border-width: 0;
+vertical-align: middle;
+}
+
+.sf-toolbar-block .sf-toolbar-icon img + span {
+margin-left: 0;
+margin-top: 2px;
+}
+
+.sf-toolbar-block .sf-toolbar-icon .sf-toolbar-status {
+border-radius: 12px;
+border-bottom-left-radius: 0;
+margin-top: 0;
+}
+
+.sf-toolbar-block .sf-toolbar-info-method {
+cursor: hand;
+}
+
+.sf-toolbar-block .sf-toolbar-info-method[onclick=""] {
+border-bottom: none;
+cursor: inherit;
+}
+
+.sf-toolbar-info-php {}
+.sf-toolbar-info-php-ext {}
+
+.sf-toolbar-info-php-ext .sf-toolbar-status {
+margin-left: 2px;
+}
+
+.sf-toolbar-info-php-ext .sf-toolbar-status:first-child {
+margin-left: 0;
+}
+
+.sf-toolbar-block a .sf-toolbar-info-piece-additional,
+.sf-toolbar-block a .sf-toolbar-info-piece-additional-detail {
+display: inline-block;
+}
+
+.sf-toolbar-block a .sf-toolbar-info-piece-additional:empty,
+.sf-toolbar-block a .sf-toolbar-info-piece-additional-detail:empty {
+display: none;
+}
+
+.sf-toolbarreset:hover {
+box-shadow: rgba(0, 0, 0, 0.3) 0 0 50px;
+}
+
+.sf-toolbar-block:hover {
+box-shadow: rgba(0, 0, 0, 0.35) 0 0 5px;
+border-right: none;
+margin-right: 1px;
+position: relative;
+}
+
+.sf-toolbar-block:hover .sf-toolbar-icon {
+background-color: #fff;
+border-top: 1px dotted #DDD;
+position: relative;
+margin-top: -1px;
+z-index: 10002;
+}
+
+.sf-toolbar-block:hover .sf-toolbar-info {
+display: block;
+min-width: -webkit-calc(100% + 2px);
+min-width: calc(100% + 2px);
+z-index: 10001;
+box-sizing: border-box;
+padding: 9px;
+line-height: 19px;
+}
+
+/***** Media query *****/
+@media screen and (max-width: 779px) {
+.sf-toolbar-block .sf-toolbar-icon > * > :first-child ~ * {
+display: none;
+}
+
+.sf-toolbar-block .sf-toolbar-icon > * > .sf-toolbar-info-piece-additional,
+.sf-toolbar-block .sf-toolbar-icon > * > .sf-toolbar-info-piece-additional-detail {
+display: none !important;
+}
+}
+
+@media screen and (max-width: 1179px) {
+.sf-toolbar-block .sf-toolbar-icon > * > .sf-toolbar-info-piece-additional {
+display: none;
+}
+}
+
+@media screen and (max-width: 1439px) {
+.sf-toolbar-block .sf-toolbar-icon > * > .sf-toolbar-info-piece-additional-detail {
+display: none;
+}
+}
+
+/***** Media query print: Do not print the Toolbar. *****/
+@media print {
+.sf-toolbar {
+display: none;
+visibility: hidden;
+}
+}
diff --git a/modules/devel/webprofiler/templates/Profiler/webprofiler_toolbar.html.twig b/modules/devel/webprofiler/templates/Profiler/webprofiler_toolbar.html.twig
new file mode 100644
index 0000000..f452aec
--- /dev/null
+++ b/modules/devel/webprofiler/templates/Profiler/webprofiler_toolbar.html.twig
@@ -0,0 +1,35 @@
+<div id="sfMiniToolbar-{{ token }}" class="sf-minitoolbar">
+    <a href="javascript:void(0);" title="{{ "Show Drupal toolbar"|t }}" onclick="
+            var elem = this.parentNode;
+            if (elem.style.display == 'none') {
+            document.getElementById('sfToolbarMainContent-{{ token }}').style.display = 'none';
+            document.getElementById('sfToolbarClearer-{{ token }}').style.display = 'none';
+            elem.style.display = 'block';
+            } else {
+            document.getElementById('sfToolbarMainContent-{{ token }}').style.display = 'block';
+            document.getElementById('sfToolbarClearer-{{ token }}').style.display = 'block';
+            elem.style.display = 'none'
+            }
+
+            Webprofiler.setPreference('toolbar/displayState', 'block');
+            ">
+        <img width="26" height="28" alt="Drupal"
+             src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCRDU5MUVDNzVGRTkxMUUzODdBMEJDOEZFRjA2QUY5MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCRDU5MUVDODVGRTkxMUUzODdBMEJDOEZFRjA2QUY5MiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkJENTkxRUM1NUZFOTExRTM4N0EwQkM4RkVGMDZBRjkyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkJENTkxRUM2NUZFOTExRTM4N0EwQkM4RkVGMDZBRjkyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+iYsuIgAAAiNJREFUeNq8lj3KwkAQhhOxUPAnoIgWQiysbFLYG2/gEVJaegQ9QfQECh4g3kA9QbxBLMQ2KaxE2G/ffG5Yl/ytiguDJBn32Z15d2dUQojy0wGgDHQwGFjj8Vh7hxFyZIHNZtOt1+uuDPRtYK/Xs4rFIpyJDFQaiIm73a7NYMyq1arf7/dnWWApIN3VHBPzINHwHX5J4FxAKg6j0Wh4aSDREGb8TxqIXJVKJSIDY1Yul30RmgqE87swHkrDq2cCkYNareZ9AmPWarX2mUAk/hswZrgkUoGyIsm7y1ggDachnrNPrVKpEKSJBxZYnC+Xi/l4PL56T99uN/y8KDYCUpj2i2JRzONkWZYyGo0UXdeV4/GobDYb5Xw+J/obxv+mTqdT8rWTpND1ek3ihm3bRNO0F188O44T+UwmE+TQjBXNcDiciLD5fE7Shuu6xDTN0JdGgfi+//J9v98nA6EmqIoHYsJPxuFwIOKxiERDVxNQ4I4PNw1Ram6DIFAWiwUWG5uv+/2+E98V+IdOp7OiZzF6pitMhC2XyxDEfOKg1+t1ldnTtNtthxcB8sAGcgQRUbWGufM8LxQPfJBv3n+73Tq5qgVyibqWdYsASOUfLYyJJ679yKyHadDZbBYqkn8HMHaO3ydMl674rI8RayOACKUo/+l0SuAf12ZI9TRYLSZCJYk76GgbnyA9TxOlMpiqqrnuQhxk7igd8raJbKi/bvX/BBgANANSieJk+XMAAAAASUVORK5CYII=">
+    </a>
+</div>
+<style>
+    {% include '@webprofiler/Profiler/webprofiler_toolbar.css.twig' with { 'floatable': true } %}
+</style>
+<div id="sfToolbarClearer-{{ token }}" style="clear: both; height: 38px;"></div>
+
+<div id="sfToolbarMainContent-{{ token }}" class="sf-toolbarreset">
+    {{ toolbar|raw }}
+
+    <a class="hide-button" title="{{ "Close Toolbar"|t }}" onclick="
+            var p = this.parentNode;
+            p.style.display = 'none';
+            (p.previousElementSibling || p.previousSibling).style.display = 'none';
+            document.getElementById('sfMiniToolbar-{{ token }}').style.display = 'block';
+            Webprofiler.setPreference('toolbar/displayState', 'none');
+            "></a>
+</div>
diff --git a/modules/devel/webprofiler/tests/src/Unit/Cache/CacheDataCollectorTest.php b/modules/devel/webprofiler/tests/src/Unit/Cache/CacheDataCollectorTest.php
new file mode 100644
index 0000000..f4673ee
--- /dev/null
+++ b/modules/devel/webprofiler/tests/src/Unit/Cache/CacheDataCollectorTest.php
@@ -0,0 +1,69 @@
+<?php
+
+namespace Drupal\Tests\webprofiler\Unit\Cache;
+
+use Drupal\Tests\UnitTestCase;
+use Drupal\webprofiler\Cache\CacheBackendWrapper;
+use Drupal\webprofiler\DataCollector\CacheDataCollector;
+
+/**
+ * @coversDefaultClass \Drupal\webprofiler\DataCollector\CacheDataCollector
+ * @group webprofiler
+ */
+class CacheDataCollectorTest extends UnitTestCase {
+
+  /**
+   * @var \Drupal\webprofiler\DataCollector\CacheDataCollector
+   */
+  private $cacheDataCollector;
+
+  /**
+   * @var \PHPUnit_Framework_MockObject_MockObject
+   */
+  private $cacheBackendInterface;
+
+  /**
+   * {@inheritdoc}
+   */
+  public function setUp() {
+    $this->cacheDataCollector = new CacheDataCollector();
+    $this->cacheBackendInterface = $this->getMock('Drupal\Core\Cache\CacheBackendInterface');
+  }
+
+  /**
+   * Tests the collection of a cache miss.
+   */
+  public function testCacheCollectorMiss() {
+    $this->cacheBackendInterface->expects($this->once())
+      ->method('get')
+      ->will($this->returnValue(FALSE));
+
+    $cacheBackendWrapper = new CacheBackendWrapper($this->cacheDataCollector, $this->cacheBackendInterface, 'default');
+    $cache = $cacheBackendWrapper->get('cache_id');
+
+    $this->assertFalse($cache);
+
+    $this->assertEquals(1, $this->cacheDataCollector->getCacheMissesCount());
+  }
+
+  /**
+   * Tests the collection of a cache hit.
+   */
+  public function testCacheCollectorHit() {
+    $cache = new \StdClass();
+    $cache->cid = 'cache_id';
+    $cache->expire = 1;
+    $cache->tags = ['tag1', 'tag2'];
+    $this->cacheBackendInterface->expects($this->once())
+      ->method('get')
+      ->will($this->returnValue($cache));
+
+    $cacheBackendWrapper = new CacheBackendWrapper($this->cacheDataCollector, $this->cacheBackendInterface, 'default');
+    $cache2 = $cacheBackendWrapper->get('cache_id');
+
+    $this->assertNotNull($cache2);
+
+    $this->assertEquals(1, $this->cacheDataCollector->getCacheHitsCount());
+  }
+
+}
diff --git a/modules/devel/webprofiler/webprofiler.info.yml b/modules/devel/webprofiler/webprofiler.info.yml
new file mode 100644
index 0000000..cf3a78d
--- /dev/null
+++ b/modules/devel/webprofiler/webprofiler.info.yml
@@ -0,0 +1,16 @@
+name: Web Profiler
+type: module
+description: 'Drupal Web Profiler.'
+package: Development
+# core: 8.x
+configure: webprofiler.settings
+tags:
+ - developer
+dependencies:
+ - devel
+
+# Information added by Drupal.org packaging script on 2015-11-08
+version: '8.x-1.x-dev'
+core: '8.x'
+project: 'devel'
+datestamp: 1446987552
diff --git a/modules/devel/webprofiler/webprofiler.install b/modules/devel/webprofiler/webprofiler.install
new file mode 100644
index 0000000..64de0f6
--- /dev/null
+++ b/modules/devel/webprofiler/webprofiler.install
@@ -0,0 +1,166 @@
+<?php
+
+/**
+ * @file
+ * Install, update and uninstall functions for the webprofiler module.
+ */
+
+use Drupal\Core\Url;
+
+/**
+ * Implements hook_schema().
+ */
+function webprofiler_schema() {
+  $schema['webprofiler'] = [
+    'description' => 'Webprofiler profiles storage.',
+    'fields' => [
+      'token' => [
+        'description' => 'Profile token.',
+        'type' => 'varchar',
+        'length' => 6,
+        'not null' => TRUE,
+      ],
+      'data' => [
+        'description' => 'Profile data.',
+        'type' => 'text',
+        'size' => 'big',
+        'not null' => TRUE,
+      ],
+      'ip' => [
+        'description' => 'Request IP.',
+        'type' => 'varchar',
+        'length' => 64,
+        'not null' => TRUE,
+      ],
+      'method' => [
+        'description' => 'Request method.',
+        'type' => 'varchar',
+        'length' => 6,
+        'not null' => TRUE,
+      ],
+      'url' => [
+        'description' => 'Requested URL.',
+        'type' => 'varchar',
+        'length' => 2048,
+        'not null' => TRUE,
+      ],
+      'time' => [
+        'description' => 'Request time.',
+        'type' => 'int',
+        'unsigned' => TRUE,
+        'not null' => TRUE,
+      ],
+      'parent' => [
+        'description' => 'Profile parent.',
+        'type' => 'varchar',
+        'length' => 6,
+        'not null' => FALSE,
+      ],
+      'created_at' => [
+        'description' => 'Profile created time.',
+        'type' => 'int',
+        'unsigned' => TRUE,
+        'not null' => TRUE,
+      ],
+    ],
+    'indexes' => [
+      'created_at' => ['created_at'],
+      'ip' => ['ip'],
+      'method' => ['method'],
+      'parent' => ['parent'],
+    ],
+    'primary key' => ['token'],
+  ];
+
+  return $schema;
+}
+
+/**
+ * Implements hook_requirements().
+ */
+function webprofiler_requirements($phase) {
+  $requirements = [];
+
+  if ('runtime' == $phase) {
+    $has_d3 = _webprofiler_verify_library('webprofiler', 'd3');
+    $requirements['d3js'] = [
+      'title' => t('D3.js library'),
+      'value' => $has_d3 ? t('Enabled') : t('Not found'),
+    ];
+
+    if (!$has_d3) {
+      $requirements['d3js']['severity'] = REQUIREMENT_WARNING;
+      $d3_url = Url::fromUri('https://github.com/mbostock/d3', ['attributes' => ['target' => '_blank']]);
+      $requirements['d3js']['description'] = [
+        '#prefix' => ' ',
+        '#markup' => t('Webprofiler module requires D3.js library to properly render data. <a href=":d3_link">Download D3.js</a> into /libraries/d3/d3.min.js.', [':d3_link' => $d3_url->toUriString()])
+      ];
+    }
+
+    $has_highlight = _webprofiler_verify_library('webprofiler', 'highlight');
+    $requirements['highlightjs'] = [
+      'title' => t('highlight.js library'),
+      'value' => $has_highlight ? t('Enabled') : t('Not found'),
+    ];
+
+    if (!$has_highlight) {
+      $requirements['highlightjs']['severity'] = REQUIREMENT_WARNING;
+      $highlight_url = Url::fromUri('http://highlightjs.org', ['attributes' => ['target' => '_blank']]);
+      $requirements['highlightjs']['description'] = [
+        '#prefix' => ' ',
+        '#markup' => t('Webprofiler module requires highlight.js library to syntax highlight collected queries. <a href=":highlight_link">Download highlight.js</a> assets into /libraries/highlight.', [':highlight_link' => $highlight_url->toUriString()])
+      ];
+    }
+  }
+
+  return $requirements;
+}
+
+/**
+ * Verify that the library files exist.
+ *
+ * @param string $extension
+ *   The name of the extension that registered a library.
+ * @param string $name
+ *   The name of a registered library to retrieve.
+ *
+ * @return bool
+ *   TRUE if all files of this library exists, FALSE otherwise
+ *
+ * @see https://drupal.org/node/2231385
+ */
+function _webprofiler_verify_library($extension, $name) {
+  /** @var Drupal\Core\Asset\LibraryDiscovery $library_discovery */
+  $library_discovery = \Drupal::service('library.discovery');
+  $library = $library_discovery->getLibraryByName($extension, $name);
+
+  $exist = TRUE;
+  if ($library['js']) {
+    foreach ($library['js'] as $js) {
+      if ($js['type'] == 'file') {
+        if (!file_exists(DRUPAL_ROOT . '/' . $js['data'])) {
+          $exist = FALSE;
+        }
+      }
+    }
+  }
+
+  if ($library['css']) {
+    foreach ($library['css'] as $css) {
+      if ($css['type'] == 'file') {
+        if (!file_exists(DRUPAL_ROOT . '/' . $css['data'])) {
+          $exist = FALSE;
+        }
+      }
+    }
+  }
+
+  if ($library['dependencies']) {
+    foreach ($library['dependencies'] as $dependency) {
+      $parts = explode('/', $dependency);
+      $exist = _webprofiler_verify_library($parts[0], $parts[1]);
+    }
+  }
+
+  return $exist;
+}
diff --git a/modules/devel/webprofiler/webprofiler.libraries.yml b/modules/devel/webprofiler/webprofiler.libraries.yml
new file mode 100644
index 0000000..06ba82b
--- /dev/null
+++ b/modules/devel/webprofiler/webprofiler.libraries.yml
@@ -0,0 +1,60 @@
+d3:
+  remote: https://github.com/mbostock/d3
+  version: 3.4.4
+  license:
+    name: BSD-3
+    url: https://github.com/mbostock/d3/blob/master/LICENSE
+    gpl-compatible: true
+  js:
+    /libraries/d3/d3.min.js: {}
+highlight:
+  remote: https://github.com/isagalaev/highlight.js
+  version: 8.0
+  license:
+    name: BSD-3
+    url: https://github.com/isagalaev/highlight.js/blob/master/LICENSE
+    gpl-compatible: true
+  js:
+    /libraries/highlight/highlight.pack.js: {}
+  css:
+    component:
+      /libraries/highlight/styles/idea.css: {}
+dashboard:
+  version: 2.0
+  js:
+    js/app/main.js: {}
+    js/app/helpers.js: {}
+    js/app/models/collector.js: {}
+    js/app/collections/collectors.js: {}
+    js/app/views/collector.js: {}
+    js/app/views/collectorsList.js: {}
+    js/app/views/layout.js: {}
+    js/app/views/details.js: {}
+    js/app/routers/collectors.js: {}
+  css:
+    component:
+      css/app/dashboard.css: {}
+  dependencies:
+    - core/jquery
+    - core/jquery.once
+    - core/drupal
+    - core/drupalSettings
+    - core/backbone
+database:
+  version: 2.0
+  js:
+    js/database.js: {}
+  dependencies:
+    - core/jquery
+    - core/drupal
+    - core/drupalSettings
+    - webprofiler/highlight
+timeline:
+  version: 2.0
+  js:
+    js/timeline.js: {}
+  css:
+    component:
+      css/timeline.css: {}
+  dependencies:
+    - webprofiler/d3
diff --git a/modules/devel/webprofiler/webprofiler.links.menu.yml b/modules/devel/webprofiler/webprofiler.links.menu.yml
new file mode 100644
index 0000000..b2d4a73
--- /dev/null
+++ b/modules/devel/webprofiler/webprofiler.links.menu.yml
@@ -0,0 +1,5 @@
+webprofiler.admin_list:
+  title: 'Webprofiler'
+  description: 'List saved profiles.'
+  route_name: webprofiler.admin_list
+  parent: system.admin_reports
diff --git a/modules/devel/webprofiler/webprofiler.links.task.yml b/modules/devel/webprofiler/webprofiler.links.task.yml
new file mode 100644
index 0000000..741eb15
--- /dev/null
+++ b/modules/devel/webprofiler/webprofiler.links.task.yml
@@ -0,0 +1,9 @@
+webprofiler.settings:
+  title: 'Webprofiler'
+  route_name: webprofiler.settings
+  base_route: devel.admin_settings
+  weight: 10
+webprofiler.dashboard:
+  title: 'dashboard'
+  route_name: webprofiler.dashboard
+  base_route: webprofiler.dashboard
diff --git a/modules/devel/webprofiler/webprofiler.make.yml b/modules/devel/webprofiler/webprofiler.make.yml
new file mode 100644
index 0000000..decfe2c
--- /dev/null
+++ b/modules/devel/webprofiler/webprofiler.make.yml
@@ -0,0 +1,12 @@
+core: "8.x"
+api: 2
+
+libraries:
+  highlight:
+    download:
+      type: "git"
+      url: "git@github.com:mbostock/d3.git"
+  d3:
+    download:
+      type: "git"
+      url: "git@github.com:mbostock/d3.git"
diff --git a/modules/devel/webprofiler/webprofiler.module b/modules/devel/webprofiler/webprofiler.module
new file mode 100644
index 0000000..01e9b95
--- /dev/null
+++ b/modules/devel/webprofiler/webprofiler.module
@@ -0,0 +1,51 @@
+<?php
+
+/**
+ * @file
+ * Legacy Webprofiler module file.
+ */
+
+/**
+ * Implements hook_theme().
+ */
+function webprofiler_theme() {
+  return [
+    'webprofiler_loader' => [
+      'template' => 'Profiler/webprofiler_loader',
+      'variables' => ['token' => NULL, 'profiler_url' => NULL],
+    ],
+    'webprofiler_toolbar' => [
+      'template' => 'Profiler/webprofiler_toolbar',
+      'variables' => [
+        'token' => NULL,
+        'toolbar' => NULL,
+      ],
+    ],
+    'webprofiler_panel' => [
+      'template' => 'Profiler/webprofiler_panel',
+      'variables' => [
+        'panel' => NULL,
+      ],
+    ],
+    'webprofiler_dashboard' => [
+      'template' => 'Profiler/webprofiler_dashboard',
+      'variables' => [
+        'profile' => [],
+        'panels' => [],
+        'spinner_path' => NULL,
+      ],
+    ],
+  ];
+}
+
+/**
+ * Implements hook_cache_flush().
+ */
+function webprofiler_cache_flush() {
+  $config = \Drupal::configFactory()->get('webprofiler.config');
+
+  if ($config->get('purge_on_cache_clear')) {
+    $profiler = \Drupal::service('profiler');
+    $profiler->purge();
+  }
+}
diff --git a/modules/devel/webprofiler/webprofiler.permissions.yml b/modules/devel/webprofiler/webprofiler.permissions.yml
new file mode 100644
index 0000000..b397525
--- /dev/null
+++ b/modules/devel/webprofiler/webprofiler.permissions.yml
@@ -0,0 +1,7 @@
+'access webprofiler':
+  title: 'Access webprofiler'
+  description: 'Access webprofiler collected data.'
+  'restrict access': TRUE
+'view webprofiler toolbar':
+  title: 'View webprofiler toolbar'
+  description: 'View webprofiler toolbar.'
diff --git a/modules/devel/webprofiler/webprofiler.routing.yml b/modules/devel/webprofiler/webprofiler.routing.yml
new file mode 100644
index 0000000..200bc39
--- /dev/null
+++ b/modules/devel/webprofiler/webprofiler.routing.yml
@@ -0,0 +1,81 @@
+# toolbar
+webprofiler.toolbar:
+  path: '/profiler/{profile}'
+  defaults:
+    _controller: '\Drupal\webprofiler\Controller\ToolbarController::toolbarAction'
+  options:
+    parameters:
+      profile:
+        type: 'webprofiler:token'
+  requirements:
+    _permission: 'view webprofiler toolbar'
+
+# save frontend data
+webprofiler.frontend.save:
+  path: '/admin/reports/profiler/frontend/{profile}/save'
+  defaults:
+    _controller: '\Drupal\webprofiler\Controller\ToolbarController::savePerformanceTimingAction'
+    _title: 'Save performance timing data'
+  options:
+    parameters:
+      profile:
+        type: 'webprofiler:token'
+  methods:  [POST]
+  requirements:
+    _permission: 'access webprofiler'
+
+# view profile
+webprofiler.dashboard:
+  path: '/admin/reports/profiler/view/{profile}'
+  defaults:
+    _controller: '\Drupal\webprofiler\Controller\DashboardController::dashboardAction'
+    _title: 'Webprofiler'
+  options:
+    parameters:
+      profile:
+        type: 'webprofiler:token'
+  requirements:
+    _permission: 'access webprofiler'
+
+# list stored profiles
+webprofiler.admin_list:
+  path: '/admin/reports/profiler/list'
+  defaults:
+    _controller: '\Drupal\webprofiler\Controller\DashboardController::listAction'
+    _title: 'Webprofiler'
+  requirements:
+    _permission: 'access webprofiler'
+
+webprofiler.rest.collector:
+  path: '/admin/reports/profiler/view/{profile}/collectors/{collector}'
+  defaults:
+    _controller: '\Drupal\webprofiler\Controller\DashboardController::restCollectorAction'
+    _title: 'Webprofiler'
+  options:
+    parameters:
+      profile:
+        type: 'webprofiler:token'
+  requirements:
+    _permission: 'access webprofiler'
+
+# get query explain
+webprofiler.database.explain:
+  path: '/admin/reports/profiler/database_explain/{profile}/{qid}'
+  defaults:
+    _controller: '\Drupal\webprofiler\Controller\DatabaseController::explainAction'
+    _title: 'Query explain'
+  options:
+    parameters:
+      profile:
+        type: 'webprofiler:token'
+  requirements:
+    _permission: 'access webprofiler'
+
+# configure webprofiler
+webprofiler.settings:
+  path: '/admin/config/development/devel/webprofiler'
+  defaults:
+    _form: 'Drupal\webprofiler\Form\ConfigForm'
+    _title: 'Webprofiler settings'
+  requirements:
+    _permission: 'access webprofiler'
diff --git a/modules/devel/webprofiler/webprofiler.services.yml b/modules/devel/webprofiler/webprofiler.services.yml
new file mode 100644
index 0000000..04900a5
--- /dev/null
+++ b/modules/devel/webprofiler/webprofiler.services.yml
@@ -0,0 +1,257 @@
+parameters:
+  webprofiler.only_exceptions: false
+  webprofiler.only_master_requests: false
+
+services:
+
+# profiler services
+  logger.channel.webprofiler:
+    class: Drupal\Core\Logger\LoggerChannel
+    factory: logger.factory:get
+    arguments: ['webprofiler']
+
+  profiler.file_storage:
+    class: Symfony\Component\HttpKernel\Profiler\FileProfilerStorage
+    arguments: ['%data_collector.storage%']
+    tags:
+      - { name: webprofiler_storage, title:'File storage' }
+
+  profiler.database_storage:
+    class: Drupal\webprofiler\Profiler\DatabaseProfilerStorage
+    arguments: ['@database']
+    tags:
+      - { name: webprofiler_storage, title:'Database storage' }
+
+  profiler.storage_manager:
+    class: Drupal\webprofiler\Profiler\ProfilerStorageManager
+
+  profiler.storage:
+    class: Symfony\Component\HttpKernel\Profiler\ProfilerStorageInterface
+    factory: Drupal\webprofiler\Profiler\ProfilerStorageFactory::getProfilerStorage
+    arguments: ['@config.factory', '@service_container']
+
+  profiler:
+    class: Drupal\webprofiler\Profiler\Profiler
+    arguments: ['@profiler.storage', '@logger.channel.webprofiler', '@config.factory']
+
+# template manager
+  template_manager:
+    class: Drupal\webprofiler\Profiler\TemplateManager
+    arguments: ['@profiler', '@twig', '@twig.loader', '%data_collector.templates%']
+
+# request matcher
+  webprofiler.matcher:
+    class: Drupal\webprofiler\RequestMatcher\WebprofilerRequestMatcher
+    arguments: ['@config.factory', '@path.matcher']
+
+# event subscribers
+  webprofiler.profiler_listener:
+    class: Symfony\Component\HttpKernel\EventListener\ProfilerListener
+    arguments: ['@profiler', '@?webprofiler.matcher', '%webprofiler.only_exceptions%', '%webprofiler.only_master_requests%', '@request_stack']
+    tags:
+      - { name: event_subscriber }
+
+  webprofiler.webprofiler_event_subscriber:
+      class: Drupal\webprofiler\EventSubscriber\WebprofilerEventSubscriber
+      arguments: ['@current_user', '@url_generator', '@renderer']
+      tags:
+        - { name: event_subscriber }
+
+# twig profiler
+  twig.profile:
+    class: Twig_Profiler_Profile
+
+  twig.extension.profiler:
+    class: Drupal\webprofiler\Twig\Extension\ProfilerExtension
+    arguments: ['@twig.profile', '@stopwatch', '@webprofiler.ide_link_generator', '@webprofiler.class_shortener']
+    tags:
+      - { name: twig.extension, priority: 100 }
+
+# datacollector services
+  webprofiler.drupal:
+    class: Drupal\webprofiler\DataCollector\DrupalDataCollector
+    arguments: ['@redirect.destination', '@url_generator']
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/drupal.html.twig', id:'drupal', title:'Drupal', priority: 10 }
+
+  webprofiler.php_config:
+    class: Drupal\webprofiler\DataCollector\PhpConfigDataCollector
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/php_config.html.twig', id:'php_config', title:'PHP Config', priority: 20 }
+
+  webprofiler.request:
+    class: Drupal\webprofiler\DataCollector\RequestDataCollector
+    arguments: ['@controller_resolver']
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/request.html.twig', id:'request', title:'Request', priority: 30 }
+      - { name: event_subscriber }
+
+  webprofiler.time:
+    class: Drupal\webprofiler\DataCollector\TimeDataCollector
+    arguments: [NULL, '@stopwatch']
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/time.html.twig', id:'time', title:'Timeline', priority: 40 }
+
+  webprofiler.performance_timing:
+    class: Drupal\webprofiler\DataCollector\PerformanceTimingDataCollector
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/performance_timing.html.twig', id:'performance_timing', title:'Performance Timing', priority: 50 }
+
+  webprofiler.database:
+    class: Drupal\webprofiler\DataCollector\DatabaseDataCollector
+    arguments: ['@database', '@config.factory']
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/database.html.twig', id:'database', title:'Database', priority: 60 }
+
+  webprofiler.user:
+    class: Drupal\webprofiler\DataCollector\UserDataCollector
+    arguments: ['@current_user', '@entity.manager', '@config.factory', '@authentication_collector']
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/user.html.twig', id:'user', title:'User', priority: 70 }
+
+  webprofiler.forms:
+    class: Drupal\webprofiler\DataCollector\FormsDataCollector
+    arguments: ['@form_builder']
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/forms.html.twig', id:'forms', title:'Forms', priority: 80 }
+
+  webprofiler.drupal_extensions:
+    class: Drupal\webprofiler\DataCollector\ExtensionDataCollector
+    arguments: ['@module_handler', '@theme_handler', '@app.root']
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/extensions.html.twig', id:'drupal_extension', title:'Extensions', priority: 90 }
+
+  webprofiler.routing:
+    class: Drupal\webprofiler\DataCollector\RoutingDataCollector
+    arguments: ['@router.route_provider']
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/routing.html.twig', id:'routing', title:'Routing', priority: 100 }
+
+  webprofiler.cache:
+    class: Drupal\webprofiler\DataCollector\CacheDataCollector
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/cache.html.twig', id:'cache', title:'Cache', priority: 110 }
+
+  webprofiler.assets:
+    class: Drupal\webprofiler\DataCollector\AssetsDataCollector
+    arguments: ['@app.root']
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/assets.html.twig', id:'assets', title:'Assets', priority: 120}
+
+  webprofiler.config:
+    class: Drupal\webprofiler\DataCollector\ConfigDataCollector
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/config.html.twig', id:'config', title:'Config', priority: 130 }
+
+  webprofiler.state:
+    class: Drupal\webprofiler\DataCollector\StateDataCollector
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/state.html.twig', id:'state', title:'State', priority: 140 }
+
+  webprofiler.events:
+    class: Drupal\webprofiler\DataCollector\EventsDataCollector
+    arguments: ['@event_dispatcher']
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/events.html.twig', id:'events', title:'Events', priority: 150 }
+
+  webprofiler.services:
+    class: Drupal\webprofiler\DataCollector\ServicesDataCollector
+    arguments: ['@service_container']
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/services.html.twig', id:'services', title:'Services', priority: 160 }
+
+  webprofiler.http:
+    class: Drupal\webprofiler\DataCollector\HttpDataCollector
+    arguments: ['@http_client_middleware.webprofiler']
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/http.html.twig', id:'http', title:'Http', priority: 170 }
+
+  webprofiler.theme:
+    class: Drupal\webprofiler\DataCollector\ThemeDataCollector
+    arguments: ['@theme.manager', '@theme.negotiator', '@twig.profile']
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/theme.html.twig', id:'theme', title:'Theme', priority: 180 }
+
+  webprofiler.mail:
+    class: Drupal\webprofiler\DataCollector\MailDataCollector
+    tags:
+      - { name: data_collector, template:'@webprofiler/Collector/mail.html.twig', id:'mail', title:'Mail', priority: 190 }
+
+# debug services
+  stopwatch:
+    class: Drupal\webprofiler\Stopwatch
+
+  webprofiler.debug.event_dispatcher.default:
+    class: Symfony\Component\EventDispatcher\ContainerAwareEventDispatcher
+    arguments: ['@service_container']
+
+  webprofiler.debug.controller_resolver:
+    class: Symfony\Component\HttpKernel\Controller\TraceableControllerResolver
+    arguments: ['@controller_resolver', '@stopwatch']
+
+  webprofiler.debug.cache_factory:
+    class: Drupal\webprofiler\Cache\CacheFactoryWrapper
+    public: false
+    decorates: cache_factory
+    arguments: ['@webprofiler.debug.cache_factory.inner', '@webprofiler.cache']
+    properties:
+      _serviceId: 'cache_factory'
+
+  webprofiler.debug.asset.css.collection_renderer:
+    class: Drupal\webprofiler\Asset\CssCollectionRendererWrapper
+    public: false
+    decorates: asset.css.collection_renderer
+    arguments: ['@webprofiler.debug.asset.css.collection_renderer.inner', '@webprofiler.assets']
+    properties:
+      _serviceId: 'asset.css.collection_renderer'
+
+  webprofiler.debug.asset.js.collection_renderer:
+    class: Drupal\webprofiler\Asset\JsCollectionRendererWrapper
+    public: false
+    decorates: asset.js.collection_renderer
+    arguments: ['@webprofiler.debug.asset.js.collection_renderer.inner', '@webprofiler.assets']
+    properties:
+      _serviceId: 'asset.js.collection_renderer'
+
+  webprofiler.debug.entity.manager:
+    class: Drupal\webprofiler\Entity\EntityManagerWrapper
+    public: false
+    decorates: entity.manager
+    arguments: ['@webprofiler.debug.entity.manager.inner']
+    properties:
+      _serviceId: 'entity.manager'
+
+  webprofiler.debug.state:
+    class: Drupal\webprofiler\State\StateWrapper
+    public: false
+    decorates: state
+    arguments: ['@webprofiler.debug.state.inner', '@webprofiler.state']
+    properties:
+      _serviceId: 'state'
+
+# middleware
+  http_middleware.webprofiler:
+    class: Drupal\webprofiler\StackMiddleware\WebprofilerMiddleware
+    tags:
+      - { name: http_middleware, priority: 350 }
+
+  http_client_middleware.webprofiler:
+    class: Drupal\webprofiler\Http\HttpClientMiddleware
+    tags:
+      - { name: http_client_middleware }
+
+# parameter converter service for profile token
+  webprofiler.token_converter:
+    class: Drupal\webprofiler\Routing\TokenConverter
+    arguments: ['@profiler']
+    tags:
+      - { name: paramconverter }
+
+# IDE link generator service
+  webprofiler.ide_link_generator:
+    class: Drupal\webprofiler\Helper\IdeLinkGenerator
+    arguments: ['@config.factory']
+
+# class shortener service
+  webprofiler.class_shortener:
+    class: Drupal\webprofiler\Helper\ClassShortener
